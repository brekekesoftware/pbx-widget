{"version":3,"sources":["stores/intl.ts","components/variables.ts","components/Rn.ts","stores/Nav.ts","stores/authStore.ts","stores/RnAlert.ts","assets/icons.ts","stores/callStore.ts","stores/contactStore.ts","components/Layout.tsx","stores/accountStore.ts","utils/BackgroundTimer.ts","stores/chatStore.ts","api/uc.ts","components/RnTouchableOpacity.tsx","components/Field.tsx","utils/waitTimeout.ts","utils/arrToMap.ts","api/pbx.ts","components/ContactUserItem.tsx","utils/RnNativeModules.ts","polyfill/null.ts","api/sip.ts","stores/userStore.ts","components/RnText.tsx","stores/RnKeyboard.ts","stores/RnStacker.ts","stores/intlStore.ts","utils/animation.ts","stores/RnPicker.ts","utils/string.ts","utils/formatChatContent.ts","stores/debugStore.ts","utils/saveBlob.web.ts","stores/timerStore.tsx","components/chatConfig.ts","api/syncPnToken.ts","components/RnIcon.tsx","utils/useStore.ts","embed/embedApi.ts","components/ButtonIcon.tsx","stores/RnDropdown.tsx","stores/AuthSIP.ts","stores/sipErrorEmitter.ts","components/navigationConfig.ts","components/AccountCreateForm.tsx","utils/formatFileType.ts","components/AnimatedSize.tsx","components/navigationConfig2.ts","components/BrekekeGradient.tsx","components/Avatar.tsx","components/CallKeyPad.tsx","components/CallShowNumbers.tsx","stores/Call.ts","components/ContactSectionList.tsx","pages/PageContactEdit.tsx","stores/AuthPBX.ts","stores/AuthUC.ts","utils/useForm.tsx","config.ts","api/parseParamsWithPrefix.ts","utils/webPromptPermission.ts","utils/getAudioVideoPermission.ts","utils/webPlayDing.ts","api/pnConfig.ts","components/FooterActions.tsx","components/FooterNavigation.tsx","utils/formatDuration.ts","utils/webShowNotification.ts","components/CallBar.tsx","utils/trimHtml.ts","components/RnCheckbox.tsx","pages/PageCallParks.tsx","utils/callkeep.ts","utils/PushNotification-parse.ts","components/ChatMessageList.tsx","components/FooterChatInput.tsx","utils/pickFile.web.ts","components/ContactCreateForm.tsx","api/updatePhoneIndex.ts","stores/RnAppState.ts","utils/deeplink-parse.ts","utils/PushNotification.web.ts","components/CallNotify.tsx","components/CallVoicesUI.web.tsx","components/VideoPlayer.web.tsx","index.ts","embed/polyfill.ts","utils/captureConsoleOutput.ts","polyfill/index.web.ts","polyfill/dev.web.ts","polyfill/shared.ts","polyfill/mobx.ts","utils/validator.ts","../node_modules/validatorjs/src/lang sync /^/.//.*$","stores/Nav2.ts","components/AudioPlayer.web.tsx","components/RnImageVideoLoader.web.tsx","components/RnStatusBar.tsx","components/RnSwitch.tsx","components/RnTextInput.tsx","pages/PageAccountCreate.tsx","utils/createStore.ts","components/PhonebookAutoComplete.tsx","assets/ding.mp3","components/Footer.tsx","utils/rnVibrate.ts","components/FooterToggleKeyboard.tsx","components/Header.tsx","components/HeaderBackBtn.tsx","components/HeaderCreateBtn.tsx","components/HeaderDropdown.tsx","components/HeaderNavigation.tsx","components/HeaderTitle.tsx","components/Toast.tsx","pages/PageAccountSignIn.tsx","components/AccountSignInItem.tsx","pages/PageAccountUpdate.tsx","pages/PageCallBackgrounds.tsx","assets/avatar-placeholder.png","pages/PageCallDtmfKeypad.tsx","stores/cancelRecentPn.ts","api/getCameraSourceId.ts","api/turnConfig.ts","pages/PageCallKeypad.tsx","pages/PageCallParks2.tsx","pages/PageCallRecents.tsx","utils/PushNotification.ios.ts","pages/PageCallTransferChooseUser.tsx","components/Dropdown.tsx","components/DropdownItem.tsx","pages/PageCallTransferDial.tsx","pages/PageChatDetail.tsx","components/ChatMessage.tsx","components/ItemImageVideoChat.tsx","utils/formatBytes.ts","pages/PageChatGroupCreate.tsx","pages/PageChatGroupDetail.tsx","pages/PageChatGroupInvite.tsx","pages/PageChatRecents.tsx","components/ChatListUsers.tsx","components/SelectionItem.tsx","components/ContactList.tsx","pages/PageContactGroupCreate.tsx","pages/PageContactGroupEdit.tsx","pages/PageContactPhonebook.tsx","pages/PageContactUsers.tsx","utils/DelayFlag.ts","pages/PagePhonebookCreate.tsx","pages/PagePhonebookUpdate.tsx","pages/PageSettingsCurrentAccount.tsx","pages/PageSettingsDebug.tsx","pages/PageSettingsOther.tsx","pages/PageWebChat.tsx","components/ChatListWebchats.tsx","components/WebchatItem.tsx","stores/callStore2.ts","stores/addCallHistory.ts","stores/authStore2.ts","utils/deeplink.web.ts","api/syncPnToken2.ts","components/App.web.tsx","assets/brand.png","assets/logo.png","components/App.tsx","api/index.ts","pages/PageCallManage.tsx","assets/incallmanager_ringback.mp3","assets/incallmanager_ringtone.mp3","components/FieldButton.tsx","components/SmartAvatarHTML.web.tsx","assets/no_photo.png","utils/checkImageURL.ts","pages/PageCallTransferAttend.tsx","stores/RnAlertRoot.tsx","stores/RnPickerRoot.tsx","stores/RnStackerRoot.tsx","utils/registerOnUnhandledError.web.ts","components/CallVideos.tsx","components/CallVideosUI.tsx","components/CallVoices.tsx","components/ChatGroupInvite.tsx","components/PhonebookAddItem.tsx","embed/exposeEmbedApi.ts"],"names":["Handlebars","registerHelper","HandlebarsMoment","compileFn","locale","k","arr","labels","i","enLabelsMapIndex","fn","compile","undefined","intl0","data","intlStore","intlDebug","label","en","intl","v","fontSize","lineHeight","fontSizeTitle","lineHeightTitle","fontSizeSubTitle","lineHeightSubTitle","fontSizeSmall","lineHeightSmall","iconSize","fontWeight","fontFamily","Platform","OS","borderRadius","maxModalWidth","bg","revBg","darken","color","revColor","hoverBg","subColor","borderBg","layerBg","transparentize","layerBgVideo","boxShadow","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","backdropZindex","zIndex","colors","greyTextChat","primary","warning","danger","primaryFn","lv","lighten","warningFn","dangerFn","currentVersion","json","version","nav","n","authStore","s","reconnectAndWaitSip","reconnectSip","waitSip","wait","name","time","at","Date","now","id","BackgroundTimer","setInterval","clearInterval","Promise","r","RnAlertStore","alerts","observable","action","prompt","push","alertsCount","length","a","err","unexpectedErr","message","console","error","AppState","currentState","shift","RnAlert","callStore","c","contactStore","numberOfContactsPerPage","loadContacts","waitPbx","getAuthStore","pbxState","loading","pbx","getContacts","search_text","phonebookSearchTerm","offset","limit","then","setPhonebook","hasLoadmore","catch","getManagerContact","lang","window","Brekeke","Phonebook","getManager","getItemPhonebook","item","getManageItems","items","map","disabled","startsWith","caption","keyboardType","type","maxLength","getPbxUsers","ca","getCurrentAccount","getUsers","pbxTenant","res","pbxUsers","filter","u","pbxUsername","setTalkerStatus","userId","talkerId","status","getPbxUserById","talkers","talker","find","t","pbxUsersMap","extraPbxUsersMap","extraPbxUsersLoadingMap","extraPbxUsersBatch","getExtraPbxUsersBatch","debounce","ids","getExtraUsers","forEach","updateUcUser","u0","getUcUserById","isEqual","Object","assign","ucUsers","ucUsersMap","getPhoneBookByPhoneNumber","phoneNumber","phoneBooks","p","info","$tel_mobile","$tel_home","$tel_work","getParkNameByParkNumber","parkNumber","cp","parks","park","parkNames","uniqBy","getPhonebookById","phoneBooksMap","clearStore","showPickerItem","pbxBooks","alreadyLoadContactsFirstTime","selectedContactIds","arrToMap","this","toString","values","picker","computed","getPhonebooks","p0","partyNumber","updatePartyNameRecentCall","partyName","display_name","Array","isArray","css","StyleSheet","create","Layout","flex","backgroundColor","Layout__transparent","Scroller","flexGrow","FooterSpaceInsideScroller","LoadMore","alignSelf","paddingBottom","paddingHorizontal","LoadMore__btn","LoadMore__finished","observer","originalProps","useState","headerOverflow","setHeaderOverflow","props","Container","noScroll","View","ScrollView","containerProps","entries","reduce","m","vk","replace","lowerFirst","style","transparent","contentContainerStyle","keyboardShouldPersistTaps","onScroll","e","nativeEvent","contentOffset","y","containerOnScroll","scrollEventThrottle","showsVerticalScrollIndicator","compact","headerSpace","menu","footerSpace","getBottomSpace","fabRender","RnKeyboard","isKeyboardShowing","fabOnNext","children","isShowToastMessage","Toast","isVisible","title","incomingMessage","containerStyles","marginTop","isTab","Footer","Header","resolveFn","storagePromise","resolve","AccountStore","waitStorageLoaded","genEmptyAccount","pbxHostname","pbxPort","pbxPassword","pbxPhoneIndex","pbxTurnEnabled","pushNotificationEnabled","ucEnabled","navIndex","navSubMenus","loadAccountsFromLocalStorage","RnAsyncStorage","getItem","d","JSON","parse","accountData","profileData","accounts","profiles","runInAction","saveAccountsToLocalStorage","setItem","stringify","_saveAccountsToLocalStorageDebounced","maxWait","saveAccountsToLocalStorageDebounced","accountStore","_","compareAccount","findByPn","to","tenant","findData","findDataSync","getAccountUniqueId","findDataByPn","findDataAsync","newD","accessToken","recentCalls","recentChats","pbxBuddyList","waitTimeout","updateAccountData","d2","pop","clonedA","SyncPnToken","sync","noUpsert","pushNotificationEnabledSynced","onError","h","compareField","p1","p2","field","v1","v2","getLastSignedInId","checkAutoSignInBrekekePhone","j","logoutPressed","compareSemVer","autoSignInBrekekePhone","BrekekeUtils","systemUptimeMs","uptime","saveLastSignedInId","BgTimer","FileEvent","onFileReceived","onFileProgress","onFileFinished","TIMEOUT_TRANSFER_VIDEO","ChatStore","timeoutTransferImage","getMessagesByThreadId","messagesByThreadId","getNumberWebchatNoti","groups","webchat","conf_status","Constants","CONF_STATUS_INVITED_WEBCHAT","pushChatNotification","body","threadId","isGroupChat","FCM","presentLocalNotification","number","sound","priority","show_in_foreground","local_notification","wake_screen","ongoing","lights","channel","icon","pre_app_state","my_custom_data","is_local_notification","PushNotificationIOS","getApplicationIconBadgeNumber","badge","Number","addNotificationRequest","userInfo","aps","pushMessages","isUnread","isGroup","some","gr","isWebchatJoined","isWebchat","messages","sortBy","a2","filterTextOnly","updateThreadConfig","chatStore","getGroupById","getPartyName","getThreadConfig","messageNotification","text","webShowNotification","cs","getCallStore","isTalking","calls","answered","callkeepActionMap","RnStacker","stacks","shouldPlayChatNotificationSoundVibration","groupId","buddy","playChatNotificationSoundVibration","handleMoveToChatGroupDetail","as","Error","ucState","confirmText","dismissText","waitUc","dismiss","Nav","uc","getChatGroupInfo","subject","CONF_STATUS_INACTIVE","getCurrentDataAsync","CONF_STATUS_INVITED","onConfirm","joinChatGroup","customPageIndex","goToPageChatGroupDetail","onDismiss","leaveChatGroup","chatNotificationSoundRunning","rnVibrate","setTimeout","webPlayDing","removeWebchatItem","conf_id","removeGroup","threadConfig","download","f","save","upsertFile","saveBlobFile","topic_id","fileType","url","filesMap","startTimeout","clearTimeout","rejectFile","updateTimeout","fromEvent","f0","state","fileTypeImageVideo","incoming","removeFile","getFileById","upsertGroup","g","g0","groupsMap","idMap","l1","getCurrentData","unread","keys","created","CONF_STATUS_JOINED","w","UCClient0","ChatClient","Logger","isUcBuddy","codeMapUserStatus","getUserStatusFromCode","code","codeMapFileState","getFileStateFromCode","UC","onConnectionStopped","ev","emit","onUserUpdated","user_id","avatar","profile_image_url","statusText","display","onTextReceived","sender","received_text_id","group","creator","sent_ltime","fileInfo","formatFileType","file","file_id","size","transferPercent","progress","text_id","target","onGroupInvited","conference","invite_properties","webchatfromguest","user_name","inviter","from","members","user","onGroupUpdated","jointed","connect","ucHost","indexOf","ucScheme","endsWith","reject","client","signIn","disconnect","signOut","me","profile","getProfile","getStatus","saveProperties","screened","setStatus","num_status","changeStatus","buddyList","getBuddylist","buddyListFiltered","getConfigProperties","ucConfig","readUnreadChats","receiveUnreadText","readRequiredMessageIds","msg","requires_read","readText","getUnreadChats","getBuddyChats","opts","searchTexts","max","begin","end","asc","logs","l","log_id","content","ctype","ltime","getGroupChats","sendBuddyChatText","sendText","CTYPE_TEXT","sendCallResult","duration","talklen","CTYPE_CALL_RESULT","sendGroupChatText","sendConferenceText","createChatGroup","createConference","joinConference","getConference","answerWebchatConference","exclusive","joinWebchatConference","leaveChatConference","rejoinable","leaveConference","result","inviteChatGroupMembers","inviteToConference","acceptFile","xhr","XMLHttpRequest","responseType","onload","acceptFileWithXhr","file_id_target","cancelFile","sendFile","inputw","document","createElement","files","b","DataTransfer","ClipboardEvent","clipboardData","add","appendChild","fd","FormData","append","inputrn","form","__rnFormData","chat","sendFiles","input","file_res","infoList","peekWebchatConferenceText","logger","setEventListeners","forcedSignOut","buddyStatusChanged","receivedTyping","receivedText","fileReceived","fileInfoChanged","fileTerminated","invitedToConference","conferenceMemberChanged","EventEmitter","RnTouchableOpacity","forwardRef","ref","TouchableOpacity","activeOpacity","Field","borderBottomWidth","borderColor","alignItems","marginHorizontal","select","android","Field__focusing","Field__disabled","Field__group","padding","Field__groupMargin","Field__transparent","Field_Label","paddingTop","paddingLeft","top","web","position","left","right","Field_LabelText","Field_LabelTextGroup","Field_ViewRow","flexDirection","marginRight","Field_Park_TextInput","paddingRight","overflow","default","Field_TextInput","Field_Switch","Field_Btn","Field_Btn__create","Field_Btn__remove","Field_Icon","Field_Error","justifyContent","Field_ErrorInner","marginVertical","paddingVertical","Field_ErrorIcon","Field_ErrorLabel","Loading","bottom","opacity","noop","hasMargin","RnText","small","disablePark","$","useStore","isFocusing","isParkNameFocusing","inputRef","useRef","inputRefName","current","set","onCreateBtnPress","iconRender","onPress","createBtnStyle","RnIcon","path","createBtnIcon","mdiPlus","createBtnIconStyle","onRemoveBtnPress","removeBtnStyle","removeBtnIcon","mdiClose","removeBtnIconStyle","onValueChange","valueRender","RnSwitch","enabled","onTouchPress","value","Keyboard","options","o","key","RnPicker","open","selectedKey","onSelect","mdiUnfoldMoreHorizontal","inputElement","RnTextInput","omit","placeholder","placeholderTextColor","onBlur","onChangeText","txt","newPark","trim","onChangeNumber","onFocus","onChangeName","renderPark","focus","flow","onSubmitEditing","pointerEvents","accessible","editable","secureTextEntry","textInputStyle","absoluteFill","ActivityIndicator","mdiCardsDiamond","index","String","PBX","connectTimeoutId","isMainInstance","palParamUserReconnect","log","warn","oldPalParamUser","palParams","wsUri","getPal","login_user","login_password","_wn","voicemail","secure_login_password","phonetype","callrecording","embedApi","_palParams","debugLevel","call_pal","method","params","call","_BrekekePhoneWebRoot","embedListeners","_palEvents","listener","args","setListenerWithEmbed","connected","pendingServerStatus","pendingClose","pendingError","newTimeoutPromise","clearConnectTimeoutId","close","login","race","isConnected","pbxConfig","getConfig","newPalParamUser","onClose","onServerStatus","onPark","onCallRecording","onVoicemail","onUserStatus","talker_id","skipWait","webphone","config","setPbxConfig","parseCallParams","parsePalParams","userAgent","pnExpires","createSIPAccessToken","sipUsername","username","pattern","property_names","extension","getPbxPropertiesForCurrentUser","pnumber","split","phones","userName","language","phonebook","contact","aid","shared","getContact","toBoolean","deleteContact","setContact","holdTalker","tid","unholdTalker","startRecordingTalker","stopRecordingTalker","transferTalkerBlind","toUser","mode","transferTalkerAttended","joinTalkerTransfer","stopTalkerTransfer","parkTalker","atNumber","sendDTMF","signal","pnmanage","pnmanageNew","command","service_id","device_id","device_id_voip","auth_secret","endpoint","isFcm","PnServiceId","fcm","application_id","fcmApplicationId","bundleIdentifier","voip","user_agent","navigator","add_voip","add_device_id_suffix","setWebPnToken","PnCommand","removeWebPnToken","remove","setFcmPnToken","removeFcmPnToken","setApnsToken","apns","removeApnsToken","Outer","Inner","Inner_selected","WithSpace","Text","NameWithStatus","flexWrap","Status","Detail","CallIcon","CallCreatedAt","ButtonIcon","LastDate","IconGroup","VGroup","CheckboxContainer","disableContainer","UserItem","icons","iconColors","iconFuncs","isRecentCall","isRecentChat","lastMessage","lastMessageDate","selected","canChat","isVoicemail","isSelection","isSelected","isGroupAvailable","groupStatus","goToPageChatDetail","mdiAccountGroup","Avatar","source","uri","black","bold","singleLine","normal","trimHtml","mdiPhoneMissed","mdiPhoneIncoming","mdiPhoneOutgoing","onPressIcons","RnCheckBox","Polyfill","getInitialNotifications","isLocked","startRingtone","stopRingtone","backToBackground","getIncomingCallPendingUserAction","closeIncomingCall","closeAllIncomingCalls","setCallConfig","setIsAppActive","setTalkingAvatar","setJsCallsSize","setRecordingStatus","setIsVideoCall","setRemoteVideoStreamURL","setIsFrontCamera","setOnHold","setLocale","onCallConnected","onCallKeepAction","onPageCallManage","hasIncomingCallActivity","playRBT","stopRBT","enableLPC","disableLPC","M","NativeModules","__DEV__","join","get","alreadyRemovePnTokenViaSip","checkAndRemovePnTokenViaSip","exist","removePnTokenViaSip","callkeepUuid","onCallKeepEndCall","sipPn","sipAuth","isCall","phone","getWebrtcClient","dtmfSendPal","getUserAgent","startWebRTC","register","getWssUrl","sipWssPort","tls","phoneId","auth","useVideoClient","addEventListener","phoneStatus","started","_ua","registrator","_registered","setExtraHeaders","stopWebRTC","SIP","currentCamera","cameraIds","init","getCameraSourceIds","deviceId","_removeEventListenerPhoneStatusChange","removeEventListener","computeCallPatch","withSDP","rtcSession","direction","sessionStatus","remote_identity","getHeader","patch","rawSession","sessionId","pnId","remoteVideoEnabled","remoteWithVideo","localVideoEnabled","withVideo","callConfig","getCallConfigFromHeader","voiceStreamObject","remoteStreamObject","earlyMedia","partyImageUrl","talkingImageUrl","partyImageSize","pbxRoomId","pbxTalkerId","videoSession","getSession","videoClientSessionTable","videoClientSessionId","videoSessionId","remoteVideoStreamObject","callOptions","turnConfig","pcConfig","iceServers","setDefaultCallOptions","hostname","port","on","request","pnIds","parseCanceledPnIds","cancelRecentPn","hackJssipFork","socket","sip","_transport","__brekekephone_stopped","destroyWebRTC","hangupSession","session","terminate","disableMedia","getTracks","track","enableMedia","dtmfSendMode","_options","enableVideo","setWithVideo","disableVideo","setMuted","muted","main","switchCamera","isFrontCamera","cameras","videoOptions","mediaConstraints","sipCreateMediaConstraints","answer","test","match","parseInt","isNaN","substr","lowers","toLowerCase","includes","completedElseWhere","osMap","ios","au","os","host","sourceId","webVideoConfig","facingMode","exact","appVideoConfig","mandatory","minWidth","minHeight","minFrameRate","optional","audio","video","WebrtcClient","Phone","logLevel","multiSession","defaultOptions","ctiAutoAnswer","eventTalk","configuration","socketKeepAlive","fromEntries","kv","defaultBuddyMax","UserStore","filterUser","searchTxt","isOnline","displayUsers","totalContact","totalOnlineContact","dataDisplayGroupAllUser","dataAllUsers","saveSelectedUserIds","userOnline","dataAllUsersFiltered","dataOnlineUser","dataOnlineUserFiltered","getHeaderTitle","sectionTitle","renderData","isEditMode","selectedItemCount","isSelectedAddAllUser","selectedUserIds","indexGroup","dataGroupAllUser","findIndex","totalUser","totalOnline","resetCache","dataListAllUser","isAllUser","allUsers","disabledBuddy","block_settings","users","cloneDeep","isBigMode","pbxLocalAllUsers","isDisableAddAllUserToTheList","buddyMax","buddyMode","filterDataUserGroup","userList","configProperties","getAllUsers","buddy_mode","user_group","optional_config","buddy_max","buddy_id","dataGroupUser","listAllUser","isDisableEditGroup","sectionData","sectionDataOther","sectionDataIds","sectionDataOtherIds","listDataUser","indx","sectionItm","listUserNotSelected","itm","upsertAccount","isSelectEditGroupingAndUserOrder","isCapacityInvalid","groupIndex","splice","groupName","selectedUsers","newGroupContact","unshift","removedUsers","selectedUserItems","userStore","subTitle","white","center","textAlign","wrap","Component","numberOfLines","pickBy","sort","AnimatedText","Animated","RnKeyboardStore","waitKeyboardTimeoutId","waitKeyboard","keyboardAnimatingTimeoutId","isKeyboardAnimating","addListener","setKeyboardAnimatingTimeout","RnStackerStore","createGoTo","isRoot","stack","inPageCallManage","stackAnimating","stack0","openStack","createBackTo","ja","localeOptions","TypedNativeModules","IntlStore","getLocaleName","getLocale","SettingsManager","settings","AppleLocale","AppleLanguages","I18nManager","localeIdentifier","localeLoading","selectLocale","loadingPromise","localeReady","animationOption","useAnimation","Value","useEffect","timing","toValue","useNativeDriver","start","stop","interpolate","inputRange","outputRange","didMount","setDidMount","RnPickerStore","currentRnPicker","formatChatContent","originalText","creatorId","additionals","isTextOnly","decode","store","RNFS","DocumentDirectoryPath","log1","log2","DebugStore","toggleCaptureDebugLog","captureDebugLog","getLogSize","logSizes","sum","logQueue","captureConsoleOutput","format","toUpperCase","padStart","writeFileBatch","writeFile","writeFileWithoutCatch","appendFile","stat","unlink","moveFile","openLogFile","openLogFileWithoutCatch","promises","exists","readFile","all","f1","b64","Buffer","Share","clearLogFiles","clearLogFilesWithoutPrompt","clearLogFilesWithoutCatch","checkForUpdate","isCheckingForUpdate","fetch","results","remoteVersion","remoteVersionLastCheck","saveRemoteVersionToStorage","lastCheck","openInStore","Linking","openURL","autoCheckForUpdate","debugStore","getSemVer","aMajor","aMinor","aPatch","aFourth","bMajor","bMinor","bPatch","bFourth","blob","setAttribute","URL","createObjectURL","href","click","revokeObjectURL","dataBlob","fr","FileReader","onloadend","event","caches","cache","videoBlob","Blob","response","Response","urlCacheFile","put","onerror","readAsArrayBuffer","timerStore","updateNow","Duration","formatDuration","lastDate","groupByTime","groupByDate","date","formatDateSemantic","valueOf","createdByMe","d0","today","yesterday","str","m0","Icon","viewBox","Path","fill","mixin","createStore","EmbedApi","promptBrowserPermission","webPromptPermission","startCall","getRunningCalls","restart","signOutWithoutSaving","_signIn","cleanup","_rootTag","unmountComponentAtNode","palEvents","clearExistingAccount","accountsMap","convertToStorage","copyToStorage","firstAccountInOptions","autoLogin","autoSignInEmbed","ea","password","phoneIndex","displayOfflineUsers","ucDisplayOfflineUsers","pushNotification","ButtonIcon_Btn","borderWidth","ButtonIcon_Name","styleContainer","bgcolor","noborder","bdcolor","textcolor","RnDropdownStore","itemHeight","headerHeight","sectionIndex","itemSize","hiddenIndexes2","hiddenIndexes","ii","positions2","positions","collapse","openedIndex","uniq","idx","shouldUpdatePosition","indexes","RnDropdown","getPbxConfig","AuthSIP","authWithCheck","clearShouldAuthReaction","reaction","sipShouldAuth","authWithCheckDebounced","onSipFailure","sipState","sipTotalFailure","authPnWithoutCatch","pn","isSipPnExpired","CiruclarJSON","turnServer","urls","turnUsername","credential","turnCredential","signedInId","authWithoutCatch","sipErrorEmitter","removeAllListeners","dispose","updatePhoneIndex","sipAuthAt","authSIP","genMenus","mdiAccountCircleOutline","subMenus","navFnKey","ucRequired","defaultSubMenuKey","mdiPhoneOutline","mdiCogOutline","subMenusMap","defaultSubMenu","navFn","saveNavigation","lastLocale","lastMenus","menus","normalizeSavedNavigation","AccountCreateForm","isWeb","account","updating","addingPark","resetAllFields","onAddingParkSubmit","onAddingParkRemove","i0","hasUnsavedChanges","onBackBtnPress","onBack","onValidSubmit","onSave","useForm","Form","submitForm","description","dropdown","footerLogout","isConnFailure","resetFailureStateIncludeUcLoginFromAnotherPlace","fabOnBack","subMenu","fields","rule","hidden","parkName","typeVideo","fileName","Getter","GetterInner","setSize","Animation","animateWidth","onLayout","layout","innerStyle","cssAnimation","useAnimationOnDidMount","PageCallTransferChooseUser","PageCallTransferDial","tab","subMenuNames","lastStack","BrekekeGradient","ImageOuter","Image","statusMapColor","online","idle","busy","offline","avatarPlaceholder","imgSource","RnImage","mdiRecord","KeyPad_Number","KeyPad_NumberTxt","KeyPad_NumberBtn","KeyPad_Btn","KeyPad_Btn__call","KeyPad_Btn__call_2","KeyPad_view","row","onPressNumber","showKeyboard","mdiKeyboard","callVoiceForward","mdiPhoneForward","callVoice","mdiPhone","mdiBackspace","ShowNumbers","ShowNumbers_DisplayTxt","ShowNumbers_BtnCall","blurOnSubmit","multiline","setTarget","onEndEditing","onSelectionChange","selectionChange","refInput","Call","getDisplayName","createdAt","getDuration","answeredAt","callkeepAlreadyAnswered","callkeepAlreadyRejected","answerCallKeep","updateCallKeep","RNCallKeep","setCurrentCallActive","startCallKeepCall","updateIncoming","answerIncomingCall","updateOutgoing","reportConnectedOutgoingCallWithUUID","isAboutToHangup","hangupWithUnhold","holding","toggleHold","success","toggleVideo","pbxUser","callerStatus","toggleHoldWithCheck","prevHoling","prevTransferring","transferBlind","goToPageCallRecents","onTransferFailure","onParkFailure","exInfo","ignoreNav","setCurrentCallId","goToPageCallManage","setMutedCall","recording","onToggleRecordingFailure","hackyToggleSpeaker","onToggleHoldFailure","transferring","backToPageCallManage","onStopTransferringFailure","onConferenceTransferringFailure","IncallManager","setForceSpeakerphoneOn","isLoudSpeakerEnabled","conf","ms","container","headerSectionList","leftSection","editGroupIcon","containerDropdown","disableMarginTop","ContactSectionList","sectionHeaderRefs","reCalculatedLayoutDropdownTimeoutId","setShouldUpdatePosition","calculateSectionHeaderPosition","listDropdownPosition","measure","fx","fy","px","py","setPositions","setHeaderHeight","sectionListData","toJS","Fragment","SectionList","sections","keyExtractor","renderItem","section","RenderItemUser","isTransferCall","renderSectionHeader","RenderHeaderSection","TouchableWithoutFeedback","Dropdown","ddItems","getLastMessageChat","chats","oc","getOngoingCall","setItemHeight","selectUserId","transferAttended","startVideoCall","mdiVideo","titleHeaderRender","isDisableMarginTop","toggleSection","mdiMenuRight","mdiMenuDown","toggle","mdiMoreHoriz","listHeaderSection","listTitleSection","rowGroupTitle","rowCapacity","errorText","loadingIcon","PageContactEdit","componentDidMount","loadUcBuddyList","loadPbxBuddyList","setState","getDDOptions","ddIndex","onAddRemoveUser","stopPropagation","onCheckAll","onUncheckAll","onRemoveGroup","goToPageContactGroupEdit","listItem","scrollToTopListContact","selectAllUserIdsByGroup","unselectAllUserIdsByGroup","removeSection","onSelectEditGroupingAndUserOrderOption","toggleIsSelectEditGroupingAndUserOrder","onAddGroup","goToPageContactGroupCreate","onGoBack","backToPageContactUsers","setViewRef","view","scrollTo","animated","saveUC","onSaveSuccess","onSaveFailure","savePBX","savePbxBuddyList","updateDisplayGroupList","fabOnNextText","containerRef","SelectionItem","toggleIsSelectedAddAllUser","mdiFolderPlus","ContactList","authPBX","pbxShouldAuth","pbxTotalFailure","UCClient","authUC","ucShouldAuth","ucTotalFailure","loadUnreadChats","onLoadUnreadChatsSuccess","onLoadUnreadChatsFailure","off","ucLoginFromAnotherPlace","loadUsers","Errors","PLEONASTIC_LOGIN","c0","dirtyMap","errorMap","currentFocus","onFieldBlur","onFieldChange","validator","Validator","fails","errors","first","submit","$parent","rules","render","RnForm","formProps","onSubmit","PhonebookAutoComplete","onPressItem","parseParamsWithPrefix","prefix","alreadyPrompted","getAudioVideoPermission","cb","stream","eb","getUserMedia","Audio","volume","src","ding","play","removeChild","Actions","Btn","Btn__back","Btn__more","Btn__next","Btn__15","Btn__33","Btn__67","Btn__100","onBackIcon","onMore","onMoreIcon","onNext","onNextColor","onNextText","mdiKeyboardBackspace","mdiCached","Navigation","BtnBg","BtnBg__active","UnreadOuter","Unread","UnreadText","active","totalUnreadChat","unreadCount","totalNoticesWebchat","totalNoticesContact","showUnreadChat","om","oh","Math","floor","tag","notification","WebNotification","showNotification","timeout","interval","renotify","noisiness","onclick","onclose","closeNotification","notificationId","CallBar","CallBar_Outer","CallBar_Icon","CallBar_Info","CallBar_BtnCall","Notify_Info_PartyName","isFromCallBar","mdiPhoneInTalkOutline","mdiPhoneOutgoingOutline","trimDisplayName","mdiPhoneHangup","toggleMuted","mdiMicrophoneOff","mdiMicrophone","toggleLoudSpeaker","mdiVolumeHigh","mdiVolumeMedium","mdiPlay","mdiPause","substring","CheckBoxBtn","CheckBox__selected","mdiCheck","PageCallParks","selectedPark","selectPark","callParks2","componentDidUpdate","prevId","sp","cp2","isDisable","parkNumbers","alreadySetupCallKeep","setupCallKeepWithCheck","getCalls","callkeepMap","setup","appName","imageName","supportsVideo","alertTitle","alertDescription","cancelButton","okButton","additionalPermissions","foregroundService","channelId","channelName","notificationTitle","notificationIcon","selfManaged","registerPhoneAccount","registerAndroidEvents","setAvailable","canMakeMultipleCalls","setupCallKeep","didLoadWithEvents","didLoadWithEventsHandlers","RNCallKeepPerformAnswerCallAction","answerCall","uuid","callUUID","onCallKeepAnswerCall","RNCallKeepPerformEndCallAction","endCall","setCalleeRejected","RNCallKeepDidDisplayIncomingCall","didDisplayIncomingCall","parseNotificationData","payload","signInByNotification","onCallKeepDidDisplayIncomingCall","RNCallKeepDidPerformSetMutedCallAction","didPerformSetMutedCallAction","RNCallKeepDidToggleHoldAction","didToggleHoldCallAction","hold","RNCallKeepDidPerformDTMFAction","didPerformDTMFAction","digits","charAt","RNCallKeepDidActivateAudioSession","didActivateAudioSession","RNCallKeepDidDeactivateAudioSession","didDeactivateAudioSession","ongoingCallId","eventEmitter","NativeEventEmitter","goToPageCallTransferChooseUser","goToPageCallBackgrounds","goToPageCallParks2","toggleRecording","goToPageCallDtmfKeypad","toggleSwitchCamera","raw","signInByLocalNotification","goToPageChatRecents","onBackPressed","goToPageIndex","keysInCustomNotification","parseNotificationDataMultiple","image","updateCallAvatar","image_size","n2","isNoU","k2","autoAnswer","alert","r1","matches","exec","displayName","androidAlreadyProccessedPn","resetFailureState","isLocal","accountExist","Boolean","rawId","callkeepAt","showIncomingCallUi","pnData","DateGroup","DateGroup__first","Border","TimeGroup","TimeGroup__first","Time","Creator","Right","MessageList","loadMore","resolveChat","list","groupByTimestamp","creatorName","creatorAvatar","Message","ChatInput","Btn__file","borderRightWidth","borderTopWidth","Btn__emoji","Btn__send","Input","onEmojiTurnOn","onTextChange","onTextSubmit","openFileRnPicker","mdiPaperclip","mdiEmoticon","mdiSend","mdiDotsHorizontal","onchange","stylePreviewName","styleAddItem","labelAddItem","ContactsCreateForm","phonebookField","isFocus","updatingPhonebook","$lang","defaultObj","emptyObj","onscreen","genEmptyPhonebook","getFields","onSelectItem","dismissPicker","itemExist","newField","previewName","toDisplayName","openPicker","listOption","api","extProps","phoneTypeCorrect","expectedPhoneId","phoneIdCorrect","setExtensionProperties","properties","userExtensionProperties","goToPageAccountSignIn","RnAppState","nextAppState","foregroundOnce","location","Url","qs","hash","query","uint8ArrayToUrlBase64","btoa","fromCharCode","apply","Uint8Array","PushNotification","initApp","Notification","permission","requestPermission","getToken","serviceWorker","ready","sw","pushManager","getSubscription","subscribe","userVisibleOnly","sub","p256dh","getKey","resetBadgeNumber","Notify","Notify_Info","Notify_Btn_reject","Notify_Btn_accept","DidMountTimer","didMountTimer","CallNotify","getCallInNotify","Wrapper","hasAction","configure","hideHangup","shouldRingInNotify","IncomingItem","autoPlay","loop","ringtone","ringback","OutgoingItemWithSDP","audioRef","createRef","srcObject","AnsweredItem","VideoPlayer","sourceObject","objectFit","AppRegistry","registerComponent","App","runApp","rootTag","runApplication","exposeEmbedApi","getElementById","_BrekekePhoneCaptureConsole","formatErrors","errs","msgs","CircularJSON","tpl","regex","mi","customConsoleObject","bind","defineProperty","Rn0","ViewPropTypes","propTypes","PropTypes","any","mediaDevices","mozGetUserMedia","process","JsSIP","CryptoJS","MD5","enforceActions","computedRequiresReaction","observableRequiresReaction","reactionRequiresObservable","disableErrorBoundaries","onReactionError","setMessages","required","useLang","webpackContext","req","webpackContextResolve","__webpack_require__","module","exports","Nav2","PageAccountSignIn","backToPageAccountSignIn","goToPageContactPhonebook","PageContactPhonebook","backToPageContactPhonebook","goToPageContactUsers","PageContactUsers","PageChatRecents","backToPageChatRecents","goToPageWebChat","PageWebChat","backToPageWebChat","goToPageCallKeypad","PageCallKeypad","backToPageCallKeypad","PageCallRecents","backToPageCallRecents","goToPageCallParks","backToPageCallParks","goToPageSettingsOther","PageSettingsOther","backToPageSettingsOther","goToPageSettingsCurrentAccount","PageSettingsCurrentAccount","backToPageSettingsCurrentAccount","goToPageAccountCreate","PageAccountCreate","backToPageAccountCreate","goToPageAccountUpdate","PageAccountUpdate","backToPageAccountUpdate","goToPagePhonebookCreate","PagePhonebookCreate","backToPagePhonebookCreate","goToPagePhonebookUpdate","PagePhonebookUpdate","backToPagePhonebookUpdate","isOutgoingCall","PageCallBackgrounds","backToPageCallBackgrounds","backToPageCallTransferChooseUser","goToPageCallTransferDial","backToPageCallTransferDial","PageCallParks2","backToPageCallParks2","PageCallDtmfKeypad","backToPageCallDtmfKeypad","PageChatDetail","backToPageChatDetail","goToPageChatGroupCreate","PageChatGroupCreate","backToPageChatGroupCreate","goToPageChatGroupInvite","PageChatGroupInvite","backToPageChatGroupInvite","PageChatGroupDetail","backToPageChatGroupDetail","goToPageSettingsDebug","PageSettingsDebug","backToPageSettingsDebug","goToPageContactEdit","backToPageContactEdit","PageContactGroupCreate","PageContactGroupEdit","setNav","AudioPlayer","loadingVideo","imageBroken","marginLeft","aspectRatio","objectURL","setObjectUrl","onShowImage","useCallback","write","outerHTML","readImage","urlImage","Request","blobFile","isLoading","isLoadFailed","isLoadSuccess","cssLoading","controls","playsInline","preserveAspectRatio","mdiImageBrokenVariant","RnStatusBar","getStatusBarHeight","RnStatusBar__warning","RnStatusBar__danger","StatusBar","barStyle","RnSwitch__enabled","Circle","Circle__enabled","TextInput","autoCapitalize","upsert","idKey","v0","extends","mx","ks","concat","extendObservable","txtPb","itemPb","borderBottomColor","autocompleteContainer","viewFlatList","Dimensions","maxHeight","isChoose","setChoose","loadPbxBoook","getData","Footer__noKeyboard","ActionsOuter","ActionsSpacing","ActionsInner","maxWidth","fabProps","ToggleKeyboard","FooterActions","Vibration","vibrate","marginBottom","onShowKeyboard","AnimatedSize","mdiKeyboardOffOutline","mdiKeyboardOutline","Outer__compact","Outer__transparent","Inner__hasBackBtn","onCreate","dropdownActive","setDropdownActive","Title","BackBtn","DropdownBtn","CreateBtn","cssInnerA","CreateBtn__white","Backdrop","Dropdown__compact","Item","Item__last","mdiDotsVertical","Btn__active","Text__active","ml","tabs","getTabs","getSubMenus","renderIconNotices","totalNotice","fcss","Description","cssContainerA","cssTitleA","textStyle","fadeAnim","validTitle","setValue","PageAccountSignIn_ListServers","PageAccountSignIn_Spacing","Space","CornerButton","CornerButton__info","CornerButton__language","CornerButton_Inner","CornerButton_Inner__info","CornerButton_Inner__language","CornerButton_Icon","CornerButton_Icon__info","CornerButton_Icon__language","FlatList","horizontal","AccountSignInItem","last","showsHorizontalScrollIndicator","empty","mdiLadybug","AccountSignInItem__last","AccountSignInItem__empty","AccountSignInItem_Btns","pnSyncLoadingMap","mdiApplicationOutline","mdiWeb","mdiServerNetwork","removeAccount","endCallKeepAllCalls","renderItemCall","isCurrentCall","onSelectBackgroundCall","txtRef","txtSelection","sendKey","ShowNumber","selection","KeyPad","min","isDelete","onSipUaCancel","getCameraSourceId","isFront","enumerateDevices","kind","facing","videoInputs","frontCamera","backCamera","appStateSubscription","componentWillUnmount","isMatchUser","callSearchRecents","getAvatar","getMatchedCalls","filteredCalls","mdiMagnify","voipApnsToken","onVoipToken","apnsToken","onToken","onNotification","n0","withGetData","withCallKeepUuid","withDictionaryPayload","dictionaryPayload","Voip","RNVoipPushRemoteNotificationsRegisteredEvent","RNVoipPushRemoteNotificationReceivedEvent","registerVoipToken","requestPermissions","getInitialNotification","getVoipToken","setApplicationIconBadgeNumber","resolveMatch","ucUser","calling","ringing","talking","renderUserSelectionMode","txtSearch","renderAllUserMode","orderBy","isUserSelectionMode","setPageCallTransferChooseUser","DropdownItem","disableText","setPageCallTransferDial","loadingRecent","loadingMore","editingText","emojiTurnOn","blobVideo","numberOfChatsPerLoadMore","numberOfChatsPerLoad","edittingTextEmoji","editingTextReplace","renderChatInput","scrollToEnd","setEditingText","submitEditingText","pickFile","emojiSelectFunc","emoji","newText","justMounted","closeToBottom","currentScrollPosition","isLoadingMore","onContentSizeChange","newWidth","newHeight","layoutHeight","layoutMeasurement","contentHeight","contentSize","chatById","resolveCreator","loadRecent","oldestCreated","allMessagesLoaded","submitting","onSubmitEditingTextSuccess","onSubmitEditingTextFailure","onAcceptFileSuccess","onAcceptFileFailure","reader","readAsDataURL","saveBlob","onRejectFileFailure","handleSaveBlobFileWeb","buddyId","delete","listMessage","containerOnContentSizeChange","category","Categories","emotion","columns","onEmojiSelected","showHistory","showSearchBar","showSectionTitles","showTabs","File","Message__call","Message_File_Button_Wrapper","Message_File_Button","Message_File_Cancel_Button","Message_File_Accept_Button","Message_File_Preview_Wrapper","Message_File_Preview_Info","Message_File_Preview_Info_Size","Message_File_Preview_Status","Message_File_Preview_Status__Success","Message_File_Preview_Status__Failed","Link","mdiFile","accept","onLinkPress","canOpenURL","onLinkLongPress","onRnPickerSelect","onMessagePress","Clipboard","setString","isImage","TextContainer","onLongPress","linkStyle","ItemImageVideoChat","vMessage","textFileInfo","textFileInfoLineThrough","textDecorationLine","vHorizontal","displaySendTo","isStopped","isDisableCancel","styleText","formatBytes","mdiCloseCircle","RnImageVideoLoader","bytes","decimals","dm","sizes","parseFloat","pow","toFixed","setName","toggleBuddy","onCreateSuccess","onCreateFailure","resolveBuddy","updateConfStatus","isClose","newItem","leave","closes","invite","bVideoEnabled","callVoiceConference","callVideoConference","onSendFileSuccess","onSendFileFailure","PageChatGroupInvite_TextInput","PageChatGroupInvite_Outer","PageChatGroupInvite_BtnSave","PageChatGroupInvite_BtnText","PageChatGroupInvite_GroupName","PageChatGroupInvite_Text","selectedBuddy","isNotMember","onInviteFailure","back","getLastChat","saveLastChatItem","arr2","handleGroupSelect","webchatInactive","groupIds","threadIds","threadIdsOrderedByRecent","groupById","userById","recentFromStorage","recentGroups","recentUsers","x","arrMap","reverse","ListUsers","recents","onGroupSelect","onUserSelect","formatDateTimeSemantic","SelectionItem_Disabled","SelectionItem_Title","RenderItem","addGroup","selectUser","listItemRemoved","editGroup","update","loaded","loadContactDetail","ct","upsertPhonebook","callRequest","onIcon0","numbers","mdiBriefcase","mdiCellphone","mdiHome","updateSearchText","loadContactsDebounced","onDelete","isEmpty","succeeded","removeContacts","onCancel","isDeleteState","loadContactsFirstTime","phonebooks","optionDelete","selectContactId","mdiInformation","loadMoreContacts","DelayFlag","resolveUser","pbxUserName","ucUserName","usersSearchTerm","getDescription","isShowOfflineUser","desc","getMatchUserIds","onlineUsers","setEnabled","timeoutId","val","contactUpdate","BtnIcon","transform","rotate","isUpdateAvailable","round","setStatusText","submitStatusText","submitStatus","mdiTranslate","ListWebchats","datas","WebchatItem","Row","Column","BtnText","TextMessage","bgUnread","isEnabledAnswer","isEnabledJoin","isDisplayClose","isDisplayShow","textDisplay","slice","answerPress","showPress","joinPress","closePress","created_tstamp","assigned","webchatinfo","profinfo_formatted","CallStore","recentCallActivityAt","getCallKeep","getPnIdFromUuid","includingOutgoing","includingAnswered","includingRejected","displayingCallId","prevDisplayingCallId","updateCurrentCallDebounce","getOriginalUserImageUrl","incallManagerStarted","onCallUpsert","upsertCall","startCallIntervalAt","startCallIntervalId","clearStartCallIntervalTimer","sipCreateSession","makeCall","reconnectCalled","setAutoEndCallKeepTimer","prevIds","curr","diff","endCallKeep","updateBackgroundCalls","updateBackgroundCallsDebounce","updateCurrentCall","getUuidFromPnId","incomingPnData","getSetUuidPnId","autoEndCallKeepTimerId","clearAutoEndCallKeepTimer","endAllCalls","alreadyShowIncomingCallUi","isCallRejected","setCallKeepAction","getCallKeepAction","calleeRejectedMap","backToForeground","rejected","expired","count","getSessionCount","withSDPControls","toURL","callkeepAction","addCallHistory","s0","setAction","rejectCall","reportEndCallWithUUID","CONSTANTS","END_CALL_REASONS","REMOTE_ENDED","newVoicemailCount","setCallStore","alreadyAddHistoryMap","isTypeCall","presentNotification","pushRecentCall","AuthStore","hasInternetConnected","pbxConnectingOrFailure","sipConnectingOrFailure","isSignInByNotification","ucConnectingOrFailure","autoSignIn","resetState","fragment","handleUrlParams","getUrlParams","urlParams","phone_idx","phoneIdx","newP","clearSignInByNotification","setAuthStore","alreadyHandleFirstOpen","syncPnTokenWithoutCatch","pnEnabled","disconnectPbx","webPhone","tvoip","newParams","lpcPort","tlsKeyHash","lpcEnabled","remoteSsids","getLocalSsid","localSsid","lpcPn","lpc","syncPnToken","syncForAllAccounts","setSyncPnTokenModule","getCurrentWifiSSID","requestAnimationFrame","createTextNode","head","getElementsByTagName","WebApp","WebApp_Logo","WebApp_Brand","WebApp_Btn","WebApp_Btn__app","WebApp_Btn__browser","WebApp_BtnTxt__browser","WebApp_Icon","isIOS","isAndroid","isBrowser","setIsBrowser","child","q","appUrl","logo","brand","mdiApple","mdiAndroid","pnToken","hasCallOrWakeFromPN","checkHasCallOrWakeFromPN","registerOnUnhandledError","NetInfo","onAuthUpdate","alreadyInitApp","appInitDone","App_Inner","App_ConnectionStatus","App_ConnectionStatus__failure","App_ConnectionStatusInner","App_ConnectionStatusIncreaseTouchSize","LoadingFullscreen","absoluteFillObject","SplashScreen","hide","serviceConnectingOrFailure","isFailure","connMessage","CallVideos","CallVoices","ChatGroupInvite","UnreadChatNoti","RnStackerRoot","RenderAllCalls","RnPickerRoot","PhonebookAddItem","RnAlertRoot","onPBXConnectionStopped","onPBXConnectionTimeout","onPBXUserCalling","onPBXUserRinging","onPBXUserTalking","onPBXUserHolding","onPBXUserHanging","onVoiceMailUpdated","setNewVoicemailCount","new","onPBXUserParkStarted","addParkNumber","onPBXUserParkStopped","removeParkNumber","onPbxCallRecording","updateRecordingStatus","onSIPConnectionStopped","reason","onSIPConnectionTimeout","onSIPSessionStarted","onSIPSessionUpdated","onSIPSessionStopped","onCallRemove","onUCConnectionStopped","onUCConnectionTimeout","onUCUserUpdated","updateStatusBuddy","onBuddyChatCreated","onGroupChatCreated","onChatGroupInvited","onChatGroupUpdated","onChatGroupRevoked","onPBXConnectionStarted","onSIPConnectionStarted","BtnSwitchCamera","cameraStyle","Video","Video_Space","Btns","BtnFuncCalls","Btns_Hidden","Btns_Inner","Btns_Space","Btns_VerticalMargin","Hangup","Hangup_incoming","Hangup_answer","Hangup_incomingText","Hangup_incomingText_avoidLargeImg","labelStyle","Image_wrapper","ImageSize","ImageLargeSize","styleTextBottom","Hangup_avoidAvatar","Hangup_avoidAvatar_Large","LoadingFullScreen","viewHangupBtns","viewHangupBtn","txtHold","smallAvatar","vContainer","vContainerVideo","prevCallsLength","PageCallManage","alreadySetShowButtonsInVideoCall","checkJavaPn","hasJavaPn","openJavaPnOnVisible","onAppStateChange","isBtnHidden","renderLayout","showButtonsInVideoCall","toggleButtons","renderCall","renderTransferring","PageCallTransferAttend","renderVideo","renderAvatar","renderBtns","renderHangupBtn","mdiCameraFrontVariant","mdiCameraRearVariant","isLarge","isShowAvatar","styleBigAvatar","styleViewAvatar","SmartImage","activeColor","isHideButtons","FieldButton","mdiCallSplit","mdiAlphaPCircle","mdiVideoOff","mdiRecordCircle","mdiDialpad","mdiPlayCircle","mdiPauseCircle","isHangupBtnHidden","IncomingItemWithTimer","hideButtonsIfVideo","CreateBtnIcon","noPhotoImg","noPhoto","imageError","full","statusImageLoading","setStatusImageLoading","isImageUrl","checkImageUrl","onLoad","resizeMode","frameBorder","pathname","Inner__info","Info","Info__from","Info__to","Arrow","BtnOuter","Btn__stop","Btn__hangup","Btn__conference","usersource","usertarget","mdiArrowRight","stopTransferring","mdiPhoneOff","conferenceTransferring","RootRnAlert","RootRnAlert_Backdrop","RootRnAlert_Modal","RootRnAlert_Message","RootRnAlert_Err","RootRnAlert_ErrTxt","RootRnAlert_ErrTxt__title","RootRnAlert_Btns","RootRnAlert_Btn","RootRnAlert_Btn__cancel","RootRnAlert_BtnTxt","RnAlertR","translateY","rest","errMessage","a0","RnPicker_Backdrop","RnPicker_Inner","RnPicker_Options","RnPicker_Option","RnPicker_Option__last","RnPicker_Option__selected","RnPicker_Option__cancel","RnPicker_Text__selected","RnPicker_Text__cancel","RnPicker_Icon","RnPickerR","backdropCss","mdiRadioboxMarked","mdiRadioboxBlank","cancelLabel","Stack","Stack__hidden","translateX","OuterComponent","isBackgroundStack","resolveCall","CallVideosUI","callIds","Mini","onDrag","gesture","setNativeProps","videoPositionL","dx","videoPositionT","dy","panResponder","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onDrop","onPanResponderTerminate","panHandlers","lastTap","onDoubleTap","Control","isOutgoingCallStart","OutgoingItem","VideoRBT","isLoudSpeaker","NotifyUnread","NotifyUnreadBtn","formatGroup","onRejectSuccess","onRejectFailure","onAcceptSuccess","onAcceptFailure","alreadyShowNoti","prevLastMessageId","prevUnreadChatTimeoutId","updateLatestUnreadChat","unreadChat","unreadChats","latestUnreadChat","clear","onUnreadPress","vBottom","RnPicker_Option__OK","RnPicker_Text__Ok","inputFieldName","RNPickerInput","updateItems","updateValue","newList","autoFocus","keyboardDismissMode","renderApp"],"mappings":"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","file":"static/js/main.41066e76.chunk.js","sourcesContent":["import Handlebars from 'handlebars/dist/handlebars'\nimport HandlebarsMoment from 'helper-moment'\n\nimport { enLabelsMapIndex, intlStore, labels } from './intlStore'\n\nHandlebars.registerHelper('moment', HandlebarsMoment)\n\ntype CompileFn = (data: unknown) => string\n\nconst compileFn = (locale: string, k: string): CompileFn => {\n  const arr = labels[locale as 'en']\n  const i = enLabelsMapIndex[k as keyof typeof enLabelsMapIndex]\n  let fn = arr[i] as any as CompileFn\n  if (!fn || typeof fn !== 'function') {\n    fn = Handlebars.compile(fn || k)\n  }\n  if (i !== undefined) {\n    arr[i] = fn as any as string\n  }\n  return fn\n}\n\nconst intl0 = (k: string, data: unknown) => compileFn(intlStore.locale, k)(data)\nconst intlDebug0 = (k: string, data: unknown) => ({\n  label: intl0(k, data),\n  en: compileFn('en', k)(data),\n})\n\nexport interface IntlDebug {\n  label: string\n  en: string\n}\nexport const intlDebug = intlDebug0 as any as (\n  template: TemplateStringsArray,\n  ...substitutions: any[]\n) => IntlDebug\n\nexport const intl = intl0 as any as (\n  template: TemplateStringsArray,\n  ...substitutions: any[]\n) => string\n","import * as fn from 'polished'\nimport { Platform } from 'react-native'\n\nimport json from '../../package.json'\n\nexport const v = {\n  fn,\n  //\n  fontSize: 14,\n  lineHeight: 20,\n  get fontSizeTitle() {\n    return 1.8 * v.fontSize\n  },\n  get lineHeightTitle() {\n    return 1.8 * v.lineHeight\n  },\n  get fontSizeSubTitle() {\n    return 1.2 * v.fontSize\n  },\n  get lineHeightSubTitle() {\n    return 1.2 * v.lineHeight\n  },\n  get fontSizeSmall() {\n    return 0.8 * v.fontSize\n  },\n  get lineHeightSmall() {\n    return 0.8 * v.lineHeight\n  },\n  iconSize: 24,\n  fontWeight: 'normal' as 'normal',\n  fontFamily:\n    Platform.OS === 'web'\n      ? \"'-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'\"\n      : undefined,\n  //\n  borderRadius: 3,\n  maxModalWidth: 380,\n  //\n  bg: 'white',\n  revBg: fn.darken(0.9, 'white'),\n  color: 'black',\n  revColor: 'white',\n  hoverBg: fn.darken(0.05, 'white'),\n  subColor: fn.darken(0.75, 'white'),\n  borderBg: fn.darken(0.15, 'white'),\n  layerBg: fn.transparentize(0.2, 'black'),\n  layerBgVideo: '#00000080',\n  //\n  boxShadow: {\n    shadowColor: 'black',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 2,\n    elevation: 3, // android\n  },\n  //\n  backdropZindex: {\n    zIndex: 999,\n    elevation: 999,\n  },\n  colors: {\n    //\n    greyTextChat: '#9e9e9e',\n    primary: '#609B3A',\n    warning: '#F1AF20',\n    danger: '#DC0F39',\n    primaryFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.primary)\n        : fn.darken(-lv, v.colors.primary),\n    warningFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.warning)\n        : fn.darken(-lv, v.colors.warning),\n    dangerFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.danger)\n        : fn.darken(-lv, v.colors.danger),\n  },\n}\n\nexport const currentVersion = json.version\n","import AsyncStorage from '@react-native-async-storage/async-storage'\nimport Image from 'react-native-fast-image'\n\nimport { AudioPlayer } from './AudioPlayer'\nimport { RnIcon } from './RnIcon'\nimport { RnImageVideoLoader } from './RnImageVideoLoader'\nimport { RnStatusBar } from './RnStatusBar'\nimport { RnSwitch } from './RnSwitch'\nimport { RnText } from './RnText'\nimport { RnTextInput } from './RnTextInput'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nexport {\n  AudioPlayer,\n  AsyncStorage as RnAsyncStorage,\n  RnIcon,\n  Image as RnImage,\n  RnImageVideoLoader,\n  RnStatusBar,\n  RnSwitch,\n  RnText,\n  RnTextInput,\n  RnTouchableOpacity,\n}\n","import { Nav2 } from './Nav2'\n\n// Fix ciruclar dependencies\nlet nav: Nav2\nexport const setNav = (n: Nav2) => {\n  nav = n\n}\nexport const Nav = () => nav\n","import { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { AuthStore } from './authStore2'\n\n// circular dep\nlet authStore: AuthStore\nexport const setAuthStore = (s: AuthStore) => {\n  authStore = s\n}\nexport const getAuthStore = () => authStore\n\nexport const reconnectAndWaitSip = async () => {\n  authStore.reconnectSip()\n  await waitSip()\n}\n\nconst wait = (\n  fn: Function,\n  name: 'pbxState' | 'sipState' | 'ucState',\n  time = 10000,\n) => {\n  if (authStore[name] === 'success') {\n    fn(true)\n    return\n  }\n  const at = Date.now()\n  const id = BackgroundTimer.setInterval(() => {\n    if (authStore[name] === 'success') {\n      BackgroundTimer.clearInterval(id)\n      fn(true)\n    } else if (Date.now() - at > time) {\n      BackgroundTimer.clearInterval(id)\n      fn(false)\n    }\n  }, 500)\n}\n\nexport const waitPbx = (time?: number) =>\n  new Promise(r => wait(r, 'pbxState', time))\nexport const waitSip = (time?: number) =>\n  new Promise(r => wait(r, 'sipState', time))\nexport const waitUc = (time?: number) =>\n  new Promise(r => wait(r, 'ucState', time))\n","import { action, observable } from 'mobx'\nimport { ReactElement } from 'react'\nimport { AppState } from 'react-native'\n\nimport { IntlDebug } from './intl'\n\ntype CommonRnAlertFields = {\n  confirmText?: string | boolean\n  dismissText?: string | boolean\n}\n\nexport type PromptRnAlert = CommonRnAlertFields & {\n  title: string | ReactElement\n  message: string | ReactElement\n  onConfirm?: Function\n  onDismiss?: Function\n}\nexport type ErrorRnAlert = CommonRnAlertFields & {\n  message?: IntlDebug\n  err?: Error\n  unexpectedErr?: Error\n}\nexport type ErrorRnAlert2 = Omit<ErrorRnAlert, 'message'> & {\n  message?: string\n}\n\nexport type TRnAlert =\n  | {\n      prompt: PromptRnAlert\n    }\n  | {\n      error: ErrorRnAlert2\n    }\n\nexport class RnAlertStore {\n  // Need to put `alerts` out of the observable\n  //  because ReactElement can not stay in the mobx state\n  @observable alertsCount = 0\n  alerts: TRnAlert[] = []\n\n  @action prompt = (prompt: PromptRnAlert) => {\n    this.alerts.push({ prompt })\n    this.alertsCount = this.alerts.length\n  }\n  @action error = (a: ErrorRnAlert) => {\n    // Log error to save it to the debug log\n    // Convert error message to string if it was constructed using intlDebug\n    const err = a.unexpectedErr || a.err\n    const en = a.message?.en\n    if (err) {\n      console.error(...(en ? [en, err] : [err]))\n    }\n    if (AppState.currentState === 'active') {\n      this.alerts.push({\n        error: {\n          ...a,\n          message: a.message?.label,\n        },\n      })\n      this.alertsCount = this.alerts.length\n    }\n  }\n  @action dismiss = () => {\n    this.alerts.shift()\n    this.alertsCount = this.alerts.length\n  }\n}\n\nexport const RnAlert = new RnAlertStore()\n","// Material Design Icons v6.5.95\n// App.web, AccountSignInItem\nexport var mdiWeb =\n  'M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\n// App.web\nexport var mdiAndroid =\n  'M16.61 15.15C16.15 15.15 15.77 14.78 15.77 14.32S16.15 13.5 16.61 13.5H16.61C17.07 13.5 17.45 13.86 17.45 14.32C17.45 14.78 17.07 15.15 16.61 15.15M7.41 15.15C6.95 15.15 6.57 14.78 6.57 14.32C6.57 13.86 6.95 13.5 7.41 13.5H7.41C7.87 13.5 8.24 13.86 8.24 14.32C8.24 14.78 7.87 15.15 7.41 15.15M16.91 10.14L18.58 7.26C18.67 7.09 18.61 6.88 18.45 6.79C18.28 6.69 18.07 6.75 18 6.92L16.29 9.83C14.95 9.22 13.5 8.9 12 8.91C10.47 8.91 9 9.24 7.73 9.82L6.04 6.91C5.95 6.74 5.74 6.68 5.57 6.78C5.4 6.87 5.35 7.08 5.44 7.25L7.1 10.13C4.25 11.69 2.29 14.58 2 18H22C21.72 14.59 19.77 11.7 16.91 10.14H16.91Z'\nexport var mdiApple =\n  'M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z'\n\n// Avatar, PageCallManage\nexport var mdiRecord =\n  'M19,12C19,15.86 15.86,19 12,19C8.14,19 5,15.86 5,12C5,8.14 8.14,5 12,5C15.86,5 19,8.14 19,12Z'\n\n// CallBar, PageCallManage\nexport var mdiMicrophone =\n  'M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z'\nexport var mdiMicrophoneOff =\n  'M19,11C19,12.19 18.66,13.3 18.1,14.28L16.87,13.05C17.14,12.43 17.3,11.74 17.3,11H19M15,11.16L9,5.18V5A3,3 0 0,1 12,2A3,3 0 0,1 15,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27 13.91,17.58 13,17.72V21H11V17.72C7.72,17.23 5,14.41 5,11H6.7C6.7,14 9.24,16.1 12,16.1C12.81,16.1 13.6,15.91 14.31,15.58L12.65,13.92L12,14A3,3 0 0,1 9,11V10.28L3,4.27L4.27,3Z'\n\n// CallBar\nexport var mdiPause = 'M14,19H18V5H14M6,19H10V5H6V19Z'\nexport var mdiPhoneInTalkOutline =\n  'M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 12H17A5 5 0 0 0 12 7V9A3 3 0 0 1 15 12M19 12H21C21 7 16.97 3 12 3V5C15.86 5 19 8.13 19 12Z'\nexport var mdiPhoneOutgoingOutline =\n  'M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 3V4.5H18.5L13 10L14 11L19.5 5.5V9H21V3H15Z'\nexport var mdiPlay = 'M8,5.14V19.14L19,12.14L8,5.14Z'\n\n// CallBar, PageCallManage\nexport var mdiVolumeHigh =\n  'M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z'\nexport var mdiVolumeMedium =\n  'M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z'\n\n// CallBar, PageCallBackgrounds, PageCallManage, PageCallTransferAttend\nexport var mdiPhoneHangup =\n  'M12,9C10.4,9 8.85,9.25 7.4,9.72V12.82C7.4,13.22 7.17,13.56 6.84,13.72C5.86,14.21 4.97,14.84 4.17,15.57C4,15.75 3.75,15.86 3.5,15.86C3.2,15.86 2.95,15.74 2.77,15.56L0.29,13.08C0.11,12.9 0,12.65 0,12.38C0,12.1 0.11,11.85 0.29,11.67C3.34,8.77 7.46,7 12,7C16.54,7 20.66,8.77 23.71,11.67C23.89,11.85 24,12.1 24,12.38C24,12.65 23.89,12.9 23.71,13.08L21.23,15.56C21.05,15.74 20.8,15.86 20.5,15.86C20.25,15.86 20,15.75 19.82,15.57C19.03,14.84 18.14,14.21 17.16,13.72C16.83,13.56 16.6,13.22 16.6,12.82V9.72C15.15,9.25 13.6,9 12,9Z'\n\n// CallKeyPad\nexport var mdiBackspace =\n  'M22,3H7C6.31,3 5.77,3.35 5.41,3.88L0,12L5.41,20.11C5.77,20.64 6.31,21 7,21H22A2,2 0 0,0 24,19V5A2,2 0 0,0 22,3M19,15.59L17.59,17L14,13.41L10.41,17L9,15.59L12.59,12L9,8.41L10.41,7L14,10.59L17.59,7L19,8.41L15.41,12'\nexport var mdiKeyboard =\n  'M19,10H17V8H19M19,13H17V11H19M16,10H14V8H16M16,13H14V11H16M16,17H8V15H16M7,10H5V8H7M7,13H5V11H7M8,11H10V13H8M8,8H10V10H8M11,11H13V13H11M11,8H13V10H11M20,5H4C2.89,5 2,5.89 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7C22,5.89 21.1,5 20,5Z'\n\n// CallKeyPad, PageCallTransferAttend, PageCallTransferChooseUser\nexport var mdiPhoneForward =\n  'M20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C10.38,15.94 8.06,13.62 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5M18,11L23,6L18,1V4H14V8H18V11Z'\n\n// CallKeyPad, PageCallBackgrounds, PageCallManage, PageCallRecents, PageCallTransferChooseUser, PageContactPhonebook, PageContactUsers\nexport var mdiPhone =\n  'M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z'\n\n// CallNotify, ChatGroupInvite, PageSettingsOther\nexport var mdiCheck = 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z'\n\n// CallNotify, ChatGroupInvite, Field, AccountSignInItem, WebchatItem, PageSettingDebug, RnPickerRoot\nexport var mdiClose =\n  'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'\n\n// ChatMessage, AccountSignInItem, PageAccountSignIn, pickFile.web\nexport var mdiDotsHorizontal =\n  'M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z'\n\n// ChatMessage\nexport var mdiFile =\n  'M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z'\n\n// ContactUserItem\nexport var mdiAccountGroup =\n  'M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z'\nexport var mdiPhoneIncoming =\n  'M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M19,11V9.5H15.5L21,4L20,3L14.5,8.5V5H13V11H19Z'\nexport var mdiPhoneMissed =\n  'M23.71,16.67C20.66,13.77 16.54,12 12,12C7.46,12 3.34,13.77 0.29,16.67C0.11,16.85 0,17.1 0,17.38C0,17.65 0.11,17.9 0.29,18.08L2.77,20.56C2.95,20.74 3.2,20.86 3.5,20.86C3.75,20.86 4,20.75 4.18,20.57C4.97,19.83 5.86,19.21 6.84,18.72C7.17,18.56 7.4,18.22 7.4,17.82V14.72C8.85,14.25 10.39,14 12,14C13.6,14 15.15,14.25 16.6,14.72V17.82C16.6,18.22 16.83,18.56 17.16,18.72C18.14,19.21 19.03,19.83 19.82,20.57C20,20.75 20.25,20.86 20.5,20.86C20.8,20.86 21.05,20.74 21.23,20.56L23.71,18.08C23.89,17.9 24,17.65 24,17.38C24,17.1 23.89,16.85 23.71,16.67M6.5,5.5L12,11L19,4L18,3L12,9L7.5,4.5H11V3H5V9H6.5V5.5Z'\nexport var mdiPhoneOutgoing =\n  'M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z'\n\n// Field, HeaderCreateBtn\nexport var mdiPlus = 'M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'\n\n// Field\nexport var mdiCardsDiamond = 'M19,12L12,22L5,12L12,2'\n\n// Field, PageAccountSignIn\nexport var mdiUnfoldMoreHorizontal =\n  'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'\n\n// FieldButton, FooterActions, HeaderBackBtn\nexport var mdiKeyboardBackspace =\n  'M21,11H6.83L10.41,7.41L9,6L3,12L9,18L10.41,16.58L6.83,13H21V11Z'\n\n// FooterActions\nexport var mdiCached =\n  'M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12'\n\n// FooterChatInput\nexport var mdiEmoticon =\n  'M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8M8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8M12,17.5C9.67,17.5 7.69,16.04 6.89,14H17.11C16.3,16.04 14.33,17.5 12,17.5Z'\nexport var mdiPaperclip =\n  'M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z'\nexport var mdiSend = 'M2,21L23,12L2,3V10L17,12L2,14V21Z'\n\n// FooterToggleKeyboard\nexport var mdiKeyboardOffOutline =\n  'M1,4.27L2.47,5.74C2.18,6.08 2,6.5 2,7V17A2,2 0 0,0 4,19H15.73L18.73,22L20,20.72L2.28,3L1,4.27M4,17V7.27L5,8.27V10H6.73L8,11.27V13H9.73L10.73,14H8V16H12.73L13.73,17H4M5,11H7V13H5V11M17,11H19V13H17V11M19,10H17V8H19V10M14,11H16V13H14.83L14,12.17V11M13,10H11.83L11,9.17V8H13V10M22,7V17C22,17.86 21.45,18.58 20.7,18.87L18.83,17H20V7H8.83L6.83,5H20A2,2 0 0,1 22,7M16,10H14V8H16V10Z'\nexport var mdiKeyboardOutline =\n  'M4,5A2,2 0 0,0 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7A2,2 0 0,0 20,5H4M4,7H20V17H4V7M5,8V10H7V8H5M8,8V10H10V8H8M11,8V10H13V8H11M14,8V10H16V8H14M17,8V10H19V8H17M5,11V13H7V11H5M8,11V13H10V11H8M11,11V13H13V11H11M14,11V13H16V11H14M17,11V13H19V11H17M8,14V16H16V14H8Z'\n\n// HeaderDropdown\nexport var mdiDotsVertical =\n  'M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z'\n\n// ItemImageVideoChat\nexport var mdiCloseCircle =\n  'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z'\n\n// navigationConfig, AccountSignInItem\nexport var mdiAccountCircleOutline =\n  'M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z'\n\n// navigationConfig\nexport var mdiCogOutline =\n  'M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z'\nexport var mdiPhoneOutline =\n  'M20,15.5C18.8,15.5 17.5,15.3 16.4,14.9C16.3,14.9 16.2,14.9 16.1,14.9C15.8,14.9 15.6,15 15.4,15.2L13.2,17.4C10.4,15.9 8,13.6 6.6,10.8L8.8,8.6C9.1,8.3 9.2,7.9 9,7.6C8.7,6.5 8.5,5.2 8.5,4C8.5,3.5 8,3 7.5,3H4C3.5,3 3,3.5 3,4C3,13.4 10.6,21 20,21C20.5,21 21,20.5 21,20V16.5C21,16 20.5,15.5 20,15.5M5,5H6.5C6.6,5.9 6.8,6.8 7,7.6L5.8,8.8C5.4,7.6 5.1,6.3 5,5M19,19C17.7,18.9 16.4,18.6 15.2,18.2L16.4,17C17.2,17.2 18.1,17.4 19,17.4V19Z'\n\n// AccountSignInItem\nexport var mdiApplicationOutline =\n  'M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 20H3V6H21V20Z'\nexport var mdiServerNetwork =\n  'M13,19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H20A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H13V19M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H4A1,1 0 0,1 3,8V4A1,1 0 0,1 4,3M9,7H10V5H9V7M9,15H10V13H9V15M5,5V7H7V5H5M5,13V15H7V13H5Z'\n\n// RnImageVideoLoader\nexport var mdiCloseCircleOutline =\n  'M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z'\nexport var mdiPlayCircleOutline =\n  'M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z'\n\n// RnImageVideoLoader, RnImageVideoLoader.web\nexport var mdiImageBrokenVariant =\n  'M21,5V11.59L18,8.58L14,12.59L10,8.59L6,12.59L3,9.58V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5M18,11.42L21,14.43V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V12.42L6,15.41L10,11.41L14,15.41'\n\n// PageCallManage\nexport var mdiCameraFrontVariant =\n  'M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M11,1V3H13V1H11M6,4V16.5C6,15.12 8.69,14 12,14C15.31,14 18,15.12 18,16.5V4H6M13,18H9V20H13V22L16,19L13,16V18Z'\nexport var mdiCameraRearVariant =\n  'M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,2A2,2 0 0,0 10,4A2,2 0 0,0 12,6A2,2 0 0,0 14,4A2,2 0 0,0 12,2M13,18H9V20H13V22L16,19L13,16V18Z'\nexport var mdiAlphaPCircle =\n  'M9,7V17H11V13H13A2,2 0 0,0 15,11V9A2,2 0 0,0 13,7H9M11,9H13V11H11V9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z'\nexport var mdiCallSplit =\n  'M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29'\nexport var mdiDialpad =\n  'M12,19A2,2 0 0,0 10,21A2,2 0 0,0 12,23A2,2 0 0,0 14,21A2,2 0 0,0 12,19M6,1A2,2 0 0,0 4,3A2,2 0 0,0 6,5A2,2 0 0,0 8,3A2,2 0 0,0 6,1M6,7A2,2 0 0,0 4,9A2,2 0 0,0 6,11A2,2 0 0,0 8,9A2,2 0 0,0 6,7M6,13A2,2 0 0,0 4,15A2,2 0 0,0 6,17A2,2 0 0,0 8,15A2,2 0 0,0 6,13M18,5A2,2 0 0,0 20,3A2,2 0 0,0 18,1A2,2 0 0,0 16,3A2,2 0 0,0 18,5M12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17A2,2 0 0,0 14,15A2,2 0 0,0 12,13M18,13A2,2 0 0,0 16,15A2,2 0 0,0 18,17A2,2 0 0,0 20,15A2,2 0 0,0 18,13M18,7A2,2 0 0,0 16,9A2,2 0 0,0 18,11A2,2 0 0,0 20,9A2,2 0 0,0 18,7M12,7A2,2 0 0,0 10,9A2,2 0 0,0 12,11A2,2 0 0,0 14,9A2,2 0 0,0 12,7M12,1A2,2 0 0,0 10,3A2,2 0 0,0 12,5A2,2 0 0,0 14,3A2,2 0 0,0 12,1Z'\nexport var mdiPauseCircle =\n  'M15,16H13V8H15M11,16H9V8H11M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiPlayCircle =\n  'M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiRecordCircle =\n  'M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z'\nexport var mdiVideoOff =\n  'M3.27,2L2,3.27L4.73,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16C16.2,18 16.39,17.92 16.54,17.82L19.73,21L21,19.73M21,6.5L17,10.5V7A1,1 0 0,0 16,6H9.82L21,17.18V6.5Z'\n\n// PageCallManage, PageCalLRecents, PageContactUsers\nexport var mdiVideo =\n  'M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z'\n\n// PageCallRecents, PageContactUsers\nexport var mdiMagnify =\n  'M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'\n\n// PageCallTransferAttend\nexport var mdiArrowRight =\n  'M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z'\nexport var mdiPhoneOff =\n  'M20.22,2.5L2.5,20.22L3.77,21.5L8.65,16.62C11.76,19.43 15.81,21 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C12.06,16.8 11,16.06 10.06,15.21L21.5,3.77L20.22,2.5M4,3A1,1 0 0,0 3,4C3,7.57 4.14,11.05 6.24,13.94L7.66,12.5C7.28,11.97 6.93,11.39 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4Z'\n\n// PageContactPhonebook\nexport var mdiBriefcase =\n  'M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z'\nexport var mdiCellphone =\n  'M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z'\nexport var mdiHome = 'M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'\nexport var mdiInformation =\n  'M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\n// PageAccountSignIn\nexport var mdiLadybug =\n  'M12,5C12.74,5 13.47,5.1 14.15,5.29L15.78,2.46C16.06,2 16.67,1.82 17.15,2.1C17.63,2.37 17.79,3 17.5,3.46L16,6.07C17.22,6.78 18.23,7.79 18.93,9H5.07C5.77,7.79 6.78,6.78 8,6.07L6.5,3.46C6.21,3 6.37,2.37 6.85,2.1C7.33,1.82 7.94,2 8.22,2.46L9.85,5.29C10.53,5.1 11.26,5 12,5M20,13C20,17.17 16.82,20.59 12.75,20.97V10.5H19.6C19.86,11.29 20,12.13 20,13M4,13C4,12.13 4.14,11.29 4.4,10.5H11.25V20.97C7.18,20.59 4,17.17 4,13Z'\n\n// PageSettingsOther\nexport var mdiTranslate =\n  'M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z'\n\n// RnPickerRoot\nexport var mdiRadioboxBlank =\n  'M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiRadioboxMarked =\n  'M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z'\n\n// PageContactEdit\nexport var mdiMoreHoriz =\n  'M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n\nexport var mdiMenuDown = 'M7,10L12,15L17,10H7Z'\nexport var mdiMenuLeft = 'M14,7L9,12L14,17V7Z'\nexport var mdiMenuRight = 'M10,17L15,12L10,7V17Z'\nexport var mdiFolderPlus =\n  'M10,4L12,6H20A2,2 0 0,1 22,8V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10M15,9V12H12V14H15V17H17V14H20V12H17V9H15Z'\n","import { CallStore } from './callStore2'\n\nlet callStore: CallStore\nexport const setCallStore = (c: CallStore) => {\n  callStore = c\n}\nexport const getCallStore = () => callStore\n","import { debounce, isEqual, uniqBy } from 'lodash'\nimport { action, computed, observable } from 'mobx'\n\nimport * as brekekejs from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { arrToMap } from '../utils/arrToMap'\nimport { getAuthStore, waitPbx } from './authStore'\nimport { intlDebug } from './intl'\nimport { intlStore } from './intlStore'\nimport { RnAlert } from './RnAlert'\n\nexport type PbxUser = {\n  id: string\n  name: string\n  talkers?: {\n    id: string\n    status: string // 'calling' | 'ringing' | 'talking' | 'holding'\n  }[]\n}\nexport type UcUser = {\n  id: string\n  name: string\n  avatar: string\n  status: string // 'online' | 'offline' | 'idle' | 'busy'\n  statusText: string\n}\n// export type PBContact = {\n//   aid: string\n//   display_name: string\n//   phonebook: string\n//   shared: boolean\n//   loaded?: boolean\n//   hidden: boolean\n//   info: Phonebook\n// }\nexport type ContactInfo = { [k: string]: string }\nexport type Phonebook = {\n  id: string\n  display_name: string\n  phonebook: string\n  shared: boolean\n  loaded?: boolean\n  // if user is empty, it is shared\n  // if user is specified, it means it is belonged to that user\n  user?: string\n  info: ContactInfo\n}\nexport type ItemPBForm = brekekejs.ItemPhonebook & {\n  name: string\n  disabled?: boolean\n  value?: string\n  onValueChange?: Function\n  rule?: string\n  hidden?: boolean | undefined\n  label: string\n  isFocus?: boolean\n  maxLength: number\n}\n\nexport type PickerItemOption = {\n  onSelect: Function\n  listOption: ItemPBForm[]\n}\n\nclass ContactStore {\n  @observable usersSearchTerm = ''\n  @observable phonebookSearchTerm = ''\n  @observable chatSearchTerm = ''\n  @observable callSearchRecents = ''\n  @observable loading = false\n  @observable hasLoadmore = false\n  @observable offset = 0\n  numberOfContactsPerPage = 20\n\n  loadContacts = async () => {\n    await waitPbx()\n    if (getAuthStore().pbxState !== 'success' || this.loading) {\n      return\n    }\n    this.loading = true\n    await pbx\n      .getContacts({\n        search_text: this.phonebookSearchTerm,\n        offset: this.offset,\n        limit: this.numberOfContactsPerPage,\n      })\n      .then(arr => {\n        if (!arr) {\n          return\n        }\n        this.setPhonebook(arr as Phonebook[])\n        this.hasLoadmore = arr.length === this.numberOfContactsPerPage\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to load contact list`,\n          err,\n        })\n      })\n    this.loading = false\n  }\n\n  @observable alreadyLoadContactsFirstTime = false\n  @action loadContactsFirstTime = () => {\n    if (this.alreadyLoadContactsFirstTime) {\n      return\n    }\n    this.loadContacts().then(() => {\n      this.alreadyLoadContactsFirstTime = true\n    })\n  }\n  @action loadMoreContacts = () => {\n    this.offset += this.numberOfContactsPerPage\n    this.loadContacts()\n  }\n  @action refreshContacts = () => {\n    this.offset = 0\n    this.loadContacts()\n  }\n  // delete function\n  @observable selectedContactIds: { [id: string]: boolean } = {}\n  @observable isDeleteState: boolean = false\n\n  @action selectContactId = (userId: string) => {\n    if (this.selectedContactIds[userId]) {\n      delete this.selectedContactIds[userId]\n    } else {\n      this.selectedContactIds[userId] = true\n    }\n  }\n  @action removeContacts = (ids: string[] | number[]) => {\n    ids.forEach(id => {\n      delete this.phoneBooksMap[id.toString()]\n    })\n    this.phoneBooks = Object.values(this.phoneBooksMap)\n  }\n\n  // Create/update contact\n  @observable showPickerItem: PickerItemOption | null = null\n\n  @action openPicker = (picker: PickerItemOption) => {\n    this.showPickerItem = picker\n  }\n\n  @action dismissPicker = () => {\n    this.showPickerItem = null\n  }\n  getManagerContact = (lang?: string) => {\n    return window.Brekeke.Phonebook.getManager(lang ? lang : intlStore.locale)\n  }\n  getItemPhonebook = (lang?: string) => {\n    return window.Brekeke.Phonebook.getManager(lang ? lang : intlStore.locale)\n      ?.item\n  }\n\n  getManageItems = (lang?: string) => {\n    const items = window.Brekeke.Phonebook.getManager(\n      lang ? lang : intlStore.locale,\n    )?.item\n    if (!items || !items.length) {\n      return []\n    }\n    const newItems = items.map(i => {\n      return {\n        ...i,\n        name: i.id,\n        disabled: undefined,\n        label: i.id.startsWith('$') ? i.caption : i.id,\n        keyboardType: i.type === 'phone' ? 'numeric' : 'default',\n        maxLength: 50,\n      }\n    }) as any as ItemPBForm[]\n    return newItems\n  }\n\n  // pbxUsers\n  @observable pbxUsers: PbxUser[] = []\n\n  getPbxUsers = async () => {\n    try {\n      const ca = getAuthStore().getCurrentAccount()\n      if (!ca) {\n        return\n      }\n      const res = await pbx.getUsers(ca.pbxTenant)\n      if (!res) {\n        return\n      }\n      this.pbxUsers = res\n        .filter(u => u[0] !== ca.pbxUsername)\n        .map(id => ({ id: id[0], name: id[1] }))\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to load PBX users`,\n        err: err as Error,\n      })\n    }\n  }\n  setTalkerStatus = (userId: string, talkerId: string, status: string) => {\n    const u = this.getPbxUserById(userId)\n    if (!u) {\n      return\n    }\n    if (!u.talkers) {\n      u.talkers = []\n    }\n    if (!status) {\n      u.talkers = u.talkers.filter(t => t.id !== talkerId)\n    } else {\n      const talker = u.talkers.find(t => t.id === talkerId)\n      if (!talker) {\n        u.talkers.push({\n          id: talkerId,\n          status,\n        })\n      } else {\n        talker.status = status\n      }\n    }\n    this.pbxUsers = [...this.pbxUsers]\n  }\n  @computed private get pbxUsersMap() {\n    return arrToMap(this.pbxUsers, 'id', (u: PbxUser) => u) as {\n      [k: string]: PbxUser\n    }\n  }\n  @observable private extraPbxUsersMap: { [k: string]: PbxUser } = {}\n  getPbxUserById = (id: string) => {\n    const u = this.pbxUsersMap[id] || this.extraPbxUsersMap[id]\n    if (!u && !this.extraPbxUsersLoadingMap[id]) {\n      this.extraPbxUsersLoadingMap[id] = true\n      this.extraPbxUsersBatch.push(id)\n      this.getExtraPbxUsersBatch()\n    }\n    return u\n  }\n\n  private extraPbxUsersLoadingMap: { [k: string]: boolean } = {}\n  private extraPbxUsersBatch: string[] = []\n  private getExtraPbxUsersBatch = debounce(() => {\n    const ids = this.extraPbxUsersBatch\n    this.extraPbxUsersBatch = []\n    pbx\n      .getExtraUsers(ids)\n      .then(\n        action(arr => {\n          arr?.forEach(u => {\n            this.extraPbxUsersMap[u.id] = u\n          })\n        }),\n      )\n      .catch(() => {\n        // mimic finally\n      })\n      .then(() =>\n        ids.forEach(id => {\n          delete this.extraPbxUsersLoadingMap[id]\n        }),\n      )\n  }, 17)\n\n  @observable ucUsers: UcUser[] = []\n  updateUcUser = (u: UcUser) => {\n    const u0 = this.getUcUserById(u.id)\n    if (!u0) {\n      return\n    }\n    if (isEqual(u0, u)) {\n      return\n    }\n    Object.assign(u0, u)\n    this.ucUsers = [...this.ucUsers]\n  }\n  @computed private get ucUsersMap() {\n    return arrToMap(this.ucUsers, 'id', (u: UcUser) => u) as {\n      [k: string]: UcUser\n    }\n  }\n  getUcUserById = (id: string) => {\n    return this.ucUsersMap[id]\n  }\n\n  @observable phoneBooks: Phonebook[] = []\n  @observable pbxBooks: brekekejs.PbxBook[] = []\n\n  @action loadPbxBoook = () => {\n    this.pbxBooks = []\n    pbx.getPhonebooks().then(res => {\n      if (res) {\n        this.pbxBooks = res\n      }\n    })\n  }\n  @action upsertPhonebook = (p: Phonebook) => {\n    const p0 = this.getPhonebookById(p.id)\n    if (!p0) {\n      this.phoneBooks.push(p)\n    } else {\n      Object.assign(p0, p)\n    }\n\n    // update display name for recent call\n    const partyNumber =\n      p.info?.$tel_mobile || p.info?.$tel_work || p.info?.$tel_home\n    if (partyNumber) {\n      const ac = getAuthStore()\n      ac.updatePartyNameRecentCall({ partyName: p.display_name, partyNumber })\n    }\n\n    this.phoneBooks = [...this.phoneBooks]\n  }\n  @action setPhonebook = (p: Phonebook | Phonebook[]) => {\n    if (!p) {\n      return\n    }\n    if (!Array.isArray(p)) {\n      p = [p]\n    }\n    if (this.offset > 0) {\n      this.phoneBooks = uniqBy([...this.phoneBooks, ...p], 'id')\n    } else {\n      this.phoneBooks = uniqBy([...p], 'id')\n    }\n  }\n  @computed private get phoneBooksMap() {\n    return arrToMap(this.phoneBooks, 'id', (u: Phonebook) => u) as {\n      [k: string]: Phonebook\n    }\n  }\n\n  getPhoneBookByPhoneNumber = (phoneNumber?: string) => {\n    if (!phoneNumber) {\n      return\n    }\n    return this.phoneBooks.filter(\n      p =>\n        p.info.$tel_mobile === phoneNumber ||\n        p.info.$tel_home === phoneNumber ||\n        p.info.$tel_work === phoneNumber,\n    )?.[0]\n  }\n  getParkNameByParkNumber = (parkNumber?: string) => {\n    if (!parkNumber) {\n      return\n    }\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    const arr =\n      cp.parks?.map((p, i) => ({\n        park: p,\n        name: cp.parkNames?.[i] || '',\n      })) || []\n    const parks = uniqBy(arr, 'park')\n    return parks.find(p => p.park === parkNumber)?.name\n  }\n  getPhonebookById = (id: string) => {\n    return this.phoneBooksMap[id]\n  }\n\n  clearStore = () => {\n    this.phoneBooks = []\n    this.ucUsers = []\n    this.pbxUsers = []\n    this.loading = false\n    this.hasLoadmore = false\n    this.showPickerItem = null\n    this.pbxBooks = []\n    this.alreadyLoadContactsFirstTime = false\n    this.selectedContactIds = {}\n  }\n}\n\nexport const contactStore = new ContactStore()\n\nexport const getPartyName = (partyNumber?: string) =>\n  (partyNumber && contactStore.getPbxUserById(partyNumber)?.name) ||\n  contactStore.getPhoneBookByPhoneNumber(partyNumber)?.display_name ||\n  contactStore.getParkNameByParkNumber(partyNumber)\n","import { lowerFirst } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC, useState } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  ScrollView,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport { getBottomSpace } from 'react-native-iphone-x-helper'\n\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { Footer } from './Footer'\nimport { Header } from './Header'\nimport { HeaderDropdownItem } from './HeaderDropdown'\nimport { Toast } from './Toast'\nimport { v } from './variables'\n\nconst DEFAULT_TOAST_MESSAGE = 'new message'\n\nconst css = StyleSheet.create({\n  Layout: {\n    flex: 1,\n    height: '100%',\n    backgroundColor: 'white',\n  },\n  Layout__transparent: {\n    backgroundColor: 'transparent',\n  },\n  Scroller: {\n    flexGrow: 1,\n  },\n  FooterSpaceInsideScroller: {\n    height: 15,\n  },\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\nexport const Layout: FC<\n  Partial<{\n    compact: boolean\n    containerOnContentSizeChange: Function\n    containerOnScroll: Function\n    containerRef: Function\n    description: string\n    dropdown: HeaderDropdownItem[]\n    fabOnBack(): void\n    fabOnNext(): void\n    fabOnNextText: string\n    fabRender(): void\n    menu: string\n    noScroll: boolean\n    onBack(): void\n    onCreate(): void\n    subMenu: string\n    title: string\n    transparent: boolean\n    isTab?: boolean\n    isShowToastMessage?: boolean\n    incomingMessage: string\n  }>\n> = observer(originalProps => {\n  const [headerOverflow, setHeaderOverflow] = useState(false)\n\n  const props = { ...originalProps } // Clone so it can be mutated\n\n  const Container = props.noScroll ? View : ScrollView\n  const containerProps = Object.entries(props).reduce((m, [k, vk]) => {\n    type K = keyof typeof props\n    if (k.startsWith('container')) {\n      delete props[k as K]\n      k = k.replace('container', '')\n      k = lowerFirst(k)\n      m[k] = vk as typeof props[K]\n    }\n    return m\n  }, {} as { [k: string]: unknown })\n\n  Object.assign(containerProps, {\n    style: [css.Layout, props.transparent && css.Layout__transparent],\n  })\n\n  if (!props.noScroll) {\n    Object.assign(containerProps, {\n      contentContainerStyle: [css.Scroller],\n      keyboardShouldPersistTaps: 'always',\n      onScroll: (e: NativeSyntheticEvent<NativeScrollEvent>) => {\n        // eslint-disable-next-line no-mixed-operators\n        if (e.nativeEvent.contentOffset.y > 60 !== headerOverflow) {\n          setHeaderOverflow(!headerOverflow)\n        }\n        originalProps.containerOnScroll?.(e)\n      },\n      scrollEventThrottle: 170,\n      showsVerticalScrollIndicator: false,\n    })\n  }\n\n  if (props.compact) {\n    // Fix android header transparent box shadow\n    props.transparent = false\n  }\n\n  // TODO put more document here\n  let headerSpace = 86 + 15\n  if (props.menu) {\n    headerSpace += 35\n  }\n  if (props.compact) {\n    headerSpace -= 46\n  }\n  // TODO put more document here\n  let footerSpace = getBottomSpace()\n  if (props.fabRender) {\n    footerSpace += 40\n  } else if (!RnKeyboard.isKeyboardShowing) {\n    if (props.menu) {\n      footerSpace += 48\n    }\n    if (props.fabOnNext) {\n      footerSpace += 56\n    }\n  }\n\n  return (\n    <>\n      <Container {...containerProps}>\n        <View style={{ height: headerSpace }} />\n        {props.children}\n        <View style={css.FooterSpaceInsideScroller} />\n      </Container>\n      {props.isShowToastMessage && (\n        <Toast\n          isVisible={props.isShowToastMessage}\n          title={props.incomingMessage || DEFAULT_TOAST_MESSAGE}\n          containerStyles={{\n            marginTop: headerSpace,\n            backgroundColor: 'yellow',\n          }}\n        />\n      )}\n      {!props.isTab && <View style={{ height: footerSpace }} />}\n      {<Footer {...props} menu={props.menu as string} />}\n      <Header {...props} compact={props.compact || headerOverflow} />\n    </>\n  )\n})\n","import jsonStableStringify from 'json-stable-stringify'\nimport { debounce, uniqBy } from 'lodash'\nimport { action, computed, observable, runInAction } from 'mobx'\nimport { Platform } from 'react-native'\nimport { v4 as newUuid } from 'uuid'\n\nimport { UcBuddy, UcBuddyGroup } from '../api/brekekejs'\nimport { SyncPnToken } from '../api/syncPnToken'\nimport { RnAsyncStorage } from '../components/Rn'\nimport { currentVersion } from '../components/variables'\nimport { arrToMap } from '../utils/arrToMap'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { compareSemVer } from './debugStore'\nimport { intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\nlet resolveFn: Function | undefined\nconst storagePromise = new Promise(resolve => {\n  resolveFn = resolve\n})\nexport type PNOptions = 'APNs' | 'LPC' | undefined\nexport type Account = {\n  id: string\n  pbxHostname: string\n  pbxPort: string\n  pbxTenant: string\n  pbxUsername: string\n  pbxPassword: string\n  pbxPhoneIndex: string // '' | '1' | '2' | '3' | '4'\n  pbxTurnEnabled: boolean\n  pbxLocalAllUsers?: boolean\n  pushNotificationEnabled: boolean\n  pushNotificationEnabledSynced?: boolean\n  parks?: string[]\n  parkNames?: string[]\n  ucEnabled: boolean\n  displayOfflineUsers?: boolean\n  navIndex: number\n  navSubMenus: string[]\n}\nexport type AccountData = {\n  id: string\n  accessToken: string\n  recentCalls: {\n    id: string\n    incoming: boolean\n    answered: boolean\n    partyName: string\n    partyNumber: string\n    created: string\n  }[]\n  recentChats: {\n    id: string // thread id\n    name: string\n    text: string\n    type: number\n    group: boolean\n    unread: boolean\n    created: string\n  }[]\n  pbxBuddyList?: {\n    screened: boolean\n    users: (UcBuddy | UcBuddyGroup)[]\n  }\n  palParams?: { [k: string]: string }\n  userAgent?: string\n  pnExpires?: string\n}\n\nclass AccountStore {\n  @observable appInitDone = false\n  @observable pnSyncLoadingMap: { [k: string]: boolean } = {}\n  waitStorageLoaded = () => storagePromise\n\n  @observable accounts: Account[] = []\n  @computed get accountsMap() {\n    return arrToMap(this.accounts, 'id', (p: Account) => p) as {\n      [k: string]: Account\n    }\n  }\n  @observable accountData: AccountData[] = []\n\n  genEmptyAccount = (): Account => ({\n    id: newUuid(),\n    pbxTenant: '',\n    pbxUsername: '',\n    pbxHostname: '',\n    pbxPort: '',\n    pbxPassword: '',\n    pbxPhoneIndex: '',\n    pbxTurnEnabled: false,\n    pushNotificationEnabled: Platform.OS === 'web' ? false : true,\n    parks: [] as string[],\n    parkNames: [] as string[],\n    ucEnabled: false,\n    navIndex: -1,\n    navSubMenus: [],\n  })\n\n  loadAccountsFromLocalStorage = async () => {\n    const arr = await RnAsyncStorage.getItem('_api_profiles')\n    let d: TAccountDataInStorage | undefined\n    if (arr && !Array.isArray(arr)) {\n      try {\n        d = JSON.parse(arr)\n      } catch (err) {\n        d = undefined\n      }\n    }\n    if (d) {\n      let { profileData: accountData, profiles: accounts } = d\n      if (Array.isArray(d)) {\n        // Lower version compatible\n        accounts = d\n        accountData = []\n      }\n      // Set tenant to '-' if empty\n      accounts.forEach(a => {\n        a.pbxTenant = a.pbxTenant || '-'\n      })\n      runInAction(() => {\n        this.accounts = accounts.filter(a => a.id && a.pbxUsername)\n        if (accounts.length !== this.accounts.length) {\n          console.error(\n            'loadAccountsFromLocalStorage error missing id or pbxUsername',\n          )\n        }\n        this.accountData = uniqBy(accountData, 'id')\n      })\n    }\n    resolveFn?.()\n    resolveFn = undefined\n  }\n  private saveAccountsToLocalStorage = async () => {\n    try {\n      const profiles = this.accounts.filter(a => a.id && a.pbxUsername)\n      if (profiles.length !== this.accounts.length) {\n        console.error(\n          'saveAccountsToLocalStorage error missing id or pbxUsername',\n        )\n      }\n      await RnAsyncStorage.setItem(\n        '_api_profiles',\n        JSON.stringify({\n          profiles,\n          profileData: this.accountData,\n        }),\n      )\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to save accounts to local storage`,\n        err: err as Error,\n      })\n    }\n  }\n  private _saveAccountsToLocalStorageDebounced = debounce(\n    this.saveAccountsToLocalStorage,\n    100,\n    { maxWait: 1000 },\n  )\n  saveAccountsToLocalStorageDebounced = () => {\n    // Set tenant to '-' if empty\n    this.accounts.forEach(a => {\n      a.pbxTenant = a.pbxTenant || '-'\n    })\n    return this._saveAccountsToLocalStorageDebounced()\n  }\n\n  @action upsertAccount = (p: Partial<Account>) => {\n    const a = this.accounts.find(_ => _.id === p.id)\n    if (!a) {\n      this.accounts.push(p as Account)\n    } else {\n      const clonedA = { ...a } // Clone before assign\n      Object.assign(a, p)\n      // TODO handle case change phone index\n      if (getAccountUniqueId(clonedA) !== getAccountUniqueId(a)) {\n        clonedA.pushNotificationEnabled = false\n        SyncPnToken().sync(clonedA, {\n          noUpsert: true,\n        })\n      } else if (\n        typeof p.pushNotificationEnabled === 'boolean' &&\n        p.pushNotificationEnabled !== clonedA.pushNotificationEnabled\n      ) {\n        a.pushNotificationEnabledSynced = false\n        SyncPnToken().sync(a, {\n          onError: err => {\n            RnAlert.error({\n              message: intlDebug`Failed to sync Push Notification settings for ${a.pbxUsername}`,\n              err,\n            })\n            a.pushNotificationEnabled = clonedA.pushNotificationEnabled\n            a.pushNotificationEnabledSynced =\n              clonedA.pushNotificationEnabledSynced\n            this.saveAccountsToLocalStorageDebounced()\n          },\n        })\n      }\n    }\n    this.saveAccountsToLocalStorageDebounced()\n  }\n  @action removeAccount = (id: string) => {\n    const a = this.accounts.find(_ => _.id === id)\n    this.accounts = this.accounts.filter(_ => _.id !== id)\n    this.saveAccountsToLocalStorageDebounced()\n    if (a) {\n      a.pushNotificationEnabled = false\n      SyncPnToken().sync(a, {\n        noUpsert: true,\n      })\n    }\n  }\n\n  find = async (a: Partial<Account>) => {\n    await storagePromise\n    // This accept partial compare: only pbxUsername is required to find\n    // This behavior is needed because returned data may be incompleted\n    // For eg: PN data doesnt have all the fields to compare\n    return accountStore.accounts.find(_ => compareAccount(_, a))\n  }\n  findByPn = (n: ParsedPn) =>\n    this.find({\n      pbxUsername: n.to,\n      pbxTenant: n.tenant,\n      pbxHostname: n.pbxHostname,\n      pbxPort: n.pbxPort,\n    })\n\n  findData = async (a?: AccountUnique) => {\n    await storagePromise\n    return this.findDataSync(a)\n  }\n  findDataSync = (a?: AccountUnique) => {\n    if (!a || !a.pbxUsername || !a.pbxTenant || !a.pbxHostname || !a.pbxPort) {\n      return\n    }\n    const id = getAccountUniqueId(a)\n    return this.accountData.find(d => d.id === id)\n  }\n  findDataByPn = async (n: ParsedPn) => {\n    const a = await this.findByPn(n)\n    if (!a) {\n      return\n    }\n    return this.findData(a)\n  }\n\n  findDataAsync = async (a: AccountUnique): Promise<AccountData> => {\n    // Async to use in mobx to not trigger data change in render\n    // This method will update the data if not found in storage\n    const d = await this.findData(a)\n    if (d) {\n      return d\n    }\n    const newD = {\n      id: getAccountUniqueId(a),\n      accessToken: '',\n      recentCalls: [],\n      recentChats: [],\n      pbxBuddyList: undefined,\n    }\n    await waitTimeout(17)\n    this.updateAccountData(newD)\n    return newD\n  }\n\n  updateAccountData = (d: AccountData) => {\n    const arr = [d, ...this.accountData.filter(d2 => d2.id !== d.id)]\n    if (arr.length > 20) {\n      arr.pop()\n    }\n    runInAction(() => {\n      this.accountData = arr\n    })\n    this.saveAccountsToLocalStorageDebounced()\n  }\n}\n\nexport type AccountUnique = Pick<\n  Account,\n  'pbxUsername' | 'pbxTenant' | 'pbxHostname' | 'pbxPort'\n>\nexport const getAccountUniqueId = (a: AccountUnique) =>\n  jsonStableStringify({\n    u: a.pbxUsername,\n    t: a.pbxTenant || '-',\n    h: a.pbxHostname,\n    p: a.pbxPort,\n  })\n\n// compareAccount in case data is fragment\nconst compareField = (p1: object, p2: object, field: keyof AccountUnique) => {\n  const v1 = p1[field as keyof typeof p1]\n  const v2 = p2[field as keyof typeof p2]\n  return !v1 || !v2 || v1 === v2\n}\nexport const compareAccount = (p1: { pbxUsername: string }, p2: object) => {\n  return (\n    p1.pbxUsername && // Must have pbxUsername\n    compareField(p1, p2, 'pbxUsername') &&\n    compareField(p1, p2, 'pbxTenant') &&\n    compareField(p1, p2, 'pbxHostname') &&\n    compareField(p1, p2, 'pbxPort')\n  )\n}\n\nexport const accountStore = new AccountStore()\nexport type RecentCall = AccountData['recentCalls'][0]\n\ntype TAccountDataInStorage = {\n  profiles: Account[]\n  profileData: AccountData[]\n}\n\ntype LastSignedInId = {\n  id: string\n  at: number\n  version: string\n  logoutPressed?: boolean\n  uptime?: number\n  autoSignInBrekekePhone?: boolean\n}\n\nexport const getLastSignedInId = async (\n  checkAutoSignInBrekekePhone?: boolean,\n) => {\n  const j = await RnAsyncStorage.getItem('lastSignedInId')\n  let d = undefined as any as LastSignedInId\n  try {\n    d = j && JSON.parse(j)\n  } catch (err) {}\n  if (d && 'h' in d) {\n    // backward compatibility json is the unique account id\n    d = j as any as LastSignedInId\n  }\n  if (!d?.id) {\n    d = {\n      id: (d || j || '') as any as string,\n      at: Date.now(),\n      version: currentVersion,\n    }\n  }\n  if (!checkAutoSignInBrekekePhone) {\n    return d\n  }\n  if (d.logoutPressed || compareSemVer(currentVersion, d.version) > 0) {\n    d.autoSignInBrekekePhone = false\n    return d\n  }\n  d.uptime = await BrekekeUtils.systemUptimeMs()\n  d.autoSignInBrekekePhone = d.uptime > 0 && d.uptime > Date.now() - d.at\n  return d\n}\nexport const saveLastSignedInId = async (id: string | false) => {\n  if (id === false) {\n    const d = await getLastSignedInId()\n    d.logoutPressed = true\n    await RnAsyncStorage.setItem('lastSignedInId', JSON.stringify(d))\n    return\n  }\n  const j = JSON.stringify({\n    id,\n    at: Date.now(),\n    version: currentVersion,\n  })\n  await RnAsyncStorage.setItem('lastSignedInId', j)\n}\n","import { Platform } from 'react-native'\nimport BgTimer from 'react-native-background-timer'\n\nexport type TBackgroundTimer = {\n  setTimeout(callback: () => void, timeout: number): number\n  clearTimeout(timeoutId: number): void\n  setInterval(callback: () => void, timeout: number): number\n  clearInterval(intervalId: number): void\n}\n\nexport const BackgroundTimer: TBackgroundTimer =\n  Platform.OS === 'web' ? window : BgTimer\n","import PushNotificationIOS from '@react-native-community/push-notification-ios'\nimport { sortBy, uniqBy } from 'lodash'\nimport { computed, observable } from 'mobx'\nimport { AppState, Platform } from 'react-native'\nimport FCM from 'react-native-fcm'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport { arrToMap } from '../utils/arrToMap'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { rnVibrate } from '../utils/rnVibrate'\nimport { saveBlobFile } from '../utils/saveBlob'\nimport { webPlayDing } from '../utils/webPlayDing'\nimport { webShowNotification } from '../utils/webShowNotification'\nimport { accountStore } from './accountStore'\nimport { getAuthStore, waitUc } from './authStore'\nimport { getCallStore } from './callStore'\nimport { getPartyName } from './contactStore'\nimport { intl } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\nimport { RnStacker } from './RnStacker'\n\nexport type ChatMessage = {\n  id: string\n  text?: string\n  file?: string\n  type: number\n  creator: string\n  created: number\n  conf_id?: string\n}\nexport type ChatFile = {\n  id: string\n  name: string\n  incoming: boolean\n  size: number\n  state: string // 'waiting' | 'started' | 'success' | 'stopped' | 'failure'\n  transferPercent: number\n  fileType: string\n  url?: string\n  target?: ChatTarget\n  topic_id: string\n  save?: 'started' | 'success' | 'failure'\n}\nexport type ChatTarget = {\n  tenant: string\n  user_id: string\n}\nexport type ChatMessageConfig = {\n  id: string\n  isUnread: boolean\n  isGroup: boolean\n  allMessagesLoaded?: boolean\n}\nexport type ChatGroup = {\n  id: string\n  name: string\n  inviter: string\n  jointed: boolean\n  members: string[]\n  webchat?: Conference // check group is webchat\n}\nexport const FileEvent = {\n  onFileReceived: 'onFileReceived',\n  onFileProgress: 'onFileProgress',\n  onFileFinished: 'onFileFinished',\n}\nexport const TIMEOUT_TRANSFER_IMAGE = 60000\nexport const TIMEOUT_TRANSFER_VIDEO = 180000\n\nclass ChatStore {\n  timeoutTransferImage: { [k: string]: number } = {}\n\n  @observable messagesByThreadId: { [k: string]: ChatMessage[] } = {}\n  getMessagesByThreadId = (id: string) => this.messagesByThreadId[id] || []\n\n  @observable threadConfig: { [k: string]: ChatMessageConfig } = {}\n  @computed get unreadCount() {\n    const idMap: { [k: string]: boolean } = {}\n    const l1 = filterTextOnly(\n      Object.values(this.threadConfig).filter(v => {\n        idMap[v.id] = true\n        return v.isUnread && this.getMessagesByThreadId(v.id).length\n      }) as any,\n    ).length\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const l2 = filterTextOnly(\n      d?.recentChats.filter(c => !idMap[c.id] && c.unread),\n    ).length\n    return l1 + l2\n  }\n  getNumberWebchatNoti = () =>\n    this.groups.filter(\n      s =>\n        s.webchat &&\n        s.webchat.conf_status === Constants.CONF_STATUS_INVITED_WEBCHAT,\n    )?.length\n\n  // threadId can be uc user id or group id\n  // TODO threadId can be duplicated between them\n  @computed get threadIdsOrderedByRecent() {\n    return sortBy(\n      Object.keys(this.messagesByThreadId),\n      k => this.getMessagesByThreadId(k)[0]?.created || -1,\n    )\n  }\n  getWebChatInactiveIds() {\n    return this.groups\n      .filter(\n        gr =>\n          gr.webchat && gr.webchat.conf_status !== Constants.CONF_STATUS_JOINED,\n      )\n      .map(item => item.id)\n  }\n  isWebchatJoined(conf_id: string) {\n    return this.groups\n      .filter(\n        gr =>\n          gr.webchat && gr.webchat.conf_status === Constants.CONF_STATUS_JOINED,\n      )\n      .some(w => w.id === conf_id)\n  }\n  isWebchat(conf_id: string) {\n    return this.groups.filter(gr => gr.webchat).some(w => w.id === conf_id)\n  }\n\n  pushChatNotification = (\n    title: string,\n    body: string,\n    threadId?: string,\n    isGroupChat?: boolean,\n  ) => {\n    if (Platform.OS === 'web') {\n      return\n    }\n    if (Platform.OS === 'android') {\n      FCM.presentLocalNotification({\n        title,\n        body,\n        threadId,\n        isGroupChat,\n        number: 0,\n        sound: 'ding.mp3',\n        priority: 'high',\n        show_in_foreground: true,\n        local_notification: true,\n        wake_screen: false,\n        ongoing: false,\n        lights: true,\n        channel: `channel-${Date.now()}`,\n        icon: 'ic_launcher',\n        id: `message-${Date.now()}`,\n        pre_app_state: AppState.currentState,\n        my_custom_data: 'local_notification',\n        is_local_notification: 'local_notification',\n      })\n    } else {\n      PushNotificationIOS.getApplicationIconBadgeNumber(badge => {\n        badge = Number(badge) || 0\n        PushNotificationIOS.addNotificationRequest({\n          id: `message-${Date.now()}`,\n          title,\n          body,\n          badge,\n          sound: 'ding.mp3',\n          userInfo: {\n            id: `message-${Date.now()}`,\n            aps: {\n              title,\n              threadId,\n              isGroupChat,\n              body,\n              my_custom_data: 'local_notification',\n              pre_app_state: AppState.currentState,\n              local_notification: true,\n              is_local_notification: 'local_notification',\n            },\n          },\n        })\n      })\n    }\n  }\n  pushMessages = (\n    threadId: string,\n    m: ChatMessage | ChatMessage[],\n    isUnread = false,\n  ) => {\n    const isGroup = this.groups.some(gr => gr.id === threadId)\n    const isWebchatJoined = this.isWebchatJoined(threadId)\n    const isWebchat = this.isWebchat(threadId)\n    if (!Array.isArray(m)) {\n      m = [m]\n    }\n    const messages = this.getMessagesByThreadId(threadId)\n    messages.push(...m)\n    this.messagesByThreadId[threadId] = sortBy(\n      uniqBy(messages, 'id'),\n      'created',\n    )\n    const a2 = filterTextOnly(m)\n    if (!a2.length || (isWebchat && !isWebchatJoined)) {\n      return\n    }\n    this.updateThreadConfig(threadId, isGroup, {\n      isUnread,\n    })\n\n    // show chat in-app notification\n    let name = ''\n    if (isGroup) {\n      name = chatStore.getGroupById(threadId)?.name\n    } else {\n      // user not set username\n      name = getPartyName(threadId) || threadId\n    }\n\n    // show desktop notification for Web platform\n    if (\n      Platform.OS === 'web' &&\n      this.getThreadConfig(threadId).isUnread &&\n      m.length === 1\n    ) {\n      const messageNotification = name + ': ' + m[0]?.text || ''\n      webShowNotification(messageNotification, name)\n    }\n\n    if (m.length === 1 && AppState.currentState !== 'active') {\n      this.pushChatNotification(name, m[0]?.text || '', threadId, isGroup)\n    }\n    // play chat notification sound & vibration\n    const cs = getCallStore()\n    const isTalking =\n      cs.calls.some(c => c.answered) ||\n      Object.values(cs.callkeepActionMap).some(a => a === 'answerCall')\n    const s = RnStacker.stacks[RnStacker.stacks.length - 1] as any as {\n      groupId?: string\n      buddy?: string\n      name?: string\n    }\n    const shouldPlayChatNotificationSoundVibration =\n      !isTalking &&\n      AppState.currentState === 'active' &&\n      (isGroup\n        ? !(s?.name === 'PageChatGroupDetail' && s?.groupId === threadId)\n        : !(s?.name === 'PageChatDetail' && s?.buddy === threadId))\n    if (shouldPlayChatNotificationSoundVibration) {\n      this.playChatNotificationSoundVibration()\n    }\n  }\n\n  handleMoveToChatGroupDetail = async (groupId: string) => {\n    const as = getAuthStore()\n    const ca = as.getCurrentAccount()\n    if (!ca?.ucEnabled) {\n      // this should not happen\n      const msg = !ca ? 'not signed in' : 'UC is disabled'\n      throw new Error(`Failed to handle UC group chat: ${msg}`)\n    }\n    if (as.ucState !== 'success') {\n      RnAlert.prompt({\n        title: '...',\n        message: intl`Connecting to ${'UC'}...`,\n        confirmText: 'OK',\n        dismissText: false,\n      })\n      await waitUc()\n      RnAlert.dismiss()\n    }\n    const nav = Nav()\n    const i: Conference = uc.getChatGroupInfo(groupId)\n    const status = i.conf_status\n    const name = i.subject || groupId\n    if (status === Constants.CONF_STATUS_INACTIVE) {\n      RnAlert.prompt({\n        title: name,\n        message: intl`You have rejected this group or it has been deleted`,\n        confirmText: 'OK',\n        dismissText: false,\n      })\n      const d = await as.getCurrentDataAsync()\n      d.recentChats = d.recentChats.filter(c => c.id !== groupId)\n      accountStore.saveAccountsToLocalStorageDebounced()\n    } else if (status === Constants.CONF_STATUS_INVITED) {\n      RnAlert.prompt({\n        title: name,\n        message: intl`Do you want to join this group?`,\n        confirmText: intl`Join`,\n        onConfirm: async () => {\n          await uc.joinChatGroup(groupId)\n          nav.customPageIndex = nav.goToPageChatGroupDetail\n          nav.goToPageChatGroupDetail({ groupId })\n        },\n        onDismiss: () => {\n          uc.leaveChatGroup(groupId).catch(() => {})\n        },\n      })\n    } else {\n      nav.customPageIndex = nav.goToPageChatGroupDetail\n      nav.goToPageChatGroupDetail({ groupId })\n    }\n  }\n  @observable chatNotificationSoundRunning: boolean = false\n  private playChatNotificationSoundVibration = () => {\n    if (Platform.OS === 'web') {\n      webPlayDing()\n      return\n    }\n    if (this.chatNotificationSoundRunning) {\n      return\n    }\n    rnVibrate()\n    this.chatNotificationSoundRunning = true\n    BackgroundTimer.setTimeout(() => {\n      this.chatNotificationSoundRunning = false\n    }, 700)\n  }\n\n  removeWebchatItem = (conf_id: string) => {\n    this.removeGroup(conf_id)\n  }\n\n  getThreadConfig = (id: string) =>\n    this.threadConfig[id] || ({} as ChatMessageConfig)\n  updateThreadConfig = (\n    id: string,\n    isGroup: boolean,\n    c: Partial<ChatMessageConfig>,\n  ) => {\n    this.threadConfig = {\n      ...this.threadConfig,\n      [id]: {\n        ...this.getThreadConfig(id),\n        ...c,\n        id,\n        isGroup,\n      },\n    }\n  }\n\n  @observable private filesMap: { [k: string]: ChatFile } = {}\n\n  download = (f: ChatFile) => {\n    Object.assign(f, { save: 'started' })\n    chatStore.upsertFile(f)\n    saveBlobFile(f.id, f.topic_id, f.fileType)\n      .then(url => {\n        this.filesMap[f.id] = Object.assign(this.filesMap[f.id], {\n          url,\n          save: 'success',\n        })\n      })\n      .catch(() => {\n        this.filesMap[f.id] = Object.assign(this.filesMap[f.id], {\n          url: '',\n          save: 'failure',\n        })\n      })\n  }\n  startTimeout = (id: string, fileType?: string) => {\n    if (!this.timeoutTransferImage[id]) {\n      this.timeoutTransferImage[id] = BackgroundTimer.setTimeout(\n        () => {\n          this.clearTimeout(id)\n          uc.rejectFile({ id })\n        },\n        fileType === 'video' ? TIMEOUT_TRANSFER_VIDEO : TIMEOUT_TRANSFER_IMAGE,\n      )\n    }\n  }\n  clearTimeout = (id: string) => {\n    if (this.timeoutTransferImage[id]) {\n      BackgroundTimer.clearTimeout(this.timeoutTransferImage[id])\n      delete this.timeoutTransferImage[id]\n    }\n  }\n  updateTimeout = (id: string) => {\n    if (!!this.timeoutTransferImage[id]) {\n      this.clearTimeout(id)\n      this.startTimeout(id)\n    }\n  }\n\n  upsertFile = (\n    f: Partial<ChatFile> & Pick<ChatFile, 'id'>,\n    fromEvent?: string,\n  ) => {\n    const f0 = this.filesMap[f.id]\n    if (!f0) {\n      this.filesMap[f.id] = f as ChatFile\n      const fileTypeImageVideo =\n        f.fileType === 'image' || f.fileType === 'video'\n      if (f.incoming && fileTypeImageVideo) {\n        this.download(f as ChatFile)\n      }\n      this.startTimeout(f.id, f.fileType)\n    } else {\n      const state =\n        f.state === 'stopped' || f.state === 'success' || f.state === 'failure'\n      this.filesMap[f.id] = Object.assign(f0, f)\n      if (fromEvent && fromEvent === FileEvent.onFileProgress) {\n        this.updateTimeout(f.id)\n      } else {\n        if (state) {\n          this.clearTimeout(f.id)\n        }\n      }\n    }\n  }\n  removeFile = (id: string) => {\n    delete this.filesMap[id]\n  }\n  getFileById = (id?: string) => (id ? this.filesMap[id] : undefined)\n\n  @observable groups: ChatGroup[] = []\n  upsertGroup = (g: Partial<ChatGroup> & Pick<ChatGroup, 'id'>) => {\n    // add default webchatMessages\n    const g0 = this.getGroupById(g.id)\n    if (g0) {\n      Object.assign(g0, g)\n    } else {\n      this.groups.push(g as ChatGroup)\n    }\n    this.groups = [...this.groups]\n  }\n  removeGroup = (id: string) => {\n    delete this.messagesByThreadId[id]\n    delete this.threadConfig[id]\n    this.groups = this.groups.filter(gr => gr.id !== id)\n  }\n  @computed private get groupsMap() {\n    return arrToMap(this.groups, 'id', (g: ChatGroup) => g) as {\n      [k: string]: ChatGroup\n    }\n  }\n  getGroupById = (id: string) => {\n    return this.groupsMap[id]\n  }\n\n  clearStore = () => {\n    this.messagesByThreadId = {}\n    this.threadConfig = {}\n    this.groups = []\n    this.filesMap = {}\n    this.timeoutTransferImage = {}\n  }\n}\n\nexport const chatStore = new ChatStore()\n","import 'brekekejs/lib/jsonrpc'\n\nimport UCClient0 from 'brekekejs/lib/ucclient'\nimport EventEmitter from 'eventemitter3'\nimport { Platform } from 'react-native'\n\nimport { Account } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatFile } from '../stores/chatStore'\nimport { UcUser } from '../stores/contactStore'\nimport { formatFileType } from '../utils/formatFileType'\nimport {\n  UcBuddy,\n  UcBuddyGroup,\n  UcChatClient,\n  UcConference,\n  UcConstants,\n  UcListeners,\n  UcLogger,\n  UcReceieveUnreadText,\n  UcResponseLeaveConf,\n  UcSearchTexts,\n  UcSendFile,\n  UcSendFiles,\n  UcWebchatConferenceText,\n} from './brekekejs'\n\nconst { ChatClient, Logger, Constants } = UCClient0 as {\n  ChatClient: UcChatClient\n  Logger: UcLogger\n  Constants: UcConstants\n}\n\nexport { ChatClient, Constants, Logger }\n\nexport const isUcBuddy = (u: object): u is UcBuddy => {\n  return 'user_id' in u && 'group' in u\n}\n\nconst codeMapUserStatus = {\n  0: 'offline',\n  1: 'online',\n  2: 'idle',\n  3: 'busy',\n}\nconst getUserStatusFromCode = (code: number) =>\n  codeMapUserStatus[code as keyof typeof codeMapUserStatus] ||\n  codeMapUserStatus['0']\n\nconst codeMapFileState = {\n  0: 'waiting',\n  1: 'waiting',\n  2: 'started',\n  3: 'success',\n  4: 'stopped',\n  5: 'stopped',\n  6: 'failure',\n}\nconst getFileStateFromCode = (code: number) =>\n  codeMapFileState[code as keyof typeof codeMapFileState] ||\n  codeMapFileState['0']\n\nexport class UC extends EventEmitter {\n  client: UcChatClient\n  constructor() {\n    super()\n    const logger = new Logger('all')\n    this.client = new ChatClient(logger)\n\n    this.client.setEventListeners({\n      forcedSignOut: this.onConnectionStopped,\n      buddyStatusChanged: this.onUserUpdated,\n      receivedTyping: undefined,\n      receivedText: this.onTextReceived,\n      fileReceived: this.onFileReceived,\n      fileInfoChanged: this.onFileProgress,\n      fileTerminated: this.onFileFinished,\n      invitedToConference: this.onGroupInvited,\n      conferenceMemberChanged: this.onGroupUpdated,\n    })\n  }\n\n  onConnectionStopped: UcListeners['forcedSignOut'] = ev => {\n    this.emit('connection-stopped', ev)\n  }\n\n  onUserUpdated: UcListeners['buddyStatusChanged'] = ev => {\n    if (!ev) {\n      return\n    }\n\n    this.emit('user-updated', {\n      id: ev.user_id,\n      name: ev.name,\n      avatar: ev.profile_image_url,\n      status: getUserStatusFromCode(ev.status),\n      statusText: ev.display,\n    })\n  }\n\n  onTextReceived: UcListeners['receivedText'] = ev => {\n    if (!ev || !ev.sender) {\n      return\n    }\n    // handle update message on list webchat\n    // this.emit('received-webchat-text', {\n    //   conf_id: ev.conf_id,\n    //   text: ev.text,\n    // })\n\n    ev.conf_id\n      ? this.emit('group-chat-created', {\n          id: ev.received_text_id,\n          group: ev.conf_id,\n          text: ev.text,\n          creator: ev.sender.user_id,\n          created: ev.sent_ltime,\n          conf_id: ev.conf_id,\n        })\n      : this.emit('buddy-chat-created', {\n          id: ev.received_text_id,\n          text: ev.text,\n          creator: ev.sender.user_id,\n          created: ev.sent_ltime,\n        })\n  }\n\n  onFileReceived: UcListeners['fileReceived'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n    const fileType = formatFileType(ev.fileInfo.name)\n    const file = {\n      id: ev.fileInfo.file_id,\n      name: ev.fileInfo.name,\n      size: ev.fileInfo.size,\n      incoming: true,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n      fileType,\n      topic_id: ev.topic_id,\n    }\n\n    this.emit('file-received', file)\n\n    ev.conf_id\n      ? this.emit('group-chat-created', {\n          id: ev.text_id,\n          creator: ev.fileInfo.target.user_id,\n          group: ev.conf_id,\n          file: file.id,\n          text: file.name,\n          created: ev.sent_ltime,\n        })\n      : this.emit('buddy-chat-created', {\n          id: ev.text_id,\n          creator: ev.fileInfo.target.user_id,\n          file: file.id,\n          text: file.name,\n          created: ev.sent_ltime,\n        })\n  }\n\n  onFileProgress: UcListeners['fileInfoChanged'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n\n    this.emit('file-progress', {\n      id: ev.fileInfo.file_id,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n    })\n  }\n\n  onFileFinished: UcListeners['fileTerminated'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n\n    this.emit('file-finished', {\n      id: ev.fileInfo.file_id,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n    })\n  }\n\n  onGroupInvited: UcListeners['invitedToConference'] = ev => {\n    if (!ev || !ev.conference) {\n      return\n    }\n    // webchat: invited from guest\n    const isWebchat = ev.conference.invite_properties?.webchatfromguest\n    this.emit('chat-group-invited', {\n      id: ev.conference.conf_id,\n      name: ev.conference.subject || ev.conference.creator.user_name || '',\n      inviter: ev.conference.from.user_id,\n      members: ev.conference.user || [],\n      webchat: isWebchat ? ev.conference : null,\n    })\n  }\n\n  onGroupUpdated: UcListeners['conferenceMemberChanged'] = ev => {\n    if (!ev || !ev.conference) {\n      return\n    }\n    // webchat: update webchat\n    const isWebchat = ev.conference.invite_properties?.webchatfromguest\n    const name =\n      (ev.conference?.subject || ev.conference.creator?.user_name || '') +\n      (isWebchat ? ' - Webchat' : '')\n    if (ev.conference.conf_status === 0) {\n      // logic if webchat user will be close via button\n      if (isWebchat) {\n        this.emit('chat-group-updated', {\n          id: ev.conference.conf_id,\n          name,\n          jointed: false,\n          webchat: isWebchat ? ev.conference : null,\n        })\n      } else {\n        this.emit('chat-group-revoked', {\n          id: ev.conference.conf_id,\n        })\n      }\n      return\n    }\n\n    this.emit('chat-group-updated', {\n      id: ev.conference.conf_id,\n      name,\n      jointed: ev.conference.conf_status === 2,\n      members: (ev.conference.user || [])\n        .filter(user => user.conf_status === 2)\n        .map(user => user.user_id),\n      webchat: isWebchat ? ev.conference : null,\n    })\n  }\n\n  connect = (a: Account, ucHost: string) => {\n    if (ucHost.indexOf(':') < 0) {\n      ucHost += ':443'\n    }\n    const ucScheme = ucHost.endsWith(':80') ? 'http' : 'https'\n    return new Promise((resolve, reject) =>\n      this.client.signIn(\n        `${ucScheme}://${ucHost}`,\n        'uc',\n        a.pbxTenant,\n        a.pbxUsername,\n        a.pbxPassword,\n        undefined,\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  disconnect = () => {\n    this.client.signOut()\n  }\n\n  me = () => {\n    const profile = this.client.getProfile() || {}\n    const status = this.client.getStatus() || {}\n\n    return {\n      id: profile.user_id,\n      name: profile.name,\n      avatar: profile.profile_image_url,\n      status: getUserStatusFromCode(status.status),\n      statusText: status.display,\n    }\n  }\n\n  saveProperties = (screened: boolean, user: (UcBuddyGroup | UcBuddy)[]) => {\n    return new Promise((resolve, reject) =>\n      this.client.saveProperties(\n        null,\n        null,\n        { screened, user },\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  setStatus = (status: string, statusText: string) => {\n    let num_status = '0'\n    if (status === 'online') {\n      num_status = '1'\n    }\n    if (status === 'busy') {\n      num_status = '3'\n    }\n    return new Promise((resolve, reject) =>\n      this.client.changeStatus(\n        num_status,\n        statusText,\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  getUsers = () => {\n    const buddyList = this.client.getBuddylist()\n    if (!buddyList || !Array.isArray(buddyList.user)) {\n      return []\n    }\n\n    const buddyListFiltered: UcUser[] = []\n\n    buddyList.user.forEach(user => {\n      if (isUcBuddy(user)) {\n        buddyListFiltered.push({\n          id: user.user_id,\n          name: user.name,\n          avatar: user.profile_image_url,\n          status: codeMapUserStatus['0'], // 'offline'\n          statusText: '',\n        })\n      }\n    })\n    return buddyListFiltered\n  }\n\n  getProfile = () => {\n    return this.client.getProfile()\n  }\n\n  getConfigProperties = () => {\n    const s = getAuthStore()\n    if (!s.ucConfig) {\n      s.ucConfig = this.client.getConfigProperties()\n    }\n    return s.ucConfig\n  }\n\n  readUnreadChats = async (id: string) => {\n    const res: UcReceieveUnreadText = await new Promise((resolve, reject) => {\n      this.client.receiveUnreadText(resolve, reject)\n    })\n    const readRequiredMessageIds = res.messages\n      .filter(msg => msg.requires_read && msg.sender?.user_id === id)\n      .map(msg => msg.received_text_id)\n    this.client.readText(readRequiredMessageIds)\n  }\n\n  getUnreadChats = async () => {\n    const res: UcReceieveUnreadText = await new Promise((resolve, reject) => {\n      this.client.receiveUnreadText(resolve, reject)\n    })\n\n    if (!res || !Array.isArray(res.messages)) {\n      return []\n    }\n\n    const readRequiredMessageIds = res.messages\n      .filter(msg => msg.requires_read)\n      .map(msg => msg.received_text_id)\n    this.client.readText(readRequiredMessageIds)\n\n    return res.messages.map(msg => ({\n      id: msg.received_text_id,\n      text: msg.text,\n      creator: msg.sender && msg.sender.user_id,\n      created: msg.sent_ltime,\n    }))\n  }\n\n  getBuddyChats = async (\n    buddy: string,\n    opts: {\n      max?: number\n      begin?: number\n      end?: number\n      asc?: boolean\n    } = {},\n  ) => {\n    const res: UcSearchTexts = await new Promise((resolve, reject) =>\n      this.client.searchTexts(\n        {\n          user_id: buddy,\n          max: opts.max,\n          begin: opts.begin,\n          end: opts.end,\n          asc: opts.asc,\n        },\n        resolve,\n        reject,\n      ),\n    )\n\n    if (!res || !Array.isArray(res.logs)) {\n      return []\n    }\n\n    return res.logs.map(l => {\n      return {\n        id: l.log_id,\n        text: l.content,\n        type: l.ctype,\n        creator: l.sender.user_id,\n        created: l.ltime,\n      }\n    })\n  }\n\n  getGroupChats = async (\n    group: string,\n    opts: {\n      max?: number\n      begin?: number\n      end?: number\n      asc?: boolean\n    } = {},\n  ) => {\n    const res: UcSearchTexts = await new Promise((resolve, reject) =>\n      this.client.searchTexts(\n        {\n          conf_id: group,\n          max: opts.max,\n          begin: opts.begin,\n          end: opts.end,\n          asc: opts.asc,\n        },\n        resolve,\n        reject,\n      ),\n    )\n\n    if (!res || !Array.isArray(res.logs)) {\n      return []\n    }\n\n    return res.logs.map(l => ({\n      id: l.log_id,\n      text: l.content,\n      type: l.ctype,\n      creator: l.sender.user_id,\n      created: l.ltime,\n    }))\n  }\n\n  sendBuddyChatText = (buddy: string, text: string) => {\n    return new Promise((resolve, reject) =>\n      this.client.sendText(\n        text,\n        {\n          user_id: buddy,\n        },\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n            ctype: Constants.CTYPE_TEXT,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  sendCallResult = (duration: number, target: string) => {\n    const text = JSON.stringify({ talklen: duration })\n    return new Promise((resolve, reject) =>\n      this.client.sendCallResult(\n        { user_id: target },\n        text,\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n            ctype: Constants.CTYPE_CALL_RESULT,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  sendGroupChatText = (group: string, text: string) => {\n    return new Promise((resolve, reject) =>\n      this.client.sendConferenceText(\n        text,\n        group,\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  createChatGroup = async (name: string, members: string[] = []) => {\n    const res: {\n      conference: UcConference\n    } = await new Promise((resolve, reject) => {\n      this.client.createConference(name, members, resolve, reject)\n    })\n\n    return {\n      id: res.conference.conf_id,\n      name: res.conference.subject,\n      jointed: true,\n    }\n  }\n\n  joinChatGroup = async (group: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        group,\n        undefined,\n        () => resolve(undefined),\n        reject,\n      )\n    })\n\n    return {\n      id: group,\n    }\n  }\n\n  getChatGroupInfo = (conf_id: string) => {\n    return this.client.getConference(conf_id)\n  }\n  answerWebchatConference = async (conf_id: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        conf_id,\n        { exclusive: true },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n  joinWebchatConference = async (conf_id: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        conf_id,\n        { exclusive: false },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n  leaveChatConference = async (conf_id: string, rejoinable: boolean) => {\n    const result: UcResponseLeaveConf = await new Promise((resolve, reject) => {\n      this.client.leaveConference({ conf_id, rejoinable }, resolve, reject)\n    })\n    return result\n  }\n  leaveChatGroup = async (group: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.leaveConference(\n        { conf_id: group, rejoinable: false },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n\n    return {\n      id: group,\n    }\n  }\n\n  inviteChatGroupMembers = (group: string, members: string[]) => {\n    return new Promise((resolve, reject) => {\n      this.client.inviteToConference(\n        group,\n        members,\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n\n  acceptFile = (file: string) => {\n    const res = new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest()\n      xhr.responseType = 'blob'\n\n      xhr.onload = function () {\n        if (this.status === 200) {\n          resolve(this['response'])\n        }\n      }\n\n      this.client.acceptFileWithXhr(file, xhr, reject)\n    })\n    return res\n  }\n\n  rejectFile = async (file: { id?: string; file_id_target?: string[] }) => {\n    if (file.file_id_target) {\n      file.file_id_target.map(f => {\n        return new Promise((resolve, reject) => {\n          this.client.cancelFile(f, (err?: Error) => {\n            if (err) {\n              reject(err)\n            } else {\n              resolve(undefined)\n            }\n          })\n        })\n      })\n    } else if (file.id) {\n      return new Promise((resolve, reject) => {\n        this.client.cancelFile(file.id || '', (err?: Error) => {\n          if (err) {\n            reject(err)\n          } else {\n            resolve(undefined)\n          }\n        })\n      })\n    }\n  }\n\n  sendFile = async (user_id: string, file: Blob) => {\n    let inputw: HTMLInputElement | undefined\n    if (Platform.OS === 'web') {\n      inputw = document.createElement('input')\n      inputw.type = 'file'\n      inputw.name = 'file'\n      inputw.files = (() => {\n        let b: DataTransfer | undefined\n        if (window.DataTransfer) {\n          b = new DataTransfer()\n        } else if (window.ClipboardEvent) {\n          b = new ClipboardEvent('').clipboardData || undefined\n        }\n        if (!b) {\n          console.error('Can not set input.files: empty data transfer')\n          return null\n        }\n\n        b.items.add(file as File)\n        return b.files\n      })()\n      const form = document.createElement('form')\n      form.appendChild(inputw)\n    }\n\n    let inputrn: object | undefined\n    if (Platform.OS !== 'web') {\n      const fd = new FormData()\n      fd.append('file', {\n        ...file,\n        type: 'multipart/form-data',\n      })\n      inputrn = {\n        form: 'This is not a form element, see src/api/uc.ts for detail',\n        files: [file],\n        __rnFormData: fd,\n      }\n    }\n\n    const res: UcSendFile = await new Promise((resolve, reject) =>\n      this.client.sendFile(\n        {\n          user_id,\n        },\n        inputw || inputrn,\n        resolve,\n        reject,\n      ),\n    )\n    return {\n      file: {\n        id: res.fileInfo.file_id,\n        name: res.fileInfo.name,\n        size: res.fileInfo.size,\n        state: getFileStateFromCode(res.fileInfo.status),\n        transferPercent: res.fileInfo.progress,\n        topic_id: res.topic_id,\n      },\n\n      chat: {\n        id: res.text_id,\n        file: res.fileInfo.file_id,\n        text: res.fileInfo.name,\n        type: -1, // TODO\n        creator: this.client.getProfile().user_id,\n        created: res.ltime,\n      },\n    }\n  }\n\n  sendFiles = async (conf_id: string, file: Blob) => {\n    let inputw: HTMLInputElement | undefined\n    if (Platform.OS === 'web') {\n      inputw = document.createElement('input')\n      inputw.type = 'file'\n      inputw.name = 'file'\n      inputw.files = (() => {\n        let b: DataTransfer | undefined\n        if (window.DataTransfer) {\n          b = new DataTransfer()\n        } else if (window.ClipboardEvent) {\n          const e = new ClipboardEvent('')\n          b = e.clipboardData || undefined\n        }\n        if (!b) {\n          console.error('Can not set input.files: empty data transfer')\n          return null\n        }\n        b.items.add(file as File)\n        return b.files\n      })()\n      const form = document.createElement('form')\n      form.appendChild(inputw)\n    }\n\n    let inputrn: object | undefined\n    if (Platform.OS !== 'web') {\n      const fd = new FormData()\n\n      fd.append('file', {\n        ...file,\n        type: 'multipart/form-data',\n      })\n\n      inputrn = {\n        form: 'This is not a form element, see src/api/uc.ts for detail',\n        files: [file],\n        __rnFormData: fd,\n      }\n    }\n\n    const res: UcSendFiles = await new Promise((resolve, reject) =>\n      this.client.sendFiles(\n        {\n          conf_id,\n          input: inputw || inputrn,\n        },\n        [file],\n        resolve,\n        reject,\n      ),\n    )\n    const file_res = res.infoList[0]\n    return {\n      file: {\n        id: file_res.fileInfo.file_id,\n        name: file_res.fileInfo.name,\n        // file_id_target: file_res.fileInfos.map(f => f.file_id),\n        size: file_res.fileInfo.size,\n        state: getFileStateFromCode(file_res.fileInfo.status),\n        transferPercent: file_res.fileInfo.progress,\n        topic_id: file_res.topic_id,\n      } as ChatFile,\n\n      chat: {\n        id: file_res.text_id,\n        file: file_res.fileInfo.file_id,\n        text: file_res.fileInfo.name,\n        type: -1, // TODO\n        creator: this.client.getProfile().user_id,\n        created: file_res.ltime,\n      },\n    }\n  }\n\n  peekWebchatConferenceText = async (conf_id: string) => {\n    const res: UcWebchatConferenceText = await new Promise((resolve, reject) =>\n      this.client.peekWebchatConferenceText({ conf_id }, resolve, reject),\n    )\n    if (!res.messages.length) {\n      return []\n    }\n    return res.messages.map(message => message.text)\n  }\n}\n\nexport const uc = new UC()\n","import { FC, forwardRef } from 'react'\nimport { TouchableOpacity, TouchableOpacityProps } from 'react-native'\n\nexport const RnTouchableOpacity: FC<TouchableOpacityProps> = forwardRef(\n  (props, ref) => (\n    <TouchableOpacity\n      activeOpacity={0.8}\n      ref={ref as (instance: unknown) => void}\n      {...props}\n    />\n  ),\n)\n","import { flow, omit } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { ReactElementLike } from 'prop-types'\nimport { FC, useRef } from 'react'\nimport {\n  ActivityIndicator,\n  Keyboard,\n  Platform,\n  StyleSheet,\n  TextInputProps,\n  TouchableOpacityProps,\n  View,\n  ViewProps,\n} from 'react-native'\n\nimport {\n  mdiCardsDiamond,\n  mdiClose,\n  mdiPlus,\n  mdiUnfoldMoreHorizontal,\n} from '../assets/icons'\nimport { intl } from '../stores/intl'\nimport { RnPicker } from '../stores/RnPicker'\nimport { useStore } from '../utils/useStore'\nimport { RnIcon, RnSwitch, RnText, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nexport type Park = {\n  number: string\n  name?: string\n}\nconst css = StyleSheet.create({\n  Field: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    alignItems: 'stretch',\n    marginHorizontal: 15,\n    ...Platform.select({\n      android: {\n        paddingBottom: 2,\n      },\n    }),\n  },\n  Field__focusing: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  Field__disabled: {\n    backgroundColor: v.hoverBg,\n  },\n  Field__group: {\n    marginHorizontal: 0,\n    marginTop: 15,\n    backgroundColor: v.borderBg,\n    padding: 15,\n  },\n  Field__groupMargin: {\n    marginTop: 30,\n  },\n  Field__transparent: {\n    borderColor: 'transparent',\n    marginHorizontal: 0,\n  },\n  Field_Label: {\n    paddingTop: 13,\n    paddingBottom: 0,\n    paddingLeft: 7,\n    ...Platform.select({\n      android: {\n        paddingTop: 3,\n        top: 6,\n      },\n      web: {\n        // Fix form auto fill style on web\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n      },\n    }),\n  },\n  Field_LabelText: {\n    color: v.subColor,\n    fontWeight: v.fontWeight,\n  },\n  Field_LabelTextGroup: {\n    ...Platform.select({\n      android: {\n        top: -6,\n      },\n    }),\n  },\n  Field_ViewRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 40,\n  },\n  Field_Park_TextInput: {\n    flex: 1,\n    paddingBottom: 3,\n    paddingLeft: 7,\n    paddingRight: 10,\n    // fontWeight: 'bold',\n    overflow: 'hidden',\n    ...Platform.select({\n      android: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        lineHeight: v.lineHeight,\n        // Should not set height and overflow here\n        //    it will cause scroll issue with the input\n        // height: g.lineHeight,\n      },\n      web: {\n        // Fix form auto fill style on web\n        paddingTop: 28,\n        width: '100%',\n      },\n      default: {\n        paddingTop: 1,\n      },\n    }),\n  },\n  Field_TextInput: {\n    width: '100%',\n    paddingBottom: 3,\n    paddingLeft: 7,\n    paddingRight: 40,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    ...Platform.select({\n      android: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        lineHeight: v.lineHeight,\n        // Should not set height and overflow here\n        //    it will cause scroll issue with the input\n        // height: g.lineHeight,\n      },\n      web: {\n        // Fix form auto fill style on web\n        paddingTop: 28,\n      },\n      default: {\n        paddingTop: 1,\n      },\n    }),\n  },\n  Field_Switch: {\n    position: 'absolute',\n    top: 22,\n    right: 11,\n  },\n  Field_Btn: {\n    position: 'absolute',\n    top: 11,\n    right: 5,\n    width: 40,\n    height: 30,\n    borderRadius: v.borderRadius,\n  },\n  Field_Btn__create: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  Field_Btn__remove: {\n    backgroundColor: v.colors.dangerFn(0.5),\n  },\n  Field_Icon: {\n    position: 'absolute',\n    top: 15,\n    right: 15,\n  },\n  Field_Error: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Field_ErrorInner: {\n    alignSelf: 'flex-start',\n    marginVertical: 2,\n    marginHorizontal: 15,\n    paddingVertical: 2,\n    paddingHorizontal: 10,\n    backgroundColor: v.colors.danger,\n    borderRadius: v.borderRadius,\n  },\n  Field_ErrorIcon: {\n    position: 'absolute',\n    top: -8,\n    left: 2,\n  },\n  Field_ErrorLabel: {\n    color: v.revColor,\n  },\n  Loading: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'black',\n    opacity: 0.3,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nconst noop = () => {}\n\nexport const Field: FC<\n  Partial<{\n    isGroup: boolean\n    hasMargin: boolean\n    label: string\n    onCreateBtnPress(): void\n    onValueChange: Function\n    createBtnStyle: TouchableOpacityProps['style']\n    createBtnIcon: string\n    createBtnIconStyle: ViewProps['style']\n    removeBtnStyle: TouchableOpacityProps['style']\n    removeBtnIcon: string\n    removeBtnIconStyle: ViewProps['style']\n    onRemoveBtnPress(): void\n    type: 'Switch' | 'RnPicker' | 'PARK'\n    valueRender: Function\n    value: string | boolean | Park\n    textInputStyle?: TextInputProps['style']\n    options: {\n      key: string\n      label: string\n    }[]\n    icon: string\n    onBlur(): void\n    onFocus(): void\n    onSubmitEditing(): void\n    style: TextInputProps['style']\n    disabled: boolean\n    inputElement: ReactElementLike | null\n    onTouchPress(): void\n    transparent: boolean\n    secureTextEntry: boolean\n    iconRender: Function\n    error: string\n    loading: boolean\n    horizontalInput: string[]\n    maxLength?: number\n  }>\n> = observer(({ ...props }) => {\n  if (props.isGroup) {\n    return (\n      <View\n        style={[\n          css.Field,\n          css.Field__group,\n          props.hasMargin && css.Field__groupMargin,\n        ]}\n      >\n        <RnText small style={css.Field_LabelTextGroup}>\n          {props.label}\n        </RnText>\n      </View>\n    )\n  }\n  // handle enable/disable input Park\n  const disablePark = props.type === 'PARK' && props.disabled\n\n  const $0 = useStore(() => ({\n    observable: {\n      isFocusing: false,\n      isParkNameFocusing: false,\n      park: {\n        number: '',\n        name: '',\n      },\n    },\n  }))\n  const $ = $0 as typeof $0 & {\n    isFocusing: boolean\n    isParkNameFocusing: boolean\n    park: Park\n  }\n  const inputRef = useRef<HTMLInputElement>()\n  const inputRefName = useRef<HTMLInputElement>()\n  if (!inputRef.current && $.isFocusing) {\n    $.set('isFocusing', false)\n  }\n  if (!inputRefName.current && $.isParkNameFocusing) {\n    $.set('isParkNameFocusing', false)\n  }\n  if (props.onCreateBtnPress) {\n    Object.assign(props, {\n      iconRender: () => (\n        <RnTouchableOpacity\n          onPress={props.onCreateBtnPress}\n          style={[css.Field_Btn, css.Field_Btn__create, props.createBtnStyle]}\n        >\n          <RnIcon\n            color={v.colors.primary}\n            path={props.createBtnIcon || mdiPlus}\n            size={18}\n            style={props.createBtnIconStyle}\n          />\n        </RnTouchableOpacity>\n      ),\n    })\n  }\n  if (props.onRemoveBtnPress) {\n    Object.assign(props, {\n      iconRender: () => (\n        <RnTouchableOpacity\n          onPress={props.onRemoveBtnPress}\n          style={[css.Field_Btn, css.Field_Btn__remove, props.removeBtnStyle]}\n        >\n          <RnIcon\n            color={v.colors.danger}\n            path={props.removeBtnIcon || mdiClose}\n            size={15}\n            style={props.removeBtnIconStyle}\n          />\n        </RnTouchableOpacity>\n      ),\n    })\n  }\n  const renderPark = () => {\n    const value = props.value as Park\n    const onChangeName = (text: string) => {\n      const newPark = { ...$.park, name: text }\n      $.set('park', newPark)\n      if (props.onValueChange) {\n        props.onValueChange(newPark)\n      }\n    }\n    const onChangeNumber = (text: string) => {\n      const newPark = { ...$.park, number: text.trim() }\n      $.set('park', newPark)\n      if (props.onValueChange) {\n        props.onValueChange(newPark)\n      }\n    }\n    return (\n      <View style={css.Field_ViewRow}>\n        <RnTextInput\n          ref={inputRef}\n          {...omit(props, [\n            'type',\n            'label',\n            'valueRender',\n            'icon',\n            'iconRender',\n            'onValueChange',\n            'onCreateBtnPress',\n            'createBtnIcon',\n            'onRemoveBtnPress',\n            'removeBtnIcon',\n            'disabled',\n            'error',\n          ])}\n          placeholder={intl`park number`}\n          placeholderTextColor='grey'\n          onBlur={() => {\n            if (Platform.OS === 'web') {\n              $.set('isFocusing', false)\n            }\n          }}\n          onChangeText={txt => onChangeNumber(txt)}\n          onFocus={() => {\n            if (Platform.OS !== 'web') {\n              $.set('isParkNameFocusing', false)\n            }\n            $.set('isFocusing', true)\n          }}\n          style={[css.Field_Park_TextInput, props.style]}\n          value={value.number as string}\n        />\n        <RnTextInput\n          ref={inputRefName}\n          {...omit(props, [\n            'type',\n            'label',\n            'valueRender',\n            'icon',\n            'iconRender',\n            'onValueChange',\n            'onCreateBtnPress',\n            'createBtnIcon',\n            'onRemoveBtnPress',\n            'removeBtnIcon',\n            'disabled',\n            'error',\n          ])}\n          placeholder={intl`label`}\n          placeholderTextColor='grey'\n          onBlur={() => {\n            if (Platform.OS === 'web') {\n              $.set('isParkNameFocusing', false)\n            }\n          }}\n          onChangeText={txt => onChangeName(txt)}\n          onFocus={() => {\n            if (Platform.OS !== 'web') {\n              $.set('isFocusing', false)\n            }\n            $.set('isParkNameFocusing', true)\n          }}\n          style={[css.Field_Park_TextInput, props.style]}\n          value={value.name as string}\n        />\n      </View>\n    )\n  }\n  if (props.onValueChange) {\n    if (props.type === 'Switch') {\n      Object.assign(props, {\n        valueRender:\n          props.valueRender ||\n          ((e: boolean) => (e ? intl`Enabled` : intl`Disabled`)),\n        iconRender: (e: boolean) => (\n          <RnSwitch enabled={e} style={css.Field_Switch} />\n        ),\n        onTouchPress: () => {\n          props.onValueChange?.(!props.value)\n          Keyboard.dismiss()\n        },\n      })\n    } else if (props.type === 'RnPicker') {\n      Object.assign(props, {\n        valueRender: (k: string) =>\n          props.options?.find(o => o.key === k)?.label || k,\n        onTouchPress: () => {\n          RnPicker.open({\n            options: props.options || [],\n            selectedKey: props.value as string,\n            onSelect: props.onValueChange as Function,\n          })\n          Keyboard.dismiss()\n        },\n        icon: props.icon || mdiUnfoldMoreHorizontal,\n      })\n    } else if (props.type === 'PARK') {\n      Object.assign(props, {\n        inputElement: renderPark(),\n        onTouchPress: () => {\n          if (!$.isFocusing && !$.isParkNameFocusing) {\n            inputRef.current?.focus()\n          }\n        },\n      })\n    } else {\n      Object.assign(props, {\n        inputElement: (\n          <RnTextInput\n            ref={inputRef}\n            {...omit(props, [\n              'type',\n              'label',\n              'valueRender',\n              'icon',\n              'iconRender',\n              'onValueChange',\n              'onCreateBtnPress',\n              'createBtnIcon',\n              'onRemoveBtnPress',\n              'removeBtnIcon',\n              'disabled',\n              'error',\n            ])}\n            onBlur={flow([\n              () => $.set('isFocusing', false),\n              props.onBlur || noop,\n            ])}\n            onChangeText={txt => props.onValueChange?.(txt)}\n            onFocus={flow([\n              () => $.set('isFocusing', true),\n              props.onFocus || noop,\n            ])}\n            onSubmitEditing={flow([\n              props.onCreateBtnPress || noop,\n              props.onSubmitEditing || noop,\n            ])}\n            style={[css.Field_TextInput, props.style]}\n            value={props.value as string}\n          />\n        ),\n        onTouchPress: () => inputRef.current?.focus(),\n      })\n    }\n  }\n  if (props.disabled) {\n    props.inputElement = null\n    props.onTouchPress = undefined\n  }\n  const Container = props.onTouchPress ? RnTouchableOpacity : View\n  const label = (\n    <View pointerEvents='none' style={css.Field_Label}>\n      <RnText small style={css.Field_LabelText}>\n        {props.label}\n      </RnText>\n    </View>\n  )\n\n  return (\n    <>\n      <Container\n        accessible={!props.inputElement}\n        onPress={props.onTouchPress}\n        style={[\n          css.Field,\n          ($.isFocusing || $.isParkNameFocusing) && css.Field__focusing,\n          props.disabled && css.Field__disabled,\n          props.transparent && css.Field__transparent,\n        ]}\n      >\n        {/* Fix form auto fill style on web */}\n        {Platform.OS !== 'web' && label}\n        {\n          <View\n            pointerEvents={\n              ($.isFocusing || $.isParkNameFocusing ? null : 'none') as any\n            }\n          >\n            {props.inputElement || (\n              <RnTextInput\n                editable={!disablePark}\n                disabled\n                maxLength={props?.maxLength || 100000}\n                secureTextEntry={!!(props.secureTextEntry && props.value)}\n                style={[css.Field_TextInput, props.textInputStyle]}\n                value={\n                  props.valueRender?.(props.value) || props.value || '\\u200a'\n                }\n              />\n            )}\n            {!$.isFocusing && disablePark && (\n              <View style={StyleSheet.absoluteFill} />\n            )}\n          </View>\n        }\n        {/* Fix form auto fill style on web */}\n        {Platform.OS === 'web' && label}\n        {props.iconRender?.(props.value) ||\n          (props.icon && (\n            <RnIcon\n              path={props.icon}\n              pointerEvents='none'\n              style={css.Field_Icon}\n            />\n          ))}\n        {props.loading && (\n          <View style={css.Loading}>\n            <ActivityIndicator size='small' color='white' />\n          </View>\n        )}\n      </Container>\n      {props.error && (\n        <RnTouchableOpacity\n          onPress={() => inputRef.current?.focus()}\n          style={css.Field_Error}\n        >\n          <View style={css.Field_ErrorInner}>\n            <RnIcon\n              color={v.colors.danger}\n              path={mdiCardsDiamond}\n              style={css.Field_ErrorIcon}\n            />\n            <RnText small style={css.Field_ErrorLabel}>\n              {props.error}\n            </RnText>\n          </View>\n        </RnTouchableOpacity>\n      )}\n    </>\n  )\n})\n","import { BackgroundTimer } from '../utils/BackgroundTimer'\n\nexport const waitTimeout = (time = 300) =>\n  new Promise<undefined>(resolve => {\n    BackgroundTimer.setTimeout(() => resolve(undefined), time)\n  })\n","export const arrToMap = <\n  T extends string | number | object | undefined,\n  K extends keyof T | Function | undefined = undefined,\n  V = boolean,\n>(\n  arr: ArrayLike<T>,\n  key?: keyof T | ((item: T, index: number) => unknown),\n  value?: K | ((item: T, index: number) => V),\n): {\n  [k: string]: K extends undefined\n    ? boolean\n    : K extends Function\n    ? V\n    : K extends keyof T\n    ? T[K]\n    : never\n} => {\n  const map = {}\n  const a = Array.isArray(arr) ? arr : Array.from(arr)\n  a.forEach((item, index) => {\n    const k =\n      typeof key === 'function' ? key(item, index) : key ? item[key] : item\n    const v =\n      typeof value === 'function'\n        ? value(item, index)\n        : value\n        ? item[String(value)]\n        : true\n    map[String(k)] = v\n  })\n  return map\n}\n","import 'brekekejs/lib/jsonrpc'\nimport 'brekekejs/lib/pal'\n\nimport EventEmitter from 'eventemitter3'\nimport { Platform } from 'react-native'\n\nimport { bundleIdentifier, fcmApplicationId } from '../config'\nimport { embedApi } from '../embed/embedApi'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore, waitPbx } from '../stores/authStore'\nimport { PbxUser, Phonebook } from '../stores/contactStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { toBoolean } from '../utils/string'\nimport { Pbx, PbxEvent } from './brekekejs'\nimport { parseCallParams, parsePalParams } from './parseParamsWithPrefix'\nimport { PnCommand, PnParams, PnParamsNew, PnServiceId } from './pnConfig'\n\nexport class PBX extends EventEmitter {\n  client?: Pbx\n  private connectTimeoutId = 0\n\n  // wait auth state to success\n  isMainInstance = true\n\n  connect = async (\n    a: Account,\n    palParamUserReconnect?: boolean,\n  ): Promise<boolean> => {\n    console.log('PBX PN debug: call pbx.connect')\n    if (this.client) {\n      console.warn('PAL client already connected, ignore...')\n      return true\n    }\n\n    const d = await accountStore.findDataAsync(a)\n    const oldPalParamUser = d.palParams?.['user']\n    console.log(\n      `PBX PN debug: construct pbx.client - webphone.pal.param.user=${oldPalParamUser}`,\n    )\n\n    const wsUri = `wss://${a.pbxHostname}:${a.pbxPort}/pbx/ws`\n    const client = window.Brekeke.pbx.getPal(wsUri, {\n      tenant: a.pbxTenant,\n      login_user: a.pbxUsername,\n      login_password: a.pbxPassword,\n      _wn: d.accessToken,\n      park: a.parks || [],\n      voicemail: 'self',\n      status: true,\n      secure_login_password: false,\n      phonetype: 'webphone',\n      callrecording: 'self',\n      ...d.palParams,\n      ...embedApi._palParams,\n    })\n    this.client = client\n\n    client.debugLevel = 2\n    client.call_pal = (method: keyof Pbx, params?: object) => {\n      return new Promise((resolve, reject) => {\n        const f = client[method] as Function\n        if (typeof f !== 'function') {\n          return reject(new Error(`PAL client doesn't support \"${method}\"`))\n        }\n        f.call(client, params, resolve, reject)\n      })\n    }\n\n    // emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('pal', client)\n    }\n    const embedListeners: { [k in keyof Pbx]?: Function } = {}\n    if (!window._BrekekePhoneWebRoot && embedApi._palEvents?.length) {\n      embedApi._palEvents.forEach(k => {\n        const listener = (...args: unknown[]) => {\n          console.log(`Embed api emitting pal event ${k}`)\n          embedApi.emit(`pal.${k}`, ...args)\n        }\n        embedListeners[k] = listener\n        client[k] = listener\n      })\n    }\n    const setListenerWithEmbed = <T extends keyof Pbx>(k: T, f: Pbx[T]) => {\n      const listener = (...args: unknown[]) => {\n        embedListeners[k]?.(...args)\n        return (f as Function)(...args)\n      }\n      client[k] = listener as any\n    }\n\n    let resolveFn: Function | undefined = undefined\n    const connected = new Promise<boolean>(r => {\n      resolveFn = r\n    })\n    const pendingServerStatus: PbxEvent['serverStatus'][] = []\n    setListenerWithEmbed('notify_serverstatus', e => {\n      pendingServerStatus.push(e)\n      if (!e?.status) {\n        return\n      }\n      if (e.status === 'active') {\n        resolveFn?.(true)\n        resolveFn = undefined\n      } else if (e.status === 'inactive') {\n        resolveFn?.(false)\n        resolveFn = undefined\n      }\n    })\n    const pendingClose: unknown[] = []\n    setListenerWithEmbed('onClose', () => {\n      pendingClose.push()\n      resolveFn?.(false)\n      resolveFn = undefined\n    })\n    const pendingError: Error[] = []\n    setListenerWithEmbed('onError', err => {\n      pendingError.push(err)\n      resolveFn?.(false)\n      resolveFn = undefined\n    })\n\n    const newTimeoutPromise = () => {\n      this.clearConnectTimeoutId()\n      return new Promise<boolean>(resolve => {\n        this.connectTimeoutId = BackgroundTimer.setTimeout(() => {\n          resolve(false)\n          console.warn('Pbx login connection timed out')\n          // fix case already reconnected\n          if (client === this.client) {\n            this.disconnect()\n          } else {\n            client.close()\n          }\n        }, 10000)\n      })\n    }\n    const login = new Promise<boolean>((resolve, reject) =>\n      client.login(() => resolve(true), reject),\n    )\n    await Promise.race([login, newTimeoutPromise()])\n    this.clearConnectTimeoutId()\n\n    const isConnected = async () => {\n      const r = await Promise.race([connected, newTimeoutPromise()])\n      this.clearConnectTimeoutId()\n      return r\n    }\n\n    // in syncPnToken, isMainInstance = false\n    // we will not proceed further in that case\n    if (!this.isMainInstance) {\n      return isConnected()\n    }\n\n    // check again webphone.pal.param.user\n    if (!palParamUserReconnect) {\n      const as = getAuthStore()\n      // TODO\n      // any function get pbxConfig on this time may get undefined\n      as.pbxConfig = undefined\n      await isConnected()\n      await this.getConfig(true)\n      const newPalParamUser = as.pbxConfig?.['webphone.pal.param.user']\n      if (newPalParamUser !== oldPalParamUser) {\n        console.warn(\n          `Attempt to reconnect due to mismatch webphone.pal.param.user after login: old=${oldPalParamUser} new=${newPalParamUser}`,\n        )\n        this.disconnect()\n        return this.connect(a, true)\n      }\n    }\n\n    // register client direct event handlers\n    setListenerWithEmbed('onClose', this.onClose)\n    setListenerWithEmbed('onError', this.onError)\n    setListenerWithEmbed('notify_serverstatus', this.onServerStatus)\n    setListenerWithEmbed('notify_park', this.onPark)\n    setListenerWithEmbed('notify_callrecording', this.onCallRecording)\n    setListenerWithEmbed('notify_voicemail', this.onVoicemail)\n    setListenerWithEmbed('notify_status', this.onUserStatus)\n    // fire pending events\n    pendingClose.forEach(this.onClose)\n    pendingError.forEach(this.onError)\n    pendingServerStatus.forEach(this.onServerStatus)\n\n    return connected\n  }\n\n  // pal client direct event handlers\n  private onClose = () => {\n    this.emit('connection-stopped')\n  }\n  private onError = (err: Error) => {\n    console.error('pbx.client.onError:', err)\n  }\n  private onServerStatus = (e: PbxEvent['serverStatus']) => {\n    if (!e?.status) {\n      return\n    }\n    if (e.status === 'active') {\n      this.emit('connection-started')\n    } else if (e.status === 'inactive') {\n      this.emit('connection-stopped')\n    }\n  }\n  // {\"room_id\":\"282000000230\",\"talker_id\":\"1416\",\"time\":1587451427817,\"park\":\"777\",\"status\":\"on\"}\n  // {\"time\":1587451575120,\"park\":\"777\",\"status\":\"off\"}\n  private onPark = (e: PbxEvent['park']) => {\n    if (!e?.status) {\n      return\n    }\n    // TODO\n    if (e.status === 'on') {\n      this.emit('park-started', e.park)\n    } else if (e.status === 'off') {\n      this.emit('park-stopped', e.park)\n    }\n  }\n  private onCallRecording = (e: PbxEvent['callRecording']) => {\n    if (!e) {\n      return\n    }\n    this.emit('call-recording', e)\n  }\n  private onVoicemail = (e: PbxEvent['voicemail']) => {\n    if (!e) {\n      return\n    }\n    this.emit('voicemail-updated', e)\n  }\n  private onUserStatus = (e: PbxEvent['userStatus']) => {\n    if (!e) {\n      return\n    }\n    switch (e.status) {\n      case '14':\n      case '2':\n      case '36':\n        return this.emit('user-talking', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '35':\n        return this.emit('user-holding', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '-1':\n        return this.emit('user-hanging', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '1':\n        return this.emit('user-calling', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '65':\n        return this.emit('user-ringing', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      default:\n        return\n    }\n  }\n\n  disconnect = () => {\n    if (this.client) {\n      this.client.close()\n      this.client = undefined\n      console.log('PBX PN debug: pbx.client set to null')\n    }\n    this.clearConnectTimeoutId()\n  }\n  private clearConnectTimeoutId = () => {\n    if (this.connectTimeoutId) {\n      BackgroundTimer.clearTimeout(this.connectTimeoutId)\n      this.connectTimeoutId = 0\n    }\n  }\n\n  getConfig = async (skipWait?: boolean) => {\n    if (this.isMainInstance) {\n      const s = getAuthStore()\n      if (s.pbxConfig) {\n        return s.pbxConfig\n      }\n      if (!skipWait) {\n        await waitPbx()\n      }\n    }\n    if (!this.client) {\n      return\n    }\n    const config = await this.client.call_pal('getProductInfo', {\n      webphone: 'true',\n    })\n    if (!this.isMainInstance) {\n      return config\n    }\n    const s = getAuthStore()\n    s.pbxConfig = config\n    const d = await s.getCurrentDataAsync()\n    if (this.isMainInstance) {\n      BrekekeUtils.setPbxConfig(JSON.stringify(parseCallParams(s.pbxConfig)))\n    }\n    d.palParams = parsePalParams(s.pbxConfig)\n    d.userAgent = s.pbxConfig['webphone.useragent']\n    d.pnExpires = s.pbxConfig['webphone.pn_expires']\n    accountStore.updateAccountData(d)\n    return s.pbxConfig\n  }\n\n  createSIPAccessToken = async (sipUsername: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('createAuthHeader', {\n      username: sipUsername,\n    })\n  }\n\n  getUsers = async (tenant: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('getExtensions', {\n      tenant,\n      pattern: '..*',\n      limit: -1,\n      type: 'user',\n      property_names: ['name'],\n    })\n  }\n  getExtraUsers = async (ids: string[]): Promise<PbxUser[] | undefined> => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    const cp = getAuthStore().getCurrentAccount()\n    if (!this.client || !cp) {\n      return\n    }\n    const res = await this.client.call_pal('getExtensionProperties', {\n      tenant: cp.pbxTenant,\n      extension: ids,\n      property_names: ['name'],\n    })\n    return res.map((r, i) => ({\n      id: ids[i],\n      // server return \"No permission.\" if id not exist\n      name: Array.isArray(r) && typeof r[0] === 'string' ? r[0] : '',\n    }))\n  }\n\n  getPbxPropertiesForCurrentUser = async (tenant: string, userId: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n\n    const [res] = await this.client.call_pal('getExtensionProperties', {\n      tenant,\n      extension: [userId],\n      property_names: [\n        'name',\n        'p1_ptype',\n        'p2_ptype',\n        'p3_ptype',\n        'p4_ptype',\n        'pnumber',\n        'language',\n      ],\n    })\n\n    const pnumber = ('' + res[5]).split(',')\n\n    const phones = [\n      {\n        id: pnumber[0],\n        type: res[1],\n      },\n      {\n        id: pnumber[1],\n        type: res[2],\n      },\n      {\n        id: pnumber[2],\n        type: res[3],\n      },\n      {\n        id: pnumber[3],\n        type: res[4],\n      },\n    ]\n\n    const lang = res[6]\n    const userName = res[0]\n\n    return {\n      id: userId,\n      name: userName,\n      phones,\n      language: lang,\n    }\n  }\n\n  getContacts = async ({\n    search_text,\n    offset,\n    limit,\n  }: {\n    search_text: string\n    offset: number\n    limit: number\n  }) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('getContactList', {\n      phonebook: '',\n      search_text,\n      offset,\n      limit,\n    })\n    return res.map(contact => ({\n      id: contact.aid,\n      display_name: contact.display_name,\n      phonebook: contact.phonebook,\n      user: contact.user,\n      shared: !contact?.user,\n      info: {},\n    }))\n  }\n  getPhonebooks = async () => {\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('getPhonebooks', {})\n    return res?.filter(item => !item.shared) || []\n  }\n  getContact = async (id: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n\n    const res = await this.client.call_pal('getContact', {\n      aid: id,\n    })\n\n    res.info = res.info || {}\n    return {\n      id: res.aid,\n      display_name: res.display_name,\n      phonebook: res.phonebook,\n      shared: toBoolean(res.shared),\n      info: res.info,\n    }\n  }\n  deleteContact = async (id: string[]) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('deleteContact', {\n      aid: id,\n    })\n    return res\n  }\n  setContact = async (contact: Phonebook) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('setContact', {\n      aid: contact.id,\n      phonebook: contact.phonebook,\n      shared: contact.shared ? 'true' : 'false',\n      display_name: contact.display_name,\n      info: contact.info,\n    })\n  }\n\n  holdTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('hold', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  unholdTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('unhold', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  startRecordingTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('startRecording', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  stopRecordingTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('stopRecording', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  transferTalkerBlind = async (\n    tenant: string,\n    talker: string,\n    toUser: string,\n  ) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('transfer', {\n      tenant,\n      user: toUser,\n      tid: talker,\n      mode: 'blind',\n    })\n    return true\n  }\n\n  transferTalkerAttended = async (\n    tenant: string,\n    talker: string,\n    toUser: string,\n  ) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('transfer', {\n      tenant,\n      user: toUser,\n      tid: talker,\n    })\n    return true\n  }\n\n  joinTalkerTransfer = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('conference', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  stopTalkerTransfer = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('cancelTransfer', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  parkTalker = async (tenant: string, talker: string, atNumber: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('park', {\n      tenant,\n      tid: talker,\n      number: atNumber,\n    })\n    return true\n  }\n\n  sendDTMF = async (signal: string, tenant: string, talker_id: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('sendDTMF', {\n      signal,\n      tenant,\n      talker_id,\n    })\n    return true\n  }\n\n  pnmanage = async (d: PnParamsNew) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    const {\n      pnmanageNew,\n      command,\n      service_id,\n      device_id,\n      device_id_voip,\n      auth_secret,\n      endpoint,\n      key,\n    } = d\n    let isFcm = false\n    const arr = Array.isArray(service_id) ? service_id : [service_id]\n    arr.forEach(id => {\n      if (id === PnServiceId.fcm || id === PnServiceId.web) {\n        isFcm = true\n      } else if (isFcm) {\n        throw new Error('Can not mix service_id fcm/web together with apns/lpc')\n      }\n    })\n    let application_id = isFcm ? fcmApplicationId : bundleIdentifier\n    let { username } = d\n    if (!pnmanageNew && d.voip) {\n      if (!isFcm) {\n        application_id += '.voip'\n      }\n      username += '@voip'\n    }\n    await this.client.call_pal('pnmanage', {\n      command,\n      service_id,\n      application_id,\n      user_agent: Platform.OS === 'web' ? navigator.userAgent : 'react-native',\n      username,\n      device_id,\n      device_id_voip,\n      add_voip: pnmanageNew ? true : undefined,\n      add_device_id_suffix: pnmanageNew ? true : undefined,\n      auth_secret,\n      endpoint,\n      key,\n    })\n    return true\n  }\n\n  setWebPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.web,\n    })\n  }\n  removeWebPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.web,\n    })\n  }\n\n  setFcmPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.fcm,\n    })\n  }\n  removeFcmPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.fcm,\n    })\n  }\n\n  setApnsToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.apns,\n    })\n  }\n  removeApnsToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.apns,\n    })\n  }\n}\n\nexport const pbx = new PBX()\n","import { observer } from 'mobx-react'\nimport { FC, ReactNode } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport {\n  mdiAccountGroup,\n  mdiPhoneIncoming,\n  mdiPhoneMissed,\n  mdiPhoneOutgoing,\n} from '../assets/icons'\nimport { getPartyName } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { trimHtml } from '../utils/trimHtml'\nimport { Avatar } from './Avatar'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { RnCheckBox } from './RnCheckbox'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Outer: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n  Inner: {\n    flexDirection: 'row',\n    paddingLeft: 10,\n  },\n  Inner_selected: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  //\n  WithSpace: {\n    marginVertical: 5,\n  },\n  //\n  Text: {\n    flex: 1,\n    paddingTop: 7,\n    paddingLeft: 10,\n  },\n  NameWithStatus: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n  },\n  Status: {\n    top: 2,\n    left: 3,\n    color: v.subColor,\n  },\n  //\n  Detail: {\n    flexDirection: 'row',\n  },\n  CallIcon: {\n    flex: null as any,\n  },\n  CallCreatedAt: {\n    left: 3,\n    color: v.subColor,\n  },\n  //\n  ButtonIcon: {\n    padding: 10,\n  },\n  LastDate: {\n    marginVertical: 10,\n    marginRight: 15,\n    paddingTop: 7,\n  },\n  IconGroup: {},\n  VGroup: {\n    overflow: 'hidden',\n    backgroundColor: v.borderBg,\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginVertical: 5,\n    alignItems: 'center',\n  },\n  CheckboxContainer: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    marginRight: 15,\n  },\n  disableContainer: {\n    opacity: 0.5,\n  },\n})\n\nexport const UserItem: FC<\n  Partial<{\n    answered: boolean\n    avatar: string\n    created: string\n    icons: string[]\n    iconColors: string[]\n    iconFuncs: Function[]\n    id: string\n    incoming: boolean\n    isRecentCall: boolean\n    isRecentChat: boolean\n    lastMessage: ReactNode\n    lastMessageDate: string\n    name: string\n    partyNumber: string\n    selected: boolean\n    statusText: string\n    canChat: boolean\n    group: boolean\n    partyName: string\n    isVoicemail?: boolean\n    status?: string\n    disabled?: boolean\n    isSelection?: boolean\n    isSelected?: boolean\n    parkNumber?: string\n    phonebook?: string\n    onSelect?: () => void\n  }>\n> = observer(p0 => {\n  const {\n    answered,\n    avatar,\n    created,\n    icons,\n    iconColors,\n    iconFuncs,\n    id,\n    incoming,\n    isRecentCall,\n    isRecentChat,\n    lastMessage,\n    lastMessageDate,\n    name,\n    partyNumber,\n    selected,\n    statusText,\n    canChat,\n    group,\n    partyName,\n    isVoicemail,\n    disabled,\n    isSelection,\n    isSelected,\n    parkNumber,\n    phonebook,\n    onSelect,\n    ...p\n  } = p0\n  const Container = canChat ? RnTouchableOpacity : View\n\n  const isGroupAvailable = (groupId: string) => {\n    const groupInfo: Conference = uc.getChatGroupInfo(groupId)\n    const groupStatus = groupInfo.conf_status\n    if (\n      groupStatus === Constants.CONF_STATUS_INACTIVE ||\n      groupStatus === Constants.CONF_STATUS_INVITED\n    ) {\n      RnAlert.error({\n        message: intlDebug`You have rejected this group or it has been deleted`,\n      })\n      return false\n    } else {\n      return true\n    }\n  }\n  const onPressItem = () => {\n    if (!partyNumber) {\n      return\n    }\n    if (partyNumber.startsWith('uc')) {\n      const groupId = partyNumber.replace('uc', '')\n      isGroupAvailable(partyNumber.replace('uc', '')) &&\n        Nav().goToPageChatGroupDetail({ groupId })\n    } else {\n      Nav().goToPageChatDetail({ buddy: partyNumber })\n    }\n  }\n\n  const onPressIcons = (i: number) => {\n    if (partyNumber?.startsWith('uc')) {\n      isGroupAvailable(partyNumber.replace('uc', '')) && iconFuncs?.[i]?.()\n    } else {\n      iconFuncs?.[i]?.()\n    }\n  }\n\n  return (\n    <Container\n      style={[css.Outer, disabled && css.disableContainer]}\n      onPress={onPressItem}\n    >\n      <View style={[css.Inner, selected && css.Inner_selected]}>\n        {group ? (\n          <View style={css.VGroup}>\n            <RnIcon\n              path={mdiAccountGroup}\n              size={40}\n              color={v.colors.greyTextChat}\n              style={css.IconGroup}\n            />\n          </View>\n        ) : !parkNumber ? (\n          <Avatar\n            source={{ uri: avatar as string }}\n            status={p0.status}\n            {...p}\n            style={css.WithSpace}\n          />\n        ) : null}\n        <View style={[css.Text, css.WithSpace]}>\n          <View style={css.NameWithStatus}>\n            <RnText\n              black\n              bold\n              singleLine\n              style={{\n                color:\n                  name === intl`<Unnamed>` ? v.colors.greyTextChat : 'black',\n              }}\n            >\n              {getPartyName(partyNumber) ||\n                partyName ||\n                name ||\n                partyNumber ||\n                id}\n            </RnText>\n            {!!statusText && (\n              <RnText normal singleLine small style={css.Status}>\n                {statusText}\n              </RnText>\n            )}\n          </View>\n          {!!parkNumber && (\n            <RnText normal small style={css.CallCreatedAt}>\n              {intl`Park number: ` + `${parkNumber}`}\n            </RnText>\n          )}\n\n          {!!phonebook && (\n            <RnText normal small style={css.CallCreatedAt}>\n              {phonebook}\n            </RnText>\n          )}\n          {!isRecentCall && !!lastMessage && (\n            <RnText normal singleLine small>\n              {typeof lastMessage === 'string'\n                ? trimHtml(lastMessage)\n                : lastMessage}\n            </RnText>\n          )}\n          {((isRecentCall && !lastMessage) || isVoicemail) && (\n            <View style={css.Detail}>\n              <RnIcon\n                color={\n                  incoming && !answered\n                    ? v.colors.danger\n                    : incoming && answered\n                    ? v.colors.primary\n                    : v.colors.warning\n                }\n                path={\n                  incoming && !answered\n                    ? mdiPhoneMissed\n                    : incoming && answered\n                    ? mdiPhoneIncoming\n                    : mdiPhoneOutgoing\n                }\n                size={14}\n                style={css.CallIcon}\n              />\n              <RnText normal small style={css.CallCreatedAt}>\n                {isVoicemail ? intl`Voicemail` : intl`at ${created}`}\n              </RnText>\n            </View>\n          )}\n        </View>\n        {!isRecentCall && !!lastMessage && isRecentChat && (\n          <View style={css.LastDate}>\n            <RnText normal singleLine small>\n              {lastMessageDate}\n            </RnText>\n          </View>\n        )}\n        {icons?.map((_, i) => (\n          <RnTouchableOpacity key={i} onPress={e => onPressIcons(i)}>\n            <RnIcon path={_} color={iconColors?.[i]} style={css.ButtonIcon} />\n          </RnTouchableOpacity>\n        ))}\n        {!!isSelection && (\n          <View style={css.CheckboxContainer}>\n            <RnCheckBox\n              isSelected={!!isSelected}\n              onPress={() => (onSelect ? onSelect() : true)}\n              disabled={disabled || false}\n            />\n          </View>\n        )}\n      </View>\n    </Container>\n  )\n})\n","import { get, set } from 'lodash'\nimport { NativeModule, NativeModules, Platform } from 'react-native'\n\nimport { TCallKeepAction } from '../stores/callStore2'\n\ntype TBrekekeUtils = {\n  // these methods only available on android\n  getInitialNotifications(): Promise<string | null>\n  isLocked(): Promise<boolean>\n  startRingtone(): void\n  stopRingtone(): void\n  backToBackground(): void\n  getIncomingCallPendingUserAction(uuid: string): Promise<string>\n  closeIncomingCall(uuid: string): void\n  closeAllIncomingCalls(): void\n  setPbxConfig(jsonStr: string): void\n  setCallConfig(uuid: string, jsonStr: string): void\n  setIsAppActive(isAppActive: boolean, isAppActiveLocked: boolean): void\n  setTalkingAvatar(uuid: string, url: string, isLarge: boolean): void\n  setJsCallsSize(n: number): void\n  setRecordingStatus(uuid: string, recording: boolean): void\n  setIsVideoCall(uuid: string, isVideoCall: boolean): void\n  setRemoteVideoStreamURL(uuid: string, url: string): void\n  setIsFrontCamera(uuid: string, isFrontCamera: boolean): void\n  setOnHold(uuid: string, holding: boolean): void\n  setLocale(locale: string): void\n  onCallConnected(uuid: string): void\n  onCallKeepAction(uuid: string, action: TCallKeepAction): void\n  onPageCallManage(uuid: string): void\n  hasIncomingCallActivity(uuid: string): Promise<boolean>\n\n  // these methods only available on ios\n  playRBT(): void\n  stopRBT(): void\n  enableLPC(\n    token: string,\n    tokenVoip: string,\n    username: string,\n    host: string,\n    port: number,\n    remoteSsids: string[],\n    localSsid: string,\n    tlsKeyHash: string,\n  ): void\n  disableLPC(): void\n\n  // these methods available on both\n  systemUptimeMs(): Promise<number>\n}\n\nexport type TNativeModules = {\n  BrekekeUtils: NativeModule & TBrekekeUtils\n}\n\nconst Polyfill: TBrekekeUtils = {\n  getInitialNotifications: () => Promise.resolve(null),\n  isLocked: () => Promise.resolve(false),\n  startRingtone: () => undefined,\n  stopRingtone: () => undefined,\n  backToBackground: () => undefined,\n  getIncomingCallPendingUserAction: () => Promise.resolve(''),\n  closeIncomingCall: () => undefined,\n  closeAllIncomingCalls: () => undefined,\n  setPbxConfig: () => undefined,\n  setCallConfig: () => undefined,\n  setIsAppActive: () => undefined,\n  setTalkingAvatar: () => undefined,\n  setJsCallsSize: () => undefined,\n  setRecordingStatus: () => undefined,\n  setIsVideoCall: () => undefined,\n  setRemoteVideoStreamURL: () => undefined,\n  setIsFrontCamera: () => undefined,\n  setOnHold: () => undefined,\n  setLocale: () => undefined,\n  onCallConnected: () => undefined,\n  onCallKeepAction: () => undefined,\n  onPageCallManage: () => undefined,\n  hasIncomingCallActivity: () => Promise.resolve(false),\n\n  // these methods only available on ios\n  playRBT: () => undefined,\n  stopRBT: () => undefined,\n  enableLPC: () => undefined,\n  disableLPC: () => undefined,\n\n  // these methods available on both\n  systemUptimeMs: () => Promise.resolve(-1),\n}\n\nconst M = NativeModules as TNativeModules\nexport const BrekekeUtils = M.BrekekeUtils || Polyfill\n\nif (__DEV__ && Platform.OS !== 'web') {\n  const k = Object.keys(M.BrekekeUtils || {})\n  console.log(\n    `BrekekeUtils debug: found ${k.length} methods` +\n      (k.length ? `: ${k.join(', ')}` : ''),\n  )\n}\n\n// Add polyfill\nObject.keys(Polyfill)\n  .filter(k => typeof get(BrekekeUtils, k) !== 'function')\n  .forEach(k => {\n    set(BrekekeUtils, k, get(Polyfill, k))\n  })\n","// To alias unused react-native modules for web in .cracorc.js\n// eslint-disable-next-line import/no-default-export\nexport default null as any // type-coverage:ignore-line\n","import 'brekekejs/lib/jsonrpc'\nimport 'brekekejs/lib/webrtcclient'\n\nimport EventEmitter from 'eventemitter3'\nimport jsonStableStringify from 'json-stable-stringify'\nimport { Platform } from 'react-native'\n\nimport { currentVersion } from '../components/variables'\nimport { embedApi } from '../embed/embedApi'\nimport { accountStore, AccountUnique } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { Call, CallConfig } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { cancelRecentPn } from '../stores/cancelRecentPn'\nimport { chatStore } from '../stores/chatStore'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { CallOptions, Session, Sip } from './brekekejs'\nimport { getCameraSourceIds } from './getCameraSourceId'\nimport { pbx } from './pbx'\nimport { turnConfig } from './turnConfig'\n\ntype DeviceInputWeb = {\n  deviceId: string\n  kind: string\n  label: string\n  groupId: string\n  facing: string\n}\nconst alreadyRemovePnTokenViaSip: { [k: string]: boolean } = {}\nexport const checkAndRemovePnTokenViaSip = async (n: ParsedPn) => {\n  const exist = !!(await accountStore.findByPn(n))\n  const k = n.id || jsonStableStringify(n)\n  if (!alreadyRemovePnTokenViaSip[k] && !exist) {\n    alreadyRemovePnTokenViaSip[k] = true\n    removePnTokenViaSip(n)\n  }\n  return exist\n}\n\nconst removePnTokenViaSip = async (n: ParsedPn) => {\n  const s = getCallStore()\n  if (n.callkeepUuid) {\n    s.onCallKeepEndCall(n.callkeepUuid)\n  }\n  if (!n.sipPn.sipAuth) {\n    console.log(\n      `checkAndRemovePnTokenViaSip debug: no sip auth token isCall=${n.isCall}`,\n    )\n    return\n  }\n  console.log('checkAndRemovePnTokenViaSip debug: begin')\n  const phone = getWebrtcClient(toBoolean(n.sipPn.dtmfSendPal))\n  const userAgent = await getUserAgent(n)\n  phone.startWebRTC({\n    register: false,\n    url: getWssUrl(n.pbxHostname, n.sipPn.sipWssPort || n.pbxPort),\n    tls: true,\n    user: n.sipPn.phoneId,\n    auth: n.sipPn.sipAuth,\n    useVideoClient: true,\n    userAgent,\n  })\n  const started = await new Promise(async r => {\n    phone.addEventListener('phoneStatusChanged', e => {\n      if (e.phoneStatus === 'started') {\n        r(true)\n      }\n    })\n    await waitTimeout(10000)\n    r(false)\n  })\n  const o = phone._ua?.registrator?.()!\n  if (!started || !o) {\n    console.log(\n      `checkAndRemovePnTokenViaSip debug: started=${started} registrator=${!!o}`,\n    )\n  }\n  o._registered = true\n  o.setExtraHeaders(['X-PN-Manage: remove'])\n  phone.stopWebRTC()\n  console.log('checkAndRemovePnTokenViaSip debug: done')\n}\n\nexport class SIP extends EventEmitter {\n  phone?: Sip\n  currentCamera: string | undefined = '1'\n\n  cameraIds?: DeviceInputWeb[] = []\n  private init = async (o: SipLoginOption) => {\n    this.cameraIds = await getCameraSourceIds()\n\n    this.currentCamera = this.cameraIds?.[0]?.deviceId || '1'\n\n    const phone = getWebrtcClient(o.dtmfSendPal, this.currentCamera)\n    this.phone = phone\n\n    // emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('webrtcclient', phone)\n    }\n\n    const h = (ev: { phoneStatus: string }) => {\n      if (!ev) {\n        return\n      }\n      if (ev.phoneStatus === 'started') {\n        this.emit('connection-started')\n        return\n      }\n      const s = ev.phoneStatus\n      if (s === 'stopping' || s === 'stopped') {\n        phone._removeEventListenerPhoneStatusChange?.()\n        this.emit('connection-stopped', ev)\n        console.log(`SIP PN debug: phoneStatusChanged: phoneStatus=${s}`)\n        this.phone?._removeEventListenerPhoneStatusChange?.()\n        this.phone = undefined\n      }\n    }\n    phone.addEventListener('phoneStatusChanged', h)\n    phone._removeEventListenerPhoneStatusChange = () => {\n      phone._removeEventListenerPhoneStatusChange = undefined\n      phone.removeEventListener('phoneStatusChanged', h)\n    }\n\n    const computeCallPatch = async (ev: Session) => {\n      const m = ev.incomingMessage\n      //\n      const withSDP =\n        ev.rtcSession.direction === 'outgoing' &&\n        ev.sessionStatus === 'progress' &&\n        !!m?.body\n      //\n      const partyNumber = ev.rtcSession.remote_identity.uri.user\n      let partyName = ev.rtcSession.remote_identity.display_name\n      if (\n        (!partyName || partyName.startsWith('uc')) &&\n        partyNumber.startsWith('uc')\n      ) {\n        partyName =\n          chatStore.getGroupById(partyNumber.replace('uc', ''))?.name ||\n          partyName ||\n          partyNumber\n      }\n      const d = await getAuthStore().getCurrentDataAsync()\n      partyName =\n        partyName ||\n        d.recentCalls.find(c => c.partyNumber === partyNumber)?.partyName ||\n        partyNumber\n      //\n      const arr = m?.getHeader('X-PBX-Session-Info')?.split(';')\n      const patch: Partial<Call> = {\n        rawSession: ev,\n        id: ev.sessionId,\n        pnId: m?.getHeader('X-PN-ID'),\n        incoming: ev.rtcSession.direction === 'incoming',\n        partyNumber,\n        partyName,\n        remoteVideoEnabled: ev.remoteWithVideo,\n        localVideoEnabled: ev.withVideo,\n        sessionStatus: ev.sessionStatus,\n        callConfig: getCallConfigFromHeader(m?.getHeader('X-WEBPHONE-CALL')),\n        answered: ev.sessionStatus === 'connected',\n        voiceStreamObject: ev.remoteStreamObject,\n        withSDP,\n        earlyMedia: withSDP ? ev.remoteStreamObject : null,\n        partyImageUrl: m?.getHeader('X-PBX-IMAGE-RINGING'),\n        talkingImageUrl: m?.getHeader('X-PBX-IMAGE-TALKING'),\n        partyImageSize: m?.getHeader('X-PBX-IMAGE-SIZE'),\n        pbxTenant: arr?.[0],\n        pbxRoomId: arr?.[1],\n        pbxTalkerId: arr?.[2],\n        pbxUsername: arr?.[3],\n      }\n      if (!patch.pbxTalkerId) {\n        delete patch.pbxTalkerId\n      }\n      for (const k in patch) {\n        if (patch[k] === undefined) {\n          delete patch[k]\n        }\n      }\n      return patch\n    }\n\n    // sessionId: \"1\"\n    // sessionStatus: \"dialing\"\n    // answering: false\n    // audio: true\n    // video: false\n    // remoteStreamObject: MediaStream{...}\n    // localStreamObject: MediaStream{...}\n    // remoteWithVideo: false\n    // withVideo: true\n    // shareStream: false\n    // exInfo: \"\"\n    // muted: {main: false, videoClient: false}\n    // localVideoStreamObject: null\n    // videoClientSessionTable: {}\n    // rtcSession: RTCSession{...}\n    // incomingMessage: null\n    // remoteUserOptionsTable: {}\n    // analyser: null\n    phone.addEventListener('sessionCreated', async ev => {\n      if (!ev) {\n        return\n      }\n      const p = await computeCallPatch(ev)\n      this.emit('session-started', p)\n    })\n    phone.addEventListener('sessionStatusChanged', async ev => {\n      if (!ev) {\n        return\n      }\n      if (ev.sessionStatus === 'terminated') {\n        this.emit('session-stopped', ev)\n        return\n      }\n      const p = await computeCallPatch(ev)\n      this.emit('session-updated', p)\n    })\n\n    phone.addEventListener('videoClientSessionCreated', ev => {\n      if (!ev) {\n        return\n      }\n      const session = phone.getSession(ev.sessionId)\n      const videoSession =\n        session.videoClientSessionTable[ev.videoClientSessionId]\n      this.emit('session-updated', {\n        id: ev.sessionId,\n        videoSessionId: ev.videoClientSessionId,\n        remoteVideoEnabled: true,\n        remoteVideoStreamObject: videoSession.remoteStreamObject,\n      })\n    })\n    phone.addEventListener('videoClientSessionEnded', ev => {\n      if (!ev) {\n        return\n      }\n      this.emit('session-updated', {\n        id: ev.sessionId,\n        videoSessionId: ev.videoClientSessionId,\n        remoteVideoEnabled: false,\n        remoteVideoStreamObject: null,\n      })\n    })\n\n    phone.addEventListener('rtcErrorOccurred', ev => {\n      console.error('sip.phone.rtcErrorOccurred:', ev)\n    })\n\n    return phone\n  }\n\n  connect = async (o: SipLoginOption, a: AccountUnique) => {\n    console.log('SIP PN debug: call sip.stopWebRTC in sip.connect')\n    this.phone?._removeEventListenerPhoneStatusChange?.()\n    this.stopWebRTC()\n    const phone = await this.init(o)\n    //\n    const callOptions = ((o.pbxTurnEnabled && turnConfig) || {}) as CallOptions\n    if (!callOptions.pcConfig) {\n      callOptions.pcConfig = {}\n    }\n    if (!Array.isArray(callOptions.pcConfig.iceServers)) {\n      callOptions.pcConfig.iceServers = []\n    }\n    if (o.turnConfig) {\n      callOptions.pcConfig.iceServers.push(o.turnConfig)\n    }\n    phone.setDefaultCallOptions(callOptions)\n    //\n    const userAgent = await getUserAgent(a)\n    phone.startWebRTC({\n      url: getWssUrl(o.hostname, o.port),\n      tls: true,\n      user: o.username,\n      auth: o.accessToken,\n      useVideoClient: true,\n      userAgent,\n    })\n    //\n    console.log('SIP PN debug: added listener on _ua')\n    phone._ua?.on('newNotify', e => {\n      const data = e?.request?.data\n      if (!data) {\n        return\n      }\n      console.log(`SIP PN debug: newNotify fired on _ua data=${data}`)\n      const pnIds = parseCanceledPnIds(data)\n      if (!pnIds?.length) {\n        return\n      }\n      console.log(\n        `SIP PN debug: newNotify canceled pnIds=${JSON.stringify(pnIds)}`,\n      )\n      pnIds.forEach(cancelRecentPn)\n    })\n  }\n\n  private hackJssipFork = () => {\n    const socket = sip.phone?._ua?._transport?.socket\n    if (socket) {\n      Object.assign(socket, { __brekekephone_stopped: true })\n    }\n  }\n  stopWebRTC = () => {\n    this.hackJssipFork()\n    if (this.phone) {\n      console.log('SIP PN debug: sip.stopWebRTC: call phone.stopWebRTC')\n      this.phone.stopWebRTC()\n      this.phone = undefined\n    } else {\n      console.log('SIP PN debug: sip.stopWebRTC: already disconnected')\n    }\n  }\n  destroyWebRTC = () => {\n    this.hackJssipFork()\n    if (this.phone) {\n      console.log('SIP PN debug: sip.destroyWebRTC: call phone.destroyWebRTC')\n      this.phone.destroyWebRTC()\n      this.phone = undefined\n    } else {\n      console.log('SIP PN debug: sip.destroyWebRTC: already disconnected')\n    }\n  }\n\n  hangupSession = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    return session?.rtcSession?.terminate()\n  }\n  disableMedia = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    session?.remoteStreamObject?.getTracks().forEach(track => {\n      track.enabled = false\n    })\n  }\n  enableMedia = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    session?.remoteStreamObject?.getTracks().forEach(track => {\n      track.enabled = true\n    })\n  }\n  sendDTMF = async (p: {\n    signal: string\n    sessionId: string\n    tenant: string\n    talkerId: string\n  }) => {\n    if (!this.phone) {\n      return\n    }\n    const c = await pbx.getConfig()\n    const dtmfSendMode = Number(c?.['webrtcclient.dtmfSendMode']) || 0\n    this.phone._options.dtmfSendMode = dtmfSendMode\n    this.phone.dtmfSendMode = dtmfSendMode\n    return !this.phone._options.dtmfSendPal\n      ? this.phone.sendDTMF(p.signal, p.sessionId)\n      : pbx.sendDTMF(p.signal, p.tenant, p.talkerId)\n  }\n  enableVideo = (sessionId: string) => {\n    return this.phone?.setWithVideo(sessionId, true)\n  }\n  disableVideo = (sessionId: string) => {\n    return this.phone?.setWithVideo(sessionId, false)\n  }\n  setMuted = (muted: boolean, sessionId: string) => {\n    return this.phone?.setMuted({ main: muted }, sessionId)\n  }\n  switchCamera = async (sessionId: string, isFrontCamera: boolean) => {\n    // alert(this.currentFrontCamera)\n    if (!this.phone) {\n      return\n    }\n    // get camera info again for web mobile\n    if (this.cameraIds === undefined || this.cameraIds.length === 0) {\n      this.cameraIds = await getCameraSourceIds()\n    }\n    // if don't have camera\n    if (this.cameraIds === undefined || this.cameraIds.length === 0) {\n      return\n    }\n    const cameras = this.cameraIds.map(s => s.deviceId)\n    this.currentCamera = isFrontCamera ? cameras[1] : cameras[0]\n\n    const videoOptions = {\n      call: {\n        mediaConstraints: sipCreateMediaConstraints(\n          this.currentCamera,\n          isFrontCamera,\n        ),\n      },\n      answer: {\n        mediaConstraints: sipCreateMediaConstraints(\n          this.currentCamera,\n          isFrontCamera,\n        ),\n      },\n    }\n    this.phone?.setWithVideo(sessionId, false, videoOptions)\n    this.phone?.setWithVideo(sessionId, true, videoOptions)\n  }\n}\n\nexport const sip = new SIP()\n\nexport interface SipLoginOption {\n  hostname: string\n  port: string\n  pbxTurnEnabled: boolean\n  username: string\n  accessToken: string\n  dtmfSendPal: boolean\n  turnConfig?: RTCIceServer\n}\n\nconst parseCanceledPnIds = (data?: string) => {\n  if (!data || !/Canceled/i.test(data)) {\n    return\n  }\n  const m = data.match(/Content-Length:\\s*(\\d+)\\s*/i)\n  if (!m) {\n    return\n  }\n  const i = m.index\n  const l = parseInt(m[1])\n  if (typeof i !== 'number' || isNaN(l)) {\n    return\n  }\n  const msg = data.substr(i + m[0].length)\n  console.log(`parseCanceledPnIds: msg.length=${msg.length} l=${l}`)\n  return msg.split(/\\n/g).map(s => {\n    const lowers = s.toLowerCase()\n    return lowers.replace(/\\s+/g, '').includes(',canceled')\n      ? {\n          pnId: s.match(/(\\w+)\\W*INVITE/)?.[1],\n          completedElseWhere: lowers.includes('call completed elsewhere'),\n        }\n      : undefined\n  })\n}\n\nconst osMap: { [k: string]: string } = {\n  ios: 'iOS',\n  android: 'Android',\n  web: 'Web',\n}\nconst getUserAgent = async (a: ParsedPn | AccountUnique) => {\n  const au = 'to' in a ? await accountStore.findByPn(a) : a\n  const d = await accountStore.findData(au)\n  if (d?.userAgent) {\n    return d.userAgent\n  }\n  const os = osMap[Platform.OS]\n  return `Brekeke Phone for ${os} ${currentVersion} /JsSIP 3.2.15`\n}\n\nconst getWssUrl = (host?: string, port?: string) =>\n  `wss://${host}:${port}/phone`\n\nconst sipCreateMediaConstraints = (\n  sourceId?: string,\n  isFrontCamera?: boolean,\n) => {\n  // web change config for browser chromium 2016\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=614716\n  const webVideoConfig = {\n    facingMode: isFrontCamera ? 'user' : 'environment',\n    deviceId: sourceId ? { exact: sourceId } : undefined,\n  }\n  const appVideoConfig = {\n    mandatory: {\n      minWidth: 0,\n      minHeight: 0,\n      minFrameRate: 0,\n    },\n    facingMode: isFrontCamera ? 'user' : 'environment',\n    optional: sourceId ? [{ sourceId }] : [],\n  }\n\n  return {\n    audio: false,\n    video: Platform.OS === 'web' ? webVideoConfig : appVideoConfig,\n  } as any as MediaStreamConstraints\n}\nconst getWebrtcClient = (dtmfSendPal = false, sourceId?: string) =>\n  new window.Brekeke.WebrtcClient.Phone({\n    logLevel: 'all',\n    multiSession: 1,\n    defaultOptions: {\n      videoOptions: {\n        call: {\n          mediaConstraints: sipCreateMediaConstraints(sourceId, true),\n        },\n        answer: {\n          mediaConstraints: sipCreateMediaConstraints(sourceId, true),\n        },\n      },\n    },\n    dtmfSendPal,\n    ctiAutoAnswer: 1,\n    eventTalk: 1,\n    configuration: {\n      socketKeepAlive: 60,\n    },\n  })\n\nconst getCallConfigFromHeader = (config?: string): CallConfig =>\n  config\n    ? Object.fromEntries(\n        config\n          .split(';')\n          .map(c =>\n            c\n              .split(':')\n              .map(kv => kv.trim())\n              .filter(kv => kv),\n          )\n          .filter(a => a.length === 2),\n      )\n    : {}\n","import { cloneDeep } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { SectionListData } from 'react-native'\n\nimport { UcBuddy, UcBuddyGroup } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { isUcBuddy, uc } from '../api/uc'\nimport { accountStore } from './accountStore'\nimport { getAuthStore, waitPbx, waitUc } from './authStore'\nimport { contactStore } from './contactStore'\nimport { intl } from './intl'\n\nconst defaultBuddyMax = 100\n\nexport type GroupUserSectionListData = SectionListData<\n  UcBuddy,\n  { title: string }\n>\nexport type BuddyType = 'PbxBuddy' | 'UcBuddy'\n\nclass UserStore {\n  @observable dataGroupAllUser: GroupUserSectionListData[] = []\n  @observable dataListAllUser: UcBuddy[] = []\n  @observable buddyMax = defaultBuddyMax\n  @observable isDisableAddAllUserToTheList = false\n  @observable isSelectedAddAllUser: boolean = true\n  @observable selectedUserIds: { [userId: string]: boolean } = {}\n  @observable saveSelectedUserIds: { [userId: string]: boolean } = {}\n  @observable userOnline: { [userId: string]: string } = {}\n  @observable isCapacityInvalid = false\n  @observable buddyMode = 0\n  @observable dataDisplayGroupAllUser: GroupUserSectionListData[] = []\n  type: BuddyType = 'UcBuddy'\n  groups: UcBuddyGroup[] = []\n\n  @action loadPbxBuddyList = async (isAllUser: boolean = false) => {\n    await waitPbx()\n    this.resetCache()\n    this.type = 'PbxBuddy'\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    let allUsers: UcBuddy[] = []\n    // get all user from pbx\n    if (isAllUser) {\n      const ids = await pbx.getUsers(cp.pbxTenant)\n      if (!ids) {\n        return\n      }\n      allUsers = ids\n        .filter(u => u[0] !== cp.pbxUsername)\n        .map(u => {\n          return {\n            disabledBuddy: false,\n            user_id: u[0],\n            name: u[1],\n            profile_image_url: '',\n            group: '',\n            tenant: cp.pbxTenant,\n            block_settings: {},\n            status: false,\n          } as any as UcBuddy\n        })\n    }\n\n    // get from local\n    const d = await s.getCurrentDataAsync()\n    const buddyList = d?.pbxBuddyList\n    const users = cloneDeep(buddyList?.users || [])\n\n    if (s.isBigMode()) {\n      this.isSelectedAddAllUser = false\n    } else {\n      this.isSelectedAddAllUser = !!s.getCurrentAccount()?.pbxLocalAllUsers\n    }\n    this.isDisableAddAllUserToTheList = s.isBigMode()\n    this.buddyMax =\n      Number(s.pbxConfig?.['webphone.users.max']) || defaultBuddyMax // buddy_max\n    this.buddyMode = 2 // buddy_mode\n    this.groups = []\n    this.filterDataUserGroup(users, allUsers, this.buddyMode === 1)\n  }\n  @action loadUcBuddyList = async (isAllUser: boolean = false) => {\n    await waitUc()\n    const s = getAuthStore()\n    this.resetCache()\n    this.type = 'UcBuddy'\n    const userList = uc.client.getBuddylist()\n    const configProperties = uc.client.getConfigProperties()\n    const p = uc.client.getProfile()\n    let allUsers: UcBuddy[] = []\n    if (isAllUser) {\n      allUsers = uc.client\n        .getAllUsers()\n        .user?.filter(u => !u.disabledBuddy && u.user_id !== p.user_id)\n        .map(\n          user =>\n            ({\n              user_id: user.user_id,\n              name: user.user_name,\n              group: configProperties.buddy_mode === 1 ? user.user_group : '',\n              tenant: p.tenant,\n            } as UcBuddy),\n        )\n    }\n\n    if (s.isBigMode()) {\n      this.isSelectedAddAllUser = false\n    } else {\n      this.isSelectedAddAllUser = !!s.getCurrentAccount()?.pbxLocalAllUsers\n    }\n    this.isDisableAddAllUserToTheList =\n      s.isBigMode() ||\n      configProperties.optional_config?.buddy_max < allUsers?.length\n    this.buddyMax =\n      configProperties.optional_config?.buddy_max || defaultBuddyMax\n    this.buddyMode = configProperties.buddy_mode\n    this.groups = []\n    this.filterDataUserGroup(\n      userList.user,\n      allUsers,\n      configProperties.buddy_mode === 1,\n    )\n  }\n\n  @action getBuddyById = (buddy_id: string) => {\n    return this.dataListAllUser.find(item => item.user_id === buddy_id)\n  }\n\n  @action filterDataUserGroup = (\n    dataGroupUser: (UcBuddy | UcBuddyGroup)[],\n    listAllUser: UcBuddy[],\n    isDisableEditGroup: boolean,\n  ) => {\n    const sectionData: GroupUserSectionListData[] = []\n    const sectionDataOther: GroupUserSectionListData = {\n      title: `(${intl`No Group`})`,\n      data: [],\n    }\n    const sectionDataIds: SectionListData<string>[] = []\n    const sectionDataOtherIds: SectionListData<string> = {\n      title: `(${intl`No Group`})`,\n      data: [],\n    }\n\n    const listDataUser: UcBuddy[] = []\n    const selectedUserIds: { [userId: string]: boolean } = {}\n\n    if (dataGroupUser.length > 0) {\n      dataGroupUser.forEach(user => {\n        if (isUcBuddy(user)) {\n          const indx = sectionData.findIndex(\n            sectionItm => sectionItm.title === user.group,\n          )\n          if (indx !== -1) {\n            sectionData[indx].data = [...sectionData[indx].data, user]\n            sectionDataIds[indx].data = [\n              ...sectionDataIds[indx].data,\n              user.user_id,\n            ]\n          } else {\n            sectionDataOther.data = [...sectionDataOther.data, user]\n            sectionDataOtherIds.data = [\n              ...sectionDataOtherIds.data,\n              user.user_id,\n            ]\n          }\n          listDataUser.push(user)\n          selectedUserIds[user.user_id] = true\n        } else if (!this.groups.some(g => g.id === user.id)) {\n          sectionData.push({ title: user.id, data: [] })\n          sectionDataIds.push({ title: user.id, data: [] })\n          this.groups.push(user)\n        }\n      })\n    }\n    const listUserNotSelected = listAllUser.filter(\n      itm => !listDataUser.some(u => u.user_id === itm.user_id),\n    )\n\n    if (!isDisableEditGroup) {\n      sectionDataOther.data = [...sectionDataOther.data, ...listUserNotSelected]\n      sectionData.push(sectionDataOther)\n    } else if (sectionData.length > 0) {\n      sectionData[0].data = [...sectionData[0].data, ...listUserNotSelected]\n    }\n\n    this.dataGroupAllUser = sectionData\n    this.dataListAllUser = [...listDataUser, ...listUserNotSelected]\n    this.selectedUserIds = selectedUserIds\n    this.saveSelectedUserIds = cloneDeep(this.selectedUserIds)\n    this.dataDisplayGroupAllUser = cloneDeep(this.dataGroupAllUser)\n  }\n\n  filterUser = (searchTxt: string, isOnline: boolean) => {\n    const displayUsers: GroupUserSectionListData[] = []\n    let totalContact = 0\n    let totalOnlineContact = 0\n\n    this.dataDisplayGroupAllUser.forEach(s => {\n      // list all user\n      const dataAllUsers =\n        s.data\n          ?.filter(u => this.saveSelectedUserIds[u.user_id])\n          .map(u => ({ ...u, status: this.userOnline[u.user_id] })) || []\n\n      totalContact += dataAllUsers.length\n\n      const dataAllUsersFiltered = dataAllUsers.filter(\n        u => u.user_id.includes(searchTxt) || u.name.includes(searchTxt),\n      )\n\n      // list online user\n      const dataOnlineUser = s.data\n        .filter(u => this.userOnline[u.user_id])\n        .map(u => ({ ...u, status: this.userOnline[u.user_id] }))\n      totalOnlineContact += dataOnlineUser.length\n      const dataOnlineUserFiltered = dataOnlineUser.filter(\n        u => u.user_id.includes(searchTxt) || u.name.includes(searchTxt),\n      )\n      displayUsers.push({\n        title: s.title,\n        data: isOnline ? dataAllUsersFiltered : dataOnlineUserFiltered,\n      })\n    })\n\n    return { displayUsers, totalContact, totalOnlineContact }\n  }\n\n  @action toggleIsSelectedAddAllUser = () => {\n    if (!this.isSelectedAddAllUser && !contactStore.pbxUsers.length) {\n      contactStore.getPbxUsers()\n    }\n    this.isSelectedAddAllUser = !this.isSelectedAddAllUser\n    const s = getAuthStore()\n    accountStore.upsertAccount({\n      id: s.getCurrentAccount()?.id,\n      pbxLocalAllUsers: this.isSelectedAddAllUser,\n    })\n  }\n\n  @observable isSelectEditGroupingAndUserOrder: boolean = false\n  @action toggleIsSelectEditGroupingAndUserOrder = () => {\n    this.isSelectEditGroupingAndUserOrder =\n      !this.isSelectEditGroupingAndUserOrder\n  }\n\n  @action selectUserId = (userId: string) => {\n    if (this.selectedUserIds[userId]) {\n      delete this.selectedUserIds[userId]\n    } else {\n      this.selectedUserIds[userId] = true\n    }\n    this.isCapacityInvalid =\n      Object.keys(this.selectedUserIds).length > this.buddyMax\n  }\n\n  @action selectAllUserIdsByGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex]?.data.forEach(u => {\n      this.selectedUserIds[u.user_id] = true\n    })\n  }\n\n  @action removeGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex].data.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n    if (this.groups.length >= 1) {\n      this.groups.splice(groupIndex, 1)\n    }\n    if (this.dataGroupAllUser.length >= 1) {\n      this.dataGroupAllUser.splice(groupIndex, 1)\n    }\n  }\n\n  @action unselectAllUserIdsByGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex].data.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n  }\n\n  getHeaderTitle = (\n    sectionTitle: string,\n    renderData: readonly UcBuddy[],\n    isEditMode?: boolean,\n  ) => {\n    if (!getAuthStore().getCurrentAccount()?.ucEnabled) {\n      return `(${renderData.length})`\n    }\n\n    if (isEditMode) {\n      const selectedItemCount = this.isSelectedAddAllUser\n        ? renderData.length\n        : renderData.filter(i => this.selectedUserIds[i.user_id]).length\n      return `${sectionTitle} ${selectedItemCount}/${renderData.length}`\n    }\n\n    const indexGroup = this.dataGroupAllUser.findIndex(\n      item => item.title === sectionTitle,\n    )\n    if (indexGroup <= -1) {\n      return ''\n    }\n    const totalUser = this.dataGroupAllUser[indexGroup].data.length\n    const totalOnline = this.dataGroupAllUser[indexGroup].data.filter(\n      u => this.userOnline[u.user_id],\n    ).length\n    return `${\n      sectionTitle === `(${intl`No Group`})` ? '' : sectionTitle\n    } ${totalOnline}/${totalUser}`\n  }\n\n  @action updateStatusBuddy = (\n    buddy_id: string,\n    status: string,\n    avatar: string,\n  ) => {\n    if (status !== 'offline') {\n      this.userOnline[buddy_id] = status\n    } else {\n      delete this.userOnline[buddy_id]\n    }\n  }\n\n  @action addGroup = (\n    groupName: string,\n    selectedUsers: { [k: string]: UcBuddy },\n  ) => {\n    this.dataListAllUser.forEach((user, index) => {\n      if (selectedUsers[user.user_id]) {\n        this.dataListAllUser[index].group = groupName\n      }\n    })\n\n    this.dataGroupAllUser.forEach((group, index) => {\n      this.dataGroupAllUser[index].data = group.data.filter(\n        item => !selectedUsers[item.user_id],\n      )\n    })\n\n    const newGroupContact: GroupUserSectionListData = {\n      data: Object.keys(selectedUsers).map(key => {\n        return selectedUsers[key]\n      }),\n      title: groupName,\n    }\n\n    this.dataGroupAllUser.unshift(newGroupContact)\n\n    Object.keys(selectedUsers).forEach(u => {\n      this.selectedUserIds[u] = true\n    })\n    this.groups.push({ id: groupName, name: groupName })\n  }\n  resetCache = () => {\n    this.groups = []\n    this.selectedUserIds = {}\n    this.dataListAllUser = []\n  }\n  @action updateDisplayGroupList = () => {\n    this.saveSelectedUserIds = cloneDeep(this.selectedUserIds)\n    this.dataDisplayGroupAllUser = cloneDeep(this.dataGroupAllUser)\n    // reset dataGroupAllUser\n    this.resetCache()\n  }\n  @action editGroup = (\n    groupName: string,\n    removedUsers: UcBuddy[],\n    selectedUserItems: { [k: string]: UcBuddy },\n  ) => {\n    this.dataListAllUser.forEach((user, index) => {\n      if (selectedUserItems[user.user_id]) {\n        this.dataListAllUser[index].group = groupName\n      }\n    })\n\n    this.dataGroupAllUser.forEach((group, index) => {\n      if (group.title === groupName) {\n        this.dataGroupAllUser[index].data = Object.keys(selectedUserItems).map(\n          key => {\n            return selectedUserItems[key]\n          },\n        )\n      } else {\n        this.dataGroupAllUser[index].data = group.data.filter(\n          item => !selectedUserItems[item.user_id],\n        )\n      }\n      if (index === this.dataGroupAllUser.length - 1) {\n        this.dataGroupAllUser[index].data = [\n          ...this.dataGroupAllUser[index].data,\n          ...removedUsers,\n        ]\n      }\n    })\n\n    Object.keys(selectedUserItems).forEach(u => {\n      this.selectedUserIds[u] = true\n    })\n    removedUsers.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n  }\n\n  @action clearStore = () => {\n    this.groups = []\n    this.dataGroupAllUser = []\n    this.dataListAllUser = []\n    this.selectedUserIds = {}\n    this.saveSelectedUserIds = {}\n    this.dataDisplayGroupAllUser = []\n  }\n}\n\nexport const userStore = new UserStore()\n","import { pickBy } from 'lodash'\nimport { FC, forwardRef } from 'react'\nimport { Animated, StyleSheet, Text, TextProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnText: {\n    position: 'relative',\n    fontSize: v.fontSize,\n    lineHeight: v.lineHeight,\n    fontWeight: v.fontWeight,\n    fontFamily: v.fontFamily,\n    color: v.color,\n  },\n  title: {\n    fontSize: v.fontSizeTitle,\n    lineHeight: v.lineHeightTitle,\n    fontWeight: 'bold',\n  },\n  subTitle: {\n    fontSize: v.fontSizeSubTitle,\n    lineHeight: v.lineHeightSubTitle,\n    fontWeight: 'bold',\n  },\n  small: {\n    fontSize: v.fontSizeSmall,\n    lineHeight: v.lineHeightSmall,\n    fontWeight: 'bold',\n  },\n  black: {\n    color: 'black',\n  },\n  white: {\n    color: 'white',\n  },\n  primary: {\n    color: v.colors.primary,\n  },\n  warning: {\n    color: v.colors.warning,\n  },\n  danger: {\n    color: v.colors.danger,\n  },\n  normal: {\n    fontWeight: 'normal',\n  },\n  bold: {\n    fontWeight: 'bold',\n  },\n  center: {\n    textAlign: 'center',\n  },\n  right: {\n    textAlign: 'right',\n  },\n  padding: {\n    paddingHorizontal: 10,\n  },\n})\n\nconst wrap = (Component: Function) =>\n  forwardRef(\n    (\n      {\n        singleLine,\n        style,\n        ...props\n      }: TextProps & {\n        singleLine: boolean\n      },\n      ref,\n    ) => (\n      <Component\n        numberOfLines={singleLine ? 1 : 999}\n        ref={ref}\n        {...pickBy(props, (p, k) => !(k in css))}\n        style={[\n          css.RnText,\n          ...Object.keys(props)\n            .sort(k =>\n              k === 'title' || k === 'subTitle' || k === 'small' ? -1 : 1,\n            )\n            .map(\n              k => props[k as keyof typeof props] && css[k as keyof typeof css],\n            ),\n          style,\n        ]}\n      />\n    ),\n  )\n\nexport type TRnTextProps = TextProps &\n  Partial<{\n    singleLine: boolean\n    title: boolean\n    subTitle: boolean\n    small: boolean\n    black: boolean\n    white: boolean\n    primary: boolean\n    warning: boolean\n    danger: boolean\n    normal: boolean\n    bold: boolean\n    center: boolean\n    right: boolean\n    padding: boolean\n  }>\nexport type TRnText = FC<TRnTextProps>\n\nexport const RnText = wrap(Text) as TRnText\nexport const AnimatedText = wrap(Animated.Text) as TRnText\n","import { action, observable } from 'mobx'\nimport { Keyboard } from 'react-native'\n\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nclass RnKeyboardStore {\n  @observable isKeyboardShowing = false\n  @observable isKeyboardAnimating = false\n  waitKeyboardTimeoutId = 0\n\n  waitKeyboard =\n    (fn: Function) =>\n    (...args: unknown[]) => {\n      if (this.waitKeyboardTimeoutId) {\n        return\n      }\n      if (!this.isKeyboardShowing) {\n        fn(...args)\n        return\n      }\n      Keyboard.dismiss()\n      this.waitKeyboardTimeoutId = BackgroundTimer.setTimeout(() => {\n        this.waitKeyboardTimeoutId = 0\n        fn(...args)\n      }, 300)\n    }\n\n  keyboardAnimatingTimeoutId = 0\n  @action setKeyboardAnimatingTimeout = () => {\n    if (this.keyboardAnimatingTimeoutId) {\n      BackgroundTimer.clearTimeout(this.keyboardAnimatingTimeoutId)\n    }\n    this.isKeyboardAnimating = true\n    this.keyboardAnimatingTimeoutId = BackgroundTimer.setTimeout(\n      action(() => {\n        this.keyboardAnimatingTimeoutId = 0\n        this.isKeyboardAnimating = false\n      }),\n      300,\n    )\n  }\n}\n\nexport const RnKeyboard = new RnKeyboardStore()\n\n// ios\nKeyboard.addListener(\n  'keyboardWillShow',\n  action(() => {\n    RnKeyboard.setKeyboardAnimatingTimeout()\n    RnKeyboard.isKeyboardShowing = true\n  }),\n)\nKeyboard.addListener(\n  'keyboardWillHide',\n  action(() => {\n    RnKeyboard.setKeyboardAnimatingTimeout()\n    RnKeyboard.isKeyboardShowing = false\n  }),\n)\n\n// android\nKeyboard.addListener(\n  'keyboardDidShow',\n  action(() => {\n    RnKeyboard.isKeyboardShowing = true\n  }),\n)\nKeyboard.addListener(\n  'keyboardDidHide',\n  action(() => {\n    RnKeyboard.isKeyboardShowing = false\n  }),\n)\n","import { action, observable } from 'mobx'\nimport { ReactComponentLike } from 'prop-types'\nimport { SyntheticEvent } from 'react'\n\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getCallStore } from './callStore'\nimport { RnKeyboard } from './RnKeyboard'\n\nexport type StackerFn<T> = keyof T extends never\n  ? () => void\n  : RequiredKeys<T> extends never\n  ? (props?: T) => void\n  : (props: T) => void\n\nexport type RnStack = {\n  isRoot?: boolean\n  Component: ReactComponentLike\n  name: string\n}\n\nexport class RnStackerStore {\n  @observable stacks: RnStack[] = []\n  @observable stackAnimating = false\n\n  @action openStack = (stack: RnStack) => {\n    if (stack.isRoot) {\n      this.stacks = [stack]\n    } else {\n      this.stacks = this.stacks.filter(s => s.name !== stack.name)\n      this.stacks.push(stack)\n    }\n  }\n  dismiss = RnKeyboard.waitKeyboard(\n    action(() => {\n      this.stacks.pop()\n    }),\n  )\n\n  createGoTo = <T>(\n    o: { [k: string]: ReactComponentLike },\n    isRoot = false,\n  ): StackerFn<T> => {\n    const keys = Object.keys(o)\n    if (keys.length !== 1) {\n      throw new Error('RnStacker.registerStack must be called with only 1 key')\n    }\n    const name = keys[0]\n    const Component = o[name]\n    const f = RnKeyboard.waitKeyboard(\n      action((stack: SyntheticEvent) => {\n        getCallStore().inPageCallManage = undefined\n        // Prevent multiple stacks from opening at the same time\n        if (this.stackAnimating) {\n          return\n        }\n        if (!isRoot) {\n          this.stackAnimating = true\n          BackgroundTimer.setTimeout(() => {\n            this.stackAnimating = false\n          }, 300)\n        }\n        //\n        const stack0 = {} as RnStack\n        // It fails if the param is an event\n        //    or something not enumerable\n        if (stack && !stack.nativeEvent) {\n          try {\n            Object.assign(stack0, stack)\n          } catch (err) {}\n        }\n        Object.assign(stack0, {\n          name,\n          Component,\n          isRoot,\n        })\n        this.openStack(stack0)\n      }),\n    )\n    return f as any as StackerFn<T>\n  }\n  createBackTo =\n    <T>(o: { [k: string]: ReactComponentLike }, isRoot = false): StackerFn<T> =>\n    (...args: unknown[]) => {\n      const cs = getCallStore()\n      if (cs.inPageCallManage) {\n        cs.inPageCallManage = undefined\n        return\n      }\n      if (this.stacks.length <= 1) {\n        // @ts-ignore\n        this.createGoTo(o, isRoot)(...args)\n        return\n      }\n      this.dismiss()\n    }\n}\n\nexport const RnStacker = new RnStackerStore()\n","// import vi from '../assets/intl-vi.json'\nimport RnAsyncStorage from '@react-native-async-storage/async-storage'\nimport { action, observable, runInAction } from 'mobx'\nimport { NativeModules, Platform } from 'react-native'\n\nimport en from '../assets/intl-en.json'\nimport ja from '../assets/intl-ja.json'\nimport { arrToMap } from '../utils/arrToMap'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { RnPicker } from './RnPicker'\n\nexport const labels = {\n  en,\n  ja,\n  // vi,\n} as { [k: string]: string[] }\nexport const enLabelsMapIndex = arrToMap(\n  en,\n  (k: string) => k,\n  (k: string, i: number) => i,\n)\n\nexport const localeOptions = [\n  { key: 'en', label: 'English' },\n  { key: 'ja', label: '' },\n  // { key: 'vi', label: 'Ting Vit' },\n]\n\n// typings\nconst TypedNativeModules = NativeModules as {\n  SettingsManager?: {\n    settings?: {\n      AppleLocale?: string\n      AppleLanguages?: string[]\n    }\n  }\n  I18nManager?: {\n    localeIdentifier?: string\n  }\n}\n\nexport class IntlStore {\n  @observable locale = 'en'\n  @observable localeReady = false\n  @observable localeLoading = true\n  getLocaleName = () => localeOptions.find(o => o.key === this.locale)?.label\n\n  private getLocale = async () => {\n    let locale = await RnAsyncStorage.getItem('locale').then(l => l || '')\n    if (!locale || !labels[locale]) {\n      locale =\n        (Platform.OS === 'ios'\n          ? TypedNativeModules?.SettingsManager?.settings?.AppleLocale ||\n            TypedNativeModules?.SettingsManager?.settings?.AppleLanguages?.[0]\n          : TypedNativeModules?.I18nManager?.localeIdentifier) || ''\n      locale = locale?.substr(0, 2)\n      console.log(`Intl debug: system locale=${locale}`)\n    }\n    if (!locale || !labels[locale]) {\n      locale = 'en'\n    }\n    await RnAsyncStorage.setItem('locale', locale)\n    runInAction(() => {\n      this.locale = locale\n      BrekekeUtils.setLocale(this.locale)\n    })\n  }\n  private setLocale = async (locale: string) => {\n    if (this.localeLoading || locale === this.locale) {\n      return\n    }\n    runInAction(() => {\n      this.localeLoading = true\n    })\n    if (!labels[locale as 'en']) {\n      locale = 'en'\n    }\n    await RnAsyncStorage.setItem('locale', locale)\n    await waitTimeout()\n    runInAction(() => {\n      this.localeLoading = false\n      this.locale = locale\n      BrekekeUtils.setLocale(this.locale)\n    })\n  }\n  selectLocale = () => {\n    RnPicker.open({\n      options: localeOptions,\n      selectedKey: this.locale,\n      onSelect: this.setLocale,\n    })\n  }\n\n  private loadingPromise?: Promise<unknown>\n  wait = () => {\n    if (!this.loadingPromise) {\n      this.loadingPromise = this.getLocale().then(\n        action(() => {\n          this.localeReady = true\n          this.localeLoading = false\n        }),\n      )\n    }\n    return this.loadingPromise\n  }\n}\nexport const intlStore = new IntlStore() as Immutable<IntlStore>\n","import { useEffect, useRef, useState } from 'react'\nimport { Animated } from 'react-native'\n\nimport { arrToMap } from './arrToMap'\n\nexport const animationOption = {\n  duration: 150,\n}\n\ntype AnimationProps = {\n  [k: string]: any // []\n}\n\nexport function useAnimation<T extends AnimationProps>(\n  enabled: boolean,\n  props: T,\n  options?: Animated.TimingAnimationConfig,\n) {\n  const r = useRef<Animated.Value>()\n  if (!r.current) {\n    r.current = new Animated.Value(0)\n  }\n  const v = r.current\n  useEffect(() => {\n    const t = Animated.timing(v, {\n      ...animationOption,\n      ...options,\n      toValue: enabled ? 1 : 0,\n      useNativeDriver: false,\n    })\n    t.start()\n    return () => t.stop()\n  }, [enabled, options, v])\n  return arrToMap(\n    Object.keys(props),\n    k => k,\n    k =>\n      v.interpolate({\n        inputRange: [0, 1],\n        outputRange: props[k],\n      }),\n  ) as {\n    [k in keyof T]: T[k][0]\n  }\n}\n\nexport const useAnimationOnDidMount = <T extends AnimationProps>(props: T) => {\n  const [didMount, setDidMount] = useState(false)\n  useEffect(() => setDidMount(true), [])\n  return useAnimation(didMount, props)\n}\n","import { action, observable } from 'mobx'\n\nexport type RnPickerOption = {\n  options: {\n    key: number | string\n    label: string\n    icon?: string\n  }[]\n  cancelLabel?: string\n  selectedKey?: string\n  onSelect: Function\n}\n\nexport class RnPickerStore {\n  @observable currentRnPicker: RnPickerOption | null = null\n\n  @action open = (picker: RnPickerOption) => {\n    this.currentRnPicker = picker\n  }\n  @action dismiss = () => {\n    this.currentRnPicker = null\n  }\n}\n\nexport const RnPicker = new RnPickerStore()\n","export const toBoolean = (s?: string) =>\n  s === 'on' || s === 'true' || s === '1' || (s as any) === true ? true : false\nexport const toBooleanFalsy = (s?: string) =>\n  !(s === 'off' || s === 'false' || s === '0' || (s as any) === false\n    ? false\n    : true)\n","import { decode } from 'html-entities'\n\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatTarget } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { formatDuration } from './formatDuration'\n\nexport const formatChatContent = (c: {\n  text?: string\n  creatorId?: string\n  type?: number\n  ctype?: number\n}) => {\n  const type = c.type || c.ctype\n  let text = c.text || ''\n  const originalText = text\n  if (type !== 1) {\n    let o:\n      | undefined\n      | {\n          name?: string\n          talklen?: number\n          file_id?: string\n          additionals?: []\n          target?: ChatTarget\n        }\n    try {\n      o = JSON.parse(text)\n    } catch (err) {}\n    if (!o) {\n      o = {}\n    }\n    if (typeof o.talklen === 'number' || typeof o.talklen === 'string') {\n      text = !c.creatorId\n        ? intl`Call duration: ${formatDuration(o.talklen)}`\n        : c.creatorId === getAuthStore().getCurrentAccount()?.pbxUsername\n        ? intl`Outgoing call, duration: ${formatDuration(o.talklen)}`\n        : intl`Incoming call, duration: ${formatDuration(o.talklen)}`\n    } else if (o.name && o.file_id) {\n      text = `${o.name} ${!o.additionals ? `-> ${o.target?.user_id}` : ''}`\n    } else if (o.name && !o.file_id) {\n      text = o.name\n    }\n  }\n\n  // Fix migrate error from apps backend?\n  let isTextOnly = text.endsWith(' .txt')\n  if (isTextOnly) {\n    text = text.replace(/ \\.txt$/, '')\n  }\n  isTextOnly = isTextOnly || type === 1 || !originalText.startsWith('{')\n\n  return {\n    text: decode(text),\n    isTextOnly,\n  }\n}\n\nexport const filterTextOnly = <\n  T extends {\n    text?: string\n    creatorId?: string\n    type?: number\n    ctype?: number\n  },\n>(\n  arr?: T[],\n): T[] => (arr || []).filter(c => formatChatContent(c).isTextOnly)\n","import { Buffer } from 'buffer'\nimport { debounce } from 'lodash'\nimport { observable } from 'mobx'\nimport moment from 'moment'\nimport { Linking, Platform } from 'react-native'\nimport RNFS from 'react-native-fs'\nimport Share from 'react-native-share'\n\nimport { RnAsyncStorage } from '../components/Rn'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { intl, intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\ndeclare global {\n  interface Window {\n    debugStore: DebugStore\n  }\n}\n\nlet store = null as any as DebugStore\n// The location of 2 log file, log2 will be deleted and replaced by log1\n//    when log1 reach the limit, then log1 will be reset\n// The `log` will be used for combining the two above files in ios\n//    because in ios Share only works with `file://...` url\nconst [log, log1, log2] = ['log', 'log1', 'log2'].map(n =>\n  Platform.OS === 'web'\n    ? ''\n    : `${RNFS.DocumentDirectoryPath}/brekeke-phone-${n}.txt`,\n)\nconst maximumBytes = 100000 // 100KB\n\nclass DebugStore {\n  loading = true\n  // By default only error logs will be captured\n  // If this flag is turned on, all logs will be captured\n  // This flag will be saved to storage and we will read it again\n  //    as soon as possible when app starts up\n  @observable captureDebugLog = false\n  toggleCaptureDebugLog = () => {\n    this.captureDebugLog = !this.captureDebugLog\n    RnAsyncStorage.setItem(\n      'captureDebugLog',\n      JSON.stringify(this.captureDebugLog),\n    )\n  }\n\n  // Cache the size of log files\n  @observable logSizes = [0, 0]\n  getLogSize = () => this.logSizes.reduce((sum, s) => sum + s, 0)\n\n  // Use a queue to write logs to file in batch\n  logQueue: string[] = []\n\n  // The function to be called in src/utils/captureConsoleOutput.ts\n  captureConsoleOutput = (lv: string, msg: string) => {\n    if (lv !== 'error' && lv !== 'warn' && !this.captureDebugLog) {\n      return\n    }\n    msg =\n      moment().format('YYYY/MM/DD HH:mm:ss.SSS') +\n      ` [${lv.toUpperCase().padStart(5)}] ` +\n      msg.replace(/\\s*:\\s+log@\\/.+$/, '')\n    this.logQueue.push(msg)\n    this.writeFileBatch()\n  }\n  writeFile = async () => {\n    if (this.loading) {\n      BackgroundTimer.setTimeout(this.writeFileBatch, 300)\n      return\n    }\n    this.loading = true\n    await this.writeFileWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to write debug log to file`,\n        err,\n      })\n    })\n    this.loading = false\n  }\n  writeFileWithoutCatch = async () => {\n    if (!this.logQueue.length) {\n      return\n    }\n    const msg = this.logQueue.join('\\n')\n    this.logQueue = []\n    // Append to log1\n    await RNFS.appendFile(log1, msg + '\\n', 'utf8')\n    const { size } = await RNFS.stat(log1)\n    this.logSizes[0] = Number(size)\n    // If the size of log1 passes the limit\n    //    we will copy it to log2 and clear the log1\n    if (this.logSizes[0] > maximumBytes) {\n      this.logSizes[1] = this.logSizes[0]\n      await RNFS.unlink(log2).catch((err: Error) => {\n        console.error('debugStore RNFS.unlink(log2).catch error:', err)\n      })\n      await RNFS.moveFile(log1, log2)\n    }\n  }\n  writeFileBatch = debounce(this.writeFile, 300, { maxWait: 1000 })\n\n  openLogFile = () =>\n    this.openLogFileWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to build and open log file`,\n        err,\n      })\n    })\n  openLogFileWithoutCatch = async () => {\n    const promises = [log1, log2].map(l =>\n      RNFS.exists(l)\n        .then(e => (e ? RNFS.readFile(l, 'utf8') : ''))\n        .then(f => f || ''),\n    )\n    const [f0, f1] = await Promise.all(promises)\n    const title = `brekeke_phone_log_${moment().format('YYMMDDHHmmss')}.txt`\n    let url: string | null = null\n    // Share works inconsistency between android and ios\n    if (Platform.OS === 'ios') {\n      await RNFS.writeFile(log, f1 + f0, 'utf8')\n      url = log // only works with `file://...`\n    } else {\n      const b64 = Buffer.from(f1 + f0).toString('base64')\n      url = `data:text/plain;base64,${b64}` // only works with base64\n    }\n    Share.open({ title, url, subject: title })\n  }\n\n  clearLogFiles = () => {\n    RnAlert.prompt({\n      title: intl`Clear Logs`,\n      message: intl`Do you want to clear all the log files?`,\n      onConfirm: this.clearLogFilesWithoutPrompt,\n      confirmText: intl`CLEAR`,\n    })\n  }\n  clearLogFilesWithoutPrompt = () =>\n    this.clearLogFilesWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to clear the log files`,\n        err,\n      })\n    })\n  clearLogFilesWithoutCatch = () =>\n    Promise.all(\n      [log1, log2].map((l, i) =>\n        RNFS.exists(l)\n          .then(e => (e ? RNFS.unlink(l) : undefined))\n          .then(() => (this.logSizes[i] = 0)),\n      ),\n    )\n\n  @observable isCheckingForUpdate = false\n  @observable remoteVersion = ''\n  @observable remoteVersionLastCheck = 0\n\n  checkForUpdate = () => {\n    if (this.isCheckingForUpdate) {\n      return\n    }\n    this.isCheckingForUpdate = true\n    const p =\n      Platform.OS === 'android'\n        ? window\n            .fetch(\n              'https://play.google.com/store/apps/details?id=com.brekeke.phone&hl=en',\n            )\n            .then(res => res.text())\n            .then(\n              t =>\n                t.match(/\\[\\[\\[\"(\\d+\\.\\d+\\.\\d+)\"\\]/)?.[1].trim() ||\n                t.match(/Current Version.+>([\\d.]+)<\\/span>/)?.[1].trim(),\n            )\n        : window\n            .fetch('https://itunes.apple.com/lookup?bundleId=com.brekeke.phone')\n            .then(res => res.json())\n            .then(\n              (j: {\n                results?: {\n                  version: string\n                }[]\n              }) => j.results?.[0].version,\n            )\n    p.then(v => {\n      if (!v) {\n        throw new Error('The returned version from app store is empty')\n      }\n      this.remoteVersion = v\n      this.remoteVersionLastCheck = Date.now()\n      this.isCheckingForUpdate = false\n    })\n      .then(this.saveRemoteVersionToStorage)\n      .catch((err: Error) => {\n        console.error('Failed to get app version from app store:', err)\n        this.isCheckingForUpdate = false\n      })\n  }\n  saveRemoteVersionToStorage = () => {\n    RnAsyncStorage.setItem(\n      'remoteVersion',\n      JSON.stringify({\n        version: this.remoteVersion,\n        lastCheck: this.remoteVersionLastCheck,\n      }),\n    ).catch((err: Error) => {\n      console.error('Failed to save app version to storage:', err)\n    })\n  }\n\n  openInStore = () => {\n    Linking.openURL(\n      Platform.OS === 'android'\n        ? 'https://play.google.com/store/apps/details?id=com.brekeke.phone'\n        : 'itms-apps://apps.apple.com/app/id1233825750',\n    )\n  }\n  autoCheckForUpdate = () => {\n    // Check for update in every day\n    if (Date.now() - this.remoteVersionLastCheck > 24 * 60 * 60 * 1000) {\n      this.checkForUpdate()\n    }\n  }\n\n  init = async () => {\n    this.loading = true\n    // Read size of log files using stat for the initial state\n    const promises = [log1, log2].map((l, i) =>\n      RNFS.exists(l)\n        .then(e => (e ? RNFS.stat(l) : undefined))\n        .then(e => (e ? (this.logSizes[i] = Number(e.size) || 0) : 0))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to read debug log file size`,\n            err,\n          })\n        }),\n    )\n    // Delete the combined unused log file\n    // This file will be created every time user request opening the log file\n    //    (ios only because in ios Share only works with `file://...` url)\n    promises.push(\n      RNFS.exists(log)\n        .then(e => (e ? RNFS.unlink(log) : undefined))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to delete unused debug log file`,\n            err,\n          })\n        }),\n    )\n    // Read debug log settings from storage\n    promises.push(\n      RnAsyncStorage.getItem('captureDebugLog')\n        .then(v => v && (this.captureDebugLog = JSON.parse(v)))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to read debug log settings from storage`,\n            err,\n          })\n        }),\n    )\n    // Read remote app version from storage\n    promises.push(\n      RnAsyncStorage.getItem('remoteVersion')\n        .then(v => v && JSON.parse(v))\n        .then((v: { version: string; lastCheck: number }) => {\n          if (v) {\n            this.remoteVersion = v.version\n            this.remoteVersionLastCheck = v.lastCheck\n          }\n          this.autoCheckForUpdate()\n        })\n        .catch((err: Error) => {\n          console.error('Failed to read app version from storage:', err)\n        }),\n    )\n    //\n    await Promise.all(promises)\n    this.loading = false\n  }\n}\n\nif (Platform.OS !== 'web') {\n  // Assign to window to use in src/utils/captureConsoleOutput.ts\n  store = window.debugStore = new DebugStore()\n\n  // TODO call init together with other store\n  // Need to determine the order of init functions and call them using await\n  store.init()\n}\nexport const debugStore = store\n\nconst getSemVer = (v?: string) => {\n  const a =\n    v\n      ?.split(/\\./g)\n      .map(s => s.match(/^\\d+/)?.[0])\n      .map(Number) || []\n  return [a[0] || 0, a[1] || 0, a[2] || 0, a[3] || 0]\n}\n\n/**\n * Compare 2 semantic versions\n * @param a new version\n * @param b current version\n * @returns a > b ? 1 : a < b ? -1 : 0\n */\nexport const compareSemVer = (a?: string, b?: string) => {\n  const [aMajor, aMinor, aPatch, aFourth] = getSemVer(a)\n  const [bMajor, bMinor, bPatch, bFourth] = getSemVer(b)\n  if (bMajor !== aMajor) {\n    return aMajor > bMajor ? 1 : -1\n  }\n  if (bMinor !== aMinor) {\n    return aMinor > bMinor ? 1 : -1\n  }\n  if (bPatch !== aPatch) {\n    return aPatch > bPatch ? 1 : -1\n  }\n  if (bFourth !== aFourth) {\n    return aFourth > bFourth ? 1 : -1\n  }\n  return 0\n}\n","import { uc } from '../api/uc'\n\nexport const saveBlob = (blob: Blob, name: string) => {\n  const a = document.createElement('a')\n  a.setAttribute('style', 'display: none')\n  const url = window.URL.createObjectURL(blob)\n  a.href = url\n  a.download = name\n  a.click()\n  window.URL.revokeObjectURL(url)\n}\n\nexport const saveBlobFile = (\n  id: string,\n  topic_id: string,\n  type?: string,\n  data?: Blob,\n) =>\n  new Promise(async (resolve, reject) => {\n    try {\n      const dataBlob = data ? data : ((await uc.acceptFile(id)) as Blob)\n      const fr = new FileReader()\n      fr.onloadend = async event => {\n        const r = event.target?.result as ArrayBuffer\n        const cache = await caches.open(`${topic_id}`)\n        const videoBlob = new Blob([r], {\n          type: type === 'video' ? 'video/mp4' : 'image/jpg',\n        })\n        const response = new Response(videoBlob)\n        const urlCacheFile = `${topic_id}/${id}`\n        await cache.put(id, response)\n        resolve(urlCacheFile)\n      }\n      fr.onerror = err => {\n        console.error('saveBlobFile.web onerror error:', err)\n      }\n      fr.readAsArrayBuffer(dataBlob)\n    } catch (err) {\n      console.error('saveBlobFile.web catch error:', err)\n      reject(err)\n    }\n  })\n","import { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport { RnText } from '../components/Rn'\nimport { TRnTextProps } from '../components/RnText'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatDuration } from '../utils/formatDuration'\n\nclass TimerStore {\n  @observable now = Date.now()\n  constructor() {\n    BackgroundTimer.setInterval(this.updateNow, 1000)\n  }\n  @action private updateNow = () => {\n    this.now = Date.now()\n  }\n}\n\nexport const timerStore = new TimerStore()\n\ntype TDurationProps = Omit<TRnTextProps, 'children'> & {\n  children: number\n}\n\nexport const Duration = observer(({ children, ...p }: TDurationProps) => (\n  <RnText {...p}>\n    {formatDuration(children && timerStore.now - children)}\n  </RnText>\n))\n","import moment from 'moment'\n\nimport { uc } from '../api/uc'\nimport { ChatMessage } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\n\nexport const numberOfChatsPerLoad = 20\n\nexport const groupByTimestamp = (arr: ChatMessage[]) => {\n  const me = uc.me()\n  const groupByDate: {\n    date: string\n    groupByTime: {\n      time: string\n      messages: ChatMessage[]\n      createdByMe: boolean\n    }[]\n  }[] = []\n  if (!arr?.length) {\n    return groupByDate\n  }\n  let lastDate: string\n  let groupByTime: typeof groupByDate[0]['groupByTime']\n  let lastMessage: ChatMessage\n  let messages: ChatMessage[]\n  arr.forEach(m => {\n    const d = moment(m.created)\n    const date = d.format('MMM D')\n    if (!lastDate || date !== lastDate) {\n      groupByTime = []\n      lastDate = date\n      groupByDate.push({\n        date: formatDateSemantic(m.created),\n        groupByTime,\n      })\n    }\n    if (\n      !lastMessage ||\n      m.creator !== lastMessage.creator ||\n      moment(m.created).valueOf() - moment(lastMessage.created).valueOf() >\n        10 * 60000\n    ) {\n      const time = d.format('HH:mm') // TODO intl\n      lastMessage = m\n      messages = []\n      groupByTime.push({\n        time,\n        messages,\n        createdByMe: m.creator === me.id,\n      })\n    }\n    messages.push(m)\n  })\n  return groupByDate\n}\n\nexport const formatDateSemantic = (d0: number | string) => {\n  const d = moment(d0)\n  const t = moment()\n  if (d.format('yyyy') !== t.format('yyyy')) {\n    return d.format('DD/MM/yyyy') // TODO intl\n  }\n  const today = t.format('MMM D')\n  const yesterday = t.add(-1, 'days').format('MMM D')\n  const date = d.format('MMM D') // TODO intl\n  return date === today\n    ? intl`Today`\n    : date === yesterday\n    ? intl`Yesterday`\n    : date\n}\n\nexport const formatDateTimeSemantic = (str: number | string) => {\n  const d = moment(str)\n  const t = moment()\n  let date = ''\n  if (d.format('yyyy') !== t.format('yyyy')) {\n    date = d.format('DD/MM/yyyy') // TODO intl\n  } else if (d.format('MMM D') !== t.format('MMM D')) {\n    date = d.format('MMM D') // TODO intl\n  }\n  if (date) {\n    date = ' ' + date\n  }\n  const time = moment(str).format('HH:mm') // TODO intl\n  return time + date\n}\n","import { TSyncPnToken } from './syncPnToken2'\n\nlet m: TSyncPnToken = null!\nexport const setSyncPnTokenModule = (m0: TSyncPnToken) => {\n  m = m0\n}\nexport const SyncPnToken = () => m\n","import { FC } from 'react'\nimport { StyleSheet, View, ViewProps } from 'react-native'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Icon: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nexport const RnIcon: FC<\n  ViewProps & {\n    color?: string\n    path: string\n    size?: number\n    viewBox?: string\n  }\n> = ({ color, path, size = v.iconSize, viewBox, style, ...p }) => (\n  <View {...p} style={[css.Icon, style]}>\n    <Svg\n      height={size}\n      /* 24 is the regular size of the @mdi/js package */\n      viewBox={viewBox || '0 0 24 24'}\n      width={size}\n    >\n      <Path d={path} fill={color || 'black'} />\n    </Svg>\n  </View>\n)\n","import { useRef } from 'react'\n\nimport { CreatedStore, createStore } from './createStore'\n\nexport const useStore = (mixin?: Function) => {\n  const r = useRef<CreatedStore>()\n  if (!r.current) {\n    if (mixin && typeof mixin !== 'function') {\n      throw new Error(`useStore: mixin must be a function, found ${mixin}`)\n    }\n    const op = () => ({})\n    r.current = createStore(mixin || op)\n  }\n  return r.current\n}\n","import EventEmitter from 'eventemitter3'\nimport { unmountComponentAtNode } from 'react-dom'\n\nimport { MakeCallFn } from '../api/brekekejs'\nimport { parsePalParams } from '../api/parseParamsWithPrefix'\nimport {\n  Account,\n  accountStore,\n  getAccountUniqueId,\n} from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { arrToMap } from '../utils/arrToMap'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { webPromptPermission } from '../utils/webPromptPermission'\n\nexport type EmbedSignInOptions = {\n  autoLogin?: boolean\n  clearExistingAccount?: boolean\n  palEvents?: string[]\n  accounts: EmbedAccount[]\n} & { [k: string]: string }\n\nexport class EmbedApi extends EventEmitter {\n  /**==========================================================================\n   * public properties/methods\n   */\n\n  promptBrowserPermission = webPromptPermission\n\n  getCurrentAccount = () => getAuthStore().getCurrentAccount()\n\n  call: MakeCallFn = (...args) => getCallStore().startCall(...args)\n  getRunningCalls = () => getCallStore().calls\n\n  restart = async (options: EmbedSignInOptions) => {\n    getAuthStore().signOutWithoutSaving()\n    await waitTimeout()\n    await this._signIn(options)\n  }\n\n  cleanup = () => {\n    getAuthStore().signOutWithoutSaving()\n    if (this._rootTag) {\n      unmountComponentAtNode(this._rootTag)\n    }\n  }\n\n  /**==========================================================================\n   * private properties/methods\n   */\n\n  _rootTag?: HTMLElement\n\n  _palEvents?: string[]\n  _palParams?: { [k: string]: string }\n\n  _signIn = async (o: EmbedSignInOptions) => {\n    await accountStore.waitStorageLoaded()\n    // reassign options on each sign in\n    embedApi._palEvents = o.palEvents\n    embedApi._palParams = parsePalParams(o)\n    // check if cleanup existing account\n    if (o.clearExistingAccount) {\n      accountStore.accounts = []\n      accountStore.accountData = []\n    }\n    // create map based on unique (host, port, tenant, user)\n    const accountsMap = arrToMap(\n      accountStore.accounts,\n      getAccountUniqueId,\n      (p: Account) => p,\n    ) as { [k: string]: Account }\n    // convert accounts from options to storage\n    let firstAccountInOptions: Account | undefined\n    o.accounts.forEach(a => {\n      const fr = convertToStorage(a)\n      const to = accountsMap[getAccountUniqueId(fr)]\n      if (to) {\n        copyToStorage(fr, to)\n        firstAccountInOptions = firstAccountInOptions || to\n      } else {\n        accountStore.accounts.push(fr)\n        firstAccountInOptions = firstAccountInOptions || fr\n      }\n    })\n    await accountStore.saveAccountsToLocalStorageDebounced()\n    // check if auto login\n    if (!o.autoLogin) {\n      return\n    }\n    const as = getAuthStore()\n    if (firstAccountInOptions) {\n      as.signIn(firstAccountInOptions)\n      return\n    }\n    await as.autoSignInEmbed()\n  }\n}\n\nexport const embedApi = new EmbedApi()\n\ntype EmbedAccount = {\n  hostname: string\n  port: string\n  tenant?: string\n  username: string\n  password?: string\n  phoneIndex?: number\n  uc?: boolean\n  ucDisplayOfflineUsers?: boolean\n  parks?: string[]\n  parkNames?: string[]\n  pushNotification?: boolean\n}\nconst convertToStorage = (a: EmbedAccount): Account => {\n  const ea = accountStore.genEmptyAccount()\n  ea.pbxHostname = a.hostname || ''\n  ea.pbxPort = a.port || ''\n  ea.pbxTenant = a.tenant || ''\n  ea.pbxUsername = a.username || ''\n  ea.pbxPassword = a.password || ''\n  ea.pbxPhoneIndex = `${Number(a.phoneIndex) || 4}`\n  ea.ucEnabled = a.uc || false\n  ea.displayOfflineUsers = a.ucDisplayOfflineUsers || false\n  ea.parks = a.parks || []\n  ea.parkNames = a.parkNames || []\n  ea.pushNotificationEnabled = a.pushNotification || false\n  return ea\n}\nconst copyToStorage = (fr: Account, to: Account) => {\n  to.pbxHostname = fr.pbxHostname\n  to.pbxPort = fr.pbxPort\n  to.pbxTenant = fr.pbxTenant\n  to.pbxUsername = fr.pbxUsername\n  to.pbxPassword = fr.pbxPassword\n  to.pbxPhoneIndex = fr.pbxPhoneIndex\n  to.ucEnabled = fr.ucEnabled\n  to.displayOfflineUsers = fr.displayOfflineUsers\n  to.parks = fr.parks\n  to.parkNames = fr.parkNames\n  to.pushNotificationEnabled = fr.pushNotificationEnabled\n}\n","import { FC } from 'react'\nimport {\n  Platform,\n  StyleSheet,\n  TouchableOpacityProps,\n  View,\n  ViewProps,\n} from 'react-native'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ButtonIcon: {\n    alignItems: 'center',\n    marginHorizontal: 5,\n  },\n  ButtonIcon_Btn: {\n    borderWidth: 1,\n    padding: 12,\n  },\n  ButtonIcon_Name: {\n    paddingTop: 5,\n    minWidth: Platform.OS === 'ios' ? 70 : 80,\n    textAlign: 'center',\n  },\n})\n\nexport const ButtonIcon: FC<{\n  color: string\n  path: string\n  size?: number\n  disabled?: boolean\n  onPress?(): void\n  style?: TouchableOpacityProps['style']\n  bgcolor?: string\n  noborder?: boolean\n  bdcolor?: string\n  name?: string\n  textcolor?: string\n  styleContainer?: ViewProps['style']\n}> = p => {\n  const size = p.size || 15\n  return (\n    <View style={[css.ButtonIcon, p.styleContainer]}>\n      <RnTouchableOpacity\n        disabled={p.disabled}\n        onPress={p.onPress}\n        style={[\n          css.ButtonIcon_Btn,\n          p.style,\n          { borderRadius: size * 1.5 },\n          { backgroundColor: p?.disabled ? v.subColor : p.bgcolor },\n          p.noborder && { borderWidth: 0 },\n          { borderColor: p.bdcolor },\n        ]}\n      >\n        <Svg height={size} viewBox='0 0 24 24' width={size}>\n          <Path d={p.path} fill={p.color || 'black'} />\n        </Svg>\n      </RnTouchableOpacity>\n      {p.name && (\n        <RnText\n          small\n          style={[css.ButtonIcon_Name, !!p.textcolor && { color: p.textcolor }]}\n        >\n          {p.name}\n        </RnText>\n      )}\n    </View>\n  )\n}\n","import { cloneDeep, uniq } from 'lodash'\nimport { action, observable } from 'mobx'\n\nexport type DropdownPosition = {\n  top?: number\n  left?: number\n  right?: number\n  bottom?: number\n}\n\nexport class RnDropdownStore {\n  @observable positions: DropdownPosition[] = []\n  @observable shouldUpdatePosition: boolean = false\n  @observable hiddenIndexes: number[] = []\n  @observable openedIndex: number = -1\n  itemHeight: number = 0\n  headerHeight: number = 0\n\n  @action toggleSection = (sectionIndex: number, itemSize: number) => {\n    //\n    const hiddenIndexes2 = [...this.hiddenIndexes]\n    const ii = hiddenIndexes2.indexOf(sectionIndex)\n    if (ii > -1) {\n      hiddenIndexes2.splice(ii, 1)\n    } else {\n      hiddenIndexes2.push(sectionIndex)\n    }\n    //\n    const positions2 = cloneDeep(this.positions)\n    const collapse = !this.hiddenIndexes.some(i => i === sectionIndex)\n    this.positions.forEach((i, index) => {\n      if (index > sectionIndex) {\n        positions2[index] = {\n          top:\n            (positions2[index].top || 0) +\n            (collapse ? -this.itemHeight : this.itemHeight) * itemSize,\n          right: positions2[index].right || 0,\n        }\n      }\n    })\n    //\n    this.openedIndex = -1\n    this.hiddenIndexes = uniq(hiddenIndexes2)\n    this.positions = positions2\n  }\n  @action removeSection = (sectionIndex: number, itemSize: number) => {\n    const positions2 = [...this.positions]\n    this.positions.forEach((_, index) => {\n      if (index > sectionIndex) {\n        positions2[index] = {\n          top:\n            (positions2[index].top || 0) -\n            this.itemHeight * itemSize -\n            this.headerHeight,\n          right: positions2[index].right || 0,\n        }\n      }\n    })\n    if (positions2.length >= 1) {\n      positions2.splice(sectionIndex, 1)\n    }\n    this.positions = positions2\n    this.hiddenIndexes = this.hiddenIndexes.map(idx => idx - 1)\n    this.openedIndex = -1\n  }\n\n  @action setPositions = (positions: DropdownPosition[]) => {\n    this.positions = positions\n  }\n  @action setShouldUpdatePosition = (v: boolean) => {\n    this.shouldUpdatePosition = v\n  }\n\n  @action open = (index: number) => {\n    this.openedIndex = index\n  }\n  @action toggle = (index: number) => {\n    this.openedIndex = index === this.openedIndex ? -1 : index\n    this.hiddenIndexes = this.hiddenIndexes.filter(i => i !== index)\n  }\n  @action close = () => {\n    this.openedIndex = -1\n  }\n\n  @action setHiddenIndexes = (indexes: number[]) => {\n    this.hiddenIndexes = indexes\n  }\n  @action addSection = () => {\n    this.hiddenIndexes = this.hiddenIndexes.map(i => i + 1)\n    this.shouldUpdatePosition = true\n  }\n\n  @action setHeaderHeight = (height: number) => {\n    this.headerHeight = height\n  }\n  @action setItemHeight = (height: number) => {\n    this.itemHeight = height\n  }\n}\n\nexport const RnDropdown = new RnDropdownStore()\n","import CiruclarJSON from 'circular-json'\nimport { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { PbxGetProductInfoRes } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { sip, SipLoginOption } from '../api/sip'\nimport { updatePhoneIndex } from '../api/updatePhoneIndex'\nimport { SipPn } from '../utils/PushNotification-parse'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\nimport { sipErrorEmitter } from './sipErrorEmitter'\n\nconst getPbxConfig = <K extends keyof PbxGetProductInfoRes>(k: K) =>\n  pbx.getConfig().then(c => c && c[k])\n\nclass AuthSIP {\n  private clearShouldAuthReaction?: Lambda\n\n  auth = () => {\n    this.authWithCheck()\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.sipShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    console.log('SIP PN debug: set sipState stopped dispose')\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    s.sipState = 'stopped'\n    sip.stopWebRTC()\n  }\n\n  private onSipFailure = () => {\n    console.log('SIP PN debug: set sipState failure')\n    sip.stopWebRTC()\n    const s = getAuthStore()\n    s.sipState = 'failure'\n    s.sipTotalFailure += 1\n    if (s.sipTotalFailure > 3) {\n      s.sipPn = {}\n    }\n    // auto reconnect\n    this.authWithCheck()\n  }\n\n  private authPnWithoutCatch = async (pn: Partial<SipPn>) => {\n    const as = getAuthStore()\n    const ca = as.getCurrentAccount()\n    if (!ca) {\n      console.log('SIP PN debug: Already signed out after long await')\n      return\n    }\n    if (isSipPnExpired(pn)) {\n      console.error('SIP PN debug: expired auth token')\n      this.onSipFailure()\n      return\n    }\n    if (!pn.sipAuth || !pn.sipWssPort || !pn.phoneId) {\n      console.error(\n        `SIP PN debug: Invalid sip PN data: ${CiruclarJSON.stringify(pn)}`,\n      )\n      as.sipPn = {}\n      as.pbxConfig = undefined\n      this.onSipFailure()\n      return\n    }\n    const turnConfig: RTCIceServer | undefined = pn.turnServer\n      ? {\n          urls: pn.turnServer.split(',').map(s => s.trim()),\n          username: pn.turnUsername,\n          credential: pn.turnCredential,\n        }\n      : undefined\n    const o: SipLoginOption = {\n      hostname: ca.pbxHostname,\n      port: pn.sipWssPort,\n      username: pn.phoneId,\n      accessToken: pn.sipAuth,\n      pbxTurnEnabled: ca.pbxTurnEnabled,\n      dtmfSendPal: toBoolean(pn.dtmfSendPal),\n      turnConfig,\n    }\n    await sip.connect(o, ca)\n  }\n\n  @action private authWithoutCatch = async () => {\n    console.log('SIP PN debug: set sipState connecting')\n    const s = getAuthStore()\n    s.sipState = 'connecting'\n    sipErrorEmitter.removeAllListeners()\n    sipErrorEmitter.on('error', () => {\n      console.log('SIP PN debug: got error from sipErrorEmitter')\n      this.dispose()\n      this.authWithCheckDebounced()\n    })\n    //\n    if (isSipPnExpired(s.sipPn)) {\n      s.sipPn = {}\n    }\n    const pn = s.sipPn\n    if (pn.sipAuth) {\n      console.log('SIP PN debug: AuthSIP.authPnWithoutCatch')\n      this.authPnWithoutCatch(pn)\n      return\n    }\n    console.log('SIP PN debug: AuthSIP.authWithoutCatch')\n    //\n    pn.sipWssPort = pn.sipWssPort || (await getPbxConfig('sip.wss.port'))\n    pn.dtmfSendPal =\n      pn.dtmfSendPal || (await getPbxConfig('webphone.dtmf.send.pal'))\n    pn.turnServer =\n      pn.turnServer || (await getPbxConfig('webphone.turn.server'))\n    pn.turnUsername =\n      pn.turnUsername || (await getPbxConfig('webphone.turn.username'))\n    pn.turnCredential =\n      pn.turnCredential || (await getPbxConfig('webphone.turn.credential'))\n    pn.phoneId = pn.phoneId || (await updatePhoneIndex().then(p => p?.id))\n    if (!pn.phoneId) {\n      throw new Error('Failed to get phoneId from updatePhoneIndex')\n    }\n    pn.sipAuth = await pbx.createSIPAccessToken(pn.phoneId)\n    pn.sipAuthAt = Date.now()\n    await this.authPnWithoutCatch(pn)\n  }\n\n  authWithCheck = async () => {\n    const s = getAuthStore()\n    if (isSipPnExpired(s.sipPn)) {\n      s.sipPn = {}\n    }\n    const sipShouldAuth = s.sipShouldAuth()\n    console.log(`SIP PN debug: authWithCheck ${sipShouldAuth}`, {\n      sipState: s.sipState,\n      signedInId: !!s.signedInId,\n      sipAuth: !!s.sipPn.sipAuth,\n      pbxState: s.pbxState,\n      sipTotalFailure: s.sipTotalFailure,\n    })\n    if (!sipShouldAuth) {\n      return\n    }\n    if (s.sipTotalFailure > 1) {\n      s.sipState = 'waiting'\n      await waitTimeout(\n        s.sipTotalFailure < 5 ? s.sipTotalFailure * 1000 : 15000,\n      )\n      if (s.sipState !== 'waiting') {\n        return\n      }\n    }\n    this.authWithoutCatch().catch(\n      action((err: Error) => {\n        console.log('SIP PN debug: set sipState failure catch')\n        this.onSipFailure()\n        console.error('Failed to connect to sip:', err)\n      }),\n    )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n}\n\nexport const authSIP = new AuthSIP()\n\n// Empty or expire after 90 seconds\nconst isSipPnExpired = (pn: Partial<SipPn>) =>\n  !pn.sipAuthAt || Date.now() - pn.sipAuthAt > 90000\n","import EventEmitter from 'eventemitter3'\n\nexport const sipErrorEmitter = new EventEmitter()\n","import {\n  mdiAccountCircleOutline,\n  mdiCogOutline,\n  mdiPhoneOutline,\n} from '../assets/icons'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { arrToMap } from '../utils/arrToMap'\n\nexport type Menu = {\n  key: string\n  icon: string\n  subMenus: SubMenu[]\n  defaultSubMenuKey: string\n  defaultSubMenu: SubMenu\n  subMenusMap: { [k: string]: SubMenu }\n  navFn(): void\n}\nexport type SubMenu = {\n  key: string\n  label: string\n  navFnKey: keyof ReturnType<typeof Nav>\n  ucRequired?: boolean\n  navFn(): void\n}\n\nconst genMenus = () => {\n  const arr = [\n    {\n      key: 'contact',\n      icon: mdiAccountCircleOutline,\n      subMenus: [\n        {\n          key: 'phonebook',\n          label: intl`PHONEBOOK`,\n          navFnKey: 'goToPageContactPhonebook',\n        },\n        {\n          key: 'users',\n          label: intl`USERS`,\n          navFnKey: 'goToPageContactUsers',\n        },\n        {\n          key: 'chat',\n          label: intl`CHAT`,\n          navFnKey: 'goToPageChatRecents',\n          ucRequired: true,\n        },\n        {\n          key: 'webchat',\n          label: intl`WEBCHAT`,\n          navFnKey: 'goToPageWebChat',\n          ucRequired: true,\n        },\n      ],\n      defaultSubMenuKey: 'users',\n    },\n    {\n      key: 'call',\n      icon: mdiPhoneOutline,\n      subMenus: [\n        {\n          key: 'keypad',\n          label: intl`KEYPAD`,\n          navFnKey: 'goToPageCallKeypad',\n        },\n        {\n          key: 'recents',\n          label: intl`RECENTS`,\n          navFnKey: 'goToPageCallRecents',\n        },\n        {\n          key: 'parks',\n          label: intl`PARKS`,\n          navFnKey: 'goToPageCallParks',\n        },\n      ],\n      defaultSubMenuKey: 'recents',\n    },\n    {\n      key: 'settings',\n      icon: mdiCogOutline,\n      subMenus: [\n        {\n          key: 'account',\n          label: intl`CURRENT ACCOUNT`,\n          navFnKey: 'goToPageSettingsCurrentAccount',\n        },\n        {\n          key: 'other',\n          label: intl`OTHER SETTINGS`,\n          navFnKey: 'goToPageSettingsOther',\n        },\n      ],\n      defaultSubMenuKey: 'account',\n    },\n  ] as Menu[]\n  //\n  arr.forEach((m, i) => {\n    m.subMenusMap = arrToMap(\n      m.subMenus,\n      (s: SubMenu) => s.key,\n      (s: SubMenu) => s,\n    ) as Menu['subMenusMap']\n    m.defaultSubMenu = m.subMenusMap?.[m.defaultSubMenuKey]\n    m.subMenus.forEach(s => {\n      s.navFn = () => {\n        if (s.ucRequired && !getAuthStore().getCurrentAccount()?.ucEnabled) {\n          m.defaultSubMenu.navFn()\n          return\n        }\n        // @ts-ignore\n        Nav()[s.navFnKey]()\n        saveNavigation(i, s.key)\n      }\n    })\n    m.navFn = () => {\n      let k = getAuthStore().getCurrentAccount()?.navSubMenus?.[i]\n      if (!k) {\n        return\n      }\n      if (!(k in m.subMenusMap)) {\n        k = m.defaultSubMenuKey\n      }\n      m.subMenusMap[k].navFn()\n    }\n  })\n  return arr\n}\n\nlet lastLocale = intlStore.locale\nlet lastMenus = genMenus()\nexport const menus = () => {\n  if (lastLocale !== intlStore.locale) {\n    lastLocale = intlStore.locale\n    lastMenus = genMenus()\n  }\n  return lastMenus\n}\n\nconst saveNavigation = (i: number, k: string) => {\n  const arr = menus()\n  const m = arr[i]\n  const ca = getAuthStore().getCurrentAccount()\n  if (!m || !ca) {\n    return\n  }\n  if (!(k in m.subMenusMap)) {\n    k = m.defaultSubMenuKey\n  }\n  normalizeSavedNavigation()\n  if (m.key !== 'settings') {\n    ca.navIndex = i\n  }\n  ca.navSubMenus[i] = k\n  accountStore.saveAccountsToLocalStorageDebounced()\n}\nexport const normalizeSavedNavigation = () => {\n  const arr = menus()\n  const ca = getAuthStore().getCurrentAccount()\n  if (!ca) {\n    return\n  }\n  if (!arr[ca.navIndex]) {\n    ca.navIndex = 0\n  }\n  if (ca.navSubMenus?.length !== arr.length) {\n    ca.navSubMenus = arr.map(() => '')\n  }\n  arr.forEach((m, i) => {\n    if (!(ca.navSubMenus[i] in m.subMenusMap)) {\n      ca.navSubMenus[i] = m.defaultSubMenuKey\n    }\n  })\n}\n\nexport const getSubMenus = (menu: string) => {\n  const arr = menus()\n  const m = arr.find(_ => _.key === menu)\n  if (!m) {\n    RnAlert.error({\n      unexpectedErr: new Error(`Can not find sub menus for ${menu}`),\n    })\n    return []\n  }\n  return m.subMenus.filter(\n    s => !(s.ucRequired && !getAuthStore().getCurrentAccount()?.ucEnabled),\n  )\n}\n","import { cloneDeep, isEqual } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Platform, View } from 'react-native'\n\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { debugStore } from '../stores/debugStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { useForm } from '../utils/useForm'\nimport { useStore } from '../utils/useStore'\nimport { Layout } from './Layout'\nimport { RnText } from './Rn'\n\nexport const AccountCreateForm: FC<{\n  updating?: Account\n  onBack: Function\n  onSave: Function\n  footerLogout?: boolean\n  title: string\n}> = observer(props => {\n  const isWeb = Platform.OS === 'web'\n  const m = () => ({\n    observable: {\n      account: {\n        ...accountStore.genEmptyAccount(),\n        ...cloneDeep(props.updating),\n      },\n      addingPark: { name: '', number: '' },\n    },\n    resetAllFields: () => {\n      RnAlert.prompt({\n        title: intl`Reset`,\n        message: intl`Do you want to reset the form to the original data?`,\n        onConfirm: () => {\n          $.set('account', (p: Account) => ({\n            ...accountStore.genEmptyAccount(),\n            ...cloneDeep(props.updating),\n            id: p.id,\n          }))\n        },\n        confirmText: intl`RESET`,\n      })\n    },\n    //\n    onAddingParkSubmit: () => {\n      $.set('account', (p: Account) => {\n        p.parks = p.parks || []\n        p.parkNames = p.parkNames || []\n        if ($.addingPark.name && $.addingPark.number) {\n          if (p.parkNames.length !== p.parks.length) {\n            const { parkNames } = p\n            p.parkNames = p.parks.map((_, i) => parkNames[i] || '')\n          }\n          if (p.parks.includes($.addingPark.number)) {\n            RnAlert.error({\n              message: intlDebug`Park number ${$.addingPark.number} already exist`,\n            })\n            return p\n          }\n          p.parks.push($.addingPark.number)\n          p.parkNames.push($.addingPark.name)\n          $.addingPark = { name: '', number: '' }\n        }\n        return p\n      })\n    },\n    onAddingParkRemove: (i: number) => {\n      RnAlert.prompt({\n        title: intl`Remove Park`,\n        message: (\n          <>\n            <RnText small>\n              Park {i + 1}:{' '}\n              {$.account.parks?.[i] + ' - ' + $.account.parkNames?.[i]}\n            </RnText>\n            <View />\n            <RnText>{intl`Do you want to remove this park?`}</RnText>\n          </>\n        ),\n        onConfirm: () => {\n          $.set('account', (p: Account) => {\n            p.parks = p.parks?.filter((p0, i0) => i0 !== i)\n            p.parkNames = p.parkNames?.filter((p0, i0) => i0 !== i)\n            return p\n          })\n        },\n      })\n    },\n    //\n    hasUnsavedChanges: () => {\n      const a = props.updating || accountStore.genEmptyAccount()\n      if (!props.updating) {\n        Object.assign(a, {\n          id: $.account.id,\n        })\n      }\n      return !isEqual($.account, a)\n    },\n    onBackBtnPress: () => {\n      if (!$.hasUnsavedChanges()) {\n        props.onBack()\n        return\n      }\n      RnAlert.prompt({\n        title: intl`Discard Changes`,\n        message: intl`Do you want to discard all unsaved changes and go back?`,\n        onConfirm: props.onBack,\n        confirmText: intl`DISCARD`,\n      })\n    },\n    onValidSubmit: () => {\n      console.log({ account: $.account })\n      props.onSave($.account, $.hasUnsavedChanges())\n    },\n  })\n  type M0 = ReturnType<typeof m>\n  type M = Omit<M0, 'observable'> &\n    M0['observable'] &\n    ReturnType<typeof useStore>\n  const $ = useStore(m) as any as M\n  const [Form, submitForm] = useForm()\n  const as = getAuthStore()\n  return (\n    <Layout\n      description={\n        props.updating\n          ? `${props.updating.pbxUsername} - ${props.updating.pbxHostname}`\n          : intl`Create a new sign in account`\n      }\n      dropdown={\n        props.footerLogout\n          ? [\n              ...(as.isConnFailure()\n                ? [\n                    {\n                      label: intl`Reconnect to server`,\n                      onPress:\n                        as.resetFailureStateIncludeUcLoginFromAnotherPlace,\n                    },\n                  ]\n                : []),\n              ...(Platform.OS !== 'web'\n                ? [\n                    {\n                      label: intl`Open debug log`,\n                      onPress: debugStore.openLogFile,\n                    },\n                  ]\n                : []),\n              {\n                label: intl`Logout`,\n                onPress: as.signOut,\n                danger: true,\n              },\n            ]\n          : [\n              {\n                label: intl`Reset form`,\n                onPress: $.resetAllFields,\n              },\n            ]\n      }\n      fabOnBack={props.footerLogout ? undefined : $.onBackBtnPress}\n      fabOnNext={props.footerLogout ? undefined : (submitForm as () => void)}\n      menu={props.footerLogout ? 'settings' : undefined}\n      onBack={props.footerLogout ? undefined : $.onBackBtnPress}\n      subMenu={props.footerLogout ? 'account' : undefined}\n      title={props.title}\n    >\n      <Form\n        $={$}\n        fields={[\n          {\n            isGroup: true,\n            label: 'PBX',\n          },\n          {\n            // autoFocus: true, // TODO Animation issue\n            disabled: props.footerLogout,\n            name: 'pbxUsername',\n            label: intl`USERNAME`,\n            rule: 'required',\n          },\n          {\n            disabled: props.footerLogout,\n            secureTextEntry: true,\n            name: 'pbxPassword',\n            label: intl`PASSWORD`,\n            rule: 'required',\n          },\n          {\n            disabled: props.footerLogout,\n            name: 'pbxTenant',\n            label: intl`TENANT`,\n          },\n          {\n            disabled: props.footerLogout,\n            name: 'pbxHostname',\n            label: intl`HOSTNAME`,\n            rule: 'required|hostname',\n          },\n          {\n            disabled: props.footerLogout,\n            keyboardType: 'numeric',\n            name: 'pbxPort',\n            label: intl`PORT`,\n            rule: 'required|port',\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'RnPicker',\n            name: 'pbxPhoneIndex',\n            label: intl`PHONE`,\n            rule: 'required',\n            options: [1, 2, 3, 4].map(v => ({\n              key: `${v}`,\n              label: intl`Phone ${v}`,\n            })),\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'pbxTurnEnabled',\n            label: 'TURN',\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'pushNotificationEnabled',\n            label: intl`PUSH NOTIFICATION`,\n            hidden: isWeb,\n          },\n          {\n            isGroup: true,\n            label: 'UC',\n            hasMargin: true,\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'ucEnabled',\n            label: 'UC',\n            onValueChange: (v: boolean) => {\n              $.set('account', (p: Account) => {\n                p.ucEnabled = v\n                return p\n              })\n            },\n          },\n          {\n            isGroup: true,\n            label: intl`PARKS (${$.account.parks?.length})`,\n            hasMargin: true,\n          },\n          ...($.account.parks?.map((p, i) => {\n            const parkName = $.account.parkNames?.[i]\n            return {\n              disabled: true,\n              name: `parks[${i}]`,\n              type: 'PARK',\n              value: `${p} ${parkName ? '- ' + parkName : ''}`,\n              label: intl`PARK ${i + 1}`,\n              onRemoveBtnPress: props.footerLogout\n                ? null\n                : () => $.onAddingParkRemove(i),\n            }\n          }) || []),\n          ...(props.footerLogout\n            ? []\n            : [\n                {\n                  name: 'parks[new]',\n                  label: intl`NEW PARK`,\n                  type: 'PARK',\n                  value: $.addingPark,\n                  onValueChange: (v: { number: string; name?: string }) =>\n                    $.set('addingPark', v),\n                  onCreateBtnPress: $.onAddingParkSubmit,\n                },\n              ]),\n        ]}\n        k='account'\n        onValidSubmit={$.onValidSubmit}\n      />\n    </Layout>\n  )\n})\n","import { Platform } from 'react-native'\n\nexport const formatFileType = (name: string) => {\n  const typeImage = ['PNG', 'JPG', 'JPEG', 'GIF']\n  let typeVideo: string[] = []\n  if (Platform.OS === 'web') {\n    typeVideo = ['MP4', 'WEBM', 'OGG', 'MOV']\n    // ref: https://www.w3schools.com/tags/tag_video.asp\n  } else if (Platform.OS === 'ios') {\n    typeVideo = ['MP4', 'M4A', 'MOV', '3GP']\n    // ref: https://stackoverflow.com/questions/1535836/video-file-formats-supported-in-iphone\n  } else {\n    typeVideo = ['MP4', 'M4A', 'FMP4', 'WEBM', 'MKV', 'MPEG', 'FLV', 'MOV']\n    // ref: https://github.com/react-native-video/react-native-video/blob/master/android-exoplayer/README.md\n  }\n\n  const fileName = name.split('.').pop()?.toUpperCase() || ''\n  if (typeImage.includes(fileName)) {\n    return 'image'\n  }\n  if (typeVideo.includes(fileName)) {\n    return 'video'\n  }\n  return 'other'\n}\n","import { FC, PropsWithChildren, useState } from 'react'\nimport { Animated, StyleSheet, View, ViewProps } from 'react-native'\n\nimport { useAnimationOnDidMount } from '../utils/animation'\n\nconst css = StyleSheet.create({\n  Getter: {\n    opacity: 0,\n  },\n  GetterInner: {\n    position: 'absolute',\n  },\n  Inner: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n})\n\n// The style and innerStyle prop should only be used for positioning and theming\n// We should not use them for sizing like height/border/padding... -> use the children instead\nexport const AnimatedSize: FC<\n  ViewProps & {\n    animateWidth?: boolean\n    innerStyle?: ViewProps['style']\n  }\n> = p => {\n  const [size, setSize] = useState(0)\n  const Component = size ? Animation : Getter\n  return <Component {...p} setSize={setSize} size={size} />\n}\n\nconst Getter = (p: {\n  animateWidth?: boolean\n  children?: PropsWithChildren<{}>['children']\n  setSize: Function\n}) => {\n  const { animateWidth, children, setSize } = p\n  return (\n    <View style={css.Getter}>\n      <View\n        onLayout={e =>\n          setSize(e.nativeEvent.layout[animateWidth ? 'width' : 'height'])\n        }\n        style={css.GetterInner}\n      >\n        {children}\n      </View>\n    </View>\n  )\n}\nconst Animation = (p: {\n  animateWidth?: boolean\n  children?: PropsWithChildren<{}>['children']\n  innerStyle?: ViewProps['style']\n  size: number\n  style?: ViewProps['style']\n}) => {\n  const { animateWidth, children, innerStyle, size, style } = p\n  const cssAnimation = useAnimationOnDidMount({\n    [animateWidth ? 'width' : 'height']: [0, size],\n  })\n  return (\n    <Animated.View style={[style, cssAnimation]}>\n      <View style={[css.Inner, innerStyle]}>{children}</View>\n    </Animated.View>\n  )\n}\n","import { action } from 'mobx'\nimport { ReactComponentLike } from 'prop-types'\n\nimport { intl } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnStacker } from '../stores/RnStacker'\nimport { arrToMap } from '../utils/arrToMap'\nimport { Menu, SubMenu } from './navigationConfig'\n\nlet PageCallTransferChooseUser: ReactComponentLike\nexport const setPageCallTransferChooseUser = (p: ReactComponentLike) => {\n  PageCallTransferChooseUser = p\n}\nlet PageCallTransferDial: ReactComponentLike\nexport const setPageCallTransferDial = (p: ReactComponentLike) => {\n  PageCallTransferDial = p\n}\n\nexport const getTabs = (tab: string) => {\n  const arr = [\n    {\n      key: 'call_transfer',\n      icon: null,\n      subMenus: [\n        {\n          key: 'list_user',\n          label: intl`USER`,\n          navFnKey: { PageCallTransferChooseUser },\n        },\n        {\n          key: 'external_number',\n          label: intl`KEYPAD`,\n          navFnKey: { PageCallTransferDial },\n        },\n      ],\n      defaultSubMenuKey: 'list_user',\n    },\n  ] as any as Menu[]\n\n  const subMenuNames = arr[0].subMenus.map(s => Object.keys(s.navFnKey)[0])\n\n  arr.forEach((m, i) => {\n    m.subMenusMap = arrToMap(\n      m.subMenus,\n      (s: SubMenu) => s.key,\n      (s: SubMenu) => s,\n    ) as Menu['subMenusMap']\n    m.defaultSubMenu = m.subMenusMap?.[m.defaultSubMenuKey]\n    m.subMenus.forEach(s => {\n      s.navFn = action(() => {\n        const name = Object.keys(s.navFnKey)[0]\n        // @ts-ignore\n        const Component: ReactComponentLike = s.navFnKey[name]\n        const lastStack = RnStacker.stacks.pop()\n        if (lastStack && !subMenuNames.includes(lastStack.name)) {\n          RnStacker.stacks.push(lastStack)\n        }\n        RnStacker.stacks.push({\n          name,\n          Component,\n        })\n      })\n    })\n  })\n  const m = arr.find(_ => _.key === tab)\n  if (!m) {\n    RnAlert.error({\n      unexpectedErr: new Error(`Can not find sub menus for ${tab}`),\n    })\n    return []\n  }\n  return m.subMenus as SubMenu[]\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\nimport LinearGradient, {\n  LinearGradientProps,\n} from 'react-native-linear-gradient'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  BrekekeGradient: {\n    height: '100%',\n    minHeight: 550,\n  },\n})\n\nexport type BrekekeGradientProps = Omit<LinearGradientProps, 'colors'> & {\n  white?: boolean\n}\nexport const BrekekeGradient: FC<BrekekeGradientProps> = props => (\n  <LinearGradient\n    {...props}\n    colors={\n      props.white ? ['white', 'white'] : [v.colors.primaryFn(0.2), v.revBg]\n    }\n    style={[css.BrekekeGradient, props.style]}\n  />\n)\n","import { observer } from 'mobx-react'\nimport { Platform, StyleSheet, View, ViewProps } from 'react-native'\nimport { FastImageProps } from 'react-native-fast-image'\n\nimport avatarPlaceholder from '../assets/avatar-placeholder.png'\nimport { mdiRecord } from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { RnIcon, RnImage } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Avatar: {\n    width: 50,\n    height: 50,\n  },\n  ImageOuter: {\n    flex: 1,\n    borderRadius: 50,\n    overflow: 'hidden',\n  },\n  Image: {\n    flex: 1,\n  },\n  Status: {\n    position: 'absolute',\n    top: 27,\n    left: 30,\n  },\n})\n\nconst statusMapColor = {\n  online: v.colors.primary,\n  idle: v.colors.warning,\n  busy: v.colors.danger,\n  offline: v.subColor,\n}\n\nexport const Avatar = observer(\n  (p: {\n    source?: string | { uri: string }\n    status?: string\n    style?: ViewProps['style']\n  }) => {\n    const { source, status, style } = p\n    const uri =\n      (typeof source !== 'string' &&\n        typeof source?.uri === 'string' &&\n        source?.uri) ||\n      (Platform.OS === 'web' && avatarPlaceholder) ||\n      avatarPlaceholder\n    const imgSource =\n      typeof uri === 'string' ? { uri } : (uri as FastImageProps['source'])\n    return (\n      <View style={[css.Avatar, style]}>\n        <View style={css.ImageOuter}>\n          <RnImage source={imgSource} style={css.Image} />\n        </View>\n        {getAuthStore().getCurrentAccount()?.ucEnabled &&\n          typeof status === 'string' && (\n            <RnIcon\n              color={statusMapColor[status as keyof typeof statusMapColor]}\n              path={mdiRecord}\n              style={css.Status}\n            />\n          )}\n      </View>\n    )\n  },\n)\n","import { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiBackspace,\n  mdiKeyboard,\n  mdiPhone,\n  mdiPhoneForward,\n} from '../assets/icons'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  KeyPad_Number: {\n    flexDirection: 'row',\n  },\n  KeyPad_NumberTxt: {\n    fontSize: v.fontSizeTitle,\n    fontWeight: '600',\n    textAlign: 'center',\n    paddingVertical: 20,\n  },\n  KeyPad_NumberBtn: {\n    width: '33.3%',\n  },\n  KeyPad_Btn: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 25,\n  },\n  KeyPad_Btn__call: {\n    backgroundColor: v.colors.primary,\n    width: 64,\n    borderRadius: 40,\n    paddingVertical: 20,\n  },\n  KeyPad_Btn__call_2: {\n    backgroundColor: v.colors.primary,\n    width: 50,\n    height: 50,\n    justifyContent: 'center',\n    borderRadius: 25,\n  },\n  KeyPad_view: {\n    flex: 1,\n    flexDirection: 'row',\n    backgroundColor: v.colors.primaryFn(0.5),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    height: 50,\n    borderRadius: 50 / 2,\n  },\n})\n\nconst keys = [\n  ['1', '2', '3'],\n  ['4', '5', '6'],\n  ['7', '8', '9'],\n  ['*', '0', '#'],\n]\n\nexport const KeyPad = (p: {\n  onPressNumber(k: string): void\n  showKeyboard(): void\n  callVoice?(): void\n  callVoiceForward?(): void\n}) => (\n  <>\n    {keys.map((row, i) => (\n      <View key={i} style={css.KeyPad_Number}>\n        {row.map(key => (\n          <RnTouchableOpacity\n            key={key}\n            onPress={() => p.onPressNumber(key)}\n            style={css.KeyPad_NumberBtn}\n          >\n            <RnText style={css.KeyPad_NumberTxt}>{key}</RnText>\n          </RnTouchableOpacity>\n        ))}\n      </View>\n    ))}\n    <View style={css.KeyPad_Btn}>\n      <RnTouchableOpacity onPress={p.showKeyboard} style={css.KeyPad_NumberBtn}>\n        <RnIcon\n          color={Platform.OS === 'web' ? 'white' : undefined}\n          path={mdiKeyboard}\n        />\n      </RnTouchableOpacity>\n      <View style={p.callVoiceForward ? css.KeyPad_view : undefined}>\n        {p.callVoiceForward && (\n          <RnTouchableOpacity\n            onPress={p.callVoiceForward}\n            style={[css.KeyPad_NumberBtn, css.KeyPad_Btn__call_2]}\n          >\n            <RnIcon path={mdiPhoneForward} />\n          </RnTouchableOpacity>\n        )}\n        {p.callVoice && (\n          <RnTouchableOpacity\n            onPress={p.callVoice}\n            style={[\n              css.KeyPad_NumberBtn,\n              !p.callVoiceForward\n                ? css.KeyPad_Btn__call\n                : css.KeyPad_Btn__call_2,\n            ]}\n          >\n            <RnIcon path={mdiPhone} />\n          </RnTouchableOpacity>\n        )}\n      </View>\n      <RnTouchableOpacity\n        onPress={() => p.onPressNumber('')}\n        style={css.KeyPad_NumberBtn}\n      >\n        <RnIcon path={mdiBackspace} />\n      </RnTouchableOpacity>\n    </View>\n  </>\n)\n","import { FC, RefObject } from 'react'\nimport {\n  Keyboard,\n  NativeSyntheticEvent,\n  StyleSheet,\n  TextInput,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\n\nimport { intl } from '../stores/intl'\nimport { RnTextInput } from './Rn'\n\nconst css = StyleSheet.create({\n  ShowNumbers: {\n    flexDirection: 'row',\n  },\n  ShowNumbers_DisplayTxt: {\n    fontSize: 24,\n    padding: 15,\n    width: '100%',\n  },\n  ShowNumbers_BtnCall: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    width: 40,\n    height: 40,\n    borderRadius: 40,\n  },\n})\n\nexport const ShowNumber: FC<{\n  setTarget(v: string): void\n  selectionChange?(\n    e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ): void\n  refInput: RefObject<TextInput>\n  value: string\n}> = p => (\n  <View style={css.ShowNumbers}>\n    <RnTextInput\n      blurOnSubmit\n      keyboardType='default'\n      multiline\n      onChangeText={p.setTarget}\n      onEndEditing={() => {\n        Keyboard.dismiss()\n      }}\n      onSelectionChange={p.selectionChange}\n      placeholder={intl`Enter your number`}\n      ref={p.refInput}\n      style={css.ShowNumbers_DisplayTxt}\n      value={p.value}\n    />\n  </View>\n)\n","import { action, observable } from 'mobx'\nimport { Platform } from 'react-native'\nimport RNCallKeep from 'react-native-callkeep'\nimport IncallManager from 'react-native-incall-manager'\nimport { v4 as newUuid } from 'uuid'\n\nimport { Session, SessionStatus } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { sip } from '../api/sip'\nimport { getPartyName } from '../stores/contactStore'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\nimport { getCallStore } from './callStore'\nimport { CallStore } from './callStore2'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\n\nexport class Call {\n  constructor(private store: CallStore) {}\n\n  rawSession?: Session\n\n  @observable earlyMedia: MediaStream | null = null\n  @observable withSDP: boolean = false\n  @observable withSDPControls: boolean = false\n  @observable sessionStatus: SessionStatus = 'dialing'\n  @observable id = ''\n  @observable pnId = ''\n  @observable partyNumber = ''\n  @observable partyImageUrl = ''\n  @observable partyImageSize = ''\n  @observable talkingImageUrl = ''\n  /** @deprecated use below getDisplayName instead */\n  @observable partyName = ''\n  @observable pbxTenant = ''\n  @observable pbxRoomId = ''\n  @observable pbxTalkerId = ''\n  @observable pbxUsername = ''\n  @observable isFrontCamera = true\n  @observable callConfig: CallConfig = {}\n\n  getDisplayName = () =>\n    getPartyName(this.partyNumber) ||\n    this.partyName ||\n    this.partyNumber ||\n    this.pbxTalkerId ||\n    this.id\n  createdAt = Date.now()\n\n  @observable incoming = false\n  @observable answered = false\n  @observable answeredAt = 0\n\n  getDuration = () => this.answeredAt && Date.now() - this.answeredAt\n\n  callkeepUuid = ''\n  callkeepAlreadyAnswered = false\n  callkeepAlreadyRejected = false\n\n  @action\n  answer = (\n    options?: { ignoreNav?: boolean },\n    videoOptions?: object,\n    exInfo?: object,\n  ) => {\n    const ignoreNav = options?.ignoreNav\n    if (options) {\n      delete options.ignoreNav\n    }\n    this.answered = true\n    this.store.setCurrentCallId(this.id)\n    // Hold other calls\n    this.store.calls\n      .filter(c => c.id !== this.id && c.answered && !c.holding)\n      .forEach(c => c.toggleHoldWithCheck())\n    sip.phone?.answer(\n      this.id,\n      options,\n      this.remoteVideoEnabled,\n      videoOptions,\n      exInfo,\n    )\n    if (!ignoreNav) {\n      Nav().goToPageCallManage()\n    }\n    this.answerCallKeep()\n  }\n  answerCallKeep = async () => {\n    if (Platform.OS === 'web') {\n      return\n    }\n    const updateCallKeep = () => {\n      RNCallKeep.setCurrentCallActive(this.callkeepUuid)\n      if (Platform.OS === 'android') {\n        RNCallKeep.setOnHold(this.callkeepUuid, false)\n      }\n      this.callkeepAlreadyAnswered = true\n    }\n    const startCallKeepCall = async () => {\n      RNCallKeep.startCall(this.callkeepUuid, this.partyNumber, 'Brekeke Phone')\n      await waitTimeout()\n    }\n    const updateIncoming = () => {\n      RNCallKeep.answerIncomingCall(this.callkeepUuid)\n      updateCallKeep()\n    }\n    const updateOutgoing = () => {\n      RNCallKeep.reportConnectedOutgoingCallWithUUID(this.callkeepUuid)\n      updateCallKeep()\n    }\n    // If it has callkeepUuid, which means: outgoing call / incoming PN call\n    if (this.callkeepUuid) {\n      if (this.incoming) {\n        updateIncoming()\n        return\n      }\n      if (Platform.OS === 'android') {\n        // android fix issue mix voice with gsm call\n        await startCallKeepCall()\n      }\n      updateOutgoing()\n      return\n    }\n    // If it doesnt have callkeepUuid, which means: incoming call without PN\n    // We'll treat them all as outgoing call in CallKeep\n    // We dont want to display incoming call here again\n    if (getAuthStore().getCurrentAccount()?.pushNotificationEnabled) {\n      return\n    }\n    this.callkeepUuid = newUuid().toUpperCase()\n    await startCallKeepCall()\n    updateOutgoing()\n  }\n\n  isAboutToHangup = false\n  hangupWithUnhold = async () => {\n    if (this.isAboutToHangup) {\n      return\n    }\n    this.isAboutToHangup = true\n    if (this.holding) {\n      await this.toggleHold().then(\n        success =>\n          !success &&\n          console.error(\n            'hangupWithUnhold: failed to unhold, possible issue with pbx connection',\n          ),\n      )\n      await waitTimeout()\n    }\n    sip.hangupSession(this.id)\n  }\n\n  @observable videoSessionId = ''\n  @observable localVideoEnabled = false\n  @observable remoteVideoEnabled = false\n  toggleVideo = () => {\n    const pbxUser = contactStore.getPbxUserById(this.partyNumber)\n    const callerStatus = pbxUser?.talkers?.[0]?.status\n    if (this.holding || callerStatus === 'holding') {\n      return\n    }\n    this.localVideoEnabled\n      ? sip.disableVideo(this.id)\n      : sip.enableVideo(this.id)\n  }\n  @action toggleSwitchCamera = () => {\n    this.isFrontCamera = !this.isFrontCamera\n    sip.switchCamera(this.id, this.isFrontCamera)\n    BrekekeUtils.setIsFrontCamera(this.callkeepUuid, this.isFrontCamera)\n  }\n\n  @observable remoteVideoStreamObject: MediaStream | null = null\n  voiceStreamObject: MediaStream | null = null\n\n  @observable muted = false\n  @action toggleMuted = () => {\n    this.muted = !this.muted\n    if (this.callkeepUuid) {\n      RNCallKeep.setMutedCall(this.callkeepUuid, this.muted)\n    }\n    return sip.setMuted(this.muted, this.id)\n  }\n\n  @observable recording = false\n  @action updateRecordingStatus = (status: boolean) => {\n    this.recording = status\n    BrekekeUtils.setRecordingStatus(this.callkeepUuid, this.recording)\n  }\n  @action toggleRecording = () => {\n    const fn = this.recording\n      ? pbx.stopRecordingTalker\n      : pbx.startRecordingTalker\n    this.recording = !this.recording\n    return fn(this.pbxTenant, this.pbxTalkerId)\n      .then(this.onToggleRecordingFailure)\n      .catch(this.onToggleRecordingFailure)\n  }\n  @action private onToggleRecordingFailure = (err: Error | boolean) => {\n    if (err === true) {\n      return\n    }\n    this.recording = !this.recording\n    if (typeof err !== 'boolean') {\n      const message = this.recording\n        ? intlDebug`Failed to stop recording the call`\n        : intlDebug`Failed to start recording the call`\n      RnAlert.error({ message, err })\n    }\n  }\n\n  toggleHoldWithCheck = () => {\n    if (this.isAboutToHangup) {\n      return\n    }\n    this.toggleHold()\n  }\n\n  @observable holding = false\n  private prevHoling = false\n\n  @action private toggleHold = () => {\n    const fn = this.holding ? pbx.unholdTalker : pbx.holdTalker\n    this.holding = !this.holding\n    if (!this.isAboutToHangup && !this.holding) {\n      this.store.setCurrentCallId(this.id)\n    }\n    if (!this.isAboutToHangup) {\n      if (this.callkeepUuid && !this.holding) {\n        if (Platform.OS === 'ios') {\n          hackyToggleSpeaker()\n        }\n        if (Platform.OS === 'android') {\n          RNCallKeep.setOnHold(this.callkeepUuid, false)\n        }\n      }\n      BrekekeUtils.setOnHold(this.callkeepUuid, this.holding)\n    }\n    return fn(this.pbxTenant, this.pbxTalkerId)\n      .then(this.onToggleHoldFailure)\n      .catch(this.onToggleHoldFailure)\n  }\n  @action private onToggleHoldFailure = (err: Error | boolean) => {\n    if (err === true) {\n      return true\n    }\n    this.holding = !this.holding\n    if (this.callkeepUuid && !this.holding && Platform.OS === 'android') {\n      RNCallKeep.setOnHold(this.callkeepUuid, false)\n    }\n    BrekekeUtils.setOnHold(this.callkeepUuid, this.holding)\n    if (typeof err !== 'boolean') {\n      const message = this.holding\n        ? intlDebug`Failed to unhold the call`\n        : intlDebug`Failed to hold the call`\n      RnAlert.error({ message, err })\n      // Already show error, considered it's handled\n      return true\n    }\n    return false\n  }\n\n  @observable transferring = ''\n  private prevTransferring = ''\n  transferBlind = (number: string) => {\n    Nav().goToPageCallRecents()\n    return pbx\n      .transferTalkerBlind(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onTransferFailure)\n  }\n  @action transferAttended = (number: string) => {\n    this.transferring = number\n    this.prevHoling = this.holding\n    this.holding = true\n    Nav().backToPageCallManage()\n    this.prevHoling = this.holding\n    this.holding = true\n    return pbx\n      .transferTalkerAttended(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onTransferFailure)\n  }\n  @action private onTransferFailure = (err: Error) => {\n    this.transferring = ''\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to transfer the call`,\n      err,\n    })\n  }\n\n  @action stopTransferring = () => {\n    this.prevTransferring = this.transferring\n    this.transferring = ''\n    // User cancel transfer and resume call -> unhold automatically from server side\n    this.prevHoling = this.holding\n    this.holding = false\n    return pbx\n      .stopTalkerTransfer(this.pbxTenant, this.pbxTalkerId)\n      .catch(this.onStopTransferringFailure)\n  }\n  @action private onStopTransferringFailure = (err: Error) => {\n    this.transferring = this.prevTransferring\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to stop the transfer`,\n      err,\n    })\n  }\n\n  @action conferenceTransferring = () => {\n    this.prevTransferring = this.transferring\n    this.transferring = ''\n    this.prevHoling = this.holding\n    this.holding = false\n    return pbx\n      .joinTalkerTransfer(this.pbxTenant, this.pbxTalkerId)\n      .catch(this.onConferenceTransferringFailure)\n  }\n  @action private onConferenceTransferringFailure = (err: Error) => {\n    this.transferring = this.prevTransferring\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to make conference for the transfer`,\n      err,\n    })\n  }\n\n  @action park = (number: string) => {\n    return pbx\n      .parkTalker(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onParkFailure)\n  }\n  private onParkFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to park the call`,\n      err,\n    })\n  }\n}\n\n// Hack to fix no voice after unhold using toggle loud speaker\n// This issue happens on ios only, toggle loud speaker reset the audio route\n// The actual issue could be related to ios audio route\n// Related packages: callkeep, webrtc, incall-manager...\nexport const hackyToggleSpeaker = async () => {\n  const c = getCallStore()\n  IncallManager.setForceSpeakerphoneOn(!c.isLoudSpeakerEnabled)\n  const conf = await pbx.getConfig()\n  const ms = Number(conf?.['webphone.hacky.speaker']) || 500\n  console.log(`webphone.hacky.speaker ${ms}ms`)\n  await waitTimeout(ms)\n  IncallManager.setForceSpeakerphoneOn(c.isLoudSpeakerEnabled)\n}\n\nexport type CallConfig = {\n  dtmf?: string\n  hangup?: string\n  hold?: string\n  mute?: string\n  park?: string\n  record?: string\n  speaker?: string\n  transfer?: string\n  video?: string\n}\nexport type CallConfigKey = keyof CallConfig\n","import { toJS } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { FC, Fragment, MutableRefObject, useEffect, useRef } from 'react'\nimport {\n  Platform,\n  SectionList,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  ViewProps,\n} from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport {\n  mdiMenuDown,\n  mdiMenuRight,\n  mdiMoreHoriz,\n  mdiPhone,\n  mdiPhoneForward,\n  mdiVideo,\n} from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatMessage, chatStore } from '../stores/chatStore'\nimport { Nav } from '../stores/Nav'\nimport { DropdownPosition, RnDropdown } from '../stores/RnDropdown'\nimport { GroupUserSectionListData, userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { UserItem } from './ContactUserItem'\nimport { Dropdown } from './Dropdown'\nimport { DropdownItemProps } from './DropdownItem'\nimport { RnIcon } from './RnIcon'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  container: {\n    marginTop: 15,\n  },\n  headerSectionList: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    backgroundColor: v.borderBg,\n    paddingHorizontal: 5,\n    alignItems: 'center',\n    paddingVertical: 12,\n    marginTop: 15,\n  },\n  leftSection: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  editGroupIcon: {\n    paddingHorizontal: 10,\n  },\n  containerDropdown: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'transparent',\n  },\n  disableMarginTop: { marginTop: 0 },\n})\n\ntype ContactSectionListProps = {\n  sectionListData: GroupUserSectionListData[]\n  isEditMode?: boolean\n  ddItems?: DropdownItemProps[]\n  isTransferCall?: boolean\n}\nexport const ContactSectionList: FC<ViewProps & ContactSectionListProps> =\n  observer(p => {\n    const sectionHeaderRefs = useRef<View[]>([])\n    const reCalculatedLayoutDropdownTimeoutId = useRef<number>(0)\n\n    useEffect(() => {\n      RnDropdown.setShouldUpdatePosition(true)\n      return () => {\n        sectionHeaderRefs.current = []\n        if (reCalculatedLayoutDropdownTimeoutId.current) {\n          BackgroundTimer.clearTimeout(\n            reCalculatedLayoutDropdownTimeoutId.current,\n          )\n        }\n      }\n    }, [])\n\n    useEffect(() => {\n      if (p.isEditMode && RnDropdown.shouldUpdatePosition) {\n        // recalculate position header dropdown\n        RnDropdown.setShouldUpdatePosition(false)\n        calculateSectionHeaderPosition()\n      }\n      // eslint-disable-next-line react-app/react-hooks/exhaustive-deps\n    }, [p.isEditMode, RnDropdown.shouldUpdatePosition])\n\n    const clearConnectTimeoutId = () => {\n      if (reCalculatedLayoutDropdownTimeoutId.current) {\n        BackgroundTimer.clearTimeout(\n          reCalculatedLayoutDropdownTimeoutId.current,\n        )\n        reCalculatedLayoutDropdownTimeoutId.current = 0\n      }\n    }\n\n    const calculateSectionHeaderPosition = () => {\n      if (reCalculatedLayoutDropdownTimeoutId.current) {\n        clearConnectTimeoutId()\n      }\n      // Must wrap in setTimeout to make sure the header view has completed render\n      reCalculatedLayoutDropdownTimeoutId.current = BackgroundTimer.setTimeout(\n        () => {\n          reCalculatedLayoutDropdownTimeoutId.current = 0\n          const listDropdownPosition: DropdownPosition[] = []\n          sectionHeaderRefs.current.forEach((ref: View, index) => {\n            if (ref) {\n              ref.measure((fx, fy, w, h, px, py) => {\n                listDropdownPosition.push({\n                  top: Platform.OS === 'ios' ? py : py + h,\n                  right: 20,\n                })\n                // After get all section list dropdown position\n                if (index === sectionHeaderRefs.current.length - 1) {\n                  RnDropdown.setPositions(listDropdownPosition)\n                  RnDropdown.setHeaderHeight(h)\n                }\n              })\n            }\n          })\n        },\n        500,\n      )\n    }\n\n    const { openedIndex, positions } = RnDropdown\n\n    const sectionListData: GroupUserSectionListData[] = toJS(p.sectionListData) //p.sectionListData\n\n    return (\n      <Fragment>\n        <SectionList\n          sections={sectionListData}\n          keyExtractor={item => item.user_id}\n          renderItem={({\n            item,\n            index,\n            section,\n          }: {\n            item: UcBuddy\n            index: Number\n            section: GroupUserSectionListData\n          }) => (\n            <RenderItemUser\n              sectionListData={sectionListData}\n              item={item}\n              title={section.title}\n              isEditMode={p?.isEditMode}\n              isTransferCall={p?.isTransferCall}\n            />\n          )}\n          renderSectionHeader={({ section: { title, data } }) => (\n            <RenderHeaderSection\n              sectionHeaderRefs={sectionHeaderRefs}\n              sectionListData={sectionListData}\n              isEditMode={p.isEditMode}\n              title={title}\n              data={data}\n            />\n          )}\n        />\n        {openedIndex >= 0 && (\n          <TouchableWithoutFeedback onPress={() => RnDropdown.close()}>\n            <View style={css.containerDropdown}>\n              <Dropdown position={positions[openedIndex]} items={p.ddItems} />\n            </View>\n          </TouchableWithoutFeedback>\n        )}\n      </Fragment>\n    )\n  })\nconst getLastMessageChat = (id: string) => {\n  const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n  return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n}\ntype ItemUser = {\n  sectionListData: GroupUserSectionListData[]\n  item: UcBuddy\n  title: string\n  isEditMode?: boolean\n  isTransferCall?: boolean\n}\nconst RenderItemUser = observer(\n  ({ sectionListData, item, title, isEditMode, isTransferCall }: ItemUser) => {\n    const index = sectionListData.findIndex(i => i.title === title)\n    const hidden = RnDropdown.hiddenIndexes.some(idx => idx === index)\n    const oc = getCallStore().getOngoingCall()\n\n    return !hidden ? (\n      <View\n        key={`ItemUser-${item.user_id}-${index}`}\n        onLayout={e => {\n          RnDropdown.setItemHeight(e.nativeEvent.layout.height)\n        }}\n      >\n        {isEditMode ? (\n          <RnTouchableOpacity\n            onPress={() => userStore.selectUserId(item.user_id)}\n            disabled={userStore.isSelectedAddAllUser}\n          >\n            <UserItem\n              id={item.user_id}\n              name={item.name || item.user_id}\n              avatar={item.profile_image_url}\n              disabled={userStore.isSelectedAddAllUser}\n              isSelected={\n                userStore.isSelectedAddAllUser ||\n                userStore.selectedUserIds[item.user_id]\n              }\n              onSelect={() => userStore.selectUserId(item.user_id)}\n              isSelection\n            />\n          </RnTouchableOpacity>\n        ) : !isTransferCall ? (\n          <RnTouchableOpacity\n            onPress={\n              getAuthStore().getCurrentAccount()?.ucEnabled\n                ? () => Nav().goToPageChatDetail({ buddy: item.user_id })\n                : undefined\n            }\n          >\n            <UserItem\n              iconFuncs={[\n                () => getCallStore().startVideoCall(item.user_id),\n                () => getCallStore().startCall(item.user_id),\n              ]}\n              icons={[mdiVideo, mdiPhone]}\n              lastMessage={getLastMessageChat(item.user_id)?.text}\n              id={item.user_id}\n              name={item.name}\n              avatar={item.profile_image_url}\n              status={item.status}\n            />\n          </RnTouchableOpacity>\n        ) : (\n          <UserItem\n            iconFuncs={[\n              () => oc?.transferAttended(item.user_id),\n              () => oc?.transferBlind(item.user_id),\n            ]}\n            icons={[mdiPhoneForward, mdiPhone]}\n            id={item.user_id}\n            name={item.name}\n            avatar={item.profile_image_url}\n            status={item.status}\n          />\n        )}\n      </View>\n    ) : null\n  },\n)\ntype SectionHeader = {\n  sectionHeaderRefs: MutableRefObject<View[]>\n  sectionListData: GroupUserSectionListData[]\n  isEditMode?: boolean\n  title: string\n  data: readonly UcBuddy[]\n}\n\nconst RenderHeaderSection = observer(\n  ({\n    sectionHeaderRefs,\n    sectionListData,\n    isEditMode,\n    title,\n    data,\n  }: SectionHeader) => {\n    const index = sectionListData.findIndex(i => i.title === title)\n    const hidden = RnDropdown.hiddenIndexes.some(i => i === index)\n    const titleHeaderRender = userStore.getHeaderTitle(title, data, isEditMode)\n\n    const isDisableMarginTop =\n      !sectionListData[index - 1]?.data?.length ||\n      RnDropdown.hiddenIndexes.some(idx => idx === index - 1)\n\n    return (\n      <RnTouchableOpacity\n        onPress={() => RnDropdown.toggleSection(index, data.length)}\n      >\n        <View\n          style={[\n            css.headerSectionList,\n            isDisableMarginTop && css.disableMarginTop,\n          ]}\n          ref={c => {\n            if (c && isEditMode) {\n              sectionHeaderRefs.current[index] = c\n            }\n          }}\n        >\n          <Fragment>\n            <View style={css.leftSection}>\n              <View>\n                <RnIcon path={hidden ? mdiMenuRight : mdiMenuDown} />\n              </View>\n              <RnText small>{titleHeaderRender}</RnText>\n            </View>\n            {isEditMode && (\n              <RnTouchableOpacity\n                style={css.editGroupIcon}\n                onPress={() => {\n                  if (RnDropdown.hiddenIndexes.some(i => i === index)) {\n                    RnDropdown.toggleSection(index, data.length)\n                  }\n                  RnDropdown.toggle(index)\n                }}\n              >\n                <RnIcon path={mdiMoreHoriz} />\n              </RnTouchableOpacity>\n            )}\n          </Fragment>\n        </View>\n      </RnTouchableOpacity>\n    )\n  },\n)\n","// eslint-disable-next-line simple-import-sort/imports\nimport { Component } from 'react'\nimport {\n  View,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  ScrollView,\n  ActivityIndicator,\n} from 'react-native'\n\nimport { Layout } from '../components/Layout'\nimport { SelectionItem } from '../components/SelectionItem'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nimport { DropdownItemProps } from '../components/DropdownItem'\n\nimport { userStore } from '../stores/userStore'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { observer } from 'mobx-react'\nimport { uc } from '../api/uc'\nimport { RnAlert } from '../stores/RnAlert'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { ContactList } from '../components/ContactList'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { RnIcon } from '../components/RnIcon'\nimport { mdiFolderPlus } from '../assets/icons'\nimport { RnText } from '../components/RnText'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getAuthStore } from '../stores/authStore'\nimport { accountStore } from '../stores/accountStore'\n\nexport const css = StyleSheet.create({\n  listHeaderSection: {\n    paddingHorizontal: 10,\n  },\n  listTitleSection: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    marginVertical: 10,\n  },\n  rowGroupTitle: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  rowCapacity: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  errorText: {\n    color: 'red',\n  },\n  loadingIcon: {\n    marginTop: 20,\n  },\n})\n\n@observer\nexport class PageContactEdit extends Component {\n  state = { didMount: false }\n\n  componentDidMount = () => {\n    if (getAuthStore().getCurrentAccount()?.ucEnabled) {\n      userStore.loadUcBuddyList(true)\n    } else {\n      userStore.loadPbxBuddyList(true)\n    }\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n  getDDOptions = (ddIndex: number): DropdownItemProps[] => {\n    return [\n      {\n        title: intl`Add/Remove user`,\n        onPress: () => this.onAddRemoveUser(ddIndex),\n        disabled: userStore.dataGroupAllUser.length - 1 === ddIndex,\n      },\n      {\n        title: intl`Check all`,\n        onPress: (e?: MouseEvent) => {\n          e?.stopPropagation?.()\n          this.onCheckAll(ddIndex)\n        },\n        disabled:\n          userStore.isSelectedAddAllUser ||\n          !userStore.dataGroupAllUser[ddIndex]?.data?.length,\n      },\n      {\n        title: intl`Uncheck all`,\n        onPress: (e?: MouseEvent) => {\n          e?.stopPropagation?.()\n          this.onUncheckAll(ddIndex)\n        },\n        disabled:\n          userStore.isSelectedAddAllUser ||\n          !userStore.dataGroupAllUser[ddIndex]?.data?.length,\n      },\n      {\n        title: intl`Remove group`,\n        onPress: () => this.onRemoveGroup(ddIndex),\n        disabled: userStore.dataGroupAllUser.length - 1 === ddIndex,\n      },\n    ]\n  }\n\n  onAddRemoveUser = (ddIndex: number) => {\n    RnDropdown.close()\n    Nav().goToPageContactGroupEdit({\n      groupName: userStore.dataGroupAllUser[ddIndex].title,\n      listItem: userStore.dataGroupAllUser[ddIndex].data.map(itm => itm),\n    })\n    this.scrollToTopListContact()\n  }\n\n  onCheckAll = (groupIndex: number) => {\n    RnDropdown.close()\n    userStore.selectAllUserIdsByGroup(groupIndex)\n  }\n\n  onUncheckAll = (groupIndex: number) => {\n    RnDropdown.close()\n    userStore.unselectAllUserIdsByGroup(groupIndex)\n  }\n\n  onRemoveGroup = (ddIndex: number) => {\n    RnDropdown.close()\n    RnDropdown.removeSection(\n      ddIndex,\n      userStore.dataGroupAllUser[ddIndex]?.data?.length,\n    )\n    userStore.removeGroup(ddIndex)\n  }\n\n  onSelectEditGroupingAndUserOrderOption = () => {\n    RnDropdown.close()\n    if (!userStore.isSelectEditGroupingAndUserOrder) {\n      RnDropdown.setShouldUpdatePosition(true)\n    }\n    userStore.toggleIsSelectEditGroupingAndUserOrder()\n  }\n\n  onAddGroup = () => {\n    Nav().goToPageContactGroupCreate()\n    this.scrollToTopListContact()\n  }\n\n  onGoBack = () => {\n    if (getAuthStore().getCurrentAccount()?.ucEnabled) {\n      userStore.loadUcBuddyList()\n    }\n    RnDropdown.close()\n    Nav().backToPageContactUsers()\n  }\n\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  scrollToTopListContact = () =>\n    BackgroundTimer.setTimeout(() => {\n      this.view?.scrollTo({ y: 0, animated: true })\n    }, 1000)\n\n  render() {\n    const {\n      buddyMax,\n      dataListAllUser,\n      isSelectedAddAllUser,\n      selectedUserIds,\n      isDisableAddAllUserToTheList,\n      isSelectEditGroupingAndUserOrder,\n      isCapacityInvalid,\n      dataGroupAllUser,\n      buddyMode,\n    } = userStore\n    const { openedIndex } = RnDropdown\n    return (\n      <Layout\n        fabOnBack={this.onGoBack}\n        fabOnNext={this.save}\n        fabOnNextText={intl`SAVE`}\n        onBack={this.onGoBack}\n        title={intl`Edit buddy list`}\n        containerRef={this.setViewRef}\n      >\n        <TouchableWithoutFeedback onPress={RnDropdown.close}>\n          <View style={css.listHeaderSection}>\n            {!isDisableAddAllUserToTheList && (\n              <SelectionItem\n                isSelected={isSelectedAddAllUser}\n                onPress={userStore.toggleIsSelectedAddAllUser}\n                title={intl`Add all user to the list`}\n              />\n            )}\n            <View style={css.rowGroupTitle}>\n              <SelectionItem\n                isSelected={isSelectEditGroupingAndUserOrder}\n                onPress={this.onSelectEditGroupingAndUserOrderOption}\n                title={\n                  buddyMode === 2\n                    ? intl`Edit grouping and user order`\n                    : intl`Display with grouping`\n                }\n              />\n              {isSelectEditGroupingAndUserOrder && buddyMode === 2 && (\n                <RnTouchableOpacity onPress={this.onAddGroup}>\n                  <RnIcon path={mdiFolderPlus} />\n                </RnTouchableOpacity>\n              )}\n            </View>\n            <View style={css.listTitleSection}>\n              <View style={css.rowCapacity}>\n                <RnText>{`${intl`Capacity`}`}</RnText>\n                <RnText style={isCapacityInvalid && css.errorText}>{`    ${\n                  isSelectedAddAllUser\n                    ? dataListAllUser.length\n                    : Object.keys(selectedUserIds).length\n                }`}</RnText>\n                <RnText>{` / ${buddyMax}`}</RnText>\n              </View>\n            </View>\n          </View>\n        </TouchableWithoutFeedback>\n        {!this.state.didMount ? (\n          <ActivityIndicator style={css.loadingIcon} size='large' />\n        ) : isSelectEditGroupingAndUserOrder ? (\n          <ContactSectionList\n            sectionListData={dataGroupAllUser}\n            isEditMode={true}\n            ddItems={this.getDDOptions(openedIndex)}\n          />\n        ) : (\n          <ContactList data={dataListAllUser} />\n        )}\n      </Layout>\n    )\n  }\n\n  saveUC = () => {\n    const { isSelectedAddAllUser, groups, dataListAllUser, selectedUserIds } =\n      userStore\n    const data = [\n      ...groups,\n      ...dataListAllUser.filter(u => selectedUserIds[u.user_id]),\n    ]\n    uc.saveProperties(!isSelectedAddAllUser, data)\n      .then(this.onSaveSuccess)\n      .catch(this.onSaveFailure)\n  }\n  savePBX = () => {\n    const { isSelectedAddAllUser, groups, dataListAllUser, selectedUserIds } =\n      userStore\n    const data = {\n      screened: !isSelectedAddAllUser,\n      users: [\n        ...groups,\n        ...dataListAllUser.filter(u => selectedUserIds[u.user_id]),\n      ],\n    }\n    getAuthStore().savePbxBuddyList(data)\n    userStore.updateDisplayGroupList()\n    this.onGoBack()\n  }\n  save = () => {\n    const { isCapacityInvalid, type } = userStore\n    if (!isCapacityInvalid) {\n      type === 'UcBuddy' ? this.saveUC() : this.savePBX()\n    }\n  }\n  onSaveSuccess = () => {\n    accountStore.saveAccountsToLocalStorageDebounced()\n    userStore.updateDisplayGroupList()\n    this.onGoBack()\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save user list`,\n      err,\n    })\n  }\n}\n","import { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { pbx } from '../api/pbx'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\n\nclass AuthPBX {\n  private clearShouldAuthReaction?: Lambda\n\n  auth = () => {\n    this.authWithCheck()\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.pbxShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    console.log('PBX PN debug: disconnect by AuthPBX.dispose')\n    this.clearShouldAuthReaction?.()\n    this.clearShouldAuthReaction = undefined\n    pbx.disconnect()\n    const s = getAuthStore()\n    s.pbxState = 'stopped'\n  }\n\n  @action authWithCheck = async () => {\n    const s = getAuthStore()\n    if (!s.pbxShouldAuth()) {\n      return\n    }\n    if (s.pbxTotalFailure > 1) {\n      s.pbxState = 'waiting'\n      await waitTimeout(\n        s.pbxTotalFailure < 5 ? s.pbxTotalFailure * 1000 : 15000,\n      )\n      if (s.pbxState !== 'waiting') {\n        return\n      }\n    }\n    console.log('PBX PN debug: disconnect by AuthPBX.authWithCheck')\n    pbx.disconnect()\n    s.pbxState = 'connecting'\n    pbx\n      .connect(s.getCurrentAccount())\n      .then(connected => {\n        if (!connected) {\n          throw new Error('Pbx login connection timed out')\n        }\n      })\n      .catch(\n        action((err: Error) => {\n          s.pbxState = 'failure'\n          s.pbxTotalFailure += 1\n          console.error('Failed to connect to pbx:', err)\n          this.authWithCheck()\n        }),\n      )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n}\n\nexport const authPBX = new AuthPBX()\n","import UCClient0 from 'brekekejs/lib/ucclient'\nimport { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { UcErrors } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { uc } from '../api/uc'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\nimport { ChatMessage, chatStore } from './chatStore'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\nconst UCClient = UCClient0 as {\n  Errors: UcErrors\n}\n\nclass AuthUC {\n  private clearShouldAuthReaction?: Lambda\n\n  auth() {\n    this.authWithCheck()\n    uc.on('connection-stopped', this.onConnectionStopped)\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.ucShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    uc.off('connection-stopped', this.onConnectionStopped)\n    this.clearShouldAuthReaction?.()\n    uc.disconnect()\n    const s = getAuthStore()\n    s.ucState = 'stopped'\n  }\n\n  @action private authWithoutCatch = async () => {\n    uc.disconnect()\n    const s = getAuthStore()\n    s.ucState = 'connecting'\n    s.ucLoginFromAnotherPlace = false\n    const c = await pbx.getConfig()\n    if (!c) {\n      throw new Error('AuthUC.authWithoutCatch pbx.getConfig() undefined')\n    }\n    const ca = s.getCurrentAccount()\n    if (!ca) {\n      return\n    }\n    await uc.connect(\n      ca,\n      c['webphone.uc.host'] || `${ca.pbxHostname}:${ca.pbxPort}`,\n    )\n    this.loadUsers()\n    this.loadUnreadChats().then(\n      action(() => {\n        s.ucState = 'success'\n        s.ucTotalFailure = 0\n      }),\n    )\n  }\n  authWithCheck = async () => {\n    const s = getAuthStore()\n    if (!s.ucShouldAuth()) {\n      return\n    }\n    if (s.ucTotalFailure > 1) {\n      s.ucState = 'waiting'\n      await waitTimeout(s.ucTotalFailure < 5 ? s.ucTotalFailure * 1000 : 15000)\n      if (s.ucState !== 'waiting') {\n        return\n      }\n    }\n    this.authWithoutCatch().catch(\n      action((err: Error) => {\n        s.ucState = 'failure'\n        s.ucTotalFailure += 1\n        console.error('Failed to connect to uc:', err)\n        this.authWithCheck()\n      }),\n    )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n\n  @action private onConnectionStopped = (e: { code: number }) => {\n    const s = getAuthStore()\n    s.ucState = 'failure'\n    s.ucTotalFailure += 1\n    s.ucLoginFromAnotherPlace = e.code === UCClient.Errors.PLEONASTIC_LOGIN\n    this.authWithCheck()\n  }\n  @action private loadUsers = () => {\n    const users = uc.getUsers()\n    contactStore.ucUsers = users\n  }\n  private loadUnreadChats = () =>\n    uc\n      .getUnreadChats()\n      .then(this.onLoadUnreadChatsSuccess)\n      .catch(this.onLoadUnreadChatsFailure)\n  @action private onLoadUnreadChatsSuccess = (\n    chats: {\n      id: string\n      text: string\n      creator: string | undefined\n      created: string\n    }[],\n  ) => {\n    chats.forEach(c0 => {\n      const chat = c0 as any as ChatMessage\n      chatStore.pushMessages(chat.creator, [chat], true)\n    })\n  }\n  private onLoadUnreadChatsFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to load unread chat messages`,\n      err,\n    })\n  }\n}\n\nexport const authUC = new AuthUC()\n","import { flow, get } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Fragment } from 'react'\nimport { Platform } from 'react-native'\nimport Validator, { Rules } from 'validatorjs'\n\nimport { PbxBook } from '../api/brekekejs'\nimport { Field } from '../components/Field'\nimport { PhonebookAutoComplete } from '../components/PhonebookAutoComplete'\nimport { arrToMap } from './arrToMap'\nimport { CreatedStore } from './createStore'\nimport { useStore } from './useStore'\n\nconst noop = () => {}\n\nexport const useForm = () => {\n  const f0 = (\n    $: CreatedStore & {\n      dirtyMap: { [k: string]: boolean }\n      errorMap: { [k: string]: string }\n      currentFocus: string | undefined\n      props: {\n        $: CreatedStore\n        fields: FormField[]\n        k: string\n        onValidSubmit: Function\n      }\n      submit: Function\n      onFieldBlur: Function\n      onFieldChange: Function\n      onFocus: Function\n    },\n  ) => ({\n    observable: {\n      dirtyMap: {},\n      errorMap: {},\n      currentFocus: undefined,\n    },\n    props: {},\n    onFieldBlur: (k: string) => {\n      $.set(`dirtyMap.${k}`, true)\n      // $.set('currentFocus', undefined)\n    },\n    onFocus: (k: string) => {\n      $.set('currentFocus', k)\n    },\n    onFieldChange: (k: string, v: string) => {\n      // TODO batch, remember k\n      const rule = $.props.fields.find((f: FormField) => f.name === k)?.rule\n      const validator = rule ? new Validator({ [k]: v }, { [k]: rule }) : null\n      $.set(`errorMap.${k}`, validator?.fails() && validator.errors.first(k))\n    },\n    // Submit function to use outside of the hook\n    submit: () => {\n      const { $: $parent, fields, k, onValidSubmit } = $.props\n      const rules = arrToMap(\n        fields.filter((f: FormField) => f.rule && !f.disabled && !f.hidden),\n        (f: FormField) => f.name,\n        (f: FormField) => f.rule,\n      ) as { [k: string]: unknown }\n      const validator = new Validator(get($parent, k), rules as Rules)\n      if (validator.fails()) {\n        $.set(\n          'errorMap',\n          arrToMap(\n            Object.keys(rules),\n            _ => _,\n            _ => validator.errors.first(_),\n          ),\n        )\n        // TODO show toast\n      } else {\n        $.set('errorMap', {})\n        if (onValidSubmit) {\n          onValidSubmit()\n        }\n      }\n      $.set(\n        'dirtyMap',\n        arrToMap(fields, (f: FormField) => f.name),\n      )\n    },\n    // Form component\n    render: observer((props: object) => {\n      $.props = Object.assign($.props, props)\n      const { $: $parent, fields, k } = $.props\n      const RnForm = Platform.OS === 'web' ? 'form' : Fragment\n      const formProps = Platform.OS === 'web' ? { onSubmit: $.submit } : null\n      return (\n        <RnForm {...(formProps as object)}>\n          {fields.map(\n            (f: FormField, i: number) =>\n              !f.hidden && (\n                <Field\n                  key={i}\n                  {...f}\n                  error={\n                    !f.disabled &&\n                    $.dirtyMap[f.name] &&\n                    $.currentFocus !== f.name\n                      ? $.errorMap[f.name]\n                      : undefined\n                  }\n                  onBlur={() => $.onFieldBlur(f.name)}\n                  // Mark this field dirty\n                  onValueChange={flow(\n                    [\n                      // Add change handler to trigger validate\n                      // TODO update all flows to regular funcs\n                      (v: string) => {\n                        $.onFieldChange(f.name, v)\n                        return v\n                      },\n                      // Default change handler from store\n                      f.onValueChange === undefined\n                        ? !f.disabled\n                          ? (v: string) => $parent.set(k + '.' + f.name, v)\n                          : noop\n                        : (...args: unknown[]) => f.onValueChange(...args),\n                    ].filter(_ => _),\n                  )}\n                  onFocus={() => $.onFocus(f.name)}\n                  // Error\n                  value={\n                    // Default value from store\n                    f.value === undefined\n                      ? get($parent, k + '.' + f.name)\n                      : f.value\n                  }\n                />\n              ),\n          )}\n          {k === 'phonebook' && $.currentFocus === 'phonebook' && (\n            <PhonebookAutoComplete\n              value={get($parent, k + '.phonebook')}\n              onPressItem={(item: PbxBook) => {\n                $parent.set(k + '.phonebook', item.phonebook)\n                $.onFieldChange('phonebook', item.phonebook)\n              }}\n            />\n          )}\n        </RnForm>\n      )\n    }),\n  })\n  const $ = useStore(f0) as any as FormContext\n  return [$.render, $.submit, $.onFieldChange]\n}\n\nexport type FormContext = {\n  render: Function\n  submit(): void\n  onFieldChange(f: string, v: string): void\n}\nexport type FormField = {\n  name: string\n  disabled: boolean\n  value: string\n  onValueChange: Function\n  rule: string\n  hidden?: boolean\n}\n","export const fcmApplicationId = '22177122297'\nexport const bundleIdentifier = 'com.brekeke.phonedev'\n","export const parsePalParams = (config?: object) =>\n  parseParamsWithPrefix('webphone.pal.param.', config)\nexport const parseCallParams = (config?: object) =>\n  parseParamsWithPrefix('webphone.call.', config)\n\nconst parseParamsWithPrefix = (prefix: string, o: object = {}) =>\n  Object.entries(o)\n    .filter(([k]) => k.startsWith(prefix))\n    .reduce((res, [k, v]: string[]) => {\n      res[k.replace(prefix, '')] = v\n      return res\n    }, {} as { [k: string]: string })\n","import { intl } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { getAudioVideoPermission } from './getAudioVideoPermission'\n\nlet alreadyPrompted = false\nexport const webPromptPermission = () => {\n  if (alreadyPrompted) {\n    return\n  }\n  alreadyPrompted = true\n  RnAlert.prompt({\n    title: intl`Action Required`,\n    message: intl`Web Phone needs your action to work well on browser. Press OK to continue`,\n    confirmText: 'OK',\n    dismissText: false,\n    onConfirm: getAudioVideoPermission,\n    onDismiss: getAudioVideoPermission,\n  })\n}\n","import { Platform } from 'react-native'\n\nimport { webPlayDing } from './webPlayDing'\n\nexport const getAudioVideoPermission = () => {\n  const cb = (stream: MediaStream) => stream.getTracks().forEach(t => t.stop())\n  // @ts-ignore\n  const eb = (err: MediaStreamError) => {\n    /* TODO */\n  }\n  // @ts-ignore\n  const p = window.navigator.getUserMedia(\n    { audio: true, video: true },\n    cb,\n    eb,\n  ) as any as Promise<MediaStream>\n  if (p?.then) {\n    p.then(cb).catch(eb)\n  }\n  if (Platform.OS === 'web') {\n    // trigger audio permission\n    webPlayDing()\n  }\n}\n","import ding from '../assets/ding.mp3'\nimport { waitTimeout } from './waitTimeout'\n\nexport const webPlayDing = async () => {\n  const a = new Audio()\n  a.volume = 0.05\n  a.src = ding\n  document.body.appendChild(a)\n  a.play()\n  await waitTimeout(3000)\n  document.body.removeChild(a)\n}\n","export type PnParams = {\n  // common\n  device_id: string\n  username: string\n  voip?: boolean\n  // for web browser\n  auth_secret?: string\n  endpoint?: string\n  key?: string\n}\nexport type PnParamsNew = PnParams & {\n  // new pnmanage in pbx 3.15 which can compose multile services\n  command: PnCommand\n  service_id: PnServiceId | PnServiceId[]\n  pnmanageNew?: boolean\n  device_id_voip?: string\n}\nexport enum PnCommand {\n  set = 'set',\n  remove = 'remove',\n}\nexport enum PnServiceId {\n  lpc = '4',\n  apns = '11',\n  fcm = '12',\n  web = '13',\n}\n","import { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { mdiCached, mdiKeyboardBackspace } from '../assets/icons'\nimport { intl } from '../stores/intl'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Actions: {\n    flex: 1,\n    flexDirection: 'row',\n    borderRadius: v.borderRadius,\n    overflow: 'hidden',\n  },\n  //\n  Btn: {\n    borderRadius: 0,\n    width: '25%',\n    paddingVertical: 8,\n  },\n  Btn__back: {\n    backgroundColor: v.colors.dangerFn(0.5),\n  },\n  Btn__more: {\n    backgroundColor: v.hoverBg,\n  },\n  Btn__next: {\n    width: '50%',\n    backgroundColor: v.colors.primary,\n  },\n  Btn__15: {\n    width: '15%',\n  },\n  Btn__33: {\n    width: `${(1 / 3) * 100}%`,\n  },\n  Btn__67: {\n    width: `${(2 / 3) * 100}%`,\n  },\n  Btn__100: {\n    width: '100%',\n  },\n  //\n  Text: {\n    flex: 1,\n    color: v.revColor,\n    lineHeight: v.iconSize,\n    textAlign: 'center',\n  },\n})\n\nexport const FooterActions: FC<\n  Partial<{\n    onBack(): void\n    onBackIcon: string\n    onMore(): void\n    onMoreIcon: string\n    onNext(): void\n    onNextColor: string\n    onNextText: string\n  }>\n> = p => {\n  const {\n    onBack,\n    onBackIcon,\n    onMore,\n    onMoreIcon,\n    onNext,\n    onNextColor,\n    onNextText,\n  } = p\n\n  return (\n    <View style={css.Actions}>\n      {onBack && (\n        <RnTouchableOpacity\n          onPress={onBack}\n          style={[css.Btn, css.Btn__back, !onMore && css.Btn__33]}\n        >\n          <RnIcon\n            color={v.colors.danger}\n            path={onBackIcon || mdiKeyboardBackspace}\n          />\n        </RnTouchableOpacity>\n      )}\n      {onMore && (\n        <RnTouchableOpacity\n          onPress={onMore}\n          style={[css.Btn, css.Btn__more, !onBack && css.Btn__33]}\n        >\n          <RnIcon path={onMoreIcon || mdiCached} />\n        </RnTouchableOpacity>\n      )}\n      <RnTouchableOpacity\n        onPress={onNext}\n        style={[\n          css.Btn,\n          css.Btn__next,\n          !(onBack && onMore) && css.Btn__67,\n          !(onBack || onMore) && css.Btn__100,\n          !!onNextColor && {\n            backgroundColor: onNextColor,\n          },\n        ]}\n      >\n        <RnText small style={css.Text}>\n          {onNextText || intl`SAVE`}\n        </RnText>\n      </RnTouchableOpacity>\n    </View>\n  )\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { getAuthStore } from '../stores/authStore'\nimport { chatStore } from '../stores/chatStore'\nimport { menus } from './navigationConfig'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nexport const css = StyleSheet.create({\n  Navigation: {\n    flexDirection: 'row',\n    alignSelf: 'stretch',\n  },\n  Btn: {\n    flex: 1,\n    padding: 4,\n    alignItems: 'center',\n  },\n  BtnBg: {\n    paddingVertical: 8,\n    width: '100%',\n  },\n  BtnBg__active: {\n    borderRadius: 22,\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  UnreadOuter: {\n    position: 'absolute',\n    top: 10,\n    left: 0,\n    right: 0,\n    flex: 1,\n    alignItems: 'center',\n  },\n  Unread: {\n    left: 15,\n    width: 20,\n    height: 15,\n    borderRadius: v.borderRadius,\n    paddingTop: 3,\n    backgroundColor: v.colors.danger,\n    overflow: 'hidden',\n  },\n  UnreadText: {\n    fontSize: v.fontSizeSmall - 2,\n    lineHeight: v.fontSizeSmall - 2,\n  },\n})\n\nexport const Navigation: FC<{\n  menu: string\n}> = observer(({ menu }) => (\n  <View style={css.Navigation}>\n    {menus().map(m => {\n      const active = m.key === menu\n      const totalUnreadChat = chatStore.unreadCount\n      const totalNoticesWebchat = chatStore.getNumberWebchatNoti()\n      const totalNoticesContact = totalUnreadChat + totalNoticesWebchat\n      const showUnreadChat =\n        getAuthStore().getCurrentAccount()?.ucEnabled &&\n        !!totalNoticesContact &&\n        m.key === 'contact' &&\n        !active\n      return (\n        <RnTouchableOpacity\n          key={m.key}\n          onPress={active ? undefined : m.navFn}\n          style={css.Btn}\n        >\n          <View style={[css.BtnBg, active && css.BtnBg__active]}>\n            <RnIcon path={m.icon} />\n          </View>\n          {showUnreadChat && (\n            <View style={css.UnreadOuter}>\n              <View style={css.Unread}>\n                <RnText style={css.UnreadText} bold white center>\n                  {totalUnreadChat + totalNoticesWebchat}\n                </RnText>\n              </View>\n            </View>\n          )}\n        </RnTouchableOpacity>\n      )\n    })}\n  </View>\n))\n","const os = 1000\nconst om = 60 * os\nconst oh = 60 * om\n\nexport const formatDuration = (ms: number) => {\n  if (isNaN(ms) || ms <= 0) {\n    return '00:00'\n  }\n  const h = Math.floor(ms / oh)\n  ms %= oh\n  let m: number | string = Math.floor(ms / om)\n  if (m < 10) {\n    m = '0' + m\n  }\n  ms %= om\n  let s: number | string = Math.floor(ms / os)\n  if (s < 10) {\n    s = '0' + s\n  }\n  return (h ? `${h}:` : '') + `${m}:${s}`\n}\n","import { getAuthStore } from '../stores/authStore'\n\nexport const webShowNotification = async (body: string, tag: string) => {\n  if (getAuthStore().pbxConfig?.['webphone.desktop.notification'] === 'false') {\n    return\n  }\n  const notification = window.Brekeke.WebNotification\n  const id = notification.showNotification({\n    document,\n    timeout: 15000,\n    interval: 15000,\n    title: 'Brekeke Phone',\n    renotify: true,\n    body,\n    tag,\n    icon: 'https://apps.brekeke.com/favicon.ico',\n    noisiness: 1,\n    onclick: (e: unknown) => {\n      window.focus()\n    },\n    onclose: (e: unknown) => {\n      notification.closeNotification({ notificationId: id })\n    },\n  })\n}\n","import { observer } from 'mobx-react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiMicrophone,\n  mdiMicrophoneOff,\n  mdiPause,\n  mdiPhoneHangup,\n  mdiPhoneInTalkOutline,\n  mdiPhoneOutgoingOutline,\n  mdiPlay,\n  mdiVolumeHigh,\n  mdiVolumeMedium,\n} from '../assets/icons'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\nimport { ButtonIcon } from './ButtonIcon'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  CallBar: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  CallBar_Outer: {\n    flexDirection: 'row',\n    padding: 5,\n    alignItems: 'center',\n  },\n  CallBar_Icon: {\n    flex: 1,\n  },\n  CallBar_Info: {\n    flex: 2,\n  },\n\n  CallBar_BtnCall: {\n    flex: 5,\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n  },\n  Notify_Info_PartyName: {\n    fontSize: 15,\n    fontWeight: 'bold',\n  },\n})\n\nexport const CallBar = observer(() => {\n  const s = getCallStore()\n  const oc = s.getOngoingCall()\n  if (s.inPageCallManage || !oc || (oc.incoming && !oc.answered)) {\n    return null\n  }\n  return (\n    <View style={css.CallBar}>\n      <RnTouchableOpacity\n        onPress={() => Nav().goToPageCallManage({ isFromCallBar: true })}\n        style={css.CallBar_Outer}\n      >\n        <View style={css.CallBar_Icon}>\n          <RnIcon\n            color={oc.incoming ? v.colors.primary : v.colors.warning}\n            path={oc.incoming ? mdiPhoneInTalkOutline : mdiPhoneOutgoingOutline}\n          />\n        </View>\n        <View style={css.CallBar_Info}>\n          <RnText style={css.Notify_Info_PartyName}>\n            {trimDisplayName(oc.getDisplayName())}\n          </RnText>\n          <RnText>\n            {oc.answered ? (\n              <Duration>{oc.answeredAt}</Duration>\n            ) : (\n              intl`Dialing...`\n            )}\n          </RnText>\n        </View>\n\n        <View style={css.CallBar_BtnCall}>\n          {!oc.holding && (\n            <>\n              <ButtonIcon\n                bdcolor={v.borderBg}\n                color={v.colors.danger}\n                onPress={oc.hangupWithUnhold}\n                path={mdiPhoneHangup}\n              />\n              {oc.answered && (\n                <>\n                  <ButtonIcon\n                    bdcolor={v.borderBg}\n                    color={oc.muted ? v.colors.primary : v.color}\n                    onPress={() => oc.toggleMuted()}\n                    path={oc.muted ? mdiMicrophoneOff : mdiMicrophone}\n                  />\n                  {Platform.OS !== 'web' && (\n                    <ButtonIcon\n                      bdcolor={v.borderBg}\n                      color={\n                        getCallStore().isLoudSpeakerEnabled\n                          ? v.colors.primary\n                          : v.color\n                      }\n                      onPress={getCallStore().toggleLoudSpeaker}\n                      path={\n                        getCallStore().isLoudSpeakerEnabled\n                          ? mdiVolumeHigh\n                          : mdiVolumeMedium\n                      }\n                    />\n                  )}\n                </>\n              )}\n            </>\n          )}\n          <ButtonIcon\n            bdcolor={v.borderBg}\n            color={oc.holding ? v.colors.primary : v.color}\n            onPress={oc.toggleHoldWithCheck}\n            path={oc.holding ? mdiPlay : mdiPause}\n          />\n        </View>\n      </RnTouchableOpacity>\n    </View>\n  )\n})\n\nexport const trimDisplayName = (n?: string) => {\n  n = n || ''\n  n = n.replace(/\\s+/, ' ').trim()\n  return n.length > 25 ? n.substring(0, 25) + '...' : n\n}\n","export const trimHtml = (s: string) =>\n  s\n    .replace(/\\/html\\s+/, '')\n    .replace(/<([^>]+)>/gi, '')\n    .trim()\n","import { FC } from 'react'\nimport { StyleSheet, ViewProps } from 'react-native'\n\nimport { mdiCheck } from '../assets/icons'\nimport { RnIcon } from './RnIcon'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nconst css = StyleSheet.create({\n  CheckBoxBtn: {\n    height: 22,\n    width: 22,\n    borderWidth: 2,\n    borderRadius: 2,\n  },\n  CheckBox__selected: {\n    backgroundColor: '#333',\n    borderWidth: 0,\n  },\n})\n\nexport const RnCheckBox: FC<\n  ViewProps & {\n    isSelected: boolean\n    onPress(): void\n    disabled: boolean\n  }\n> = ({ isSelected, onPress, disabled, style, ...p }) => {\n  return (\n    <RnTouchableOpacity\n      {...p}\n      onPress={onPress}\n      style={[css.CheckBoxBtn, isSelected && css.CheckBox__selected, style]}\n      disabled={disabled}\n    >\n      {isSelected && <RnIcon path={mdiCheck} color='white' />}\n    </RnTouchableOpacity>\n  )\n}\n","import { uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\n@observer\nexport class PageCallParks extends Component<{\n  callParks2: boolean\n}> {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    if (!this.props.callParks2) {\n      return\n    }\n    const oc = getCallStore().getOngoingCall()\n    if (this.prevId && this.prevId !== oc?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = oc?.id\n  }\n\n  state = {\n    selectedPark: '',\n  }\n\n  selectPark = (selectedPark: string) => {\n    this.setState({\n      selectedPark:\n        selectedPark === this.state.selectedPark ? '' : selectedPark,\n    })\n  }\n\n  park = () => {\n    const p = this.state.selectedPark\n    return this.props.callParks2\n      ? getCallStore().getOngoingCall()?.park(p)\n      : getCallStore().startCall(p || '')\n  }\n\n  render() {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n\n    const arr =\n      cp.parks?.map((p, i) => ({\n        park: p,\n        name: cp.parkNames?.[i] || '',\n      })) || []\n    const parks = uniqBy(arr, 'park')\n\n    const sp = this.state.selectedPark\n    const cp2 = this.props.callParks2\n    void getCallStore().getOngoingCall() // trigger componentDidUpdate\n    const isDisable = (parkNumber: string) => {\n      if (cp2) {\n        return !!getCallStore().parkNumbers[parkNumber]\n      }\n      return !getCallStore().parkNumbers[parkNumber]\n    }\n\n    return (\n      <Layout\n        description={intl`Your park numbers`}\n        fabOnNext={sp && !isDisable(sp) ? this.park : undefined}\n        fabOnNextText={cp2 ? intl`START PARKING` : intl`CALL PARK`}\n        menu={cp2 ? undefined : 'call'}\n        onBack={cp2 ? Nav().backToPageCallManage : undefined}\n        subMenu={cp2 ? undefined : 'parks'}\n        title={intl`Park`}\n      >\n        {!parks.length && (\n          <>\n            <Field isGroup label={intl`PARK (0)`} />\n            <RnText padding>{intl`This account has no park number`}</RnText>\n          </>\n        )}\n        {parks.map((p, i) => (\n          <RnTouchableOpacity\n            key={i}\n            onPress={() => {\n              if (!isDisable(p.park)) {\n                this.selectPark(p.park)\n              }\n            }}\n          >\n            <UserItem\n              key={i}\n              avatar=''\n              name={intl`Park` + ` ${i + 1}: ${p.name}`}\n              parkNumber={`${p.park}`}\n              selected={p.park === sp}\n              disabled={isDisable(p.park)}\n            />\n          </RnTouchableOpacity>\n        ))}\n      </Layout>\n    )\n  }\n}\n","import { AppState, Keyboard, NativeEventEmitter, Platform } from 'react-native'\nimport RNCallKeep, { Events } from 'react-native-callkeep'\n\nimport { sip } from '../api/sip'\nimport { getAuthStore } from '../stores/authStore'\nimport { hackyToggleSpeaker } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { RnPicker } from '../stores/RnPicker'\nimport { RnStacker } from '../stores/RnStacker'\nimport {\n  parseNotificationData,\n  signInByLocalNotification,\n} from './PushNotification-parse'\nimport { BrekekeUtils } from './RnNativeModules'\nimport { waitTimeout } from './waitTimeout'\n\nlet alreadySetupCallKeep = false\n\nconst setupCallKeepWithCheck = async () => {\n  if (alreadySetupCallKeep) {\n    return\n  }\n\n  // Do not re-setup ios calls\n  // https://github.com/react-native-webrtc/react-native-callkeep/issues/367#issuecomment-804923269\n  if (\n    Platform.OS === 'ios' &&\n    (Object.keys(await RNCallKeep.getCalls()).length ||\n      Object.keys(getCallStore().callkeepMap).length ||\n      AppState.currentState !== 'active')\n  ) {\n    return\n  }\n\n  alreadySetupCallKeep = true\n\n  await RNCallKeep.setup({\n    ios: {\n      appName: 'Brekeke Phone',\n      // Already put this on our fork to display our logo before js load\n      imageName: 'callkit.png',\n      // https://github.com/react-native-webrtc/react-native-callkeep/issues/193\n      // https://github.com/react-native-webrtc/react-native-callkeep/issues/181\n      supportsVideo: false,\n    },\n    android: {\n      alertTitle: intl`Permissions required`,\n      alertDescription: intl`Brekeke Phone needs to your permission to display calls`,\n      cancelButton: intl`Cancel`,\n      okButton: 'OK',\n      imageName: 'phone_account_icon',\n      additionalPermissions: [],\n      foregroundService: {\n        channelId: 'com.brekeke.phone',\n        channelName: intl`Background service for Brekeke Phone`,\n        notificationTitle: intl`Brekeke Phone is running on background`,\n        notificationIcon: 'ic_launcher',\n      },\n      selfManaged: true,\n    },\n  })\n    .then(() => {\n      if (Platform.OS === 'android') {\n        RNCallKeep.registerPhoneAccount()\n        RNCallKeep.registerAndroidEvents()\n        RNCallKeep.setAvailable(true)\n        RNCallKeep.canMakeMultipleCalls(true)\n      }\n    })\n    .catch((err: Error) => {\n      if (AppState.currentState !== 'active') {\n        console.error('RNCallKeep.setup error:', err)\n        return\n      }\n      RnAlert.error({\n        message: intlDebug`Can not get permission to show call notification`,\n        err,\n      })\n    })\n}\n\nexport type TEvent = {\n  callUUID: string\n}\nexport type TEventDidLoad = {\n  name: string\n  data: unknown\n}\n\nexport const setupCallKeep = async () => {\n  if (Platform.OS === 'web') {\n    return\n  }\n\n  await setupCallKeepWithCheck()\n\n  const didLoadWithEvents = (e: TEventDidLoad[]) => {\n    e.forEach(_ => {\n      didLoadWithEventsHandlers[_.name]?.(_.data)\n    })\n  }\n  const answerCall = (e: TEvent) => {\n    const uuid = e.callUUID.toUpperCase()\n    if (Platform.OS === 'android') {\n      // Handle action from CallKeep Notification on android\n      BrekekeUtils.onCallKeepAction(uuid, 'answerCall')\n    } else {\n      getCallStore().onCallKeepAnswerCall(uuid)\n    }\n  }\n  const endCall = (e: TEvent) => {\n    const uuid = e.callUUID.toUpperCase()\n    const cs = getCallStore()\n    if (Platform.OS === 'android') {\n      // Handle action from CallKeep Notification on android\n      BrekekeUtils.onCallKeepAction(uuid, 'rejectCall')\n    } else {\n      cs.setCalleeRejected({ callkeepUuid: uuid })\n      cs.onCallKeepEndCall(uuid)\n    }\n    // try to setup callkeep on each endcall if not yet\n    setupCallKeepWithCheck()\n  }\n  const didDisplayIncomingCall = (\n    e: TEvent & {\n      handle: string\n      localizedCallerName: string\n      hasVideo: string // '0' | '1'\n      fromPushKit: string // '0' | '1'\n      payload: object // VOIP\n      error: string // ios only\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    // Use the custom native incoming call module for android\n    if (Platform.OS === 'android') {\n      return\n    }\n    const n = parseNotificationData(e.payload)\n    console.log(\n      `SIP PN debug: callkeep.didDisplayIncomingCall has e.payload: ${!!e.payload} found pnData: ${!!n}`,\n    )\n    if (n) {\n      getAuthStore().signInByNotification(n)\n      getCallStore().onCallKeepDidDisplayIncomingCall(uuid, n)\n    } else {\n      console.log('SIP PN debug: call RNCallKeep.endCall: pnData not found')\n      RNCallKeep.endCall(uuid)\n    }\n  }\n  const didPerformSetMutedCallAction = (\n    e: TEvent & {\n      muted: boolean\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c && c.muted !== e.muted) {\n      c.toggleMuted()\n    }\n  }\n  const didToggleHoldCallAction = (\n    e: TEvent & {\n      hold: boolean\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c && c.holding !== e.hold) {\n      c.toggleHoldWithCheck()\n    }\n  }\n  const didPerformDTMFAction = (\n    e: TEvent & {\n      digits: string\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c) {\n      sip.sendDTMF({\n        sessionId: c.id,\n        signal: e.digits.charAt(e.digits.length - 1),\n        talkerId: c.pbxTalkerId,\n        tenant: c.pbxTenant,\n      })\n    }\n  }\n  const didActivateAudioSession = () => {\n    // Only in ios\n    console.log('CallKeep debug: didActivateAudioSession')\n    // TODO:\n    // hackyToggleSpeaker is only to fix some cases in multi calls\n    // Here if we call it, it may affect other cases such as single call?\n    hackyToggleSpeaker()\n  }\n  const didDeactivateAudioSession = () => {\n    // Only in ios\n    console.log('CallKeep debug: didDeactivateAudioSession')\n    const cs = getCallStore()\n    cs.calls\n      .filter(c => c.answered && !c.holding && c.id !== cs.ongoingCallId)\n      .forEach(c => c.toggleHoldWithCheck())\n  }\n\n  // https://github.com/react-native-webrtc/react-native-callkeep#--didloadwithevents\n  const didLoadWithEventsHandlers: { [k: string]: Function } = {\n    RNCallKeepPerformAnswerCallAction: answerCall,\n    RNCallKeepPerformEndCallAction: endCall,\n    RNCallKeepDidDisplayIncomingCall: didDisplayIncomingCall,\n    RNCallKeepDidPerformSetMutedCallAction: didPerformSetMutedCallAction,\n    RNCallKeepDidToggleHoldAction: didToggleHoldCallAction,\n    RNCallKeepDidPerformDTMFAction: didPerformDTMFAction,\n    RNCallKeepDidActivateAudioSession: didActivateAudioSession,\n    RNCallKeepDidDeactivateAudioSession: didDeactivateAudioSession,\n  }\n\n  Object.entries({\n    didLoadWithEvents,\n    answerCall,\n    endCall,\n    didDisplayIncomingCall,\n    didPerformSetMutedCallAction,\n    didToggleHoldCallAction,\n    didPerformDTMFAction,\n    didActivateAudioSession,\n    didDeactivateAudioSession,\n  }).forEach(([k, v]) => {\n    RNCallKeep.addEventListener(k as Events, v)\n  })\n\n  // Android self-managed connection service forked version\n  if (Platform.OS !== 'android') {\n    return\n  }\n\n  const nav = Nav()\n  // Events from our custom IncomingCall module\n  const eventEmitter = new NativeEventEmitter(BrekekeUtils)\n  eventEmitter.addListener('answerCall', (uuid: string) => {\n    getCallStore().onCallKeepAnswerCall(uuid.toUpperCase())\n    RNCallKeep.setOnHold(uuid, false)\n  })\n  eventEmitter.addListener('rejectCall', (uuid: string) => {\n    const cs = getCallStore()\n    if (uuid.startsWith('CalleeClickReject-')) {\n      uuid = uuid.replace('CalleeClickReject-', '').toUpperCase()\n      cs.setCalleeRejected({ callkeepUuid: uuid })\n    } else {\n      uuid = uuid.toUpperCase()\n    }\n    cs.onCallKeepEndCall(uuid)\n  })\n  eventEmitter.addListener('transfer', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallTransferChooseUser()\n  })\n  eventEmitter.addListener('showBackgroundCall', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallBackgrounds()\n  })\n  eventEmitter.addListener('park', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallParks2()\n  })\n  eventEmitter.addListener('video', (uuid: string) => {\n    getCallStore().getOngoingCall()?.toggleVideo()\n  })\n  eventEmitter.addListener('speaker', (uuid: string) => {\n    getCallStore().toggleLoudSpeaker()\n  })\n  eventEmitter.addListener('mute', (uuid: string) => {\n    getCallStore().getOngoingCall()?.toggleMuted()\n  })\n  eventEmitter.addListener('record', (uuid: string) => {\n    getCallStore().getOngoingCall()?.toggleRecording()\n  })\n  eventEmitter.addListener('dtmf', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallDtmfKeypad()\n  })\n  eventEmitter.addListener('hold', (uuid: string) => {\n    getCallStore().getOngoingCall()?.toggleHoldWithCheck()\n  })\n  eventEmitter.addListener('switchCamera', (uuid: string) => {\n    getCallStore().getOngoingCall()?.toggleSwitchCamera()\n  })\n  eventEmitter.addListener('onNotificationPress', async (data: string) => {\n    if (!data) {\n      return\n    }\n    const raw: { id?: string } = JSON.parse(data)\n    const n = parseNotificationData(raw)\n    if (!n) {\n      return\n    }\n    await signInByLocalNotification(n)\n    if (raw.id?.startsWith('missedcall')) {\n      nav.goToPageCallRecents()\n    } else {\n      nav.goToPageChatRecents()\n    }\n  })\n  // Other utils\n  eventEmitter.addListener('onBackPressed', onBackPressed)\n  eventEmitter.addListener('onIncomingCallActivityBackPressed', () => {\n    if (!RnStacker.stacks.length) {\n      nav.goToPageIndex()\n    } else {\n      RnStacker.stacks = [RnStacker.stacks[0]]\n    }\n    getCallStore().inPageCallManage = undefined\n  })\n  eventEmitter.addListener('debug', (m: string) =>\n    console.log(`Android debug: ${m}`),\n  )\n}\n\nexport const onBackPressed = () => {\n  if (RnKeyboard.isKeyboardShowing) {\n    Keyboard.dismiss()\n    return true\n  }\n  if (RnAlert.alerts.length) {\n    RnAlert.dismiss()\n    return true\n  }\n  if (RnPicker.currentRnPicker) {\n    RnPicker.dismiss()\n    return true\n  }\n  const s = getCallStore()\n  if (s.inPageCallManage) {\n    s.inPageCallManage = undefined\n    return true\n  }\n  if (RnStacker.stacks.length > 1) {\n    RnStacker.stacks.pop()\n    return true\n  }\n  BrekekeUtils.backToBackground()\n  return true\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { get } from 'lodash'\nimport { AppState, Platform } from 'react-native'\n\nimport { checkAndRemovePnTokenViaSip } from '../api/sip'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { chatStore } from '../stores/chatStore'\nimport { Nav } from '../stores/Nav'\nimport { BrekekeUtils } from './RnNativeModules'\nimport { toBoolean } from './string'\nimport { waitTimeout } from './waitTimeout'\n\nconst keysInCustomNotification = [\n  'title',\n  'threadId',\n  'isGroupChat',\n  'alert',\n  'body',\n  'message',\n  'from',\n  'image',\n  'image_size',\n  'displayname',\n  'to',\n  'tenant',\n  'host',\n  'pbxHostname',\n  'pbxPort',\n  'my_custom_data',\n  'is_local_notification',\n  // Quick login sip\n  'phone.id',\n  'auth',\n  'sip.wss.port',\n  'webphone.dtmf.send.pal',\n  'webphone.turn.server',\n  'webphone.turn.username',\n  'webphone.turn.credential',\n  'autoanswer',\n  // Others\n  'pn-id',\n  'callkeepUuid',\n  'callkeepAt',\n  'time',\n]\n// new logic to parse x_ keys\nkeysInCustomNotification.forEach(k => {\n  keysInCustomNotification.push('x_' + k)\n})\n\nconst parseNotificationDataMultiple = (...fields: object[]): ParsedPn => {\n  const n: ParsedPn = fields\n    .filter(f => !!f)\n    .map(f => {\n      // @ts-ignore\n      if (typeof f === 'string' && f.charAt(0) === '{') {\n        try {\n          return JSON.parse(f)\n        } catch (err) {}\n      }\n      return f\n    })\n    .reduce((map: { [k: string]: string }, f: { [k: string]: string }) => {\n      if (!f || typeof f !== 'object') {\n        return map\n      }\n      keysInCustomNotification.forEach(k => {\n        const v = f[k]\n        if (!(k in map) && v) {\n          map[k] = v\n        }\n      })\n      return map\n    }, {})\n  if (n.image) {\n    getCallStore().updateCallAvatar(n.image, n.image_size)\n  }\n  return n\n}\n\nexport const parseNotificationData = (raw: object) => {\n  let n: ParsedPn | undefined\n  if (Platform.OS === 'android') {\n    n = parseNotificationDataMultiple(\n      raw,\n      get(raw, 'fcm'),\n      get(raw, 'alert'),\n      get(raw, 'alert.custom_notification'),\n      get(raw, 'data'),\n      get(raw, 'data.alert'),\n      get(raw, 'data.custom_notification'),\n      get(raw, 'custom_notification'),\n    )\n  }\n  if (Platform.OS === 'ios') {\n    n = parseNotificationDataMultiple(\n      raw,\n      get(raw, 'custom_notification'),\n      get(raw, 'aps'),\n      get(raw, 'aps.alert'),\n      get(raw, 'aps.custom_notification'),\n      get(raw, 'data'),\n      get(raw, 'data.custom_notification'),\n      get(raw, '_data'),\n      get(raw, '_data.custom_notification'),\n      get(raw, '_alert'),\n      get(raw, '_alert.custom_notification'),\n    )\n  }\n  if (!n) {\n    return\n  }\n\n  // new logic to parse x_ keys\n  const n2 = n as { [k: string]: unknown }\n  Object.entries(n).forEach(([k, v]) => {\n    if (!k.startsWith('x_') || isNoU(v)) {\n      return\n    }\n    const k2 = k.substr(2)\n    n2[k2] = v\n  })\n\n  n.id = get(n, 'pn-id')\n  n.pbxHostname = n.pbxHostname || get(n, 'host')\n\n  const phoneId: string = get(n, 'phone.id')\n  const sipAuth: string = get(n, 'auth')\n  const sipWssPort: string = get(n, 'sip.wss.port')\n  const dtmfSendPal: string = get(n, 'webphone.dtmf.send.pal')\n  const turnServer: string = get(n, 'webphone.turn.server')\n  const turnUsername: string = get(n, 'webphone.turn.username')\n  const turnCredential: string = get(n, 'webphone.turn.credential')\n  const autoAnswer = toBoolean(get(n, 'autoanswer'))\n  n.sipPn = {\n    phoneId,\n    sipAuth,\n    sipAuthAt: Date.now(),\n    sipWssPort,\n    dtmfSendPal,\n    turnServer,\n    turnUsername,\n    turnCredential,\n    autoAnswer,\n  }\n\n  if (!n.body) {\n    n.body = n.message || n.title || n.alert\n  }\n  if (!n.body) {\n    return\n  }\n\n  const r1 = /from\\s+(.+)\\s+to\\s+(\\S+)/i\n  const matches =\n    r1.exec(n.body) ||\n    r1.exec(n.title) ||\n    r1.exec(n.message) ||\n    r1.exec(n.alert)\n  if (!n.from) {\n    n.from = matches?.[1] || ''\n  }\n  if (!n.to) {\n    n.to = matches?.[2] || ''\n  }\n  n.displayName = get(n, 'displayname') || n.from\n\n  n.isCall = !!n.id || !!n.sipPn.sipAuth\n  n.time = Number(n.time) || 0\n\n  return n\n}\n\nconst isNoU = (v: unknown) => v === null || v === undefined\nconst androidAlreadyProccessedPn: { [k: string]: boolean } = {}\n\nexport const signInByLocalNotification = async (n: ParsedPn) => {\n  const a = await accountStore.findByPn(n)\n  const as = getAuthStore()\n  if (as.signedInId === a?.id) {\n    as.resetFailureState()\n  }\n  if (a?.id && !as.signedInId) {\n    as.signIn(a)\n  }\n}\nexport const parse = async (raw: { [k: string]: unknown }, isLocal = false) => {\n  if (!raw) {\n    return\n  }\n  const n = parseNotificationData(raw)\n  if (!n) {\n    return\n  }\n  const accountExist = await checkAndRemovePnTokenViaSip(n)\n  //\n  // Handle duplicated pn on android\n  if (Platform.OS === 'android') {\n    const k = n.id || jsonStableStringify(raw)\n    if (androidAlreadyProccessedPn[k]) {\n      console.log(\n        `SIP PN debug: PushNotification-parse: already processed k=${k}`,\n      )\n      return\n    }\n    androidAlreadyProccessedPn[k] = true\n  }\n  //\n  // Update isLocal\n  isLocal = Boolean(\n    isLocal ||\n      raw.my_custom_data ||\n      raw.is_local_notification ||\n      n.my_custom_data ||\n      n.is_local_notification,\n  )\n  //\n  // Handle nav on notification\n  const rawId = raw['id'] as string | undefined\n  const nav = Nav()\n  if (!accountExist) {\n    // Do nothing\n  } else if (rawId?.startsWith('missedcall')) {\n    // Missed call local notification\n    nav.customPageIndex = nav.goToPageCallRecents\n    // do not await timeout here since we will block the login\n    waitTimeout().then(Nav().goToPageCallRecents)\n  } else if (isLocal) {\n    // Chat local notification\n    await signInByLocalNotification(n)\n    if (!n.threadId) {\n      nav.customPageIndex = nav.goToPageChatRecents\n      await waitTimeout()\n      nav.goToPageChatRecents()\n    } else if (n.isGroupChat) {\n      await waitTimeout()\n      chatStore.handleMoveToChatGroupDetail(n.threadId)\n    } else {\n      nav.customPageIndex = nav.goToPageChatDetail\n      await waitTimeout()\n      nav.goToPageChatDetail({ buddy: n.threadId })\n    }\n    console.log('SIP PN debug: PushNotification-parse: local notification')\n    return\n  }\n  const as = getAuthStore()\n  const cs = getCallStore()\n  //\n  // Handle chat notification\n  if (!n.isCall) {\n    console.log('SIP PN debug: PushNotification-parse: n.isCall=false')\n    if (!accountExist) {\n      console.log(\n        'checkAndRemovePnTokenViaSip debug: do not show pn account not exist',\n      )\n      return\n    }\n    // App currently active and already logged in using this account\n    if (\n      AppState.currentState === 'active' &&\n      as.getCurrentAccount()?.pbxUsername === n.to\n    ) {\n      return\n    }\n    return n\n  }\n  //\n  // Handle call notification\n  if (n.callkeepAt) {\n    console.log(\n      `SIP PN debug: PN received on android java code at ${n.callkeepAt}`,\n    )\n  }\n  console.log('SIP PN debug: call signInByNotification')\n  as.signInByNotification(n)\n  // Custom fork of react-native-voip-push-notification to get callkeepUuid\n  // Also we forked fcm to insert callkeepUuid there as well\n  if (!n.callkeepUuid) {\n    // Should not happen\n    console.log(\n      `SIP PN debug: PushNotification-parse got pnId=${n.id} without callkeepUuid`,\n    )\n  }\n  cs.calls\n    .filter(c => c.pnId === n.id && !c.callkeepUuid)\n    .forEach(c => {\n      Object.assign(c, { callkeepUuid: n.callkeepUuid })\n    })\n\n  // Continue handling incoming call in android\n  if (Platform.OS === 'android') {\n    cs.showIncomingCallUi({ callUUID: n.callkeepUuid, pnData: n })\n    const action = await BrekekeUtils.getIncomingCallPendingUserAction(\n      n.callkeepUuid,\n    )\n    console.log(`SIP PN debug: getPendingUserAction=${action}`)\n    if (action === 'answerCall') {\n      cs.onCallKeepAnswerCall(n.callkeepUuid)\n    } else if (action === 'rejectCall') {\n      cs.onCallKeepEndCall(n.callkeepUuid)\n    }\n    // Already invoke callkeep in java code\n  }\n  // Let pbx/sip connect by this awaiting time\n  await waitTimeout(10000)\n  return\n}\n\nexport type ParsedPn = {\n  id: string\n  title: string\n  body: string\n  threadId: string\n  isGroupChat?: boolean\n  alert: string\n  message: string\n  from: string\n  image: string\n  image_size: string\n  displayName: string\n  to: string\n  tenant: string\n  pbxHostname?: string\n  pbxPort?: string\n  my_custom_data: unknown\n  is_local_notification: boolean\n  isCall: boolean\n  sipPn: SipPn\n  callkeepUuid: string\n  callkeepAt: string\n  time: number\n}\nexport type SipPn = {\n  phoneId: string\n  sipAuth: string\n  sipAuthAt: number\n  sipWssPort: string\n  dtmfSendPal: string\n  turnServer: string\n  turnUsername: string\n  turnCredential: string\n  autoAnswer: boolean\n}\n\nexport const toXPN = (n: object) =>\n  Object.entries(n).reduce((m, [k, v]: [string, unknown]) => {\n    m['x_' + k] = v\n    return m\n  }, {} as { [k: string]: unknown })\n","import { sortBy, uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { ChatMessage } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { Avatar } from './Avatar'\nimport { groupByTimestamp } from './chatConfig'\nimport { Message } from './ChatMessage'\nimport { RnText } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  DateGroup: {\n    marginTop: 20,\n  },\n  DateGroup__first: {\n    marginTop: 0,\n  },\n  Date: {\n    alignSelf: 'center',\n    backgroundColor: 'white',\n    paddingHorizontal: 10,\n  },\n  //\n  Border: {\n    position: 'absolute',\n    top: v.lineHeight / 2,\n    left: 2,\n    right: 2,\n    height: 1,\n    backgroundColor: v.hoverBg,\n  },\n  //\n  TimeGroup: {\n    flexDirection: 'row',\n    marginTop: 10,\n    paddingLeft: 10,\n  },\n  TimeGroup__first: {\n    marginTop: 0,\n    paddingLeft: 10,\n  },\n  Time: {\n    paddingHorizontal: 4,\n    color: v.subColor,\n    fontSize: v.fontSizeSmall,\n  },\n  //\n  Creator: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n    paddingLeft: 10,\n  },\n  Right: {\n    flexDirection: 'column',\n  },\n})\n\nexport const MessageList: FC<{\n  acceptFile: Function\n  list: ChatMessage[]\n  loadMore: Function\n  rejectFile: Function\n  resolveChat: Function\n  isGroupChat?: boolean\n}> = observer(p => {\n  const { acceptFile, loadMore, rejectFile, resolveChat } = p\n  let { list } = p\n  // TODO unique and sort right after fetching\n  if (!Array.isArray(list)) {\n    list = []\n  }\n  list = uniqBy(list, 'id')\n  list = sortBy(list, 'created')\n\n  return (\n    <>\n      {groupByTimestamp(list).map(({ date, groupByTime }, i) => (\n        <View key={date} style={[css.DateGroup, !i && css.DateGroup__first]}>\n          <View style={css.Border} />\n          <RnText style={css.Date}>{date}</RnText>\n          {groupByTime.map(({ messages, time }, j) => {\n            const id = messages[0]?.id\n            const c0 = resolveChat(id) as ChatMessage & {\n              creatorName: string\n              creatorAvatar: string\n              creatorId: string\n            }\n            const name = c0?.creatorName\n            const status = contactStore.getUcUserById(c0.creatorId)?.status\n            return (\n              <View\n                key={`${time}${id}`}\n                style={[css.TimeGroup, !j && css.TimeGroup__first]}\n              >\n                <Avatar\n                  source={{ uri: c0.creatorAvatar as string }}\n                  status={status}\n                />\n                <View style={css.Right}>\n                  <View style={css.Creator}>\n                    <RnText bold singleLine>\n                      {name}\n                    </RnText>\n                    <RnText style={css.Time}>{time}</RnText>\n                  </View>\n                  <View>\n                    {messages.map(m => (\n                      <Message\n                        {...resolveChat(m.id)}\n                        acceptFile={acceptFile}\n                        key={m.id}\n                        loadMore={loadMore}\n                        rejectFile={rejectFile}\n                      />\n                    ))}\n                  </View>\n                </View>\n              </View>\n            )\n          })}\n        </View>\n      ))}\n    </>\n  )\n})\n","import { FC } from 'react'\nimport {\n  NativeSyntheticEvent,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\n\nimport { mdiEmoticon, mdiPaperclip, mdiSend } from '../assets/icons'\nimport { RnIcon, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ChatInput: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n  Btn: {\n    width: 50,\n    paddingVertical: 8,\n  },\n  Btn__file: {\n    backgroundColor: v.hoverBg,\n    borderRightWidth: 1,\n    borderColor: v.borderBg,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n  },\n  Btn__emoji: {\n    backgroundColor: v.hoverBg,\n    borderRightWidth: 1,\n    borderColor: v.borderBg,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n  },\n  Btn__send: {\n    backgroundColor: v.colors.primary,\n    paddingLeft: 8,\n  },\n  Input: {\n    flex: 1,\n    // lineHeight: g.iconSize,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n})\n\nexport const ChatInput: FC<{\n  onEmojiTurnOn?(): void\n  onSelectionChange?(\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ): void\n  onTextChange(txt: string): void\n  onTextSubmit(): void\n  openFileRnPicker(): void\n  text: string\n}> = p => {\n  const {\n    onEmojiTurnOn,\n    onSelectionChange,\n    onTextChange,\n    onTextSubmit,\n    openFileRnPicker,\n    text,\n  } = p\n  return (\n    <View style={css.ChatInput}>\n      <RnTouchableOpacity\n        onPress={openFileRnPicker}\n        style={[css.Btn, css.Btn__file]}\n      >\n        <RnIcon path={mdiPaperclip} size={20} />\n      </RnTouchableOpacity>\n      <RnTouchableOpacity\n        onPress={onEmojiTurnOn}\n        style={[css.Btn, css.Btn__emoji]}\n      >\n        <RnIcon color='gray' path={mdiEmoticon} />\n      </RnTouchableOpacity>\n      <RnTextInput\n        blurOnSubmit={false}\n        onChangeText={onTextChange}\n        onSelectionChange={onSelectionChange}\n        onSubmitEditing={onTextSubmit}\n        style={css.Input}\n        value={text}\n      />\n      <RnTouchableOpacity\n        onPress={onTextSubmit}\n        style={[css.Btn, css.Btn__send]}\n      >\n        <RnIcon color='white' path={mdiSend} />\n      </RnTouchableOpacity>\n    </View>\n  )\n}\n","import { mdiDotsHorizontal } from '../assets/icons'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\n\n// Need to declare native intl here\n// So it will get bundled when build intl via web\nexport const pickFileNativeOptions = () => [\n  {\n    key: 0,\n    label: intl`Take a new photo`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 1,\n    label: intl`Take a new video`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 2,\n    label: intl`Select from photo library`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 3,\n    label: intl`More...`,\n    icon: mdiDotsHorizontal,\n  },\n]\nexport const onPickFileNativeError = (err: Error) => {\n  RnAlert.error({\n    message: intlDebug`Failed to pick file from system`,\n    err,\n  })\n}\n\nexport const pickFile = (cb: Function) => {\n  const input = document.createElement('input')\n  input.type = 'file'\n  input.onchange = function () {\n    cb(input.files?.[0])\n  }\n  input.click()\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { cloneDeep } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { contactStore, ItemPBForm, Phonebook } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { RnAlert } from '../stores/RnAlert'\nimport { useForm } from '../utils/useForm'\nimport { useStore } from '../utils/useStore'\nimport { Layout } from './Layout'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst genEmptyPhonebook = (lang: string) => {\n  const emptyObj = {}\n  contactStore\n    .getManageItems(lang)\n    ?.filter(i => i?.onscreen)\n    .forEach(u => {\n      Object.assign(emptyObj, { [u.name]: '' })\n    })\n  return emptyObj\n}\nconst css = StyleSheet.create({\n  stylePreviewName: {\n    marginHorizontal: 20,\n  },\n  styleAddItem: {\n    marginVertical: 10,\n    marginHorizontal: 15,\n  },\n  labelAddItem: {\n    color: v.subColor,\n    fontWeight: v.fontWeight,\n  },\n})\n\nexport const ContactsCreateForm: FC<{\n  updatingPhonebook?: Phonebook\n  phonebook?: string\n  onBack: Function\n  onSave: Function\n  title: string\n}> = observer(props => {\n  const phonebookField = {\n    id: 'phonebook',\n    name: 'phonebook',\n    label: intl`PHONEBOOK`,\n    rule: 'required',\n    isFocus: false,\n    maxLength: 100,\n  }\n  const lang = props.updatingPhonebook?.info?.$lang || intlStore.locale\n  const disabled = props.updatingPhonebook?.shared\n  const defaultObj = {\n    phonebook: props.updatingPhonebook?.phonebook || '',\n    $lang: lang,\n    ...genEmptyPhonebook(lang),\n    ...cloneDeep(props.updatingPhonebook?.info),\n  }\n\n  // don't show field: $lang\n  const getFields = () => {\n    if (props.updatingPhonebook) {\n      const fields = Object.keys(defaultObj)?.map(key => {\n        if (key === 'phonebook') {\n          return phonebookField\n        }\n        const item = contactStore.getManageItems(lang).find(_ => _.id === key)\n        if (item) {\n          return item\n        }\n        return {\n          id: key,\n          name: key,\n          label: key,\n          keyboardType: 'default',\n          maxLength: 50,\n        }\n      })\n\n      return (\n        fields\n          ?.filter(_ => _.label !== '$lang' || _.id !== '$lang')\n          ?.filter(_ => _.id !== 'get')\n          ?.map(i => ({ ...i, disabled })) || ([] as ItemPBForm[])\n      )\n    } else {\n      const items = contactStore.getManageItems(lang)?.filter(i => i?.onscreen)\n      return (\n        ([phonebookField, ...items]?.filter(\n          _ => _.label !== '$lang' || _.id !== '$lang',\n        ) as ItemPBForm[]) || []\n      )\n    }\n  }\n  const m = () => ({\n    observable: {\n      phonebook: { ...defaultObj },\n      fields: getFields() as ItemPBForm[],\n    },\n    hasUnsavedChanges: () => {\n      return !(\n        jsonStableStringify($.phonebook) === jsonStableStringify(defaultObj)\n      )\n    },\n\n    onBackBtnPress: () => {\n      if (!$.hasUnsavedChanges()) {\n        props.onBack()\n        return\n      }\n      RnAlert.prompt({\n        title: intl`Discard Changes`,\n        message: intl`Do you want to discard all unsaved changes and go back?`,\n        onConfirm: props.onBack,\n        confirmText: intl`DISCARD`,\n      })\n    },\n\n    onValidSubmit: () => {\n      props.onSave($.phonebook, $.hasUnsavedChanges())\n    },\n  })\n  type M0 = ReturnType<typeof m>\n  type M = Omit<M0, 'observable'> & M0['observable']\n  const $ = useStore(m) as any as M\n\n  const [Form, submitForm] = useForm()\n\n  const onSelectItem = (value: string) => {\n    value.replace('$', '') // prevent key on manage.item in phonebook.js\n    contactStore.dismissPicker()\n    const isExistField = !!$.fields.find(\n      _ => _.label === value || _.id === value,\n    )\n    if (isExistField) {\n      return\n    }\n    const itemExist = contactStore\n      .getManageItems(lang)\n      .find(_ => _.label === value || _.id === value)\n    if (itemExist) {\n      $.fields.push(itemExist)\n      $.phonebook = { ...$.phonebook, [itemExist.id]: '' }\n      return\n    }\n    const newField = {\n      label: value,\n      name: value,\n      id: value,\n      keyboardType: 'default',\n      maxLength: 50,\n    }\n    $.fields.push(newField)\n    $.phonebook = { ...$.phonebook, [newField.id]: '' }\n  }\n  const openPicker = () => {\n    contactStore.openPicker({\n      onSelect: onSelectItem,\n      listOption: contactStore.getManageItems(lang).filter(i => !i?.onscreen),\n    })\n  }\n  const previewName = contactStore\n    .getManagerContact($.phonebook?.$lang)\n    ?.toDisplayName($.phonebook)\n\n  return (\n    <Layout\n      fabOnBack={$.onBackBtnPress}\n      fabOnNext={disabled ? undefined : (submitForm as () => void)}\n      onBack={$.onBackBtnPress}\n      title={props.title}\n    >\n      {!disabled && (\n        <RnText\n          title\n          style={[\n            css.stylePreviewName,\n            { color: !previewName ? v.colors.greyTextChat : 'black' },\n          ]}\n        >\n          {previewName || intl`<Unnamed>`}\n        </RnText>\n      )}\n      <Form\n        $={$}\n        fields={$.fields}\n        k='phonebook'\n        onValidSubmit={$.onValidSubmit}\n      />\n      {!disabled && (\n        <RnTouchableOpacity style={css.styleAddItem} onPress={openPicker}>\n          <RnText small style={css.labelAddItem}>\n            {'>>' + intl`Add item`}\n          </RnText>\n        </RnTouchableOpacity>\n      )}\n    </Layout>\n  )\n})\n","import { getAuthStore } from '../stores/authStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { pbx } from './pbx'\n\nexport const updatePhoneIndex = async (\n  p = getAuthStore().getCurrentAccount(),\n  api = pbx,\n): Promise<null | {\n  id: string\n  type: string\n}> => {\n  if (!p) {\n    return null\n  }\n  //\n  const phoneIndex = parseInt(p.pbxPhoneIndex) || 4\n  const extProps = await api.getPbxPropertiesForCurrentUser(\n    p.pbxTenant,\n    p.pbxUsername,\n  )\n  if (!extProps) {\n    console.error('updatePhoneIndex.setExtensionProperties: extProps undefined')\n    return null\n  }\n  const phone = extProps.phones[phoneIndex - 1]\n  const phoneTypeCorrect = phone.type === 'Web Phone'\n  const { pbxTenant, pbxUsername } = p\n  const expectedPhoneId = `${pbxTenant}_${pbxUsername}_phone${phoneIndex}_webphone`\n  const phoneIdCorrect = phone.id === expectedPhoneId\n  //\n  const setExtensionProperties = async () => {\n    if (!api.client) {\n      console.error(\n        'updatePhoneIndex.setExtensionProperties: api.client undefined',\n      )\n      return\n    }\n    await api.client.call_pal('setExtensionProperties', {\n      tenant: pbxTenant,\n      extension: pbxUsername,\n      properties: {\n        // See ./pbx getExtensionProperties for the detail of parameters\n        pnumber: extProps.phones.map(({ id }) => id).join(','),\n        [`p${phoneIndex}_ptype`]: phone.type,\n      },\n    })\n    if (p === getAuthStore().getCurrentAccount()) {\n      getAuthStore().userExtensionProperties = extProps\n    }\n  }\n  //\n  if (phoneTypeCorrect && phoneIdCorrect) {\n    // Do nothing\n  } else if (phoneTypeCorrect && !phoneIdCorrect) {\n    phone.id = expectedPhoneId\n    await setExtensionProperties()\n  } else if (!phoneTypeCorrect && !phoneIdCorrect) {\n    phone.id = expectedPhoneId\n    phone.type = 'Web Phone'\n    await setExtensionProperties()\n  } else {\n    return new Promise(resolve => {\n      RnAlert.prompt({\n        title: intl`Warning`,\n        message: intl`This phone index is already in use. Do you want to continue?`,\n        onConfirm: () => {\n          phone.type = 'Web Phone'\n          setExtensionProperties()\n            .then(() => {\n              resolve(phone)\n            })\n            .catch((err: Error) => {\n              RnAlert.error({\n                message: intlDebug`Failed to set extension properties`,\n                err,\n              })\n              resolve(null)\n            })\n        },\n        onDismiss: () => {\n          Nav().goToPageAccountSignIn()\n          resolve(null)\n        },\n      })\n    })\n  }\n  return phone\n}\n","import { action, observable } from 'mobx'\nimport { AppState } from 'react-native'\n\nclass RnAppStateStore {\n  @observable foregroundOnce = AppState.currentState === 'active'\n  @observable currentState = AppState.currentState\n  constructor() {\n    AppState.addEventListener(\n      'change',\n      action(nextAppState => {\n        this.currentState = nextAppState\n        this.foregroundOnce = this.foregroundOnce || nextAppState === 'active'\n      }),\n    )\n  }\n}\n\nexport const RnAppState = new RnAppStateStore()\n","import { get } from 'lodash'\nimport qs from 'qs'\nimport Url from 'url-parse'\n\nexport const parse = (location: string | Url<any> | null) => {\n  if (!location) {\n    return null\n  }\n  if (typeof location === 'string') {\n    location = new Url(location, true)\n  }\n  //\n  const params: { [k: string]: string } = Object.assign(\n    qs.parse(location.hash.replace(/^[^?]*\\?*/, '')),\n    location.query || // type-coverage:ignore-line\n      qs.parse((get(location, 'search') as string).replace(/^\\?*/, '')),\n  )\n  //\n  if (params.url) {\n    const url = new Url(params.url)\n    if (url.hostname) {\n      params.host = url.hostname\n    }\n    if (url.port) {\n      params.port = url.port\n    } else if (/^ws:/.test(params.url)) {\n      params.port = '80'\n    } else {\n      params.port = '443'\n    }\n  }\n  //\n  if (!params.host) {\n    params.host = location.hostname\n  }\n  if (!params.port) {\n    params.port = '' + location.port\n  }\n  //\n  return params as any as UrlParams\n}\n\nexport interface UrlParams {\n  user: string\n  tenant: string\n  host: string\n  port: string\n  phone_idx: string\n  _wn: string\n}\n","const uint8ArrayToUrlBase64 = (arr: ArrayBuffer) =>\n  window\n    .btoa(\n      String.fromCharCode.apply(null, new Uint8Array(arr) as any as number[]),\n    )\n    .replace(/[+/]/g, '-')\n\nexport const PushNotification = {\n  register: async (initApp: Function) => {\n    await initApp()\n    if (!window.Notification || window.Notification.permission === 'granted') {\n      return\n    }\n    window.Notification.requestPermission()\n  },\n  getToken: async () => {\n    const sw = await navigator.serviceWorker.ready\n    const sub =\n      (await sw.pushManager.getSubscription()) ||\n      (await sw.pushManager.subscribe({\n        userVisibleOnly: true,\n      }))\n    return {\n      endpoint: sub.endpoint,\n      p256dh: uint8ArrayToUrlBase64(sub.getKey('p256dh') as ArrayBuffer),\n      auth: uint8ArrayToUrlBase64(sub.getKey('auth') as ArrayBuffer),\n    }\n  },\n  resetBadgeNumber: () => {\n    // Polyfill\n  },\n}\n","import { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, Fragment } from 'react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport { mdiCheck, mdiClose } from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { ButtonIcon } from './ButtonIcon'\nimport { IncomingItem } from './CallVoicesUI'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Notify: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  Notify_Info: {\n    flex: 1,\n    paddingLeft: 12,\n    paddingVertical: 5,\n  },\n  Notify_Btn_reject: {\n    borderColor: v.colors.danger,\n  },\n  Notify_Btn_accept: {\n    borderColor: v.colors.primary,\n  },\n})\n\n@observer\nexport class DidMountTimer extends Component {\n  private didMountTimer = 0\n  @observable didMount = false\n  componentDidMount() {\n    this.didMountTimer = BackgroundTimer.setTimeout(\n      action(() => {\n        this.didMountTimer = 0\n        this.didMount = true\n      }),\n      1000,\n    )\n  }\n  componentWillUnmount() {\n    if (this.didMountTimer) {\n      BackgroundTimer.clearTimeout(this.didMountTimer)\n    }\n  }\n  render() {\n    return this.didMount ? this.props.children : null\n  }\n}\n\nexport const CallNotify = observer(() => {\n  // Try trigger observer?\n  void Object.keys(getCallStore().callkeepMap)\n  void getCallStore().calls.map(_ => _.callkeepUuid)\n  const c = getCallStore().getCallInNotify()\n  // Do not show notify if in page call manage\n  if (getCallStore().inPageCallManage || !c) {\n    return null\n  }\n  const k = getCallStore().callkeepMap[c.callkeepUuid]\n  const Wrapper =\n    k?.hasAction ||\n    Platform.OS === 'web' ||\n    !getAuthStore().getCurrentAccount()?.pushNotificationEnabled\n      ? Fragment\n      : DidMountTimer\n  const configure = getAuthStore().pbxConfig\n  const hideHangup =\n    c.incoming && configure?.['webphone.call.hangup'] === 'false'\n  const n = getCallStore().calls.filter(\n    _ => _.incoming && !_.answered && _.id !== c.id,\n  ).length\n  return (\n    <Wrapper>\n      {getCallStore().shouldRingInNotify(c.callkeepUuid) && <IncomingItem />}\n      <RnTouchableOpacity\n        style={css.Notify}\n        onPress={() => Nav().goToPageCallManage()}\n      >\n        <View style={css.Notify_Info}>\n          <RnText bold>{c.getDisplayName()}</RnText>\n          <RnText>\n            {intl`Incoming Call`}\n            {n > 0 ? ' (' + intl`${n} in background` + ')' : ''}\n          </RnText>\n        </View>\n        {!hideHangup && (\n          <ButtonIcon\n            bdcolor={v.colors.danger}\n            color={v.colors.danger}\n            onPress={c.hangupWithUnhold}\n            path={mdiClose}\n            size={20}\n            style={css.Notify_Btn_reject}\n          />\n        )}\n        <ButtonIcon\n          bdcolor={v.colors.primary}\n          color={v.colors.primary}\n          onPress={() => c.answer()}\n          path={mdiCheck}\n          size={20}\n          style={css.Notify_Btn_accept}\n        />\n      </RnTouchableOpacity>\n    </Wrapper>\n  )\n})\n\nexport const IncomingItemWithTimer = () => (\n  <DidMountTimer>\n    <IncomingItem />\n  </DidMountTimer>\n)\n","import { Component, createRef } from 'react'\n\nimport ringback from '../assets/incallmanager_ringback.mp3'\nimport ringtone from '../assets/incallmanager_ringtone.mp3'\n\nexport const IncomingItem = () => (\n  <audio autoPlay loop src={ringtone} muted={false} />\n)\nexport const OutgoingItem = () => (\n  <audio autoPlay loop src={ringback} muted={false} />\n)\n\nexport class OutgoingItemWithSDP extends Component<{\n  earlyMedia: MediaStream | null\n}> {\n  audioRef = createRef<HTMLAudioElement>()\n  componentDidMount() {\n    if (!this.audioRef.current) {\n      return\n    }\n\n    if (\n      this.props.earlyMedia &&\n      this.props.earlyMedia !== this.audioRef.current.srcObject\n    ) {\n      this.audioRef.current.srcObject = this.props.earlyMedia\n      this.audioRef.current.play()\n    }\n  }\n  componentDidUpdate() {\n    this.componentDidMount()\n  }\n  render() {\n    return <audio autoPlay ref={this.audioRef} muted={false} />\n  }\n}\nexport class AnsweredItem extends Component<{\n  voiceStreamObject: MediaStream | null\n}> {\n  audioRef = createRef<HTMLAudioElement>()\n  componentDidMount() {\n    if (!this.audioRef.current) {\n      return\n    }\n    if (\n      this.props.voiceStreamObject &&\n      this.props.voiceStreamObject !== this.audioRef.current.srcObject\n    ) {\n      this.audioRef.current.srcObject = this.props.voiceStreamObject\n      this.audioRef.current.play()\n    }\n  }\n  componentDidUpdate() {\n    this.componentDidMount()\n  }\n  render() {\n    return <audio autoPlay ref={this.audioRef} muted={false} />\n  }\n}\n","import { observer } from 'mobx-react'\nimport { ActivityIndicator, StyleSheet } from 'react-native'\n\nconst css = StyleSheet.create({\n  loading: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    padding: 50,\n  },\n})\n\nexport const VideoPlayer = observer((p: { sourceObject: MediaStream }) =>\n  p.sourceObject ? (\n    <video\n      ref={video => {\n        if (video) {\n          video.srcObject = p.sourceObject\n        }\n      }}\n      style={{\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n      }}\n      autoPlay\n    />\n  ) : (\n    <ActivityIndicator style={css.loading} />\n  ),\n)\n","import './embed/polyfill'\nimport './utils/captureConsoleOutput'\nimport './polyfill'\nimport './polyfill/mobx'\nimport './utils/validator'\nimport './stores/Nav2' // Fix circular dependencies\nimport './stores/callStore2' // Fix circular dependencies\nimport './stores/authStore2' // Fix circular dependencies\nimport './api/syncPnToken2' // Fix circular dependencies\nimport 'brekekejs/lib/phonebook'\nimport 'brekekejs/lib/webnotification'\n\nimport { AppRegistry } from 'react-native'\n\nimport { App } from './components/App'\nimport { exposeEmbedApi } from './embed/exposeEmbedApi'\n\nAppRegistry.registerComponent('BrekekePhone', () => App)\n\nconst runApp = (rootTag: HTMLElement) => {\n  AppRegistry.runApplication('BrekekePhone', { rootTag })\n}\n\nif (window._BrekekePhoneWebRoot) {\n  runApp(window._BrekekePhoneWebRoot)\n}\nexposeEmbedApi(runApp)\n","import { Platform } from 'react-native'\n\ndeclare global {\n  interface Window {\n    _BrekekePhoneWebRoot?: HTMLElement | null\n    _BrekekePhoneCaptureConsole?: boolean\n  }\n}\n\nif (Platform.OS === 'web') {\n  window._BrekekePhoneWebRoot = document.getElementById(\n    '__brekeke_phone_web_root',\n  )\n  if (typeof window._BrekekePhoneCaptureConsole !== 'boolean') {\n    window._BrekekePhoneCaptureConsole = !!window._BrekekePhoneWebRoot\n  }\n}\n\nif (!window.Brekeke) {\n  // type-coverage:ignore-next-line\n  window.Brekeke = {} as any\n}\nif (!window.Brekeke.Phone) {\n  // type-coverage:ignore-next-line\n  window.Brekeke.Phone = {} as any\n}\n","import CircularJSON from 'circular-json'\nimport moment from 'moment'\nimport { Platform } from 'react-native'\nimport { format } from 'util'\n\nimport { sipErrorEmitter } from '../stores/sipErrorEmitter'\n\nconst formatErrors = (...errs: Error[]) => {\n  // Normalize and fix circular json\n  let msgs = errs.map(e =>\n    !e\n      ? `${e}`\n      : e.message\n      ? e.message\n      : typeof e === 'object'\n      ? CircularJSON.stringify(e)\n      : `${e}`,\n  )\n  let tpl = msgs.shift() || ''\n  // Remove %c on web from the debug lib\n  if (Platform.OS === 'web') {\n    const m: { [k: number]: boolean } = {}\n    const regex = /%\\w/g\n    let mi = 0\n    let match: RegExpExecArray | null = null\n    while ((match = regex.exec(tpl)) !== null) {\n      if (match[0] === '%c') {\n        m[mi] = true\n      }\n      mi++\n    }\n    tpl = tpl.replace(/%c/g, '')\n    msgs = msgs.filter((m0, i) => !m[i])\n  }\n  // Apply format and remove whitespaces\n  let msg = format(tpl, ...msgs)\n    .replace(/\\s+/g, ' ')\n    .trim()\n  // Remove stack trace and cleanup output from lib `debug` in jssip\n  msg = msg.replace(/((\\s+@\\s+)|( : \\w+@index)|(\\W\\w*@http)).+/, '')\n  msg = msg.replace(/ : Error at \\w+\\.log \\(http.+/, '')\n  msg = msg.replace(/^.+\\[(trial|debug|log|info|warn|error)\\]\\s*/, '')\n  // SIP error emitter\n  if (msg.indexOf('JsSIP:Transport reconnection attempt') >= 0) {\n    sipErrorEmitter.emit('error', null)\n  }\n  // RN 0.65 warning\n  if (msg.indexOf('`new NativeEventEmitter()` was called') >= 0) {\n    return\n  }\n  return msg\n}\n\nconst captureConsoleOutput = () => {\n  if (Platform.OS === 'web' && !window._BrekekePhoneCaptureConsole) {\n    return\n  }\n  const customConsoleObject = ['debug', 'log', 'info', 'warn', 'error'].reduce(\n    (m, k) => {\n      const f0 = console[k as keyof Console] as Function\n      const f = f0.bind(console) as Function\n      m[k] =\n        Platform.OS === 'web' || process.env.NODE_ENV !== 'production'\n          ? (...args: Error[]) => {\n              const msg = formatErrors(...args)\n              // add timestamp on dev (prod already added in debugStore)\n              if (msg) {\n                f(moment().format('YYYY/MM/DD HH:mm:ss.SSS') + ' ' + msg)\n              }\n            }\n          : (...args: Error[]) => {\n              // debugStore was added globally in src/stores/debugStore.ts\n              //    so it can be used here\n              const msg = formatErrors(...args)\n              if (msg) {\n                window.debugStore?.captureConsoleOutput(k, msg)\n              }\n            }\n      return m\n    },\n    {} as { [k: string]: Function },\n  )\n  Object.entries(customConsoleObject).forEach(([k, v]) => {\n    Object.defineProperty(console, k, {\n      get() {\n        return v\n      },\n      set() {\n        // Prevent set to keep using our functions\n      },\n    })\n  })\n  // Write a log to console to note about this\n  console.info('captureConsoleOutput: console output is being captured!')\n}\n\ncaptureConsoleOutput()\n","import './dev'\nimport './shared'\n\nimport PropTypes from 'prop-types'\nimport * as Rn from 'react-native'\n\n// @ts-ignore\nconst Rn0 = Rn as { [k: string]: { [k: string]: unknown } }\n\n// Fix error in react-native-keyboard-spacer\nRn0.ViewPropTypes = Rn0.ViewPropTypes || {}\n// Fix error in react-native-hyperlink\nRn0.Text.propTypes = Rn0.Text.propTypes || { style: PropTypes.any }\n\n// window.navigator.getUserMedia is not a function\n// @ts-ignore\nwindow.navigator.getUserMedia =\n  // @ts-ignore\n  window.navigator.getUserMedia ||\n  window.navigator.mediaDevices.getUserMedia ||\n  // @ts-ignore\n  navigator.mozGetUserMedia\n","export const _ = Object.assign(window, {\n  __DEV__: process.env.NODE_ENV !== 'production',\n})\n","import 'es6-shim'\nimport 'es7-shim'\n\nimport JsSIP from 'jssip'\nimport MD5 from 'md5'\n\ndeclare global {\n  interface Window {\n    JsSIP: typeof JsSIP\n    CryptoJS: {\n      MD5: Function\n    }\n  }\n}\n\n// Dependency for brekekejs\nwindow.JsSIP = window.JsSIP || JsSIP\nwindow.CryptoJS = window.CryptoJS || { MD5 }\n","import { configure, onReactionError } from 'mobx'\n\nconfigure({\n  enforceActions: 'never',\n  computedRequiresReaction: false,\n  observableRequiresReaction: false,\n  reactionRequiresObservable: false,\n  disableErrorBoundaries: false,\n})\nonReactionError((err: Error) => {\n  console.error('onReactionError:', err)\n})\n","import Validator from 'validatorjs'\nimport en from 'validatorjs/src/lang/en'\n\nValidator.setMessages('en', {\n  ...en,\n  required: 'This field is required',\n})\nValidator.useLang('en')\n\nValidator.register(\n  'hostname',\n  v => {\n    if (typeof v !== 'string') {\n      return false\n    }\n    return !(\n      /[^\\w-.]/.test(v) || // any special character except - . => invalid\n      /^[-.]/.test(v) || // special character at the beginning => invalid\n      /[-.]$/.test(v) || // special character at the end => invalid\n      /\\.{2,}/.test(v) || // two dots near to each other => invalid\n      v.length > 255 || // too long => invalid\n      false\n    )\n  },\n  'Invalid host name',\n)\n\nValidator.register(\n  'port',\n  v => {\n    if (typeof v !== 'string') {\n      return false\n    }\n    return !(\n      /\\D/.test(v) || // non numeric character => invalid\n      /^0/.test(v) || // starts with 0 => invalid\n      parseInt(v) > 65535 || // greater than max => invalid\n      false\n    )\n  },\n  'Invalid port',\n)\n","var map = {\n\t\"./ar\": 159,\n\t\"./ar.js\": 159,\n\t\"./az\": 160,\n\t\"./az.js\": 160,\n\t\"./be\": 161,\n\t\"./be.js\": 161,\n\t\"./bg\": 162,\n\t\"./bg.js\": 162,\n\t\"./bs\": 163,\n\t\"./bs.js\": 163,\n\t\"./ca\": 164,\n\t\"./ca.js\": 164,\n\t\"./cs\": 165,\n\t\"./cs.js\": 165,\n\t\"./cy\": 166,\n\t\"./cy.js\": 166,\n\t\"./da\": 167,\n\t\"./da.js\": 167,\n\t\"./de\": 168,\n\t\"./de.js\": 168,\n\t\"./el\": 169,\n\t\"./el.js\": 169,\n\t\"./en\": 102,\n\t\"./en.js\": 102,\n\t\"./es\": 170,\n\t\"./es.js\": 170,\n\t\"./et\": 171,\n\t\"./et.js\": 171,\n\t\"./eu\": 172,\n\t\"./eu.js\": 172,\n\t\"./fa\": 173,\n\t\"./fa.js\": 173,\n\t\"./fi\": 174,\n\t\"./fi.js\": 174,\n\t\"./fr\": 175,\n\t\"./fr.js\": 175,\n\t\"./hr\": 176,\n\t\"./hr.js\": 176,\n\t\"./hu\": 177,\n\t\"./hu.js\": 177,\n\t\"./id\": 178,\n\t\"./id.js\": 178,\n\t\"./it\": 179,\n\t\"./it.js\": 179,\n\t\"./ja\": 180,\n\t\"./ja.js\": 180,\n\t\"./ka\": 181,\n\t\"./ka.js\": 181,\n\t\"./ko\": 182,\n\t\"./ko.js\": 182,\n\t\"./lt\": 183,\n\t\"./lt.js\": 183,\n\t\"./lv\": 184,\n\t\"./lv.js\": 184,\n\t\"./mk\": 185,\n\t\"./mk.js\": 185,\n\t\"./mn\": 186,\n\t\"./mn.js\": 186,\n\t\"./ms\": 187,\n\t\"./ms.js\": 187,\n\t\"./nb_NO\": 188,\n\t\"./nb_NO.js\": 188,\n\t\"./nl\": 189,\n\t\"./nl.js\": 189,\n\t\"./pl\": 190,\n\t\"./pl.js\": 190,\n\t\"./pt\": 191,\n\t\"./pt.js\": 191,\n\t\"./pt_BR\": 192,\n\t\"./pt_BR.js\": 192,\n\t\"./ro\": 193,\n\t\"./ro.js\": 193,\n\t\"./ru\": 194,\n\t\"./ru.js\": 194,\n\t\"./se\": 195,\n\t\"./se.js\": 195,\n\t\"./sl\": 196,\n\t\"./sl.js\": 196,\n\t\"./sq\": 197,\n\t\"./sq.js\": 197,\n\t\"./sr\": 198,\n\t\"./sr.js\": 198,\n\t\"./sv\": 199,\n\t\"./sv.js\": 199,\n\t\"./tr\": 200,\n\t\"./tr.js\": 200,\n\t\"./ua\": 201,\n\t\"./ua.js\": 201,\n\t\"./uk\": 202,\n\t\"./uk.js\": 202,\n\t\"./vi\": 203,\n\t\"./vi.js\": 203,\n\t\"./zh\": 204,\n\t\"./zh.js\": 204,\n\t\"./zh_TW\": 205,\n\t\"./zh_TW.js\": 205\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 632;","import { ComponentProps } from 'react'\n\nimport { menus, normalizeSavedNavigation } from '../components/navigationConfig'\nimport { PageAccountCreate } from '../pages/PageAccountCreate'\nimport { PageAccountSignIn } from '../pages/PageAccountSignIn'\nimport { PageAccountUpdate } from '../pages/PageAccountUpdate'\nimport { PageCallBackgrounds } from '../pages/PageCallBackgrounds'\nimport { PageCallDtmfKeypad } from '../pages/PageCallDtmfKeypad'\nimport { PageCallKeypad } from '../pages/PageCallKeypad'\nimport { PageCallParks } from '../pages/PageCallParks'\nimport { PageCallParks2 } from '../pages/PageCallParks2'\nimport { PageCallRecents } from '../pages/PageCallRecents'\nimport { PageCallTransferChooseUser } from '../pages/PageCallTransferChooseUser'\nimport { PageCallTransferDial } from '../pages/PageCallTransferDial'\nimport { PageChatDetail } from '../pages/PageChatDetail'\nimport { PageChatGroupCreate } from '../pages/PageChatGroupCreate'\nimport { PageChatGroupDetail } from '../pages/PageChatGroupDetail'\nimport { PageChatGroupInvite } from '../pages/PageChatGroupInvite'\nimport { PageChatRecents } from '../pages/PageChatRecents'\nimport { PageContactEdit } from '../pages/PageContactEdit'\nimport { PageContactGroupCreate } from '../pages/PageContactGroupCreate'\nimport { PageContactGroupEdit } from '../pages/PageContactGroupEdit'\nimport { PageContactPhonebook } from '../pages/PageContactPhonebook'\nimport { PageContactUsers } from '../pages/PageContactUsers'\nimport { PagePhonebookCreate } from '../pages/PagePhonebookCreate'\nimport { PagePhonebookUpdate } from '../pages/PagePhonebookUpdate'\nimport { PageSettingsCurrentAccount } from '../pages/PageSettingsCurrentAccount'\nimport { PageSettingsDebug } from '../pages/PageSettingsDebug'\nimport { PageSettingsOther } from '../pages/PageSettingsOther'\nimport { PageWebChat } from '../pages/PageWebChat'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { getAuthStore } from './authStore'\nimport { getCallStore } from './callStore'\nimport { CallStore } from './callStore2'\nimport { setNav } from './Nav'\nimport { RnStacker } from './RnStacker'\n\nexport class Nav2 {\n  // root account/login\n  goToPageAccountSignIn = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountSignIn>\n  >({ PageAccountSignIn }, true)\n  backToPageAccountSignIn = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountSignIn>\n  >({ PageAccountSignIn }, true)\n\n  // root user/chat\n  goToPageContactPhonebook = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactPhonebook>\n  >({ PageContactPhonebook }, true)\n  backToPageContactPhonebook = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactPhonebook>\n  >({ PageContactPhonebook }, true)\n  goToPageContactUsers = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactUsers>\n  >({ PageContactUsers }, true)\n  backToPageContactUsers = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactUsers>\n  >({ PageContactUsers }, true)\n  goToPageChatRecents = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatRecents>\n  >({ PageChatRecents }, true)\n  backToPageChatRecents = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatRecents>\n  >({ PageChatRecents }, true)\n  goToPageWebChat = RnStacker.createGoTo<ComponentProps<typeof PageWebChat>>(\n    { PageWebChat },\n    true,\n  )\n  backToPageWebChat = RnStacker.createBackTo<\n    ComponentProps<typeof PageWebChat>\n  >({ PageWebChat }, true)\n\n  // root call\n  goToPageCallKeypad = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallKeypad>\n  >({ PageCallKeypad }, true)\n  backToPageCallKeypad = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallKeypad>\n  >({ PageCallKeypad }, true)\n  goToPageCallRecents = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallRecents>\n  >({ PageCallRecents }, true)\n  backToPageCallRecents = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallRecents>\n  >({ PageCallRecents }, true)\n  goToPageCallParks = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallParks>\n  >({ PageCallParks }, true)\n  backToPageCallParks = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallParks>\n  >({ PageCallParks }, true)\n\n  // root settings\n  goToPageSettingsOther = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsOther>\n  >({ PageSettingsOther }, true)\n  backToPageSettingsOther = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsOther>\n  >({ PageSettingsOther }, true)\n  goToPageSettingsCurrentAccount = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsCurrentAccount>\n  >({ PageSettingsCurrentAccount }, true)\n  backToPageSettingsCurrentAccount = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsCurrentAccount>\n  >({ PageSettingsCurrentAccount }, true)\n\n  // account\n  goToPageAccountCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountCreate>\n  >({ PageAccountCreate })\n  backToPageAccountCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountCreate>\n  >({ PageAccountCreate })\n  goToPageAccountUpdate = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountUpdate>\n  >({ PageAccountUpdate })\n  backToPageAccountUpdate = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountUpdate>\n  >({ PageAccountUpdate })\n  goToPagePhonebookCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PagePhonebookCreate>\n  >({ PagePhonebookCreate })\n  backToPagePhonebookCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PagePhonebookCreate>\n  >({ PagePhonebookCreate })\n  goToPagePhonebookUpdate = RnStacker.createGoTo<\n    ComponentProps<typeof PagePhonebookUpdate>\n  >({ PagePhonebookUpdate })\n  backToPagePhonebookUpdate = RnStacker.createBackTo<\n    ComponentProps<typeof PagePhonebookUpdate>\n  >({ PagePhonebookUpdate })\n\n  // call\n  goToPageCallManage = (\n    props?: CallStore['inPageCallManage'] & { isOutgoingCall?: boolean },\n  ) => {\n    const s = getCallStore()\n    const oc = s.getOngoingCall()\n    const uuid = oc?.callkeepUuid\n    if (!props?.isOutgoingCall && uuid && !oc.transferring) {\n      BrekekeUtils.onPageCallManage(uuid)\n    }\n    s.inPageCallManage = {\n      isFromCallBar: props?.isFromCallBar,\n    }\n  }\n  backToPageCallManage = (props?: CallStore['inPageCallManage']) => {\n    const s = getCallStore()\n    const oc = s.getOngoingCall()\n    const uuid = oc?.callkeepUuid\n    if (uuid && !oc.transferring) {\n      BrekekeUtils.onPageCallManage(uuid)\n    }\n    s.inPageCallManage = {\n      isFromCallBar: props?.isFromCallBar,\n    }\n    if (RnStacker.stacks.length > 1) {\n      RnStacker.dismiss()\n    }\n  }\n  goToPageCallBackgrounds = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallBackgrounds>\n  >({ PageCallBackgrounds })\n  backToPageCallBackgrounds = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallBackgrounds>\n  >({ PageCallBackgrounds })\n  goToPageCallTransferChooseUser = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallTransferChooseUser>\n  >({ PageCallTransferChooseUser })\n  backToPageCallTransferChooseUser = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallTransferChooseUser>\n  >({ PageCallTransferChooseUser })\n  goToPageCallTransferDial = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallTransferDial>\n  >({ PageCallTransferDial })\n  backToPageCallTransferDial = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallTransferDial>\n  >({ PageCallTransferDial })\n  goToPageCallParks2 = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallParks2>\n  >({ PageCallParks2 })\n  backToPageCallParks2 = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallParks2>\n  >({ PageCallParks2 })\n  goToPageCallDtmfKeypad = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallDtmfKeypad>\n  >({ PageCallDtmfKeypad })\n  backToPageCallDtmfKeypad = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallDtmfKeypad>\n  >({ PageCallDtmfKeypad })\n\n  // chat\n  goToPageChatDetail = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatDetail>\n  >({ PageChatDetail })\n  backToPageChatDetail = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatDetail>\n  >({ PageChatDetail })\n  goToPageChatGroupCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupCreate>\n  >({ PageChatGroupCreate })\n  backToPageChatGroupCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupCreate>\n  >({ PageChatGroupCreate })\n  goToPageChatGroupInvite = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupInvite>\n  >({ PageChatGroupInvite })\n  backToPageChatGroupInvite = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupInvite>\n  >({ PageChatGroupInvite })\n  goToPageChatGroupDetail = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupDetail>\n  >({ PageChatGroupDetail })\n  backToPageChatGroupDetail = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupDetail>\n  >({ PageChatGroupDetail })\n\n  // settings\n  goToPageSettingsDebug = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsDebug>\n  >({ PageSettingsDebug })\n  backToPageSettingsDebug = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsDebug>\n  >({ PageSettingsDebug })\n\n  // contact\n  goToPageContactEdit = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactEdit>\n  >({\n    PageContactEdit,\n  })\n  backToPageContactEdit = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactEdit>\n  >({ PageContactEdit }, true)\n  goToPageContactGroupCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactGroupCreate>\n  >({\n    PageContactGroupCreate,\n  })\n  goToPageContactGroupEdit = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactGroupEdit>\n  >({\n    PageContactGroupEdit,\n  })\n\n  customPageIndex?: Function\n  goToPageIndex = () => {\n    const ca = getAuthStore().getCurrentAccount()\n    if (!ca) {\n      this.customPageIndex = undefined\n      this.goToPageAccountSignIn()\n      return\n    }\n    if (this.customPageIndex) {\n      this.customPageIndex()\n      this.customPageIndex = undefined\n      return\n    }\n    const arr = menus()\n    normalizeSavedNavigation()\n    const i = ca.navIndex\n    const k = ca.navSubMenus?.[i]\n    arr[i].subMenusMap[k].navFn()\n  }\n}\n\nsetNav(new Nav2())\n","import { observer } from 'mobx-react'\n\nexport const AudioPlayer = observer(() => {\n  return null\n})\n","import { FC, useCallback, useEffect, useState } from 'react'\nimport { ActivityIndicator, StyleSheet, View, ViewProps } from 'react-native'\nimport FastImage from 'react-native-fast-image'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { mdiImageBrokenVariant } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst size = 200\nconst css = StyleSheet.create({\n  image: {\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  video: {\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n    backgroundColor: v.layerBgVideo,\n  },\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: v.layerBg,\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  loadingVideo: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: v.layerBg,\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  imageBroken: {\n    marginLeft: 0,\n    marginTop: 0,\n    backgroundColor: 'blue',\n    aspectRatio: 1,\n    alignItems: 'center',\n    width: '100%',\n    height: size,\n  },\n})\n\nexport const RnImageVideoLoader: FC<ViewProps & ChatFile> = ({\n  url,\n  state,\n  fileType,\n}) => {\n  const [objectURL, setObjectUrl] = useState<string>('')\n\n  const onShowImage = useCallback(() => {\n    const image = new Image()\n    image.src = objectURL || ''\n    const w = window.open('')\n    w?.document.write(image.outerHTML)\n  }, [objectURL])\n\n  const readImage = async (_: string) => {\n    try {\n      const urlImage = _.split('/')\n      const cache = await caches.open(urlImage[0])\n      const request = new Request(urlImage[1])\n      const response = await cache.match(request)\n      const blobFile = await response?.blob()\n      if (blobFile) {\n        setObjectUrl(URL.createObjectURL(blobFile))\n      }\n    } catch (err) {\n      setObjectUrl('')\n      console.error('ImageVideoLoader.readImage error:', err)\n    }\n  }\n  useEffect(() => {\n    if (url) {\n      readImage(url)\n    }\n  }, [url])\n\n  const renderView = () => {\n    if (fileType === 'image') {\n      return (\n        <RnTouchableOpacity onPress={onShowImage}>\n          <FastImage source={{ uri: objectURL }} style={css.image} />\n        </RnTouchableOpacity>\n      )\n    } else {\n      return (\n        <View style={css.video}>\n          <video\n            controls\n            src={objectURL}\n            playsInline\n            width={size}\n            height={size}\n          />\n        </View>\n      )\n    }\n  }\n  const isLoading =\n    state !== 'success' && state !== 'failure' && state !== 'stopped'\n  const isLoadFailed = state === 'failure' || state === 'stopped'\n  const isLoadSuccess = state === 'success' && !!objectURL\n  if (state === 'success' && !objectURL) {\n    return null\n  }\n  const cssLoading = fileType === 'image' ? css.loading : css.loadingVideo\n  return (\n    <View style={css.image}>\n      {isLoading && (\n        <ActivityIndicator size='small' color='white' style={cssLoading} />\n      )}\n      {isLoadSuccess && renderView()}\n      {isLoadFailed && (\n        <Svg\n          preserveAspectRatio='xMinYMin slice'\n          height={size}\n          viewBox='3 3  18 18'\n          width={size}\n        >\n          <Path d={mdiImageBrokenVariant} fill={v.colors.greyTextChat} />\n        </Svg>\n      )}\n    </View>\n  )\n}\n","import { FC } from 'react'\nimport { Platform, StatusBar, StyleSheet, View } from 'react-native'\nimport { getStatusBarHeight } from 'react-native-iphone-x-helper'\n\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnStatusBar: {\n    backgroundColor: v.hoverBg,\n    ...v.backdropZindex,\n    ...Platform.select({\n      ios: {\n        height: getStatusBarHeight(true),\n      },\n    }),\n  },\n  RnStatusBar__warning: {\n    backgroundColor: v.colors.warning,\n    borderColor: v.colors.warning,\n  },\n  RnStatusBar__danger: {\n    backgroundColor: v.colors.danger,\n    borderColor: v.colors.danger,\n  },\n  Border: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    borderColor: v.borderBg,\n    borderBottomWidth: 1,\n    ...v.backdropZindex,\n  },\n})\n\nexport type TRnStatusBarProps = {\n  danger?: boolean\n  warning?: boolean\n  onPress?(): void\n}\nexport const RnStatusBar: FC<TRnStatusBarProps> = p =>\n  Platform.OS === 'web' ? null : (\n    <RnTouchableOpacity\n      style={[\n        css.RnStatusBar,\n        p.warning && css.RnStatusBar__warning,\n        p.danger && css.RnStatusBar__danger,\n      ]}\n      onPress={p.onPress}\n    >\n      <StatusBar\n        backgroundColor={\n          p.danger ? v.colors.danger : p.warning ? v.colors.warning : v.hoverBg\n        }\n        barStyle='dark-content'\n      />\n      <View style={css.Border} />\n    </RnTouchableOpacity>\n  )\n","import { FC } from 'react'\nimport { StyleSheet, View, ViewProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnSwitch: {\n    height: 12,\n    width: 32,\n    backgroundColor: v.fn.darken(0.05, v.hoverBg),\n    borderRadius: 12,\n  },\n  RnSwitch__enabled: {\n    backgroundColor: v.colors.primaryFn(0.1),\n  },\n  Circle: {\n    position: 'absolute',\n    top: -3,\n    left: -1,\n    width: 18,\n    height: 18,\n    borderRadius: 18,\n    backgroundColor: v.fn.darken(0.05, v.borderBg),\n    ...v.boxShadow,\n  },\n  Circle__enabled: {\n    left: null as any,\n    right: -1,\n    backgroundColor: v.colors.primary,\n  },\n})\n\nexport const RnSwitch: FC<\n  ViewProps & {\n    enabled: boolean\n  }\n> = ({ enabled, style, ...p }) => (\n  <View {...p} style={[css.RnSwitch, enabled && css.RnSwitch__enabled, style]}>\n    <View style={[css.Circle, enabled && css.Circle__enabled]} />\n  </View>\n)\n","import { forwardRef } from 'react'\nimport { Platform, StyleSheet, TextInput, TextInputProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnTextInput: {\n    position: 'relative',\n    fontSize: v.fontSize,\n    fontWeight: v.fontWeight,\n    fontFamily: v.fontFamily,\n    color: v.color,\n  },\n})\n\nexport type RnTextInputProps = TextInputProps & {\n  disabled?: boolean\n}\n\nexport const RnTextInput = forwardRef(\n  ({ keyboardType, style, ...props }: RnTextInputProps, ref) => (\n    <TextInput\n      autoCapitalize='none'\n      ref={ref as (instance: unknown) => void}\n      {...props}\n      keyboardType={\n        (Platform.OS === 'web'\n          ? null\n          : keyboardType) as TextInputProps['keyboardType']\n      }\n      style={[css.RnTextInput, style]}\n    />\n  ),\n)\n","import { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const PageAccountCreate = () => (\n  <AccountCreateForm\n    onBack={Nav().backToPageAccountSignIn}\n    onSave={(p: Account) => {\n      accountStore.upsertAccount(p)\n      Nav().backToPageAccountSignIn()\n    }}\n    title={intl`New Account`}\n  />\n)\n","import { get, set } from 'lodash'\nimport { extendObservable } from 'mobx'\n\nexport const createStore = (mixin: Function, ...args: unknown[]) => {\n  const $ = {\n    set: (k: string, v: unknown) => {\n      set($, k, typeof v === 'function' ? v(get($, k)) : v)\n    },\n    upsert: (k: string, v: { [k: string]: unknown }, idKey = 'id') => {\n      $.set(k, (arr: { [k: string]: unknown }[]) => {\n        const updated = arr.reduce(\n          (u: boolean, v0: { [k: string]: unknown }) => {\n            if (!u && v0[idKey] === v[idKey]) {\n              Object.assign(v0, v)\n              return true\n            }\n            return u\n          },\n          false,\n        )\n        if (!updated) {\n          arr.push(v)\n        }\n        return arr\n      })\n    },\n    remove: (k: string, id: string, idKey = 'id') => {\n      $.set(k, (arr: { [k: string]: unknown }[]) =>\n        arr.filter(v => v[idKey] !== id),\n      )\n    },\n    extends: (\n      mx:\n        | Function\n        | {\n            observable?: object\n          },\n      ...a: unknown[]\n    ) => {\n      if (!mx) {\n        return\n      }\n      if (typeof mx === 'function') {\n        mx = mx($, ...a)\n      }\n      if (typeof mx === 'function') {\n        return\n      }\n      const ks = (mx.observable ? Object.keys(mx.observable) : []).concat(\n        Object.keys(mx),\n      )\n      ks.forEach(k => {\n        if (k in $) {\n          throw new Error(`createStore.extends: Duplicated key ${k}`)\n        }\n      })\n      if (mx.observable) {\n        extendObservable($, mx.observable)\n        delete mx.observable\n      }\n      Object.assign($, mx)\n    },\n  }\n  $.extends(mixin, ...args)\n  return $\n}\n\nexport type CreatedStore = ReturnType<typeof createStore>\n","import { FC, useEffect, useState } from 'react'\nimport {\n  Dimensions,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacityProps,\n  View,\n} from 'react-native'\n\nimport { PbxBook } from '../api/brekekejs'\nimport { contactStore } from '../stores/contactStore'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  txtPb: {\n    width: '100%',\n    textAlign: 'left',\n    marginHorizontal: 10,\n  },\n  itemPb: {\n    width: '100%',\n    paddingVertical: 5,\n    borderBottomColor: 'grey',\n    borderBottomWidth: 0.5,\n  },\n  autocompleteContainer: {\n    // Hack required to make the autocomplete\n    // work on Andrdoid\n    flex: 1,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    zIndex: 1,\n    padding: 5,\n    backgroundColor: 'blue',\n    ...Platform.select({\n      web: {\n        marginTop: 0,\n      },\n      default: {\n        marginTop: 25,\n      },\n    }),\n  },\n  viewFlatList: {\n    position: 'absolute',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    width: Dimensions.get('screen').width - 30,\n    maxHeight: 300,\n    top: 188,\n    zIndex: 100000,\n    marginHorizontal: 15,\n    ...Platform.select({\n      ios: {\n        shadowColor: v.borderBg,\n        shadowOpacity: 0.45,\n        shadowRadius: 5,\n        shadowOffset: {\n          width: 5,\n          height: 10,\n        },\n      },\n      android: {\n        elevation: 10,\n      },\n      web: {\n        boxShadow: `${0}px ${0}px ${10}px ${v.borderBg}`,\n      },\n    }),\n  },\n})\n\nexport const PhonebookAutoComplete: FC<\n  Partial<{\n    style?: TouchableOpacityProps['style']\n    // onCreateBtnPress(): void\n    // label: string\n    value: string\n    layout?: Object\n    // textInputStyle?: TextInputProps['style']\n    onPressItem(item: PbxBook): void\n  }>\n> = p0 => {\n  const { value, onPressItem } = p0\n  const [isChoose, setChoose] = useState(false)\n\n  useEffect(() => {\n    contactStore.loadPbxBoook()\n    setChoose(false)\n  }, [value])\n\n  const getData = () => {\n    if (!contactStore.pbxBooks.length) {\n      return []\n    }\n    if (!value) {\n      return [...contactStore.pbxBooks]\n    }\n    const result = contactStore.pbxBooks.filter(item => {\n      // make same web search\n      return item.phonebook.toLowerCase().startsWith(value.toLowerCase())\n    })\n    if (\n      !result.length ||\n      (result.length === 1 && value === result[0].phonebook)\n    ) {\n      return []\n    }\n    return result\n  }\n  const result = [...getData()]\n\n  if (!result.length || isChoose === true) {\n    return null\n  }\n  return (\n    <View style={css.viewFlatList}>\n      <ScrollView>\n        {result.map((item, index) => (\n          <RnTouchableOpacity\n            key={index}\n            style={css.itemPb}\n            onPress={() => {\n              setChoose(true)\n              onPressItem?.(item)\n            }}\n          >\n            <Text style={css.txtPb}>{item.phonebook}</Text>\n          </RnTouchableOpacity>\n        ))}\n      </ScrollView>\n    </View>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/ding.4bf3338b.mp3\";","import { lowerFirst } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\nimport { getBottomSpace } from 'react-native-iphone-x-helper'\n\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { arrToMap } from '../utils/arrToMap'\nimport { FooterActions } from './FooterActions'\nimport { Navigation } from './FooterNavigation'\nimport { ToggleKeyboard } from './FooterToggleKeyboard'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Footer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n  },\n  Footer__noKeyboard: {\n    left: 0,\n    paddingBottom: getBottomSpace(),\n    backgroundColor: v.bg,\n    ...v.boxShadow,\n  },\n  //\n  // Fix bug margin auto can not be used\n  ActionsOuter: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingHorizontal: 10,\n    marginVertical: 8,\n  },\n  ActionsSpacing: {\n    flex: 1,\n  },\n  //\n  ActionsInner: {\n    flexDirection: 'row',\n    width: '100%',\n    minWidth: 260,\n    maxWidth: v.maxModalWidth,\n  },\n})\n\nexport const Footer: FC<{\n  menu: string\n  isTab?: boolean\n}> = observer(props => {\n  const fabProps: {\n    onNext?(): void\n    render: Function\n    onShowKeyboard(): void\n  } = arrToMap(\n    Object.keys(props).filter(k => k.startsWith('fab')),\n    (k: string) => lowerFirst(k.replace('fab', '')),\n    (k: string) => props[k as keyof typeof props],\n  ) as any\n  const { menu, isTab } = props\n  const { onNext, render } = fabProps\n  if (\n    !render &&\n    ((!menu && !onNext && !RnKeyboard.isKeyboardShowing) ||\n      RnKeyboard.isKeyboardAnimating)\n  ) {\n    return null\n  }\n  return (\n    <View\n      style={[\n        css.Footer,\n        (render || !RnKeyboard.isKeyboardShowing) && css.Footer__noKeyboard,\n      ]}\n    >\n      {render ? (\n        render()\n      ) : RnKeyboard.isKeyboardShowing ? (\n        <ToggleKeyboard {...fabProps} />\n      ) : onNext ? (\n        <View style={css.ActionsOuter}>\n          <View style={css.ActionsSpacing} />\n          <View style={css.ActionsInner}>\n            <FooterActions {...fabProps} />\n          </View>\n          <View style={css.ActionsSpacing} />\n        </View>\n      ) : null}\n      {!RnKeyboard.isKeyboardShowing && menu && !isTab && (\n        <Navigation menu={menu} />\n      )}\n    </View>\n  )\n})\n","import { Vibration } from 'react-native'\n\nexport const rnVibrate = () => {\n  Vibration.vibrate(1000)\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Keyboard, Platform, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardOffOutline, mdiKeyboardOutline } from '../assets/icons'\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { AnimatedSize } from './AnimatedSize'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ToggleKeyboard: {\n    flexDirection: 'row',\n    marginRight: 8,\n    marginBottom: 4,\n    borderRadius: v.borderRadius,\n    paddingVertical: 8,\n    width: v.iconSize + 24,\n    backgroundColor: v.hoverBg,\n    ...v.boxShadow,\n  },\n  Text: {\n    /* Fix button size does not equal with the Actions */\n    width: 0,\n    lineHeight: v.iconSize,\n    overflow: 'hidden',\n  },\n})\n\nexport const ToggleKeyboard: FC<{\n  onShowKeyboard(): void\n}> = observer(({ onShowKeyboard }) => {\n  if (\n    Platform.OS === 'web' ||\n    (!RnKeyboard.isKeyboardShowing && !onShowKeyboard)\n  ) {\n    return null\n  }\n  return (\n    <AnimatedSize animateWidth>\n      <RnTouchableOpacity\n        onPress={\n          RnKeyboard.isKeyboardShowing ? Keyboard.dismiss : onShowKeyboard\n        }\n        style={css.ToggleKeyboard}\n      >\n        {/* Fix button size does not equal with the Actions */}\n        <RnText style={css.Text}>{'\\u200a'}</RnText>\n        <RnIcon\n          path={\n            RnKeyboard.isKeyboardShowing\n              ? mdiKeyboardOffOutline\n              : mdiKeyboardOutline\n          }\n        />\n      </RnTouchableOpacity>\n    </AnimatedSize>\n  )\n})\n","import { FC, useState } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { BackBtn } from './HeaderBackBtn'\nimport { CreateBtn } from './HeaderCreateBtn'\nimport { Dropdown, DropdownBtn, HeaderDropdownItem } from './HeaderDropdown'\nimport { Navigation } from './HeaderNavigation'\nimport { Title } from './HeaderTitle'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Header: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n  },\n  Outer: {\n    backgroundColor: v.bg,\n  },\n  Outer__compact: {\n    ...v.boxShadow,\n  },\n  Outer__transparent: {\n    backgroundColor: 'transparent',\n  },\n  Inner__hasBackBtn: {\n    paddingLeft: 35,\n  },\n})\n\nexport const Header: FC<\n  Partial<{\n    compact: boolean\n    description: string\n    dropdown: HeaderDropdownItem[]\n    menu: string\n    onBack(): void\n    onCreate(): void\n    subMenu: string\n    title: string\n    transparent: boolean\n    isTab?: boolean\n  }>\n> = p => {\n  const {\n    compact,\n    description,\n    dropdown,\n    menu,\n    onBack,\n    onCreate,\n    subMenu,\n    title,\n    isTab,\n    transparent,\n  } = p\n  const [dropdownActive, setDropdownActive] = useState(false)\n  return (\n    <>\n      <View style={css.Header}>\n        <View\n          style={[\n            css.Outer,\n            compact && css.Outer__compact,\n            transparent && css.Outer__transparent,\n          ]}\n        >\n          <View style={onBack && css.Inner__hasBackBtn}>\n            <Title\n              compact={compact as boolean}\n              description={description}\n              title={title as string}\n            />\n            {onBack && (\n              <BackBtn compact={compact as boolean} onPress={onBack} />\n            )}\n            {dropdown && (\n              <DropdownBtn onPress={() => setDropdownActive(true)} />\n            )}\n          </View>\n          {menu && (\n            <Navigation isTab={isTab} menu={menu} subMenu={subMenu as string} />\n          )}\n        </View>\n      </View>\n      {dropdown && dropdownActive && (\n        <Dropdown\n          close={() => setDropdownActive(false)}\n          compact={compact as boolean}\n          dropdown={dropdown}\n        />\n      )}\n      {\n        /* No compact mode, should only use in the noScroll layout (such as the account list page)\n       Can not use together with dropdown */\n        !dropdown && onCreate && (\n          <CreateBtn onPress={onCreate} white={transparent as boolean} />\n        )\n      }\n    </>\n  )\n}\n","import { FC } from 'react'\nimport { Animated, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { useAnimation } from '../utils/animation'\nimport { RnIcon, RnTouchableOpacity } from './Rn'\n\nconst css = StyleSheet.create({\n  BackBtn: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n  },\n  Inner: {\n    width: 50,\n    height: 70,\n    paddingHorizontal: 0,\n    paddingVertical: 20,\n    borderRadius: 0,\n  },\n})\n\nexport const BackBtn: FC<{\n  compact: boolean\n  onPress(): void\n}> = p => {\n  const { compact, onPress } = p\n  const cssInnerA = useAnimation(compact, {\n    height: [70, 40],\n    paddingVertical: [20, 5],\n  })\n  return (\n    <RnTouchableOpacity onPress={onPress} style={css.BackBtn}>\n      <Animated.View style={[css.Inner, cssInnerA]}>\n        <RnIcon path={mdiKeyboardBackspace} />\n      </Animated.View>\n    </RnTouchableOpacity>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { mdiPlus } from '../assets/icons'\nimport { RnIcon, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  CreateBtn: {\n    position: 'absolute',\n    top: 11,\n    right: 5,\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: v.colors.primary,\n  },\n  CreateBtn__white: {\n    backgroundColor: v.bg,\n  },\n})\n\nexport const CreateBtn: FC<{\n  white: boolean\n  onPress(): void\n}> = p => {\n  const { onPress, white } = p\n  return (\n    <RnTouchableOpacity\n      onPress={onPress}\n      style={[css.CreateBtn, white && css.CreateBtn__white]}\n    >\n      <RnIcon color={white ? 'black' : 'white'} path={mdiPlus} />\n    </RnTouchableOpacity>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { mdiDotsVertical } from '../assets/icons'\nimport { AnimatedSize } from './AnimatedSize'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Backdrop: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: v.fn.transparentize(0.8, 'black'),\n    ...v.backdropZindex,\n  },\n  //\n  Dropdown: {\n    position: 'absolute',\n    top: 60,\n    right: 15,\n    width: 250,\n    ...v.boxShadow,\n    ...v.backdropZindex,\n  },\n  Dropdown__compact: {\n    top: 35,\n  },\n  Inner: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n  },\n  //\n  Item: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n  Item__last: {\n    borderBottomWidth: 0,\n  },\n  //\n  Btn: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    width: 50,\n  },\n})\n\nexport type HeaderDropdownItem = Partial<{\n  danger: boolean\n  label: string\n  onPress(): void\n  primary: boolean\n  warning: boolean\n}>\nexport const Dropdown: FC<{\n  close(): void\n  compact: boolean\n  dropdown: HeaderDropdownItem[]\n}> = p => {\n  const { close, compact, dropdown } = p\n  return (\n    <>\n      <RnTouchableOpacity\n        activeOpacity={1}\n        onPress={close}\n        style={css.Backdrop}\n      />\n      <AnimatedSize\n        innerStyle={css.Inner}\n        style={[css.Dropdown, compact && css.Dropdown__compact]}\n      >\n        {dropdown.map(({ danger, label, onPress, primary, warning }, i) => (\n          <RnTouchableOpacity\n            key={i}\n            onPress={() => {\n              close()\n              onPress?.()\n            }}\n            style={[css.Item, i === dropdown.length - 1 && css.Item__last]}\n          >\n            <RnText {...{ primary, warning, danger }}>{label}</RnText>\n          </RnTouchableOpacity>\n        ))}\n      </AnimatedSize>\n    </>\n  )\n}\n\nexport const DropdownBtn: FC<{ onPress(): void }> = ({ onPress }) => (\n  <RnTouchableOpacity onPress={onPress} style={css.Btn}>\n    <RnIcon path={mdiDotsVertical} />\n  </RnTouchableOpacity>\n)\n","import { observer } from 'mobx-react'\nimport { FC, useCallback } from 'react'\nimport { StyleSheet, View, ViewStyle } from 'react-native'\n\nimport { chatStore } from '../stores/chatStore'\nimport { css as fcss } from './FooterNavigation'\nimport { getSubMenus } from './navigationConfig'\nimport { getTabs } from './navigationConfig2'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Navigation: {\n    flexDirection: 'row',\n    alignSelf: 'stretch',\n\n    backgroundColor: v.bg,\n  },\n  Btn: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderBottomWidth: 3,\n    borderColor: v.borderBg,\n  },\n  Btn__active: {\n    borderColor: v.colors.primary,\n  },\n  Text__active: {\n    color: v.colors.primary,\n  },\n  Unread: {\n    top: -5,\n    left: 25,\n  },\n  ml: {\n    left: 35,\n    width: 20,\n  },\n})\n\nexport const Navigation: FC<{\n  menu: string\n  subMenu: string\n  isTab?: boolean\n}> = observer(p => {\n  const { menu, subMenu, isTab } = p\n  const tabs = isTab ? getTabs(menu) : getSubMenus(menu)\n\n  const renderIconNotices = useCallback(\n    (totalNotice: number, style?: ViewStyle) => {\n      return (\n        <View style={fcss.UnreadOuter}>\n          <View style={[fcss.Unread, css.Unread, style]}>\n            <RnText style={fcss.UnreadText} bold white center>\n              {totalNotice}\n            </RnText>\n          </View>\n        </View>\n      )\n    },\n    [],\n  )\n\n  return (\n    <View style={css.Navigation}>\n      {tabs.map(s => {\n        const active = s.key === subMenu\n        const totalUnreadChat = chatStore.unreadCount\n        const totalNoticesWebchat = chatStore.getNumberWebchatNoti()\n\n        return (\n          <RnTouchableOpacity\n            key={s.key}\n            onPress={active ? undefined : s.navFn}\n            style={[css.Btn, active && css.Btn__active]}\n          >\n            <RnText small style={active && css.Text__active}>\n              {s.label}\n            </RnText>\n            {s.key === 'chat' &&\n              !!totalUnreadChat &&\n              renderIconNotices(totalUnreadChat)}\n            {s.key === 'webchat' &&\n              !!totalNoticesWebchat &&\n              renderIconNotices(totalNoticesWebchat, css.ml)}\n          </RnTouchableOpacity>\n        )\n      })}\n    </View>\n  )\n})\n","import { FC } from 'react'\nimport { Animated, StyleSheet } from 'react-native'\n\nimport { useAnimation } from '../utils/animation'\nimport { trimDisplayName } from './CallBar'\nimport { RnText } from './Rn'\nimport { AnimatedText } from './RnText'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Container: {\n    padding: 15,\n  },\n  Title: {\n    fontSize: v.fontSizeTitle,\n    lineHeight: v.lineHeightTitle,\n    fontWeight: 'bold',\n    color: 'black',\n  },\n  Description: {\n    color: v.subColor,\n  },\n})\n\nexport const Title: FC<{\n  compact: boolean\n  description?: string\n  title: string\n}> = p => {\n  const { compact, description, title } = p\n  const cssContainerA = useAnimation(compact, {\n    paddingVertical: [15, 10],\n  })\n  const cssTitleA = useAnimation(compact, {\n    fontSize: [v.fontSizeTitle, v.fontSizeSubTitle],\n    lineHeight: [v.lineHeightTitle, 20],\n  })\n  return (\n    <Animated.View style={[css.Container, cssContainerA]}>\n      <AnimatedText style={[css.Title, cssTitleA]}>\n        {trimDisplayName(title)}\n      </AnimatedText>\n      {!compact && (\n        <RnText style={css.Description}>{description || '\\u200a'}</RnText>\n      )}\n    </Animated.View>\n  )\n}\n","import { FC, useEffect, useState } from 'react'\nimport { Animated, StyleSheet, View } from 'react-native'\n\nimport { RnText } from './Rn'\n\nconst css = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    right: 0,\n    left: 0,\n    top: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  content: {\n    padding: 10,\n    backgroundColor: '#000',\n    maxWidth: '50%',\n    opacity: 0.8,\n    borderRadius: 5,\n  },\n  textStyle: {\n    fontSize: 16,\n    color: '#fff',\n    textAlign: 'center',\n  },\n})\n\ntype ToastProps = {\n  title: string\n  isVisible?: boolean\n  duration?: number\n  containerStyles?: {}\n}\n\nconst TOAST_ANIMATION_DURATION = 3000\nconst MAX_LENGTH_TEXT = 50\n\nexport const Toast: FC<ToastProps> = ({\n  title,\n  isVisible,\n  containerStyles,\n}: ToastProps) => {\n  const [fadeAnim] = useState(new Animated.Value(0))\n  const validTitle =\n    title.length > MAX_LENGTH_TEXT\n      ? `${title.substring(0, MAX_LENGTH_TEXT)}...`\n      : title\n\n  useEffect(() => {\n    if (isVisible) {\n      fadeAnim.setValue(1)\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: TOAST_ANIMATION_DURATION,\n        useNativeDriver: true,\n      }).start()\n    }\n  }, [fadeAnim, isVisible])\n\n  return (\n    <View style={[css.container, containerStyles]}>\n      <Animated.View style={[css.content, { opacity: fadeAnim }]}>\n        <RnText style={css.textStyle}>{validTitle}</RnText>\n      </Animated.View>\n    </View>\n  )\n}\n","import { observer } from 'mobx-react'\nimport { FlatList, Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiDotsHorizontal,\n  mdiLadybug,\n  mdiUnfoldMoreHorizontal,\n} from '../assets/icons'\nimport { AccountSignInItem } from '../components/AccountSignInItem'\nimport { BrekekeGradient } from '../components/BrekekeGradient'\nimport { Layout } from '../components/Layout'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { currentVersion, v } from '../components/variables'\nimport { accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\n\nconst css = StyleSheet.create({\n  PageAccountSignIn_ListServers: {\n    height: '70%',\n    minHeight: 320,\n  },\n  PageAccountSignIn_Spacing: {\n    flex: 1,\n    maxHeight: '20%',\n  },\n  Space: {\n    height: 15,\n  },\n  CornerButton: {\n    position: 'absolute',\n    bottom: 0,\n    paddingTop: 25,\n    paddingBottom: 10,\n    paddingHorizontal: 15,\n    ...v.backdropZindex,\n  },\n  CornerButton__info: {\n    left: 0,\n  },\n  CornerButton__language: {\n    right: 0,\n  },\n  CornerButton_Inner: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n  },\n  CornerButton_Inner__info: {\n    paddingLeft: 19,\n  },\n  CornerButton_Inner__language: {\n    paddingRight: 18,\n  },\n  CornerButton_Icon: {\n    position: 'absolute',\n    ...Platform.select({\n      android: {\n        top: 4,\n      },\n      default: {\n        top: 2,\n      },\n    }),\n  },\n  CornerButton_Icon__info: {\n    left: 0,\n  },\n  CornerButton_Icon__language: {\n    right: 0,\n  },\n})\n\nexport const PageAccountSignIn = observer(() => {\n  const ids = accountStore.accounts.map(a => a.id).filter(id => id)\n  const l = ids.length\n  return (\n    <BrekekeGradient>\n      <Layout\n        description={intl`${l} accounts in total`}\n        noScroll\n        onCreate={!!l ? Nav().goToPageAccountCreate : undefined}\n        title={intl`Accounts`}\n        transparent\n      >\n        <View\n          style={{\n            flexDirection: 'column',\n            width: '100%',\n            justifyContent: 'space-around',\n          }}\n        ></View>\n        <View style={css.PageAccountSignIn_Spacing} />\n        {!l ? (\n          <AccountSignInItem empty />\n        ) : (\n          <FlatList\n            data={ids}\n            horizontal\n            keyExtractor={(id: string) => id}\n            renderItem={({ index, item }) => (\n              <AccountSignInItem id={item} last={index === l - 1} />\n            )}\n            showsHorizontalScrollIndicator={false}\n            style={css.PageAccountSignIn_ListServers}\n          />\n        )}\n      </Layout>\n      <RnTouchableOpacity\n        onPress={Nav().goToPageSettingsDebug}\n        style={css.CornerButton}\n      >\n        <View style={[css.CornerButton_Inner, css.CornerButton_Inner__info]}>\n          <RnIcon\n            color='white'\n            path={mdiLadybug}\n            size={16}\n            style={[css.CornerButton_Icon, css.CornerButton_Icon__info]}\n          />\n          <RnText bold white>\n            {currentVersion}\n          </RnText>\n        </View>\n      </RnTouchableOpacity>\n      <RnTouchableOpacity\n        onPress={intlStore.localeLoading ? undefined : intlStore.selectLocale}\n        style={[css.CornerButton, css.CornerButton__language]}\n      >\n        <View\n          style={[css.CornerButton_Inner, css.CornerButton_Inner__language]}\n        >\n          <RnText bold white>\n            {intlStore.localeLoading ? '\\u200a' : intlStore.getLocaleName()}\n          </RnText>\n          <RnIcon\n            color='white'\n            path={\n              intlStore.localeLoading\n                ? mdiDotsHorizontal\n                : mdiUnfoldMoreHorizontal\n            }\n            size={16}\n            style={[css.CornerButton_Icon, css.CornerButton_Icon__language]}\n          />\n        </View>\n      </RnTouchableOpacity>\n      <View style={css.Space} />\n    </BrekekeGradient>\n  )\n})\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiAccountCircleOutline,\n  mdiApplicationOutline,\n  mdiClose,\n  mdiDotsHorizontal,\n  mdiServerNetwork,\n  mdiWeb,\n} from '../assets/icons'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { Field } from './Field'\nimport { FooterActions } from './FooterActions'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  AccountSignInItem: {\n    backgroundColor: v.bg,\n    marginBottom: 15,\n    marginLeft: 15,\n    borderRadius: v.borderRadius,\n    width: 280,\n  },\n  AccountSignInItem__last: {\n    marginRight: 15,\n  },\n  AccountSignInItem__empty: {\n    height: '70%',\n    minHeight: 320,\n    marginVertical: 45,\n    marginLeft: 15,\n    padding: 15,\n  },\n  AccountSignInItem_Btns: {\n    position: 'absolute',\n    bottom: 15,\n    left: 15,\n    right: 15,\n  },\n})\n\nexport const AccountSignInItem: FC<{\n  empty?: boolean\n  id?: string\n  last?: boolean\n}> = observer(props => {\n  if (props.empty) {\n    return (\n      <View style={[css.AccountSignInItem, css.AccountSignInItem__empty]}>\n        <RnText subTitle>{intl`No account`}</RnText>\n        <RnText>{intl`There is no account created`}</RnText>\n        <RnText>{intl`Tap the below button to create one`}</RnText>\n        <View style={css.AccountSignInItem_Btns}>\n          <FooterActions\n            onNext={Nav().goToPageAccountCreate}\n            onNextText={intl`CREATE NEW ACCOUNT`}\n          />\n        </View>\n      </View>\n    )\n  }\n  if (!props.id) {\n    return null\n  }\n  const a = accountStore.accountsMap[props.id]\n  if (!a) {\n    return null\n  }\n  const isLoading = accountStore.pnSyncLoadingMap[props.id]\n\n  return (\n    <View\n      style={[css.AccountSignInItem, props.last && css.AccountSignInItem__last]}\n    >\n      <RnTouchableOpacity\n        onPress={() => Nav().goToPageAccountUpdate({ id: a.id })}\n      >\n        <Field\n          icon={mdiAccountCircleOutline}\n          label={intl`USERNAME`}\n          value={a.pbxUsername}\n        />\n        <Field\n          icon={mdiApplicationOutline}\n          label={intl`TENANT`}\n          value={a.pbxTenant}\n        />\n        <Field icon={mdiWeb} label={intl`HOSTNAME`} value={a.pbxHostname} />\n        <Field icon={mdiServerNetwork} label={intl`PORT`} value={a.pbxPort} />\n      </RnTouchableOpacity>\n      <Field\n        label={intl`PUSH NOTIFICATION`}\n        onValueChange={(e: boolean) =>\n          accountStore.upsertAccount({\n            id: a.id,\n            pushNotificationEnabled: e,\n          })\n        }\n        type='Switch'\n        value={a.pushNotificationEnabled}\n        loading={isLoading}\n      />\n      <Field\n        label='UC'\n        onValueChange={(e: boolean) =>\n          accountStore.upsertAccount({ id: a.id, ucEnabled: e })\n        }\n        type='Switch'\n        value={a.ucEnabled}\n      />\n      <View style={css.AccountSignInItem_Btns}>\n        <FooterActions\n          onBack={() => {\n            RnAlert.prompt({\n              title: intl`Remove Account`,\n              message: (\n                <>\n                  <View>\n                    <RnText small>\n                      {a.pbxUsername} - {a.pbxHostname}\n                    </RnText>\n                  </View>\n                  <RnText>{intl`Do you want to remove this account?`}</RnText>\n                </>\n              ),\n              onConfirm: () => {\n                accountStore.removeAccount(a.id)\n              },\n            })\n          }}\n          onBackIcon={mdiClose}\n          onMore={() => Nav().goToPageAccountUpdate({ id: a.id })}\n          onMoreIcon={mdiDotsHorizontal}\n          onNext={() => {\n            getAuthStore().signIn(a)\n            // Try to end callkeep if it's stuck\n            if (Platform.OS !== 'web') {\n              getCallStore().endCallKeepAllCalls()\n            }\n          }}\n          onNextText={intl`SIGN IN`}\n        />\n      </View>\n    </View>\n  )\n})\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\n\nimport { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const PageAccountUpdate: FC<{\n  id: string\n}> = observer(props => {\n  return (\n    <AccountCreateForm\n      onBack={Nav().backToPageAccountSignIn}\n      onSave={(p: Account) => {\n        accountStore.upsertAccount(p)\n        Nav().backToPageAccountSignIn()\n      }}\n      title={intl`Update Account`}\n      updating={accountStore.accountsMap[props.id]}\n    />\n  )\n})\n","import { observer } from 'mobx-react'\n\nimport { mdiPhone, mdiPhoneHangup } from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { Call } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\n\nexport const PageCallBackgrounds = observer(() => {\n  const bg = getCallStore().calls.filter(\n    c => c.id !== getCallStore().ongoingCallId,\n  )\n  const oc = getCallStore().getOngoingCall()\n  const renderItemCall = (c: Immutable<Call>, isCurrentCall?: boolean) => {\n    const icons = [\n      mdiPhoneHangup,\n      ...(!c.answered && c.incoming ? [mdiPhone] : []),\n    ]\n    const iconColors = [\n      v.colors.danger,\n      ...(!c.answered && c.incoming ? [v.colors.primary] : []),\n    ]\n    const iconFuncs = [\n      c.hangupWithUnhold,\n      ...(!c.answered && c.incoming\n        ? [\n            () => {\n              c.answer()\n              getCallStore().onSelectBackgroundCall(c)\n            },\n          ]\n        : []),\n    ]\n    return (\n      <UserItem\n        icons={icons}\n        iconColors={iconColors}\n        iconFuncs={iconFuncs}\n        key={c.id}\n        lastMessage={\n          !c.answered ? (\n            c.incoming ? (\n              intl`Incoming Call`\n            ) : (\n              intl`Dialing...`\n            )\n          ) : c.transferring ? (\n            intl`Transferring`\n          ) : c.holding ? (\n            intl`On hold`\n          ) : (\n            <Duration>{c.answeredAt}</Duration>\n          )\n        }\n        selected={isCurrentCall}\n        {...c}\n      />\n    )\n  }\n  return (\n    <Layout\n      compact\n      onBack={Nav().backToPageCallManage}\n      title={intl`Background calls`}\n    >\n      <Field isGroup label={intl`CURRENT CALL`} />\n      {(oc ? [oc] : []).map(c => (\n        <RnTouchableOpacity\n          key={c.id}\n          onPress={() => Nav().backToPageCallManage()}\n        >\n          {renderItemCall(c, true)}\n        </RnTouchableOpacity>\n      ))}\n      {!!bg.length && (\n        <Field hasMargin isGroup label={intl`BACKGROUND CALLS`} />\n      )}\n      {bg.map(c => (\n        <RnTouchableOpacity\n          key={c.id}\n          onPress={\n            !c.answered && c.incoming\n              ? undefined\n              : () => getCallStore().onSelectBackgroundCall(c)\n          }\n        >\n          {renderItemCall(c)}\n        </RnTouchableOpacity>\n      ))}\n    </Layout>\n  )\n})\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABU1BMVEUAAAD////////j4+Pm5ubm5ubg4Ovf3+fi4unj4+q+vsTe4+Pf4+Pg5OTe4uLf4uLf4uLe4eHg4OC9wMC5vLzg4uTh4ePh4+Pg4OHf3+Hf4OLg4OHf3+C1tbXf4eHg4OHf4OHg4OHg4OHg4OPf3+Hg4eHg4OHg4OHf4OHg4OLh4eLf4OGxsbGxsbHg4OHf3+Df4eLf4OHg4OHg4OHg4eHg4OHf3+Cqq6uqqqqoqKjf3+Df4ODf39+lpaWmpqbf3+ClpaXg4OHf4ODg4ODf3+Df4ODg4OCenp6fn5+goKChoaGjo6OlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+ysrKzs7O3t7e4uLi5ubm7u7u+vr6/v7/AwMDCwsLDw8PFxcXGxsbIyMjJycnMzMzNzc3W1tbX19fY2NjZ2dna2trc3Nzf39/f3+Dg4OCTBZWQAAAAR3RSTlMABAUJChQZICMkKzY3OT5HV15kbW6EkJGSmK+8wMHJy87Oz9DS1NXX2Nvb3N3f4OHi5Obt7e7v8fX29vb4+vr6+/v9/f7+/kiNpIAAAAGUSURBVBgZdcFpQ1JRFAXQLY6oZTk0UFraZHOaUWaGpHkohkgKyqwstIEE9v//FOK75953eW8thE2kHmXYkXmYmkCs0wsZOjJXTyHK0HX2uDaEHjObjLA5g7DBu4xxexCOZJqx0kmo/hVazV/1+u8mrccJGA+oDorSVTykuonARaqyqB2qC+ga2aaxI46PNLaSOLZI40BCDmksomOMKi8hBapxAPM0/orniMYVoO8Vje/i+Ukjm8Ak1Qfx1KjO4jLVe/FUqFJYpiqI5x3VEl5Q5cWTp3qONlVJPGWqNlpUFfFUqFpoUVXFU6VqoU31VTz7VG2sUf0TzxHVGpZpvZGQt7SWcInWroR8oZXCJK2muHJ0nEEiS+ubOOq0sn3AHB1VUTU65gCM01WUQJmuMXTcoksCdM3jWPI1rc8S2KW1NYKu8zQaJVGlBo1zCNzhiT0J2eOJGzD6V0j+qYkv96lB8kkCaji9X5BIhR/pYTgG1iXG+gDCZiXSLHqMPpMeT0cRZXo1J47c6jRiTd3fkK6X96YQ8h9ti83kCEQM1AAAAABJRU5ErkJggg==\"","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { sip } from '../api/sip'\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallDtmfKeypad extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const oc = getCallStore().getOngoingCall()\n    if (this.prevId && this.prevId !== oc?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = oc?.id\n  }\n\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n\n  sendKey = (key: string) => {\n    const oc = getCallStore().getOngoingCall()\n    const cp = getAuthStore().getCurrentAccount()\n    if (!oc || !cp) {\n      return\n    }\n    sip.sendDTMF({\n      signal: key,\n      sessionId: oc.id,\n      tenant: oc.pbxTenant || cp.pbxTenant,\n      talkerId: oc.pbxTalkerId || oc.partyNumber,\n    })\n  }\n\n  render() {\n    const oc = getCallStore().getOngoingCall()\n    return (\n      <Layout\n        title={oc?.getDisplayName()}\n        description={intl`Keypad dial manually`}\n        onBack={Nav().backToPageCallManage}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={\n            RnKeyboard.isKeyboardShowing\n              ? undefined\n              : (\n                  e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n                ) => {\n                  Object.assign(this.txtSelection, {\n                    start: e.nativeEvent.selection.start,\n                    end: e.nativeEvent.selection.end,\n                  })\n                }\n          }\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            onPressNumber={v => {\n              this.sendKey(v)\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              const position = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = position\n              this.txtSelection.end = position\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n","import { getCallStore } from './callStore'\n\nexport const cancelRecentPn = (n?: CancelRecentPn) =>\n  getCallStore().onSipUaCancel(n)\n\nexport type CancelRecentPn = {\n  pnId?: string\n  completedElseWhere?: boolean\n}\n","import { Platform } from 'react-native'\n\nimport { intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\n\ndeclare global {\n  interface MediaDeviceInfo {\n    id: string\n    facing: string\n  }\n}\nexport const getCameraSourceId = async (isFront: boolean) => {\n  const mediaDevices = window.navigator.mediaDevices\n  if (!mediaDevices) {\n    RnAlert.error({\n      unexpectedErr: new Error(\n        'Can not access mediaDevices, check if your connection is https secured',\n      ),\n    })\n    return undefined\n  }\n  return mediaDevices\n    .enumerateDevices()\n    .then(a => {\n      const value = a.find(i =>\n        /videoinput/i.test(i.kind) && isFront\n          ? /front/i.test(i.facing)\n          : /environment/i.test(i.facing),\n      )\n      return value\n    })\n    .then(i => {\n      return i?.deviceId || undefined\n    })\n    .catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to get front camera information`,\n        err,\n      })\n      return undefined\n    })\n}\nexport const getCameraSourceIds = async () => {\n  const mediaDevices = window.navigator.mediaDevices\n  if (!mediaDevices) {\n    RnAlert.error({\n      unexpectedErr: new Error(\n        'Can not access mediaDevices, check if your connection is https secured',\n      ),\n    })\n    return []\n  }\n\n  return mediaDevices\n    .enumerateDevices()\n    .then(a => {\n      const videoInputs = a.filter(i => /videoinput/i.test(i.kind))\n      if (videoInputs.length === 1) {\n        return [...videoInputs, ...videoInputs]\n      }\n      const frontCamera = videoInputs.find(i =>\n        Platform.OS === 'web'\n          ? i.label.includes('Front')\n          : i.facing.includes('front'),\n      )\n      const backCamera = videoInputs.find(i =>\n        Platform.OS === 'web'\n          ? i.label.includes('Back')\n          : i.facing.includes('environment'),\n      )\n      const result: MediaDeviceInfo[] = []\n      if (frontCamera) {\n        result.push(frontCamera)\n      }\n      if (backCamera) {\n        result.push(backCamera)\n      }\n      return result\n    })\n    .catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to get front camera information`,\n        err,\n      })\n      return []\n    })\n}\n","export const turnConfig = {}\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallKeypad extends Component {\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n  callVoice = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target to call`,\n      })\n      return\n    }\n    getCallStore().startCall(this.txt)\n  }\n\n  render() {\n    return (\n      <Layout\n        description={intl`Keypad dial manually`}\n        fabOnNext={RnKeyboard.isKeyboardShowing ? this.callVoice : undefined}\n        fabOnNextText={intl`DIAL`}\n        menu='call'\n        subMenu='keypad'\n        title={intl`Keypad`}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={(\n            e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n          ) => {\n            Object.assign(this.txtSelection, {\n              start: e.nativeEvent.selection.end,\n              end: e.nativeEvent.selection.end,\n            })\n          }}\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            callVoice={this.callVoice}\n            onPressNumber={v => {\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              // Update text to trigger render\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              //\n              const p = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = p\n              this.txtSelection.end = p\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n","import { PageCallParks } from './PageCallParks'\n\nexport const PageCallParks2 = (p?: object) => (\n  <PageCallParks {...p} callParks2 />\n)\n","import { observer } from 'mobx-react'\nimport moment from 'moment'\nimport { Component } from 'react'\nimport { AppState, NativeEventSubscription, Platform } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiVideo } from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { accountStore, RecentCall } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { PushNotification } from '../utils/PushNotification.ios'\n\n@observer\nexport class PageCallRecents extends Component {\n  appStateSubscription?: NativeEventSubscription\n  componentDidMount = () => {\n    if (Platform.OS === 'ios') {\n      const h = () => {\n        if (AppState.currentState === 'active') {\n          PushNotification.resetBadgeNumber()\n        }\n      }\n      // Reset notification badge whenever go to this page\n      h()\n      this.appStateSubscription = AppState.addEventListener('change', h)\n    }\n  }\n  componentWillUnmount = () => {\n    this.appStateSubscription?.remove()\n  }\n\n  isMatchUser = (call: RecentCall) => {\n    if (call.partyNumber.includes(contactStore.callSearchRecents)) {\n      return call.id\n    }\n    return ''\n  }\n  getAvatar = (id: string) => {\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      id,\n      avatar: ucUser.avatar,\n    }\n  }\n  getMatchedCalls = () => {\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const calls = d?.recentCalls.filter(this.isMatchUser) || []\n    // Backward compatibility to remove invalid items from the previous versions\n    const filteredCalls = calls.filter(\n      c =>\n        typeof c.created === 'string' &&\n        // HH:mm - MMM D\n        ((c.created + '').length === 13 || (c.created + '').length === 14),\n    )\n    const today = moment().format('MMM D')\n    return filteredCalls.map(c => ({\n      ...c,\n      created: (c.created + '').replace(` - ${today}`, ''),\n    }))\n  }\n\n  render() {\n    const calls = this.getMatchedCalls()\n    return (\n      <Layout\n        description={intl`Voicemail and recent calls`}\n        menu='call'\n        subMenu='recents'\n        title={intl`Recents`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH NAME, PHONE NUMBER ...`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            contactStore.callSearchRecents = v\n          }}\n          value={contactStore.callSearchRecents}\n        />\n        <Field\n          isGroup\n          label={intl`VOICEMAIL (${getCallStore().newVoicemailCount})`}\n        />\n        <UserItem\n          iconFuncs={[() => getCallStore().startCall('8')]}\n          icons={[mdiPhone]}\n          name={intl`Voicemail`}\n          isVoicemail\n        />\n        <Field isGroup label={intl`RECENT CALLS (${calls.length})`} />\n        {calls.map((c, i) => (\n          <UserItem\n            iconFuncs={[\n              () => getCallStore().startVideoCall(c.partyNumber),\n              () => getCallStore().startCall(c.partyNumber),\n            ]}\n            {...contactStore.getUcUserById(c.partyNumber)}\n            icons={[mdiVideo, mdiPhone]}\n            isRecentCall\n            canChat={getAuthStore().getCurrentAccount()?.ucEnabled}\n            key={i}\n            {...this.getAvatar(c.partyNumber)}\n            {...c}\n          />\n        ))}\n      </Layout>\n    )\n  }\n}\n","import './callkeep'\n\nimport PushNotificationIOS, {\n  PushNotification as PN,\n} from '@react-native-community/push-notification-ios'\nimport Voip from 'react-native-voip-push-notification'\n\nimport { parse } from './PushNotification-parse'\n\nlet voipApnsToken = ''\nconst onVoipToken = (t: string) => {\n  if (t) {\n    voipApnsToken = t\n  }\n}\n\nlet apnsToken = ''\nconst onToken = (t: string) => {\n  if (t) {\n    apnsToken = t\n  }\n}\n\nconst onNotification = async (\n  n0: PN | null,\n  initApp: Function,\n  isLocal = false,\n) => {\n  const withGetData: unknown = n0?.getData ? n0.getData() : n0\n  // Custom fork of react-native-voip-push-notification to get callkeepUuid\n  const withDictionaryPayload = withGetData as {\n    dictionaryPayload: {\n      [k: string]: unknown\n    }\n    callkeepUuid: string\n  }\n  let withCallKeepUuid = withGetData as {\n    [k: string]: unknown\n  }\n  if (withDictionaryPayload && withDictionaryPayload.dictionaryPayload) {\n    withCallKeepUuid = withDictionaryPayload.dictionaryPayload\n    withCallKeepUuid.callkeepUuid = withDictionaryPayload.callkeepUuid\n  }\n  await initApp()\n  const n = await parse(withCallKeepUuid, isLocal)\n  if (!n) {\n    return\n  }\n  // TODO ios present local PN?\n  // Modify server to set background mode \"content only\"?\n  // toXPN\n}\n\nexport const PushNotification = {\n  register: async (initApp: Function) => {\n    initApp()\n    //\n    Voip.addEventListener('register', onVoipToken)\n    Voip.addEventListener('notification', (n: PN) => onNotification(n, initApp))\n    Voip.addEventListener(\n      'didLoadWithEvents',\n      (e: { name: string; data: PN }[]) => {\n        if (!e?.length) {\n          return\n        }\n        e.forEach(({ name, data }) => {\n          if (name === Voip.RNVoipPushRemoteNotificationsRegisteredEvent) {\n            if (typeof data === 'string') {\n              onVoipToken(data)\n            }\n          } else if (name === Voip.RNVoipPushRemoteNotificationReceivedEvent) {\n            onNotification(data, initApp)\n          }\n        })\n      },\n    )\n    Voip.registerVoipToken()\n    //\n    PushNotificationIOS.addEventListener('register', onToken)\n    PushNotificationIOS.addEventListener('notification', (n: PN) =>\n      onNotification(n, initApp),\n    )\n    PushNotificationIOS.addEventListener('localNotification', (n: PN) =>\n      onNotification(n, initApp, true),\n    )\n    //\n    PushNotificationIOS.requestPermissions()\n    //\n    const n0 = await PushNotificationIOS.getInitialNotification()\n    onNotification(n0, initApp, true)\n  },\n  getVoipToken: () => {\n    return Promise.resolve(voipApnsToken)\n  },\n  getToken: () => {\n    return Promise.resolve(apnsToken)\n  },\n  resetBadgeNumber: () => {\n    PushNotificationIOS.setApplicationIconBadgeNumber(0)\n  },\n}\n","import { orderBy } from 'lodash'\nimport { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { SectionList } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiPhoneForward } from '../assets/icons'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { setPageCallTransferChooseUser } from '../components/navigationConfig2'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { userStore } from '../stores/userStore'\n\n@observer\nexport class PageCallTransferChooseUser extends Component {\n  prevId?: string\n  @observable txtSearch: string = ''\n  componentDidMount() {\n    if (!contactStore.pbxUsers.length) {\n      contactStore.getPbxUsers()\n    }\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const oc = getCallStore().getOngoingCall()\n    if (this.prevId && this.prevId !== oc?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = oc?.id\n  }\n\n  resolveMatch = (id: string) => {\n    const match = contactStore.getPbxUserById(id)\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      name: match.name,\n      avatar: ucUser.avatar,\n      number: id,\n      status: ucUser.status,\n      calling: !!match.talkers?.filter(t => t.status === 'calling').length,\n      ringing: !!match.talkers?.filter(t => t.status === 'ringing').length,\n      talking: !!match.talkers?.filter(t => t.status === 'talking').length,\n      holding: !!match.talkers?.filter(t => t.status === 'holding').length,\n    }\n  }\n  renderUserSelectionMode = () => {\n    const { displayUsers } = userStore.filterUser(this.txtSearch, true)\n    return <ContactSectionList sectionListData={displayUsers} isTransferCall />\n  }\n  renderAllUserMode = () => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const datas = contactStore.pbxUsers.map(u => u.id).map(this.resolveMatch)\n    const users = datas.filter(i => {\n      const name = i.name.toLowerCase()\n      const txtSearch = this.txtSearch.toLowerCase()\n      const number = i.number.toLowerCase()\n      return name.includes(txtSearch) || number.includes(txtSearch)\n    })\n    type User = typeof users[0]\n\n    const map = {} as { [k: string]: User[] }\n    users.forEach(u => {\n      u.name = u.name || u.number || ''\n      let c0 = u.name.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n\n    let groups = Object.keys(map).map(k => ({\n      title: k,\n      data: map[k],\n    }))\n    groups = orderBy(groups, 'title')\n    groups.forEach(gr => {\n      gr.data = orderBy(gr.data, 'name')\n    })\n    return (\n      <SectionList\n        sections={groups}\n        keyExtractor={(item, index) => item.number}\n        renderItem={({\n          item,\n          index,\n        }: {\n          item: ItemUser['item']\n          index: number\n        }) => <RenderItemUser item={item} index={index} />}\n        renderSectionHeader={({ section: { title } }) => (\n          <Field isGroup label={title} />\n        )}\n      />\n    )\n  }\n  render() {\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const isUserSelectionMode = s.isBigMode() || !cp.pbxLocalAllUsers\n\n    return (\n      <Layout\n        description={intl`Select target to start transfer`}\n        onBack={Nav().backToPageCallManage}\n        menu='call_transfer'\n        subMenu='list_user'\n        isTab\n        title={intl`Transfer`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH FOR USERS`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            this.txtSearch = v\n          }}\n          value={this.txtSearch}\n        />\n        {isUserSelectionMode\n          ? this.renderUserSelectionMode()\n          : this.renderAllUserMode()}\n      </Layout>\n    )\n  }\n}\n\nsetPageCallTransferChooseUser(PageCallTransferChooseUser)\ntype ItemUser = {\n  item: {\n    number: string\n  }\n  index: number\n}\nconst RenderItemUser = observer(({ item, index }: ItemUser) => {\n  const oc = getCallStore().getOngoingCall()\n  return (\n    <UserItem\n      iconFuncs={[\n        () => oc?.transferAttended(item.number),\n        () => oc?.transferBlind(item.number),\n      ]}\n      icons={[mdiPhoneForward, mdiPhone]}\n      key={index}\n      {...item}\n    />\n  )\n})\n","import { FC } from 'react'\nimport { Platform, StyleSheet, View, ViewProps } from 'react-native'\n\nimport { DropdownPosition } from '../stores/RnDropdown'\nimport { DropdownItem, DropdownItemProps } from './DropdownItem'\nimport { v } from './variables'\n\ntype DropdownProps = {\n  items?: DropdownItemProps[]\n  position: DropdownPosition\n}\n\nconst css = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    ...Platform.select({\n      ios: {\n        shadowColor: v.borderBg,\n        shadowOpacity: 0.45,\n        shadowRadius: 5,\n        shadowOffset: {\n          width: 5,\n          height: 10,\n        },\n      },\n      android: {\n        elevation: 10,\n      },\n      web: {\n        boxShadow: `${0}px ${0}px ${10}px ${v.borderBg}`,\n      },\n    }),\n  },\n})\n\nexport const Dropdown: FC<ViewProps & DropdownProps> = ({\n  items = [],\n  position = {},\n}: DropdownProps) => {\n  return (\n    <View style={[css.container, { ...position }]}>\n      {items.map((item, index) => (\n        <DropdownItem\n          key={`DropdownItem - ${index}`}\n          title={item.title}\n          onPress={item.onPress}\n          disabled={item.disabled}\n        />\n      ))}\n    </View>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nexport type DropdownItemProps = {\n  title?: string\n  onPress?: () => void\n  disabled?: boolean\n}\n\nconst css = StyleSheet.create({\n  container: {\n    paddingVertical: 5,\n  },\n  disableText: {\n    color: v.colors.greyTextChat,\n  },\n})\n\nexport const DropdownItem: FC<DropdownItemProps> = ({\n  title,\n  onPress,\n  disabled = false,\n}: DropdownItemProps) => {\n  return (\n    <RnTouchableOpacity\n      onPress={onPress}\n      style={css.container}\n      disabled={disabled}\n    >\n      <RnText style={disabled && css.disableText}>{title}</RnText>\n    </RnTouchableOpacity>\n  )\n}\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { setPageCallTransferDial } from '../components/navigationConfig2'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallTransferDial extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const cs = getCallStore()\n    if (this.prevId && this.prevId !== cs.ongoingCallId) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = cs.ongoingCallId\n  }\n\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n\n  transferBlind = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target`,\n      })\n      return\n    }\n    getCallStore().getOngoingCall()?.transferBlind(this.txt)\n  }\n  transferAttended = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target`,\n      })\n      return\n    }\n    getCallStore().getOngoingCall()?.transferAttended(this.txt)\n  }\n\n  render() {\n    return (\n      <Layout\n        description={intl`Select target to start transfer`}\n        onBack={Nav().backToPageCallManage}\n        menu='call_transfer'\n        subMenu='external_number'\n        isTab\n        title={intl`Transfer`}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={(\n            e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n          ) => {\n            Object.assign(this.txtSelection, {\n              start: e.nativeEvent.selection.end,\n              end: e.nativeEvent.selection.end,\n            })\n          }}\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            callVoice={this.transferBlind}\n            callVoiceForward={this.transferAttended}\n            onPressNumber={v => {\n              // TODO create new component with PageCallDtmfKeypad\n              // to avoid duplicated code\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              const position = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = position\n              this.txtSelection.end = position\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n\nsetPageCallTransferDial(PageCallTransferDial)\n","import { computed } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\nimport EmojiSelector, { Categories } from 'react-native-emoji-selector'\n\nimport { uc } from '../api/uc'\nimport { numberOfChatsPerLoad } from '../components/chatConfig'\nimport { MessageList } from '../components/ChatMessageList'\nimport { ChatInput } from '../components/FooterChatInput'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatFile, ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { arrToMap } from '../utils/arrToMap'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatFileType } from '../utils/formatFileType'\nimport { pickFile } from '../utils/pickFile'\nimport { saveBlob } from '../utils/saveBlob'\nimport { saveBlobFile } from '../utils/saveBlob.web'\n\nconst css = StyleSheet.create({\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\n@observer\nexport class PageChatDetail extends Component<{\n  buddy: string\n}> {\n  @computed get chatById() {\n    return arrToMap(\n      chatStore.getMessagesByThreadId(this.props.buddy),\n      'id',\n      (m: ChatMessage) => m,\n    ) as { [k: string]: ChatMessage }\n  }\n  state = {\n    loadingRecent: false,\n    loadingMore: false,\n    editingText: '',\n    blobFile: {\n      url: '',\n      fileType: '',\n    },\n    topic_id: '',\n    emojiTurnOn: false,\n    blobVideo: undefined,\n  }\n  numberOfChatsPerLoadMore = numberOfChatsPerLoad\n  edittingTextEmoji = ''\n  editingTextReplace = false\n\n  componentDidMount() {\n    this.loadRecent()\n    const { buddy: id } = this.props\n    uc.readUnreadChats(id)\n    chatStore.updateThreadConfig(id, false, {\n      isUnread: false,\n    })\n  }\n  componentDidUpdate() {\n    const { buddy: id } = this.props\n    if (chatStore.getThreadConfig(id).isUnread) {\n      chatStore.updateThreadConfig(id, false, {\n        isUnread: false,\n      })\n    }\n  }\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      const { topic_id } = this.state\n      if (topic_id) {\n        caches.delete(topic_id)\n      }\n    }\n  }\n  renderChatInput = () => {\n    return (\n      <ChatInput\n        onEmojiTurnOn={() =>\n          this.setState({ emojiTurnOn: !this.state.emojiTurnOn }, () => {\n            this.view?.scrollToEnd()\n          })\n        }\n        onSelectionChange={this.onSelectionChange}\n        onTextChange={this.setEditingText}\n        onTextSubmit={this.submitEditingText}\n        openFileRnPicker={() => pickFile(this.sendFile)}\n        text={this.state.editingText}\n      />\n    )\n  }\n\n  render() {\n    const { buddy: id } = this.props\n    const { allMessagesLoaded, isUnread } = chatStore.getThreadConfig(id)\n    const { loadingMore, loadingRecent, emojiTurnOn } = this.state\n    const listMessage = chatStore.getMessagesByThreadId(this.props.buddy)\n    const incomingMessage = listMessage\n      ? listMessage[listMessage.length - 1]?.text\n      : undefined\n    const isShowToastMessage = emojiTurnOn && isUnread\n\n    return (\n      <Layout\n        compact\n        containerOnContentSizeChange={this.onContentSizeChange}\n        containerOnScroll={this.onScroll}\n        containerRef={this.setViewRef}\n        fabRender={this.renderChatInput}\n        onBack={Nav().backToPageChatRecents}\n        title={getPartyName(id) || id} // for user not set username\n        isShowToastMessage={isShowToastMessage}\n        incomingMessage={incomingMessage}\n        dropdown={[\n          {\n            label: intl`Start voice call`,\n            onPress: () => getCallStore().startCall(id),\n          },\n          {\n            label: intl`Start video call`,\n            onPress: () => getCallStore().startVideoCall(id),\n          },\n        ]}\n      >\n        {loadingRecent ? (\n          <RnText style={css.LoadMore}>{intl`Loading...`}</RnText>\n        ) : allMessagesLoaded ? (\n          <RnText center style={[css.LoadMore, css.LoadMore__finished]}>\n            {!chatStore.getMessagesByThreadId(this.props.buddy).length\n              ? intl`There's currently no message in this thread`\n              : intl`All messages in this thread have been loaded`}\n          </RnText>\n        ) : (\n          <RnTouchableOpacity\n            onPress={loadingMore ? undefined : () => this.loadMore()}\n          >\n            <RnText\n              bold={!loadingMore}\n              style={[css.LoadMore, !loadingMore && css.LoadMore__btn]}\n            >\n              {loadingMore ? intl`Loading...` : intl`Load more messages`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <MessageList\n          acceptFile={this.acceptFile}\n          list={listMessage}\n          loadMore={this.loadMore}\n          rejectFile={this.rejectFile}\n          resolveChat={this.resolveChat}\n        />\n        {emojiTurnOn && (\n          <View>\n            <EmojiSelector\n              category={Categories.emotion}\n              columns={10}\n              onEmojiSelected={emoji => this.emojiSelectFunc(emoji)}\n              showHistory={true}\n              showSearchBar={true}\n              showSectionTitles={true}\n              showTabs={true}\n            />\n          </View>\n        )}\n        {/* <video src={this.state.blobVideo}id='video' controls width='320' height='240'/> */}\n      </Layout>\n    )\n  }\n\n  onSelectionChange = (\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ) => {\n    const selection = event.nativeEvent.selection\n    this.editingTextReplace = false\n    if (selection.start !== selection.end) {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        selection.start,\n        selection.end,\n      )\n      this.editingTextReplace = true\n    } else {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        0,\n        selection.start,\n      )\n    }\n  }\n  emojiSelectFunc = (emoji: string) => {\n    const newText = this.edittingTextEmoji.concat(emoji)\n    if (this.state.editingText === '') {\n      this.setState({ editingText: emoji })\n      this.edittingTextEmoji = emoji\n    } else {\n      if (!this.editingTextReplace) {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            newText,\n          ),\n        })\n        this.edittingTextEmoji = this.edittingTextEmoji.concat(emoji)\n      } else {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            emoji,\n          ),\n        })\n        this.editingTextReplace = false\n        this.edittingTextEmoji = emoji\n      }\n    }\n  }\n\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  private justMounted = true\n  private closeToBottom = true\n  private currentScrollPosition = 0\n  private isLoadingMore = false\n\n  onContentSizeChange = (newWidth?: number, newHeight?: number) => {\n    if (!this.view || this.state.emojiTurnOn) {\n      return\n    }\n    if (this.closeToBottom) {\n      this.view?.scrollToEnd({\n        animated: !this.justMounted,\n      })\n      if (this.justMounted) {\n        this.justMounted = false\n      }\n    }\n    // scroll to last position after load more\n    if (newHeight && this.isLoadingMore) {\n      this.isLoadingMore = false\n      this.view?.scrollTo({\n        y: newHeight - this.currentScrollPosition,\n        animated: false,\n      })\n    }\n  }\n\n  onScroll = (ev: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const layoutSize = ev.nativeEvent.layoutMeasurement\n    const layoutHeight = layoutSize.height\n    const contentOffset = ev.nativeEvent.contentOffset\n    const contentSize = ev.nativeEvent.contentSize\n    const contentHeight = contentSize.height\n    const paddingToBottom = 20\n    this.closeToBottom =\n      layoutHeight + contentOffset.y >= contentHeight - paddingToBottom\n    this.currentScrollPosition = contentHeight\n  }\n\n  resolveChat = (id: string) => {\n    const chat = this.chatById[id] as ChatMessage\n    const file = chatStore.getFileById(chat.file)\n    const text = chat.text\n    const creator = this.resolveCreator(chat.creator)\n    return {\n      id,\n      creatorId: creator.id,\n      creatorName: creator.name || creator.id,\n      creatorAvatar: creator.avatar,\n      text,\n      type: chat.type,\n      file,\n      created: chat.created,\n      createdByMe: creator.id === this.me.id,\n    }\n  }\n  me = uc.me()\n  resolveCreator = (creator: string) => {\n    if (creator === this.me.id) {\n      return this.me\n    }\n    return contactStore.getUcUserById(creator) || {}\n  }\n  loadRecent = () => {\n    this.setState({ loadingRecent: true })\n    const { buddy: id } = this.props\n    uc.getBuddyChats(id, {\n      max: numberOfChatsPerLoad,\n    })\n      .then(chats => {\n        chatStore.pushMessages(id, chats)\n        BackgroundTimer.setTimeout(this.onContentSizeChange, 300)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get recent chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingRecent: false })\n      })\n  }\n\n  loadMore = () => {\n    this.isLoadingMore = true\n    this.setState({ loadingMore: true })\n    this.numberOfChatsPerLoadMore =\n      this.numberOfChatsPerLoadMore + numberOfChatsPerLoad\n    const oldestChat =\n      chatStore.getMessagesByThreadId(this.props.buddy)[0] ||\n      ({} as ChatMessage)\n    const oldestCreated = oldestChat.created || 0\n    const max = this.numberOfChatsPerLoadMore\n    const end = oldestCreated\n    const query = { max, end }\n    const { buddy: id } = this.props\n    uc.getBuddyChats(id, query)\n      .then(chats => {\n        chatStore.pushMessages(id, chats)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get more chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingMore: false })\n      })\n      .then(() => {\n        const { buddy } = this.props\n        const totalChatLoaded = chatStore.getMessagesByThreadId(buddy).length\n        if (totalChatLoaded < this.numberOfChatsPerLoadMore) {\n          chatStore.updateThreadConfig(buddy, false, {\n            allMessagesLoaded: true,\n          })\n        }\n      })\n  }\n\n  setEditingText = (editingText: string) => {\n    this.setState({ editingText })\n  }\n  submitting = false\n  submitEditingText = () => {\n    const txt = this.state.editingText.trim()\n    if (!txt || this.submitting) {\n      return\n    }\n    if (this.state.emojiTurnOn) {\n      this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n    }\n    this.submitting = true\n    //\n    uc.sendBuddyChatText(this.props.buddy, txt)\n      .then(this.onSubmitEditingTextSuccess)\n      .catch(this.onSubmitEditingTextFailure)\n      .then(() => {\n        this.submitting = false\n      })\n  }\n  onSubmitEditingTextSuccess = (chat: unknown) => {\n    chatStore.pushMessages(this.props.buddy, chat as ChatMessage)\n    this.setState({ editingText: '' })\n  }\n  onSubmitEditingTextFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to send the message`,\n      err,\n    })\n  }\n  acceptFile = (file: { id: string; name: string; fileType: string }) => {\n    uc.acceptFile(file.id)\n      .then(blob => this.onAcceptFileSuccess(blob as Blob, file))\n      .catch(this.onAcceptFileFailure)\n  }\n\n  onAcceptFileSuccess = (blob: Blob, file: { id: string; name: string }) => {\n    const fileType = formatFileType(file.name)\n    const reader = new FileReader()\n    reader.onload = async event => {\n      const url = event.target?.result\n      const f = chatStore.getFileById(file.id)\n      if (!f) {\n        return\n      }\n      Object.assign(f, {\n        url,\n        fileType,\n      })\n    }\n    reader.readAsDataURL(blob)\n    saveBlob(blob, file.name)\n  }\n  onAcceptFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept file`,\n      err,\n    })\n  }\n  rejectFile = (file: object) => {\n    uc.rejectFile(file).catch(this.onRejectFileFailure)\n  }\n  onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n\n  readFile = (file: { type: string; name: string; uri: string }) => {\n    const fileType = formatFileType(file.name)\n    this.setState({ blobFile: { url: file.uri, fileType } })\n  }\n  handleSaveBlobFileWeb = async (\n    data: Blob,\n    file: ChatFile,\n    chat: ChatMessage,\n  ) => {\n    const buddyId = this.props.buddy\n    try {\n      const url = await saveBlobFile(\n        file.id,\n        file.topic_id,\n        file.fileType,\n        data,\n      )\n      Object.assign(file, { url })\n      chatStore.upsertFile(file)\n      chatStore.pushMessages(buddyId, chat)\n    } catch (err) {\n      console.error('PageChatDetail.handleSaveBlobFileWeb err', err)\n    }\n  }\n  sendFile = (file: { type: string; name: string; uri: string }) => {\n    this.readFile(file)\n    const u = contactStore.getUcUserById(this.props.buddy)\n    uc.sendFile(u?.id, file as any as Blob)\n      .then(res => {\n        this.setState({ topic_id: res.file.topic_id })\n        const buddyId = this.props.buddy\n        Object.assign(res.file, this.state.blobFile, { save: 'success' })\n        Object.assign(res.file, { target: { user_id: buddyId } })\n        if (Platform.OS === 'web') {\n          this.handleSaveBlobFileWeb(\n            file as any as Blob,\n            res.file as ChatFile,\n            res.chat,\n          )\n        } else {\n          chatStore.upsertFile(res.file)\n          chatStore.pushMessages(buddyId, res.chat)\n        }\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to send file`,\n          err,\n        })\n      })\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport {\n  Clipboard,\n  Dimensions,\n  Linking,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport Hyperlink from 'react-native-hyperlink'\nimport Share from 'react-native-share'\n\nimport { mdiDotsHorizontal, mdiFile } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnPicker } from '../stores/RnPicker'\nimport { formatChatContent } from '../utils/formatChatContent'\nimport { trimHtml } from '../utils/trimHtml'\nimport { ItemImageVideoChat } from './ItemImageVideoChat'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Message: {\n    position: 'relative',\n    paddingBottom: 5,\n    paddingHorizontal: 10,\n    overflow: 'hidden',\n    ...Platform.select({\n      web: {\n        maxWidth: 'calc(100vw - 60px)',\n      },\n      default: {\n        maxWidth: Dimensions.get('screen').width - 60, // 50px of avatar and 10px of padding\n      },\n    }),\n  },\n  //\n  File: {\n    marginTop: 0,\n  },\n  Image: {\n    width: 150,\n    height: 150,\n  },\n\n  Message__call: {\n    fontSize: v.fontSizeSmall,\n    color: v.colors.warning,\n  },\n\n  Message_File_Button_Wrapper: {\n    flexDirection: 'row',\n  },\n  Message_File_Button: {\n    flex: 1,\n    paddingVertical: 1,\n    paddingHorizontal: 8,\n    fontSize: 12,\n    marginTop: 4,\n    borderRadius: 4,\n  },\n  Message_File_Cancel_Button: {\n    color: v.colors.danger,\n    borderWidth: 1,\n    borderColor: v.colors.danger,\n  },\n  Message_File_Accept_Button: {\n    backgroundColor: v.colors.primary,\n    borderWidth: 1,\n    borderColor: v.colors.primary,\n    marginLeft: 4,\n    color: '#fff',\n  },\n  Message_File_Preview_Wrapper: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  Message_File_Preview_Info: {\n    marginLeft: 5,\n    ...Platform.select({\n      web: {\n        width: 'calc(100vw - 119px)',\n      },\n      default: {\n        width: Dimensions.get('screen').width - 119,\n      },\n    }),\n  },\n  Message_File_Preview_Info_Size: {\n    color: '#9e9e9e',\n    fontSize: 13,\n  },\n  Message_File_Preview_Status: {\n    fontWeight: v.fontWeight,\n  },\n  Message_File_Preview_Status__Success: {\n    color: v.colors.primary,\n  },\n  Message_File_Preview_Status__Failed: {\n    color: v.colors.danger,\n  },\n\n  Link: {\n    color: v.colors.primary,\n    padding: 0,\n    ...Platform.select({\n      web: {\n        display: 'inline' as any as undefined,\n      },\n    }),\n  },\n})\n\nconst File: FC<\n  Partial<{\n    fileType: string\n    url: string\n    name: string\n    size: string\n    state: string\n    reject(): void\n    incoming: boolean\n    accept(): void\n    createdByMe: boolean\n  }>\n> = observer(p => (\n  <View style={[css.File, css.Message]}>\n    <View>\n      <View style={css.Message_File_Preview_Wrapper}>\n        <RnIcon path={mdiFile} size={50} />\n        <View style={css.Message_File_Preview_Info}>\n          <RnText numberOfLines={1}>{p.name}</RnText>\n          <RnText style={css.Message_File_Preview_Info_Size}>\n            {p.size} KB\n          </RnText>\n        </View>\n      </View>\n      <View style={css.Message_File_Button_Wrapper}>\n        {p.state === 'waiting' && p.fileType !== 'image' && (\n          <RnTouchableOpacity onPress={p.reject}>\n            <RnText\n              style={[css.Message_File_Button, css.Message_File_Cancel_Button]}\n            >\n              Cancel\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        {!!p.incoming && p.state === 'waiting' && p.fileType !== 'image' && (\n          <RnTouchableOpacity onPress={p.accept}>\n            <RnText\n              style={[css.Message_File_Button, css.Message_File_Accept_Button]}\n            >\n              Accept\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n      </View>\n      {p.state === 'success' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Success,\n          ]}\n        >\n          ({intl`Success`})\n        </RnText>\n      )}\n      {p.state === 'failure' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Failed,\n          ]}\n        >\n          ({intl`Failed`})\n        </RnText>\n      )}\n      {p.state === 'stopped' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Failed,\n          ]}\n        >\n          ({intl`Canceled`})\n        </RnText>\n      )}\n    </View>\n  </View>\n))\n\n@observer\nexport class Message extends Component<{\n  text: string\n  type?: number\n  creatorId: string\n  file: string\n  acceptFile: Function\n  rejectFile: Function\n  createdByMe: boolean\n}> {\n  onLinkPress = (url: string) => {\n    if (Platform.OS === 'web') {\n      window.open(url, '_blank', 'noopener')\n      return\n    }\n    if (!Linking.canOpenURL(url)) {\n      RnAlert.error({\n        message: intlDebug`Can not open the url`,\n      })\n    } else {\n      Linking.openURL(url)\n    }\n  }\n  onLinkLongPress = (url: string) => {\n    RnPicker.open({\n      options: [\n        {\n          key: 2,\n          label: intl`Copy link`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 3,\n          label: intl`Share link to external app`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 0,\n          label: intl`Copy message`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 1,\n          label: intl`Share message to external app`,\n          icon: mdiDotsHorizontal,\n        },\n      ],\n      onSelect: (k: number) => this.onRnPickerSelect(k, url),\n    })\n  }\n  onMessagePress = () => {\n    RnPicker.open({\n      options: [\n        {\n          key: 0,\n          label: intl`Copy message`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 1,\n          label: intl`Share message to external app`,\n          icon: mdiDotsHorizontal,\n        },\n      ],\n      onSelect: this.onRnPickerSelect,\n    })\n  }\n\n  onRnPickerSelect = (k: number, url: string) => {\n    const message = !k || k === 1 ? this.props.text : url\n    if (!k || k === 2) {\n      Clipboard.setString(message)\n    } else {\n      Share.open({ message })\n    }\n  }\n\n  render() {\n    const p = this.props\n    const file = p.file as any as ChatFile\n    const isImage =\n      file && (file.fileType === 'image' || file.fileType === 'video')\n    const TextContainer = Platform.OS === 'web' ? View : RnTouchableOpacity\n    const { text, isTextOnly } = formatChatContent(p)\n\n    return (\n      <>\n        {!!text && !file && (\n          <TextContainer style={css.Message} onLongPress={this.onMessagePress}>\n            <Hyperlink\n              onPress={this.onLinkPress}\n              linkStyle={css.Link}\n              onLongPress={this.onLinkLongPress}\n            >\n              <RnText style={!isTextOnly && css.Message__call}>\n                {trimHtml(text)}\n              </RnText>\n            </Hyperlink>\n          </TextContainer>\n        )}\n        {!!file && isImage && <ItemImageVideoChat {...file} />}\n        {!!file && !isImage && (\n          <File\n            {...(p.file as any)}\n            accept={() => p.acceptFile(p.file)}\n            createdByMe={p.createdByMe}\n            reject={() => p.rejectFile(p.file)}\n          />\n        )}\n      </>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Dimensions, Platform, StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCloseCircle } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { formatBytes } from '../utils/formatBytes'\nimport { RnIcon, RnImageVideoLoader, RnText } from './Rn'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  vMessage: {\n    marginBottom: 5,\n    marginLeft: 10,\n    ...Platform.select({\n      web: {\n        width: 'calc(100vw - 119px)',\n      },\n      default: {\n        width: Dimensions.get('screen').width - 119,\n      },\n    }),\n  },\n  textFileInfo: {\n    color: v.colors.greyTextChat,\n    fontSize: 13,\n  },\n  textFileInfoLineThrough: {\n    color: v.colors.greyTextChat,\n    fontSize: 13,\n    textDecorationLine: 'line-through',\n  },\n  vHorizontal: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n})\n\nexport const ItemImageVideoChat: FC<ChatFile> = observer(p => {\n  const displaySendTo =\n    p.incoming || !p.target?.user_id ? '' : ` -> ${p.target?.user_id}`\n  const isStopped = p.state === 'stopped'\n  const isDisableCancel =\n    isStopped || p.state === 'success' || p.state === 'failure'\n  const styleText = !isStopped ? css.textFileInfo : css.textFileInfoLineThrough\n\n  const onCancelFile = () => {\n    uc.rejectFile(p).catch(onRejectFileFailure)\n  }\n  const onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n  return (\n    <View>\n      <View style={css.vMessage}>\n        <RnText numberOfLines={2} style={styleText}>\n          {p.name}\n          {displaySendTo}\n        </RnText>\n        <View style={css.vHorizontal}>\n          <RnText style={styleText}>\n            {formatBytes(p?.size || 0, 2)}\n            {` (${p.transferPercent}%) `}\n          </RnText>\n          {!isDisableCancel && (\n            <RnTouchableOpacity onPress={onCancelFile}>\n              <RnIcon path={mdiCloseCircle} color='black' size={13} />\n            </RnTouchableOpacity>\n          )}\n        </View>\n        {<RnImageVideoLoader {...p} />}\n      </View>\n    </View>\n  )\n})\n","export const formatBytes = (bytes: number | string, decimals = 2) => {\n  bytes = +bytes\n  if (!bytes) {\n    return '0 Bytes'\n  }\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + '' + sizes[i]\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { uc } from '../api/uc'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PageChatGroupCreate extends Component {\n  state: {\n    name: string\n    members: string[]\n  } = {\n    name: '',\n    members: [],\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageChatRecents}\n        fabOnNext={this.create}\n        fabOnNextText={intl`CREATE`}\n        onBack={Nav().backToPageChatRecents}\n        title={intl`New Group`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          onValueChange={this.setName}\n          value={this.state.name}\n        />\n        <Field isGroup label={intl`Members`} />\n        {contactStore.ucUsers.map((u, i) => (\n          <RnTouchableOpacity key={i} onPress={() => this.toggleBuddy(u.id)}>\n            <UserItem\n              key={u.id}\n              {...u}\n              selected={this.state.members.includes(u.id)}\n            />\n          </RnTouchableOpacity>\n        ))}\n      </Layout>\n    )\n  }\n\n  setName = (name: string) => {\n    this.setState({\n      name,\n    })\n  }\n  toggleBuddy = (buddy: string) => {\n    const { members } = this.state\n    if (members.includes(buddy)) {\n      this.setState({\n        members: members.filter(id => id !== buddy),\n      })\n    } else {\n      this.setState({\n        members: [...members, buddy],\n      })\n    }\n  }\n  create = () => {\n    const { members, name } = this.state\n    if (!name.trim()) {\n      RnAlert.error({\n        message: intlDebug`Group name is required`,\n      })\n      return\n    }\n    uc.createChatGroup(name, members)\n      .then(this.onCreateSuccess)\n      .catch(this.onCreateFailure)\n  }\n  onCreateSuccess = (group: { id: string; name: string; jointed: boolean }) => {\n    chatStore.upsertGroup(group)\n    uc.joinChatGroup(group.id)\n    Nav().goToPageChatRecents()\n  }\n  onCreateFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to create the group chat`,\n      err,\n    })\n  }\n}\n","import { computed } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\nimport EmojiSelector, { Categories } from 'react-native-emoji-selector'\n\nimport { Constants, uc } from '../api/uc'\nimport { numberOfChatsPerLoad } from '../components/chatConfig'\nimport { MessageList } from '../components/ChatMessageList'\nimport { ChatInput } from '../components/FooterChatInput'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/RnText'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport {\n  ChatFile,\n  ChatGroup,\n  ChatMessage,\n  chatStore,\n} from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { arrToMap } from '../utils/arrToMap'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatFileType } from '../utils/formatFileType'\nimport { pickFile } from '../utils/pickFile'\nimport { saveBlob } from '../utils/saveBlob'\nimport { saveBlobFile } from '../utils/saveBlob.web'\n\nconst css = StyleSheet.create({\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\n@observer\nexport class PageChatGroupDetail extends Component<{\n  groupId: string\n}> {\n  @computed get chatById() {\n    return arrToMap(\n      chatStore.getMessagesByThreadId(this.props.groupId),\n      'id',\n      (m: ChatMessage) => m,\n    ) as { [k: string]: ChatMessage }\n  }\n\n  state = {\n    target: '',\n    loadingRecent: false,\n    loadingMore: false,\n    editingText: '',\n    blobFile: {\n      url: '',\n      fileType: '',\n    },\n    topic_id: '',\n    emojiTurnOn: false,\n  }\n  numberOfChatsPerLoadMore = numberOfChatsPerLoad\n  edittingTextEmoji = ''\n  editingTextReplace = false\n  componentDidMount() {\n    this.loadRecent()\n    chatStore.updateThreadConfig(this.props.groupId, true, {\n      isUnread: false,\n    })\n  }\n  componentDidUpdate() {\n    const { groupId } = this.props\n    if (chatStore.getThreadConfig(groupId).isUnread) {\n      chatStore.updateThreadConfig(groupId, false, {\n        isUnread: false,\n      })\n    }\n  }\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      const { topic_id } = this.state\n      if (topic_id) {\n        caches.delete(topic_id)\n      }\n    }\n  }\n\n  renderChatInput = () => {\n    return (\n      <ChatInput\n        onEmojiTurnOn={() =>\n          this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n        }\n        onSelectionChange={this.onSelectionChange}\n        onTextChange={this.setEditingText}\n        onTextSubmit={this.submitEditingText}\n        openFileRnPicker={() => pickFile(this.sendFile)}\n        text={this.state.editingText}\n      />\n    )\n  }\n  render() {\n    const id = this.props.groupId\n    const gr = chatStore.getGroupById(id)\n    const { allMessagesLoaded } = chatStore.getThreadConfig(id)\n    const { loadingMore, loadingRecent } = this.state\n    const chats = chatStore.getMessagesByThreadId(this.props.groupId)\n    return (\n      <Layout\n        compact\n        containerOnContentSizeChange={this.onContentSizeChange}\n        containerOnScroll={this.onScroll}\n        fabRender={this.renderChatInput}\n        containerRef={this.setViewRef}\n        dropdown={[\n          {\n            label: intl`Invite more people`,\n            onPress: this.invite,\n          },\n          {\n            label: intl`Start voice call`,\n            onPress: this.callVoiceConference,\n          },\n          {\n            label: intl`Start video call`,\n            onPress: this.callVideoConference,\n          },\n          {\n            label: intl`Leave group`,\n            onPress: this.leave,\n            danger: true,\n          },\n        ]}\n        onBack={Nav().backToPageChatRecents}\n        title={gr?.name}\n      >\n        {loadingRecent ? (\n          <RnText style={css.LoadMore}>{intl`Loading...`}</RnText>\n        ) : allMessagesLoaded ? (\n          <RnText center style={[css.LoadMore, css.LoadMore__finished]}>\n            {!chatStore.getMessagesByThreadId(this.props.groupId).length\n              ? intl`There's currently no message in this thread`\n              : intl`All messages in this thread have been loaded`}\n          </RnText>\n        ) : (\n          <RnTouchableOpacity\n            onPress={loadingMore ? undefined : () => this.loadMore()}\n          >\n            <RnText\n              bold={!loadingMore}\n              style={[css.LoadMore, !loadingMore && css.LoadMore__btn]}\n            >\n              {loadingMore ? intl`Loading...` : intl`Load more messages`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <MessageList\n          acceptFile={this.acceptFile}\n          isGroupChat\n          list={chats}\n          loadMore={this.loadMore}\n          rejectFile={this.rejectFile}\n          resolveChat={this.resolveChat}\n        />\n        {this.state.emojiTurnOn && (\n          <View>\n            <EmojiSelector\n              category={Categories.emotion}\n              columns={10}\n              onEmojiSelected={emoji => this.emojiSelectFunc(emoji)}\n              showHistory={true}\n              showSearchBar={true}\n              showSectionTitles={true}\n              showTabs={true}\n            />\n          </View>\n        )}\n      </Layout>\n    )\n  }\n  onSelectionChange = (\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ) => {\n    const selection = event.nativeEvent.selection\n    this.editingTextReplace = false\n    if (selection.start !== selection.end) {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        selection.start,\n        selection.end,\n      )\n      this.editingTextReplace = true\n    } else {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        0,\n        selection.start,\n      )\n    }\n  }\n  emojiSelectFunc = (emoji: string) => {\n    const newText = this.edittingTextEmoji.concat(emoji)\n    if (this.state.editingText === '') {\n      this.setState({ editingText: emoji })\n      this.edittingTextEmoji = emoji\n    } else {\n      if (!this.editingTextReplace) {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            newText,\n          ),\n        })\n        this.edittingTextEmoji = this.edittingTextEmoji.concat(emoji)\n      } else {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            emoji,\n          ),\n        })\n        this.editingTextReplace = false\n        this.edittingTextEmoji = emoji\n      }\n    }\n  }\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  private justMounted = true\n  private closeToBottom = true\n  private currentScrollPosition = 0\n  private isLoadingMore = false\n  onContentSizeChange = (newWidth?: number, newHeight?: number) => {\n    if (this.closeToBottom) {\n      this.view?.scrollToEnd({\n        animated: !this.justMounted,\n      })\n      if (this.justMounted) {\n        this.justMounted = false\n      }\n    }\n    // scroll to last position after load more\n    if (newHeight && this.isLoadingMore) {\n      this.isLoadingMore = false\n      this.view?.scrollTo({\n        y: newHeight - this.currentScrollPosition,\n        animated: false,\n      })\n    }\n  }\n  onScroll = (ev: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const layoutSize = ev.nativeEvent.layoutMeasurement\n    const layoutHeight = layoutSize.height\n    const contentOffset = ev.nativeEvent.contentOffset\n    const contentSize = ev.nativeEvent.contentSize\n    const contentHeight = contentSize.height\n    const paddingToBottom = 20\n    this.closeToBottom =\n      layoutHeight + contentOffset.y >= contentHeight - paddingToBottom\n    this.currentScrollPosition = contentHeight\n  }\n\n  me = uc.me()\n  resolveBuddy = (creator: string) => {\n    if (creator === this.me.id) {\n      return this.me\n    }\n    if (creator.startsWith('#')) {\n      // check message come from guest\n      return { id: creator.replace('#', ''), name: 'Guest', avatar: null }\n    }\n    return contactStore.getUcUserById(creator) || {}\n  }\n  resolveChat = (id: string) => {\n    const chat = this.chatById[id] as ChatMessage\n    const text = chat.text\n    const file = chatStore.getFileById(chat.file)\n    const creator = this.resolveBuddy(chat.creator)\n    return {\n      id,\n      creatorId: creator.id,\n      creatorName: creator.name || creator.id,\n      creatorAvatar: creator.avatar,\n      file,\n      text,\n      type: chat.type,\n      created: chat.created,\n      createdByMe: creator.id === this.me.id,\n    }\n  }\n\n  loadRecent() {\n    this.setState({ loadingRecent: true })\n    uc.getGroupChats(this.props.groupId, {\n      max: numberOfChatsPerLoad,\n    })\n      .then(chats => {\n        chatStore.pushMessages(this.props.groupId, chats)\n        BackgroundTimer.setTimeout(this.onContentSizeChange, 300)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get recent chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingRecent: false })\n      })\n  }\n\n  loadMore = () => {\n    this.isLoadingMore = true\n    this.setState({ loadingMore: true })\n    this.numberOfChatsPerLoadMore =\n      this.numberOfChatsPerLoadMore + numberOfChatsPerLoad\n    const oldestChat =\n      chatStore.getMessagesByThreadId(this.props.groupId)[0] ||\n      ({} as ChatMessage)\n    const oldestCreated = oldestChat.created || 0\n    const max = this.numberOfChatsPerLoadMore\n    const end = oldestCreated\n    const query = {\n      max,\n      end,\n    }\n    uc.getGroupChats(this.props.groupId, query)\n      .then(chats => {\n        chatStore.pushMessages(this.props.groupId, chats)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get more chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingMore: false })\n      })\n      .then(() => {\n        const id = this.props.groupId\n        const totalChatLoaded = chatStore.getMessagesByThreadId(id).length\n        if (totalChatLoaded < this.numberOfChatsPerLoadMore) {\n          chatStore.updateThreadConfig(id, true, {\n            allMessagesLoaded: true,\n          })\n        }\n      })\n  }\n\n  setEditingText = (editingText: string) => {\n    this.setState({\n      editingText,\n    })\n  }\n\n  submitting = false\n  submitEditingText = () => {\n    if (this.submitting) {\n      return\n    }\n    const txt = this.state.editingText.trim()\n    if (!txt) {\n      return\n    }\n    if (this.state.emojiTurnOn) {\n      this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n    }\n    this.submitting = true\n    uc.sendGroupChatText(this.props.groupId, txt)\n      .then(chat => {\n        chatStore.pushMessages(this.props.groupId, [chat as ChatMessage])\n        this.setState({ editingText: '' })\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to send the message`,\n          err,\n        })\n      })\n      .then(() => {\n        this.submitting = false\n      })\n  }\n  updateConfStatus = (conf_id: string, isClose: boolean) => {\n    const g = chatStore.getGroupById(conf_id)\n    const newItem = {\n      ...g,\n      webchat: {\n        ...g.webchat,\n        conf_status: isClose\n          ? Constants.CONF_STATUS_INACTIVE\n          : Constants.CONF_STATUS_INVITED,\n      },\n    } as ChatGroup\n    chatStore.upsertGroup(newItem)\n  }\n  leave = () => {\n    const conf_id = this.props.groupId\n    uc.leaveChatConference(conf_id, true)\n      .then(res => {\n        const isWebchat = chatStore.isWebchat(conf_id)\n        if (isWebchat) {\n          // leave webchat then close conference\n          // update conf_status\n          this.updateConfStatus(conf_id, res.closes)\n        } else {\n          chatStore.removeGroup(conf_id)\n        }\n        Nav().backToPageChatRecents()\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to leave the group`,\n          err,\n        })\n      })\n  }\n\n  invite = () => {\n    Nav().goToPageChatGroupInvite({ groupId: this.props.groupId })\n  }\n  call = (target: string, bVideoEnabled: boolean) => {\n    bVideoEnabled\n      ? getCallStore().startVideoCall(target)\n      : getCallStore().startCall(target)\n  }\n  callVoiceConference = () => {\n    let target = this.props.groupId\n    if (!target.startsWith('uc')) {\n      target = 'uc' + this.props.groupId\n    }\n    this.call(target, false)\n  }\n  callVideoConference = () => {\n    let target = this.props.groupId\n    if (!target.startsWith('uc')) {\n      target = 'uc' + this.props.groupId\n    }\n    this.call(target, true)\n  }\n\n  readFile = (file: { type: string; name: string; uri: string }) => {\n    const fileType = formatFileType(file.name)\n    this.setState({ blobFile: { url: file.uri, fileType } })\n  }\n\n  sendFile = (file: { type: string; name: string; uri: string }) => {\n    this.readFile(file)\n    const groupId = this.props.groupId\n    uc.sendFiles(groupId, file as any as Blob)\n      .then(res => this.onSendFileSuccess(res, file as any as Blob))\n      .catch(this.onSendFileFailure)\n  }\n  handleSaveBlobFileWeb = async (\n    data: Blob,\n    file: ChatFile,\n    chat: ChatMessage,\n  ) => {\n    const { groupId } = this.props\n    try {\n      const url = await saveBlobFile(\n        file.id,\n        file.topic_id,\n        file.fileType,\n        data,\n      )\n      Object.assign(file, { url })\n      chatStore.upsertFile(file)\n      chatStore.pushMessages(groupId, chat)\n    } catch (err) {\n      console.error('PageChatGroupDetail.handleSaveBlobFileWeb err', err)\n    }\n  }\n  onSendFileSuccess = (\n    res: { file: ChatFile; chat: ChatMessage },\n    file: Blob,\n  ) => {\n    const groupId = this.props.groupId\n    const { blobFile } = this.state\n    this.setState({ topic_id: res.file.topic_id })\n    Object.assign(res.file, blobFile, { save: 'success' })\n    if (Platform.OS === 'web') {\n      this.handleSaveBlobFileWeb(file, res.file as ChatFile, res.chat)\n    } else {\n      chatStore.upsertFile(res.file)\n      chatStore.pushMessages(groupId, res.chat)\n    }\n  }\n  onSendFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to send file`,\n      err,\n    })\n  }\n  acceptFile = (file: { id: string; name: string }) => {\n    uc.acceptFile(file.id)\n      .then(blob => this.onAcceptFileSuccess(blob as Blob, file))\n      .catch(this.onAcceptFileFailure)\n  }\n\n  onAcceptFileSuccess = (\n    blob: Blob,\n    file: {\n      id: string\n      name: string\n    },\n  ) => {\n    const type = ['PNG', 'JPG', 'JPEG', 'GIF']\n    const fileType = type.includes(\n      file.name.split('.').pop()?.toUpperCase() || '',\n    )\n      ? 'image'\n      : 'other'\n    const reader = new FileReader()\n    reader.onload = async event => {\n      const url = event.target?.result\n      const f = chatStore.getFileById(file.id)\n      if (!f) {\n        return\n      }\n      Object.assign(f, {\n        url,\n        fileType,\n      })\n    }\n\n    reader.readAsDataURL(blob)\n\n    saveBlob(blob, file.name)\n  }\n\n  onAcceptFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept file`,\n      err,\n    })\n  }\n  rejectFile = (file: { id: string }) => {\n    uc.rejectFile(file).catch(this.onRejectFileFailure)\n  }\n  onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\nconst css = StyleSheet.create({\n  PageChatGroupInvite: {},\n  PageChatGroupInvite_TextInput: {\n    padding: 10,\n    ...v.boxShadow,\n  },\n  PageChatGroupInvite_Outer: {\n    paddingTop: 5,\n    paddingHorizontal: 10,\n  },\n  PageChatGroupInvite_BtnSave: {\n    marginTop: 15,\n    padding: 10,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.colors.primary,\n  },\n  PageChatGroupInvite_BtnText: {\n    alignItems: 'center',\n    color: 'white',\n    fontSize: v.fontSizeSubTitle,\n  },\n  PageChatGroupInvite_GroupName: {\n    fontSize: v.fontSizeTitle,\n    padding: 5,\n  },\n  PageChatGroupInvite_Text: {\n    paddingTop: 15,\n    fontSize: v.fontSizeTitle,\n  },\n})\n\n@observer\nexport class PageChatGroupInvite extends Component<{\n  groupId: string\n}> {\n  state = {\n    selectedBuddy: {} as { [k: string]: boolean },\n  }\n\n  render() {\n    return (\n      <Layout onBack={this.back} title={intl`Inviting Group Member`}>\n        <View style={css.PageChatGroupInvite_Outer}>\n          <RnText style={css.PageChatGroupInvite_GroupName}>\n            {chatStore.getGroupById(this.props.groupId).name}\n          </RnText>\n          <RnTouchableOpacity\n            onPress={this.invite}\n            style={css.PageChatGroupInvite_BtnSave}\n          >\n            <RnText\n              style={css.PageChatGroupInvite_BtnText}\n            >{intl`Invite`}</RnText>\n          </RnTouchableOpacity>\n          <RnText style={css.PageChatGroupInvite_Text}>{intl`Members`}</RnText>\n        </View>\n        <Field isGroup />\n        {contactStore.ucUsers\n          .map(u => u.id)\n          .filter(this.isNotMember)\n          .map((id, i) => (\n            <RnTouchableOpacity key={i} onPress={() => this.toggleBuddy(id)}>\n              <UserItem\n                key={id}\n                {...this.resolveBuddy(id)}\n                selected={this.state.selectedBuddy[id]}\n              />\n            </RnTouchableOpacity>\n          ))}\n      </Layout>\n    )\n  }\n\n  isNotMember = (buddy: string) =>\n    !chatStore.getGroupById(this.props.groupId).members?.includes(buddy)\n  resolveBuddy = (buddy: string) => contactStore.getUcUserById(buddy)\n  toggleBuddy = (buddy: string) => {\n    let { selectedBuddy } = this.state\n    selectedBuddy = {\n      ...selectedBuddy,\n      [buddy]: !selectedBuddy[buddy],\n    }\n    this.setState({\n      selectedBuddy,\n    })\n  }\n\n  invite = () => {\n    const { selectedBuddy } = this.state\n    const members = Object.keys(selectedBuddy)\n    if (!members.length) {\n      RnAlert.error({\n        message: intlDebug`No buddy selected`,\n      })\n      return\n    }\n    uc.inviteChatGroupMembers(this.props.groupId, members)\n      .catch(this.onInviteFailure)\n      .then(this.back)\n  }\n  onInviteFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to invite group chat`,\n      err,\n    })\n  }\n  back = () => {\n    Nav().backToPageChatGroupDetail({ groupId: this.props.groupId })\n  }\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { orderBy, uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { UcMessageLog } from '../api/brekekejs'\nimport { Constants } from '../api/uc'\nimport { ListUsers } from '../components/ChatListUsers'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatGroup, ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore, UcUser } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { arrToMap } from '../utils/arrToMap'\nimport { filterTextOnly, formatChatContent } from '../utils/formatChatContent'\n\n@observer\nexport class PageChatRecents extends Component {\n  getLastChat = (id: string) => {\n    const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n    return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n  }\n  saveLastChatItem = async (\n    arr: {\n      id: string\n      name: string\n      text: string\n      type: number\n      group: boolean\n      unread: boolean\n      created: string\n    }[],\n  ) => {\n    // Not show other message content type different than normal text chat\n    const arr2 = [...arr].filter(c => c?.created || c?.group)\n    while (arr2.length > 20) {\n      arr2.pop()\n    }\n    const d = await getAuthStore().getCurrentDataAsync()\n    if (jsonStableStringify(arr2) !== jsonStableStringify(d.recentChats)) {\n      d.recentChats = arr2\n      accountStore.saveAccountsToLocalStorageDebounced()\n    }\n  }\n  handleGroupSelect = async (groupId: string) => {\n    chatStore.handleMoveToChatGroupDetail(groupId)\n  }\n\n  render() {\n    const webchatInactive = chatStore.groups.filter(\n      gr =>\n        gr.webchat && gr.webchat.conf_status !== Constants.CONF_STATUS_JOINED,\n    )\n\n    const groupIds = chatStore.groups.filter(gr => gr.jointed).map(gr => gr.id)\n\n    const threadIds = chatStore.threadIdsOrderedByRecent\n\n    const groupById = arrToMap(chatStore.groups, 'id', (g: ChatGroup) => g) as {\n      [k: string]: ChatGroup\n    }\n    const userById = arrToMap(contactStore.ucUsers, 'id', (u: UcUser) => u) as {\n      [k: string]: UcUser\n    }\n\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const recentFromStorage =\n      d?.recentChats.filter(\n        c => groupIds.indexOf(c.id) < 0 && threadIds.indexOf(c.id) < 0,\n      ) || []\n    type WithThreadId = {\n      threadId: string\n    }\n    type ChatFromStorage = typeof recentFromStorage[0] & WithThreadId\n    type ChatWithThreadId = ChatMessage & WithThreadId\n\n    const recentGroups = recentFromStorage.filter(\n      c => c.group,\n    ) as any as ChatWithThreadId[]\n    recentGroups.push(\n      ...groupIds.map(id => ({ ...this.getLastChat(id), threadId: id })),\n    )\n\n    const recentUsers = recentFromStorage.filter(\n      c => !c.group,\n    ) as any as ChatWithThreadId[]\n    recentUsers.push(\n      ...threadIds.map(id => ({ ...this.getLastChat(id), threadId: id })),\n    )\n\n    const fn = (group: boolean) => (c0: ChatWithThreadId) => {\n      const c = c0 as any as ChatFromStorage\n\n      const id = typeof c.group === 'boolean' ? c.id : c.threadId\n      const x = (group ? groupById : userById)[id] as {\n        name: string\n      }\n      const name: string = x?.name || c.name || ''\n      let unread = chatStore.getThreadConfig(id).isUnread\n      if (typeof unread !== 'boolean') {\n        unread = c.unread || false\n      }\n      // check webchat inactive\n      const isWebchat = chatStore.isWebchat(id)\n      const isWebchatJoined = chatStore.isWebchatJoined(id)\n      if (isWebchat && !isWebchatJoined) {\n        unread = true\n      }\n      const { text, isTextOnly } = formatChatContent(c)\n\n      return {\n        id,\n        name,\n        text,\n        type: isTextOnly ? 1 : c.type || (c as any as UcMessageLog).ctype,\n        group: !!group,\n        unread,\n        created: c.created,\n      }\n    }\n    let arr = [...recentGroups.map(fn(true)), ...recentUsers.map(fn(false))]\n\n    arr = filterTextOnly(arr)\n    arr = uniqBy(arr, 'id')\n    const arrMap = arr.reduce((m, c) => {\n      m[c.id] = true\n      return m\n    }, {} as { [k: string]: boolean })\n\n    filterTextOnly(d?.recentChats).forEach(c => {\n      if (!arrMap[c.id]) {\n        arr.push(c)\n      }\n    })\n\n    // don't display webchat\n    arr = arr.filter(c => !webchatInactive.some(gr => gr.id === c.id))\n    arr = orderBy(arr, ['created', 'name'])\n      // .filter(c => !!c.created && !c.group)\n      .reverse()\n\n    // when anyItem changes page will be render again => don't need timeout\n    this.saveLastChatItem(arr)\n\n    return (\n      <Layout\n        description={intl`UC recent active chat`}\n        dropdown={[\n          {\n            label: intl`Create group chat`,\n            onPress: Nav().goToPageChatGroupCreate,\n          },\n        ]}\n        menu='contact'\n        subMenu='chat'\n        title={intl`Chat`}\n      >\n        <Field isGroup label={intl`RECENT CHAT THREADS`} />\n        {!arr.length && (\n          <RnText center normal small warning style={{ marginTop: 5 }}>\n            {intl`There's no active chat thread`}\n          </RnText>\n        )}\n        <ListUsers\n          recents={arr}\n          groupById={groupById}\n          onGroupSelect={this.handleGroupSelect}\n          userById={userById}\n          onUserSelect={id => Nav().goToPageChatDetail({ buddy: id })}\n        />\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\n// import {intl} from '../stores/intl'\nimport { chatStore } from '../stores/chatStore'\nimport { getPartyName } from '../stores/contactStore'\nimport { formatDateTimeSemantic } from './chatConfig'\nimport { UserItem } from './ContactUserItem'\nimport { RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Unread: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nexport const ListUsers: FC<{\n  recents: {\n    id: string\n    name: string\n    group: boolean\n    text: string\n    unread: boolean\n    created: string\n  }[]\n  onGroupSelect: Function\n  onUserSelect: (id: string) => void\n  groupById: { [k: string]: object }\n  userById: { [k: string]: object }\n}> = observer(p => (\n  <>\n    {p.recents.map(({ id, name, group, text, unread, created }) => (\n      <RnTouchableOpacity\n        key={id}\n        onPress={() => (group ? p.onGroupSelect(id) : p.onUserSelect(id))} // TODO group\n        style={(unread || chatStore.getThreadConfig(id).isUnread) && css.Unread}\n      >\n        <UserItem\n          key={id}\n          name={name || getPartyName(id)}\n          {...(group ? p.groupById : p.userById)[id]}\n          lastMessage={text}\n          group={group}\n          isRecentChat\n          lastMessageDate={formatDateTimeSemantic(created)}\n        />\n      </RnTouchableOpacity>\n    ))}\n  </>\n))\n","import { FC } from 'react'\nimport { StyleSheet, ViewProps } from 'react-native'\n\nimport { RnCheckBox } from './RnCheckbox'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nconst css = StyleSheet.create({\n  SelectionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 5,\n  },\n  SelectionItem_Disabled: {\n    opacity: 0.5,\n  },\n  SelectionItem_Title: {\n    marginLeft: 12,\n  },\n})\n\nexport const SelectionItem: FC<\n  ViewProps & {\n    isSelected: boolean\n    onPress(): void\n    title: string\n    disabled?: boolean\n  }\n> = ({ isSelected, title, onPress, disabled = false, style, ...p }) => (\n  <RnTouchableOpacity\n    {...p}\n    style={[css.SelectionItem, disabled && css.SelectionItem_Disabled, style]}\n    onPress={() => {\n      if (!disabled) {\n        onPress()\n      }\n    }}\n  >\n    <RnCheckBox\n      isSelected={isSelected}\n      onPress={() => {\n        if (!disabled) {\n          onPress()\n        }\n      }}\n      disabled={disabled}\n    />\n    <RnText style={css.SelectionItem_Title}>{title}</RnText>\n  </RnTouchableOpacity>\n)\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { userStore } from '../stores/userStore'\nimport { UserItem } from './ContactUserItem'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\ntype ContactListProps = {\n  data: UcBuddy[]\n}\n\nexport const ContactList: FC<ContactListProps> = observer(p => (\n  <View>\n    <FlatList\n      data={p.data}\n      renderItem={({ item }: { item: UcBuddy }) => <RenderItem item={item} />}\n      keyExtractor={item => item.user_id}\n    />\n  </View>\n))\n\nconst RenderItem = observer(({ item }: { item: UcBuddy }) => {\n  return (\n    <View key={item.user_id}>\n      <RnTouchableOpacity\n        onPress={() => userStore.selectUserId(item.user_id)}\n        disabled={userStore.isSelectedAddAllUser}\n      >\n        <UserItem\n          id={item.user_id}\n          name={item.name || item.user_id}\n          avatar={item.profile_image_url}\n          disabled={userStore.isSelectedAddAllUser}\n          isSelected={\n            userStore.isSelectedAddAllUser ||\n            userStore.selectedUserIds[item.user_id]\n          }\n          onSelect={() => userStore.selectUserId(item.user_id)}\n          isSelection\n        />\n      </RnTouchableOpacity>\n    </View>\n  )\n})\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { ActivityIndicator, FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { css } from './PageContactEdit'\n\n@observer\nexport class PageContactGroupCreate extends Component {\n  @observable selectedUserItems: { [k: string]: UcBuddy } = {}\n\n  state = {\n    name: '',\n    didMount: false,\n  }\n  componentDidMount() {\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageContactEdit}\n        fabOnNext={this.create}\n        fabOnNextText={intl`CREATE`}\n        onBack={Nav().backToPageContactEdit}\n        title={intl`New Group`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          onValueChange={this.setName}\n          value={this.state.name}\n        />\n        <Field isGroup label={intl`Members`} />\n        {!this.state.didMount ? (\n          <ActivityIndicator style={css.loadingIcon} size='large' />\n        ) : (\n          <FlatList\n            data={userStore.dataListAllUser}\n            renderItem={({ item, index }: { item: UcBuddy; index: number }) => (\n              <RenderItem\n                item={item}\n                index={index}\n                selectedUsers={this.selectedUserItems}\n              />\n            )}\n            keyExtractor={item => item.user_id}\n          />\n        )}\n      </Layout>\n    )\n  }\n\n  setName = (name: string) =>\n    this.setState({\n      name,\n    })\n\n  create = () => {\n    const { name } = this.state\n\n    if (!name.trim()) {\n      RnAlert.error({\n        message: intlDebug`Group name is required`,\n      })\n      return\n    } else if (userStore.groups.some(group => group.name === name.trim())) {\n      RnAlert.error({\n        message: intlDebug`Group name is existed`,\n      })\n      return\n    }\n    // const selectedUsers = userStore.dataListAllUser.filter(\n    //   u => this.selectedUsers[u.user_id],\n    // )\n    userStore.addGroup(name, this.selectedUserItems)\n    RnDropdown.setShouldUpdatePosition(true)\n    Nav().backToPageContactEdit()\n  }\n}\n\nconst RenderItem = observer(\n  ({\n    item,\n    index,\n    selectedUsers,\n  }: {\n    item: UcBuddy\n    index: number\n    selectedUsers: { [k: string]: UcBuddy }\n  }) => {\n    const selectUser = (i: UcBuddy) => {\n      if (selectedUsers[i.user_id]) {\n        delete selectedUsers[item.user_id]\n      } else {\n        selectedUsers[i.user_id] = i\n      }\n    }\n    return (\n      <View key={`PageContactGroupCreate-${item.user_id}-${index}`}>\n        <RnTouchableOpacity onPress={() => selectUser(item)}>\n          <UserItem\n            id={item.user_id}\n            name={item.name || item.user_id}\n            avatar={item.profile_image_url}\n            isSelected={!!selectedUsers[item.user_id]}\n            onSelect={() => selectUser(item)}\n            isSelection\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  },\n)\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { ActivityIndicator, FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { css } from './PageContactEdit'\n\n@observer\nexport class PageContactGroupEdit extends Component<{\n  groupName: string\n  listItem: UcBuddy[]\n}> {\n  @observable selectedUserItems: { [k: string]: UcBuddy } = {}\n  state = {\n    didMount: false,\n  }\n  componentDidMount() {\n    this.props.listItem.forEach(u => {\n      if (userStore.selectedUserIds[u.user_id]) {\n        this.selectedUserItems[u.user_id] = u\n      }\n    })\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageContactEdit}\n        fabOnNext={this.create}\n        fabOnNextText={intl`SAVE`}\n        onBack={Nav().backToPageContactEdit}\n        title={intl`Add/Remove Contact`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          value={this.props.groupName}\n          disabled={true}\n        />\n        <Field isGroup label={intl`Members`} disabled={true} />\n        {!this.state.didMount ? (\n          <ActivityIndicator size='large' />\n        ) : (\n          <FlatList\n            data={userStore.dataListAllUser}\n            renderItem={({ item, index }: { item: UcBuddy; index: number }) => (\n              <RenderItem\n                item={item}\n                index={index}\n                selectedUsers={this.selectedUserItems}\n              />\n            )}\n            keyExtractor={item => item.user_id}\n          />\n        )}\n      </Layout>\n    )\n  }\n\n  selectUser = (item: UcBuddy) => {\n    if (this.selectedUserItems[item.user_id]) {\n      delete this.selectedUserItems[item.user_id]\n    } else {\n      this.selectedUserItems[item.user_id] = item\n    }\n  }\n\n  create = () => {\n    const listItemRemoved = this.props.listItem.filter(\n      itm => !this.selectedUserItems[itm.user_id],\n    )\n    userStore.editGroup(\n      this.props.groupName,\n      listItemRemoved,\n      this.selectedUserItems,\n    )\n    RnDropdown.setShouldUpdatePosition(true)\n    Nav().backToPageContactEdit()\n  }\n}\n\nconst RenderItem = observer(\n  ({\n    item,\n    index,\n    selectedUsers,\n  }: {\n    item: UcBuddy\n    index: number\n    selectedUsers: { [k: string]: UcBuddy }\n  }) => {\n    const selectUser = (i: UcBuddy) => {\n      if (selectedUsers[item.user_id]) {\n        delete selectedUsers[item.user_id]\n      } else {\n        selectedUsers[item.user_id] = item\n      }\n    }\n    return (\n      <View key={`PageContactGroupEdit-${item.user_id}-${index}`}>\n        <RnTouchableOpacity\n          style={css.loadingIcon}\n          onPress={() => selectUser(item)}\n        >\n          <UserItem\n            id={item.user_id}\n            name={item.name || item.user_id}\n            avatar={item.profile_image_url}\n            isSelected={!!selectedUsers[item.user_id]}\n            onSelect={() => selectUser(item)}\n            isSelection\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  },\n)\n","import { debounce, isEmpty, orderBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component, Fragment } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { pbx } from '../api/pbx'\nimport {\n  mdiBriefcase,\n  mdiCellphone,\n  mdiHome,\n  mdiInformation,\n  mdiMagnify,\n  mdiPhone,\n} from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnPicker } from '../stores/RnPicker'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nconst css = StyleSheet.create({\n  Loading: {\n    marginTop: 20,\n  },\n})\n\n@observer\nexport class PageContactPhonebook extends Component {\n  componentDidMount() {\n    contactStore.getManageItems()\n    const id = BackgroundTimer.setInterval(() => {\n      if (!pbx.client) {\n        return\n      }\n      contactStore.loadContactsFirstTime()\n      BackgroundTimer.clearInterval(id)\n    }, 1000)\n  }\n  componentWillUnmount() {\n    if (contactStore.isDeleteState) {\n      contactStore.isDeleteState = false\n      contactStore.selectedContactIds = {}\n    }\n  }\n  update = (id: string) => {\n    const contact = contactStore.getPhonebookById(id)\n    if (contact?.loaded) {\n      Nav().goToPagePhonebookUpdate({\n        contact,\n      })\n    } else {\n      this.loadContactDetail(id, (ct: Phonebook) => {\n        Nav().goToPagePhonebookUpdate({\n          contact: ct,\n        })\n      })\n    }\n  }\n\n  loadContactDetail = (id: string, cb: Function) => {\n    pbx\n      .getContact(id)\n      .then(ct => {\n        if (!ct) {\n          return\n        }\n        const x = {\n          ...ct,\n          loaded: true,\n        }\n        contactStore.upsertPhonebook(x as Phonebook)\n        cb(x)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to load contact detail for ${id}`,\n          err,\n        })\n      })\n  }\n\n  callRequest = (number: string, u: Phonebook) => {\n    if (number !== '') {\n      getCallStore().startCall(number.replace(/\\s+/g, ''))\n    } else {\n      this.update(u.id)\n      RnAlert.error({\n        message: intlDebug`This contact doesn't have any phone number`,\n      })\n    }\n  }\n\n  onIcon0 = (u0: Phonebook) => {\n    if (!u0) {\n      return\n    }\n\n    const onIcon0 = (u: Phonebook) => {\n      if (!u) {\n        return\n      }\n      if (!u.info.$tel_work && !u.info.$tel_home && !u.info.$tel_mobile) {\n        this.callRequest('', u)\n        return\n      }\n      const numbers: {\n        key: string\n        value: string\n        icon: string\n      }[] = []\n      if (u.info.$tel_work) {\n        numbers.push({\n          key: 'workNumber',\n          value: u.info.$tel_work,\n          icon: mdiBriefcase,\n        })\n      }\n      if (u.info.$tel_mobile) {\n        numbers.push({\n          key: 'cellNumber',\n          value: u.info.$tel_mobile,\n          icon: mdiCellphone,\n        })\n      }\n      if (u.info.$tel_home) {\n        numbers.push({\n          key: 'homeNumber',\n          value: u.info.$tel_home,\n          icon: mdiHome,\n        })\n      }\n      if (numbers.length === 1) {\n        this.callRequest(numbers[0].value, u)\n        return\n      }\n      RnPicker.open({\n        options: numbers.map(i => ({\n          key: i.value,\n          label: i.value,\n          icon: i.icon,\n        })),\n        onSelect: (e: string) => this.callRequest(e, u),\n      })\n    }\n    if (u0.loaded) {\n      onIcon0(u0)\n      return\n    }\n    this.loadContactDetail(u0.id, () => {\n      onIcon0(u0)\n    })\n  }\n\n  updateSearchText = (v: string) => {\n    contactStore.phonebookSearchTerm = v\n    this.loadContactsDebounced()\n    contactStore.selectedContactIds = {}\n  }\n  loadContactsDebounced = debounce(() => {\n    contactStore.offset = 0\n    contactStore.loadContacts()\n  }, 500)\n\n  onDelete = async () => {\n    if (isEmpty(contactStore.selectedContactIds)) {\n      return\n    }\n    try {\n      const result = await pbx.deleteContact(\n        Object.keys(contactStore.selectedContactIds),\n      )\n      if (result?.succeeded?.length) {\n        contactStore.removeContacts(result.succeeded)\n      }\n      contactStore.selectedContactIds = {}\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to delete contact`,\n        err: err as Error,\n      })\n    }\n  }\n  onCancel = () => {\n    contactStore.isDeleteState = false\n    contactStore.selectedContactIds = {}\n  }\n  render() {\n    const phonebooks = contactStore.phoneBooks\n    const map = {} as { [k: string]: Phonebook[] }\n    phonebooks.forEach(u => {\n      let c0 = u?.display_name?.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n\n    let groups = Object.keys(map).map(k => ({\n      key: k,\n      phonebooks: map[k],\n    }))\n\n    groups = orderBy(groups, 'key')\n    groups.forEach(gr => {\n      gr.phonebooks = orderBy(gr.phonebooks, 'name')\n    })\n    const optionDelete = [\n      {\n        label:\n          intl`Delete ` +\n          `(${Object.keys(contactStore.selectedContactIds).length})`,\n        onPress: this.onDelete,\n      },\n      {\n        label: intl`Cancel`,\n        onPress: this.onCancel,\n      },\n    ]\n    const options = [\n      {\n        label: intl`Create new contact`,\n        onPress: Nav().goToPagePhonebookCreate,\n      },\n      {\n        label: intl`Delete contacts`,\n        onPress: () => {\n          contactStore.isDeleteState = true\n        },\n      },\n      {\n        label: intl`Reload`,\n        onPress: contactStore.loadContacts,\n      },\n    ]\n\n    return (\n      <Layout\n        description={intl`Your phonebook contacts`}\n        dropdown={contactStore.isDeleteState ? optionDelete : options}\n        menu='contact'\n        subMenu='phonebook'\n        title={intl`Phonebook`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH CONTACTS`}\n          onValueChange={this.updateSearchText}\n          value={contactStore.phonebookSearchTerm}\n        />\n        <View>\n          {groups.map(gr => (\n            <Fragment key={gr.key}>\n              <Field isGroup label={gr.key} />\n              {gr.phonebooks.map((u, i) =>\n                contactStore.isDeleteState ? (\n                  <RnTouchableOpacity\n                    onPress={() => contactStore.selectContactId(u.id)}\n                    disabled={u.shared}\n                  >\n                    <UserItem\n                      key={i}\n                      name={u?.display_name || intl`<Unnamed>`}\n                      isSelection\n                      isSelected={contactStore.selectedContactIds[u.id]}\n                      disabled={u.shared}\n                      onSelect={() => contactStore.selectContactId(u.id)}\n                    />\n                  </RnTouchableOpacity>\n                ) : (\n                  <UserItem\n                    iconFuncs={[() => this.onIcon0(u), () => this.update(u.id)]}\n                    icons={[mdiPhone, mdiInformation]}\n                    key={i}\n                    phonebook={`${u.phonebook}${u.shared ? '' : ''}`}\n                    name={`${u?.display_name || intl`<Unnamed>`}`}\n                  />\n                ),\n              )}\n            </Fragment>\n          ))}\n        </View>\n        {contactStore.loading ? (\n          <RnText\n            style={css.Loading}\n            warning\n            small\n            normal\n            center\n          >{intl`Loading...`}</RnText>\n        ) : contactStore.hasLoadmore ? (\n          <RnTouchableOpacity onPress={contactStore.loadMoreContacts}>\n            <RnText\n              style={css.Loading}\n              primary\n              small\n              normal\n              center\n            >{intl`Load more contacts`}</RnText>\n          </RnTouchableOpacity>\n        ) : null}\n      </Layout>\n    )\n  }\n}\n","import { orderBy, uniq } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { SectionList } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiVideo } from '../assets/icons'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { userStore } from '../stores/userStore'\nimport { DelayFlag } from '../utils/DelayFlag'\nimport { filterTextOnly } from '../utils/formatChatContent'\n\n@observer\nexport class PageContactUsers extends Component {\n  displayOfflineUsers = new DelayFlag()\n\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n\n  getMatchUserIds() {\n    const userIds = uniq([\n      ...contactStore.pbxUsers.map(u => u.id),\n      ...contactStore.ucUsers.map(u => u.id),\n    ])\n    return userIds.filter(this.isMatchUser)\n  }\n  resolveUser = (id: string) => {\n    const pbxUser = contactStore.getPbxUserById(id) || {}\n    const ucUser = contactStore.getUcUserById(id) || {}\n    const u = {\n      ...pbxUser,\n      ...ucUser,\n    }\n    return u\n  }\n  isMatchUser = (id: string) => {\n    if (!id) {\n      return false\n    }\n    let userId = id\n    let pbxUserName: string\n    const pbxUser = contactStore.getPbxUserById(id)\n    if (pbxUser) {\n      pbxUserName = pbxUser.name\n    } else {\n      pbxUserName = ''\n    }\n    let ucUserName: string\n    const ucUser = contactStore.getUcUserById(id)\n    if (ucUser) {\n      ucUserName = ucUser.name\n    } else {\n      ucUserName = ''\n    }\n    //\n    userId = userId.toLowerCase()\n    pbxUserName = pbxUserName.toLowerCase()\n    ucUserName = ucUserName.toLowerCase()\n    const txt = contactStore.usersSearchTerm.toLowerCase()\n    return (\n      userId.includes(txt) ||\n      pbxUserName.includes(txt) ||\n      ucUserName.includes(txt)\n    )\n  }\n\n  componentDidUpdate() {\n    const cp = getAuthStore().getCurrentAccount()\n    if (this.displayOfflineUsers.enabled !== cp?.displayOfflineUsers) {\n      this.displayOfflineUsers.setEnabled(cp?.displayOfflineUsers)\n    }\n  }\n  getDescription = (isUserSelectionMode: boolean) => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return ''\n    }\n    if (!isUserSelectionMode) {\n      const allUsers = this.getMatchUserIds().map(this.resolveUser)\n      const onlineUsers = allUsers.filter(\n        i => i.status && i.status !== 'offline',\n      )\n      let desc = intl`Users, ${allUsers.length} total`\n      if (allUsers.length && cp.ucEnabled) {\n        desc = desc.replace(\n          intl`${allUsers.length} total`,\n          intl`${onlineUsers.length}/${allUsers.length} online`,\n        )\n      }\n      return desc\n    } else {\n      const searchTxt = contactStore.usersSearchTerm.toLowerCase()\n      const isShowOfflineUser =\n        !cp.ucEnabled || this.displayOfflineUsers.enabled\n      const { totalContact = 0, totalOnlineContact = 0 } = userStore.filterUser(\n        searchTxt,\n        isShowOfflineUser,\n      )\n      let desc = intl`Users, ${totalContact} total`\n      if (cp.ucEnabled) {\n        desc = desc.replace(\n          intl`${totalContact} total`,\n          intl`${totalOnlineContact}/${totalContact} online`,\n        )\n      }\n      return desc\n    }\n  }\n  renderUserSelectionMode = () => {\n    const searchTxt = contactStore.usersSearchTerm.toLowerCase()\n    const isShowOfflineUser =\n      !getAuthStore().getCurrentAccount()?.ucEnabled ||\n      this.displayOfflineUsers.enabled\n    const { displayUsers } = userStore.filterUser(searchTxt, isShowOfflineUser)\n    return <ContactSectionList sectionListData={displayUsers} />\n  }\n  renderAllUserMode = () => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const allUsers = this.getMatchUserIds().map(this.resolveUser)\n    const onlineUsers = allUsers.filter(i => i.status && i.status !== 'offline')\n    type User = typeof allUsers[0]\n    const displayUsers =\n      !this.displayOfflineUsers.enabled && cp.ucEnabled ? onlineUsers : allUsers\n    const map = {} as { [k: string]: User[] }\n    displayUsers.forEach(u => {\n      u.name = u.name || u.id || ''\n      let c0 = u.name.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n    let groups = Object.keys(map).map(k => ({\n      title: k,\n      data: map[k],\n    }))\n    groups = orderBy(groups, 'title')\n    groups.forEach(gr => {\n      gr.data = orderBy(gr.data, 'name')\n    })\n    return (\n      <SectionList\n        sections={groups}\n        keyExtractor={(item, index) => item.id}\n        renderItem={({\n          item,\n          index,\n        }: {\n          item: ItemUser['item']\n          index: number\n        }) => <RenderItemUser item={item} index={index} />}\n        renderSectionHeader={({ section: { title } }) => (\n          // TODO move to a new component with observer\n          <Field isGroup label={title} />\n        )}\n      />\n    )\n  }\n\n  render() {\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const isUserSelectionMode = s.isBigMode() || !cp.pbxLocalAllUsers\n    const description = this.getDescription(isUserSelectionMode)\n    return (\n      <Layout\n        description={description}\n        dropdown={[\n          {\n            label: intl`Edit buddy list`,\n            onPress: Nav().goToPageContactEdit,\n          },\n        ]}\n        menu='contact'\n        subMenu='users'\n        title={intl`Users`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH FOR USERS`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            contactStore.usersSearchTerm = v\n          }}\n          value={contactStore.usersSearchTerm}\n        />\n        {getAuthStore().getCurrentAccount()?.ucEnabled && (\n          <Field\n            label={intl`SHOW OFFLINE USERS`}\n            onValueChange={(v: boolean) => {\n              accountStore.upsertAccount({\n                id: getAuthStore().signedInId,\n                displayOfflineUsers: v,\n              })\n            }}\n            type='Switch'\n            value={cp.displayOfflineUsers}\n          />\n        )}\n        {isUserSelectionMode\n          ? this.renderUserSelectionMode()\n          : this.renderAllUserMode()}\n      </Layout>\n    )\n  }\n}\n\nconst getLastMessageChat = (id: string) => {\n  const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n  return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n}\ntype ItemUser = {\n  item: {\n    id: string\n  }\n  index: number\n}\nconst RenderItemUser = observer(({ item, index }: ItemUser) => (\n  // TODO move to a new component with observer\n  <RnTouchableOpacity\n    key={index}\n    onPress={\n      getAuthStore().getCurrentAccount()?.ucEnabled\n        ? () => Nav().goToPageChatDetail({ buddy: item.id })\n        : undefined\n    }\n  >\n    <UserItem\n      iconFuncs={[\n        () => getCallStore().startVideoCall(item.id),\n        () => getCallStore().startCall(item.id),\n      ]}\n      icons={[mdiVideo, mdiPhone]}\n      lastMessage={getLastMessageChat(item.id)?.text}\n      {...item}\n    />\n  </RnTouchableOpacity>\n))\n","import { action, observable } from 'mobx'\n\nimport { BackgroundTimer } from './BackgroundTimer'\n\nexport class DelayFlag {\n  @observable enabled = false\n  timeoutId = 0\n\n  setEnabled = (enabled?: boolean) => {\n    if (this.timeoutId) {\n      BackgroundTimer.clearTimeout(this.timeoutId)\n    }\n    this.timeoutId = BackgroundTimer.setTimeout(\n      action(() => {\n        this.enabled = !!enabled\n        this.timeoutId = 0\n      }),\n      300,\n    )\n  }\n}\n","import { isEmpty } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { pbx } from '../api/pbx'\nimport { ContactsCreateForm } from '../components/ContactCreateForm'\nimport { getAuthStore } from '../stores/authStore'\nimport { ContactInfo, contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PagePhonebookCreate extends Component<{\n  phonebook?: string\n}> {\n  render() {\n    return (\n      <ContactsCreateForm\n        phonebook={this.props.phonebook}\n        onBack={Nav().backToPageContactPhonebook}\n        onSave={(p: ContactInfo) => {\n          if (pbx.client && getAuthStore().pbxState === 'success') {\n            this.save(p)\n          }\n        }}\n        title={intl`New Phonebook`}\n      />\n    )\n  }\n\n  save = (p: ContactInfo) => {\n    if (isEmpty(p)) {\n      return\n    }\n    const phonebook = p.phonebook\n    delete p.phonebook\n    const contact = {\n      display_name: contactStore.getManagerContact(p.$lang)?.toDisplayName(p),\n      phonebook,\n      shared: false, // admin can't login on brekeke phone => share = false\n      info: p,\n    } as Phonebook\n\n    pbx\n      .setContact(contact)\n      .then(val => {\n        if (!val) {\n          return\n        }\n        contactStore.upsertPhonebook(\n          Object.assign(contact, {\n            id: val.aid,\n          }),\n        )\n      })\n      .then(this.onSaveSuccess)\n      .catch(this.onSaveFailure)\n  }\n  onSaveSuccess = () => {\n    Nav().goToPageContactPhonebook()\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save the contact`,\n      err,\n    })\n  }\n}\n","import { isEmpty } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { pbx } from '../api/pbx'\nimport { ContactsCreateForm } from '../components/ContactCreateForm'\nimport { getAuthStore } from '../stores/authStore'\nimport { ContactInfo, contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PagePhonebookUpdate extends Component<{\n  contact: Phonebook\n}> {\n  render() {\n    return (\n      <ContactsCreateForm\n        onBack={Nav().backToPageContactPhonebook}\n        onSave={(p: ContactInfo, hasUnsavedChanges: boolean) => {\n          if (pbx.client && getAuthStore().pbxState === 'success') {\n            this.save(p, hasUnsavedChanges)\n          }\n        }}\n        title={intl`Update Phonebook`}\n        updatingPhonebook={this.props.contact}\n      />\n    )\n  }\n\n  save = (p: ContactInfo, hasUnsavedChanges: boolean) => {\n    if (!hasUnsavedChanges) {\n      Nav().goToPageContactPhonebook()\n      return\n    }\n    if (isEmpty(p)) {\n      return\n    }\n    const phonebook = p.phonebook\n    delete p.phonebook\n\n    const contactUpdate = {\n      id: this.props.contact.id,\n      display_name: contactStore.getManagerContact(p.$lang)?.toDisplayName(p),\n      phonebook,\n      shared: !!this.props.contact?.shared,\n      info: { ...p },\n    } as Phonebook\n    pbx\n      .setContact(contactUpdate)\n      .then(() => this.onSaveSuccess(contactUpdate))\n      .catch(this.onSaveFailure)\n  }\n  onSaveSuccess = (phonebook: Phonebook) => {\n    Nav().goToPageContactPhonebook()\n    contactStore.upsertPhonebook(phonebook)\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save the contact`,\n      err,\n    })\n  }\n}\n","import { observer } from 'mobx-react'\n\nimport { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nexport const PageSettingsCurrentAccount = observer(() => (\n  <AccountCreateForm\n    footerLogout\n    onBack={Nav().backToPageContactUsers}\n    onSave={(p: Account, hasUnsavedChanges: boolean) => {\n      if (!hasUnsavedChanges) {\n        Nav().backToPageContactPhonebook()\n      }\n      RnAlert.prompt({\n        title: intl`Save Account`,\n        message: intl`Do you want to update your account?\\nYou'll need to sign out and then sign in again.`,\n        onConfirm: () => {\n          accountStore.upsertAccount(p)\n          Nav().goToPageAccountSignIn()\n          BackgroundTimer.setTimeout(() => getAuthStore().signIn(p), 300)\n        },\n        confirmText: intl`SAVE`,\n      })\n    }}\n    title={intl`Current Account`}\n    updating={getAuthStore().getCurrentAccount()}\n  />\n))\n","import filesize from 'filesize'\nimport { observer } from 'mobx-react'\nimport moment from 'moment'\nimport { Component } from 'react'\nimport { Platform, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { currentVersion } from '../components/variables'\nimport { compareSemVer, debugStore } from '../stores/debugStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nconst css = StyleSheet.create({\n  BtnIcon: {\n    transform: [\n      {\n        rotate: '180deg',\n      },\n    ],\n  },\n  Text: {\n    paddingHorizontal: 20,\n  },\n})\n\n@observer\nexport class PageSettingsDebug extends Component {\n  render() {\n    const isUpdateAvailable =\n      Platform.OS !== 'web' &&\n      compareSemVer(debugStore.remoteVersion, currentVersion) > 0\n    return (\n      <Layout\n        description={intl`App information and debugging`}\n        dropdown={\n          Platform.OS !== 'web'\n            ? [\n                {\n                  label: intl`Clear all log files`,\n                  onPress: debugStore.clearLogFiles,\n                  danger: true,\n                },\n                {\n                  label: intl`Manually check for update`,\n                  onPress: debugStore.checkForUpdate,\n                },\n              ]\n            : undefined\n        }\n        onBack={Nav().backToPageAccountSignIn}\n        title={intl`Debug`}\n      >\n        {Platform.OS !== 'web' && (\n          <>\n            <Field isGroup label={intl`DEBUG LOG`} />\n            <Field\n              label={intl`CAPTURE ALL DEBUG LOG`}\n              onValueChange={debugStore.toggleCaptureDebugLog}\n              type='Switch'\n              value={debugStore.captureDebugLog}\n            />\n            <Field\n              createBtnIcon={mdiKeyboardBackspace}\n              createBtnIconStyle={css.BtnIcon}\n              label={intl`OPEN DEBUG LOG`}\n              onCreateBtnPress={debugStore.openLogFile}\n              onTouchPress={debugStore.openLogFile}\n              value={filesize(debugStore.getLogSize(), { round: 0 })}\n            />\n\n            <Field hasMargin isGroup label={intl`UPDATE`} />\n            <Field\n              createBtnIcon={mdiKeyboardBackspace}\n              createBtnIconStyle={css.BtnIcon}\n              label={intl`UPDATE`}\n              onCreateBtnPress={debugStore.openInStore}\n              onTouchPress={debugStore.openInStore}\n              value={intl`Open Brekeke Phone on store`}\n            />\n            <RnText\n              normal\n              primary={!isUpdateAvailable}\n              small\n              style={css.Text}\n              warning={isUpdateAvailable}\n            >\n              {intl`Current version: ${currentVersion}`}\n              {'\\n'}\n              {debugStore.isCheckingForUpdate\n                ? intl`Checking for update...`\n                : isUpdateAvailable\n                ? intl`A new version is available: ${debugStore.remoteVersion}`\n                : intl`Brekeke Phone is up-to-date, checked ${moment(\n                    debugStore.remoteVersionLastCheck,\n                  ).fromNow()}`}\n            </RnText>\n          </>\n        )}\n        {Platform.OS === 'web' && (\n          <>\n            <RnText normal primary small style={css.Text}>\n              {intl`Current version: ${currentVersion}`}\n            </RnText>\n            <RnText normal warning small style={css.Text}>\n              {intl`You are running an in-browser version of Web Phone`}\n            </RnText>\n          </>\n        )}\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { Platform } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCheck, mdiTranslate } from '../assets/icons'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { getAuthStore } from '../stores/authStore'\nimport { debugStore } from '../stores/debugStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PageSettingsOther extends Component {\n  state = {\n    status: '',\n    statusText: '',\n  }\n  componentDidMount() {\n    const me = uc.me()\n    this.setState({\n      status: me.status,\n      statusText: me.statusText,\n    })\n  }\n  setStatusText = (statusText: string) => {\n    this.setState({ statusText })\n  }\n  submitStatusText = () => {\n    this.setStatus(this.state.status, this.state.statusText)\n  }\n  submitStatus = (status: string) => {\n    this.setStatus(status, this.state.statusText)\n  }\n  setStatus = (status: string, statusText: string) => {\n    uc.setStatus(status, statusText)\n      .then(() => {\n        const me = uc.me()\n        this.setState({\n          status: me.status,\n          statusText: me.statusText,\n        })\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to change UC status`,\n          err,\n        })\n      })\n  }\n  render() {\n    const as = getAuthStore()\n    const cp = as.getCurrentAccount()\n    return (\n      <Layout\n        description={intl`Other settings for PBX/UC`}\n        dropdown={[\n          ...(as.isConnFailure()\n            ? [\n                {\n                  label: intl`Reconnect to server`,\n                  onPress: as.resetFailureStateIncludeUcLoginFromAnotherPlace,\n                },\n              ]\n            : []),\n          ...(Platform.OS !== 'web'\n            ? [\n                {\n                  label: intl`Open debug log`,\n                  onPress: debugStore.openLogFile,\n                },\n              ]\n            : []),\n          {\n            label: intl`Logout`,\n            onPress: as.signOut,\n            danger: true,\n          },\n        ]}\n        menu='settings'\n        subMenu='other'\n        title={intl`Other Settings`}\n      >\n        <Field isGroup label={intl`LOCALIZATION`} />\n        <Field\n          icon={mdiTranslate}\n          label={intl`LANGUAGE`}\n          onTouchPress={intlStore.selectLocale}\n          value={intlStore.locale}\n          valueRender={() => intlStore.getLocaleName()}\n        />\n        {cp?.ucEnabled && (\n          <>\n            <Field isGroup label='UC' />\n            <Field\n              disabled={!cp.ucEnabled}\n              label={intl`STATUS`}\n              onValueChange={this.submitStatus}\n              options={[\n                { key: 'online', label: intl`Online` },\n                { key: 'offline', label: intl`Invisible` },\n                { key: 'busy', label: intl`Busy` },\n              ]}\n              type='RnPicker'\n              value={this.state.status}\n            />\n            <Field\n              createBtnIcon={mdiCheck}\n              disabled={!cp.ucEnabled}\n              label={intl`STATUS NOTE`}\n              onCreateBtnPress={this.submitStatusText}\n              onSubmitEditing={this.submitStatusText}\n              onValueChange={this.setStatusText}\n              value={this.state.statusText}\n            />\n          </>\n        )}\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { ListWebchats } from '../components/ChatListWebchats'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { chatStore } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\n@observer\nexport class PageWebChat extends Component {\n  render() {\n    const arr = chatStore.groups.filter(group => group.webchat)\n    return (\n      <Layout\n        description={intl`UC recent active chat`}\n        dropdown={[\n          {\n            label: intl`Create group chat`,\n            onPress: Nav().goToPageChatGroupCreate,\n          },\n        ]}\n        menu='contact'\n        subMenu='webchat'\n        title={intl`WebChat`}\n      >\n        <Field isGroup label={intl`WEBCHAT THREADS`} />\n        {!arr.length && (\n          <RnText center normal small warning style={{ marginTop: 5 }}>\n            {intl`There's no active chat thread`}\n          </RnText>\n        )}\n        <ListWebchats datas={arr} />\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\n\nimport { ChatGroup } from '../stores/chatStore'\nimport { WebchatItem } from './WebchatItem'\n\nexport const ListWebchats: FC<{\n  datas: ChatGroup[]\n}> = observer(p => (\n  <>\n    {p.datas.map(\n      (item: ChatGroup) =>\n        item.webchat && <WebchatItem key={item.id} data={item.webchat} />,\n    )}\n  </>\n))\n","import { observer } from 'mobx-react'\nimport { FC, useCallback } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport { mdiClose } from '../assets/icons'\nimport { chatStore } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Row: {\n    flexDirection: 'row',\n    paddingHorizontal: 5,\n    alignItems: 'center',\n    borderBottomWidth: 0.5,\n    borderBottomColor: v.borderBg,\n  },\n  Column: {\n    // flex:1,\n    padding: 5,\n  },\n  BtnText: {\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    minWidth: 80,\n    backgroundColor: v.colors.primary,\n    borderRadius: 4,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginVertical: 5,\n  },\n  Text: {\n    paddingLeft: 10,\n    paddingHorizontal: 5,\n    paddingVertical: 10,\n    textAlign: 'left',\n    minWidth: 80,\n  },\n  TextMessage: {\n    flex: 1,\n  },\n  icon: {\n    padding: 10,\n  },\n  bgUnread: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nexport const WebchatItem: FC<{\n  data: Conference\n}> = observer(({ data }) => {\n  // const data = p.webchat\n  // CONF_STATUS_INACTIVE: 0 => disable all , show close\n  // CONF_STATUS_INVITED: 1 => enabled join\n  // CONF_STATUS_JOINED: 2 => enable show\n  // CONF_STATUS_INVITED_WEBCHAT: 5 => enabled answer\n  const messages = chatStore.getMessagesByThreadId(data.conf_id)\n  const isEnabledAnswer =\n    data.conf_status === Constants.CONF_STATUS_INVITED_WEBCHAT\n  const isEnabledJoin = data.conf_status === Constants.CONF_STATUS_INVITED\n  const isDisplayClose = data.conf_status === Constants.CONF_STATUS_INACTIVE\n  const isDisplayShow = data.conf_status === Constants.CONF_STATUS_JOINED\n  const textDisplay = messages.slice(Math.max(messages.length - 5, 0))\n\n  const answerPress = useCallback(() => {\n    uc.answerWebchatConference(data.conf_id)\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const showPress = useCallback(() => {\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const joinPress = useCallback(() => {\n    uc.joinWebchatConference(data.conf_id)\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const closePress = useCallback(() => {\n    chatStore.removeWebchatItem(data.conf_id)\n  }, [data.conf_id])\n\n  return (\n    <View style={[css.Row, isEnabledAnswer ? css.bgUnread : null]}>\n      <View style={css.Column}>\n        {isEnabledAnswer ? (\n          <RnTouchableOpacity onPress={answerPress} style={css.BtnText}>\n            <RnText normal white bold>\n              {intl`Answer`}\n            </RnText>\n          </RnTouchableOpacity>\n        ) : (\n          <RnTouchableOpacity\n            // disabled={!isDisplayShow}\n            onPress={showPress}\n            style={[\n              css.BtnText,\n              { backgroundColor: isDisplayShow ? v.layerBg : v.borderBg },\n            ]}\n          >\n            <RnText normal white bold>\n              {intl`Show`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <RnTouchableOpacity\n          disabled={!isEnabledJoin}\n          onPress={joinPress}\n          style={[\n            css.BtnText,\n            { backgroundColor: isEnabledJoin ? v.layerBg : v.borderBg },\n          ]}\n        >\n          <RnText normal white bold>\n            {intl`Join`}\n          </RnText>\n        </RnTouchableOpacity>\n      </View>\n      {!isEnabledAnswer ? (\n        <RnText normal singleLine small style={css.Text}>\n          {data.assigned.user_id || ''}\n        </RnText>\n      ) : (\n        <Duration normal singleLine small style={css.Text}>\n          {data.created_tstamp}\n        </Duration>\n      )}\n\n      <RnText normal singleLine small style={css.Text}>\n        {data.webchatinfo.profinfo_formatted || ''}\n      </RnText>\n      <RnText\n        normal\n        small\n        style={[css.Text, css.TextMessage]}\n        // numberOfLines={5}\n      >\n        {textDisplay.map((text, i, { length }) => {\n          return `${text.text}${i === length - 1 ? '' : '\\n'}`\n        })}\n      </RnText>\n      {isDisplayClose && (\n        <RnTouchableOpacity onPress={closePress}>\n          <RnIcon path={mdiClose} style={css.icon} />\n        </RnTouchableOpacity>\n      )}\n    </View>\n  )\n})\n","import { debounce } from 'lodash'\nimport { action, observable, runInAction } from 'mobx'\nimport { AppState, Platform } from 'react-native'\nimport RNCallKeep, { CONSTANTS } from 'react-native-callkeep'\nimport IncallManager from 'react-native-incall-manager'\nimport { v4 as newUuid } from 'uuid'\n\nimport { MakeCallFn, Session } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { checkAndRemovePnTokenViaSip, sip } from '../api/sip'\nimport { uc } from '../api/uc'\nimport { embedApi } from '../embed/embedApi'\nimport { arrToMap } from '../utils/arrToMap'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { TEvent } from '../utils/callkeep'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { webShowNotification } from '../utils/webShowNotification'\nimport { accountStore } from './accountStore'\nimport { addCallHistory } from './addCallHistory'\nimport { authSIP } from './AuthSIP'\nimport { getAuthStore, reconnectAndWaitSip, waitSip } from './authStore'\nimport { Call } from './Call'\nimport { setCallStore } from './callStore'\nimport { CancelRecentPn } from './cancelRecentPn'\nimport { intl, intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\nimport { RnAppState } from './RnAppState'\nimport { RnStacker } from './RnStacker'\nimport { timerStore } from './timerStore'\n\nexport class CallStore {\n  @observable inPageCallManage?: {\n    isFromCallBar?: boolean\n  } = undefined\n\n  private recentCallActivityAt = 0\n\n  private getCallKeep = (\n    uuid: string,\n    o?: {\n      includingOutgoing?: boolean\n      includingAnswered?: boolean\n      includingRejected?: boolean\n    },\n  ) => {\n    const pnId = this.getPnIdFromUuid(uuid)\n    return this.calls.find(\n      c =>\n        (!pnId || c.pnId === pnId) &&\n        (!c.callkeepUuid || c.callkeepUuid === uuid) &&\n        (o?.includingOutgoing || c.incoming) &&\n        (o?.includingAnswered || (!c.answered && !c.callkeepAlreadyAnswered)) &&\n        (o?.includingRejected || !c.callkeepAlreadyRejected) &&\n        !c.isAboutToHangup,\n    )\n  }\n\n  private autoAnswer = (uuid: string) => {\n    if (Platform.OS === 'ios') {\n      RNCallKeep.answerIncomingCall(uuid)\n    }\n    BrekekeUtils.onCallKeepAction(uuid, 'answerCall')\n  }\n  @action onCallKeepDidDisplayIncomingCall = async (\n    uuid: string,\n    n: ParsedPn,\n  ) => {\n    if (n.sipPn.autoAnswer && !this.calls.some(c => c.callkeepUuid !== uuid)) {\n      if (RnAppState.foregroundOnce && AppState.currentState !== 'active') {\n        RNCallKeep.backToForeground()\n      }\n      BackgroundTimer.setTimeout(() => this.autoAnswer(uuid), 2000)\n    }\n    this.setAutoEndCallKeepTimer(uuid, n)\n    checkAndRemovePnTokenViaSip(n)\n    // Find the current incoming call which is not callkeep\n    // Assign the data and config\n    const c = this.getCallKeep(uuid)\n    if (c) {\n      c.callkeepUuid = uuid\n      BrekekeUtils.setCallConfig(uuid, JSON.stringify(c.callConfig))\n    }\n    // Check if call is rejected already\n    const rejected = this.isCallRejected({\n      callkeepUuid: uuid,\n      pnId: n.id,\n    })\n    // Check if call is expired already\n    let expired = false\n    const d = await accountStore.findDataByPn(n)\n    const pnExpires = Number(d?.pnExpires) || 50000 // default to 50s\n    const now = Date.now()\n    if (n.time) {\n      expired = now > n.time + pnExpires\n    }\n    console.log(\n      `SIP PN debug: onCallKeepDidDisplayIncomingCall uuid=${uuid} pnId=${n.id} sessionId=${c?.id} rejected=${rejected} now=${now} n.time=${n.time} pnExpires=${pnExpires} expired=${expired}`,\n    )\n    if (rejected || expired) {\n      this.endCallKeep(uuid)\n      return\n    }\n    // Auto reconnect if no activity\n    // This logic is about the case connection has dropped silently\n    // So even if sipState is `success` but the connection has dropped\n    // We just drop the connection no matter if it is alive or not\n    // Then construct a new connection to receive the call as quickly as possible\n    if (now - this.recentCallActivityAt > 3000) {\n      const as = getAuthStore()\n      if (as.sipState === 'connecting') {\n        return\n      }\n      const count = sip.phone?.getSessionCount()\n      if (!count) {\n        console.log(\n          `SIP PN debug: new notification: phone.getSessionCount()=${count} | call destroyWebRTC()`,\n        )\n        as.sipState = 'stopped'\n        sip.destroyWebRTC()\n        authSIP.authWithCheck()\n      }\n    }\n  }\n  @action onCallKeepAnswerCall = (uuid: string) => {\n    this.setCallKeepAction({ callkeepUuid: uuid }, 'answerCall')\n    const c = this.getCallKeep(uuid)\n    console.log(`SIP PN debug: onCallKeepAnswerCall found: ${!!c}`)\n    if (c && !c.callkeepAlreadyAnswered) {\n      c.callkeepAlreadyAnswered = true\n      c.answer()\n    }\n  }\n  @action onCallKeepEndCall = (uuid: string) => {\n    this.setCallKeepAction({ callkeepUuid: uuid }, 'rejectCall')\n    const c = this.getCallKeep(uuid, {\n      includingAnswered: true,\n      includingRejected: Platform.OS === 'android',\n      includingOutgoing: Platform.OS === 'ios',\n    })\n    console.log(`SIP PN debug: onCallKeepEndCall found: ${!!c}`)\n    if (c) {\n      c.callkeepAlreadyRejected = true\n      c.hangupWithUnhold()\n    }\n    this.endCallKeep(uuid)\n  }\n\n  @observable calls: Call[] = []\n\n  setCurrentCallId = (id: string) => {\n    this.displayingCallId = id\n    this.ongoingCallId = id\n  }\n  @observable ongoingCallId: string = ''\n  @observable displayingCallId = ''\n  prevDisplayingCallId = ''\n\n  getOngoingCall = () => {\n    this.updateCurrentCallDebounce()\n    const oc = this.calls.find(c => c.id === this.ongoingCallId)\n    // TODO:\n    // Should not modify state in getter\n    // This will throw an error in mobx-react\n    // Currently we forked mobx-react to temporary get over this error\n    // In the future we need to rewrite and refactor the whole stores/actions\n    if (oc) {\n      const ucEnabled = getAuthStore()?.getCurrentAccount()?.ucEnabled\n      if (!oc.answered && (!oc.partyImageUrl || !oc.partyImageUrl?.length)) {\n        oc.partyImageUrl = ucEnabled\n          ? this.getOriginalUserImageUrl(oc.pbxTenant, oc.partyNumber)\n          : ''\n        oc.partyImageSize = ucEnabled ? 'large' : ''\n      }\n      if (oc.answered && (!oc.talkingImageUrl || !oc.talkingImageUrl.length)) {\n        oc.talkingImageUrl = ucEnabled\n          ? this.getOriginalUserImageUrl(oc.pbxTenant, oc.partyNumber)\n          : ''\n      }\n    }\n    return oc\n  }\n\n  @action updateCallAvatar = (url: string, size?: string) => {\n    const oc = this.getOngoingCall()\n    if (oc) {\n      oc.partyImageUrl = url\n      oc.partyImageSize = size || 'small'\n    }\n  }\n\n  private getOriginalUserImageUrl = (tenant: string, name: string): string => {\n    if (!tenant || !name) {\n      return ''\n    }\n    const a = getAuthStore().getCurrentAccount()\n    if (!a) {\n      return ''\n    }\n    const { pbxHostname, pbxPort } = a\n    let ucHost = `${pbxHostname}:${pbxPort}`\n    if (ucHost.indexOf(':') < 0) {\n      ucHost += ':443'\n    }\n    const ucScheme = ucHost.endsWith(':80') ? 'http' : 'https'\n    const baseUrl = `${ucScheme}://${ucHost}`\n    return `${baseUrl}/uc/image?ACTION=DOWNLOAD&tenant=${tenant}&user=${name}&SIZE=ORIGINAL`\n  }\n\n  private incallManagerStarted = false\n  onCallUpsert: CallStore['upsertCall'] = c => {\n    this.upsertCall(c)\n    if (\n      Platform.OS === 'android' &&\n      !this.incallManagerStarted &&\n      this.calls.find(_ => _.answered || !_.incoming)\n    ) {\n      this.incallManagerStarted = true\n      IncallManager.start()\n      // Reset loud speaker on each call\n      IncallManager.setForceSpeakerphoneOn(false)\n    }\n  }\n  @action private upsertCall = (\n    // partial\n    p: Pick<Call, 'id'> & Partial<Omit<Call, 'id'>>,\n  ) => {\n    this.updateCurrentCallDebounce()\n    const now = Date.now()\n    this.recentCallActivityAt = now\n    //\n    // existing\n    const e = this.calls.find(c => c.id === p.id)\n    if (e) {\n      if (p.callConfig) {\n        // Merge new config with current config instead of replacing\n        Object.assign(e.callConfig, p.callConfig)\n      }\n      delete p.callConfig\n      if (e.callkeepUuid) {\n        BrekekeUtils.setCallConfig(e.callkeepUuid, JSON.stringify(e.callConfig))\n      }\n      if (p.rawSession && e.rawSession) {\n        Object.assign(e.rawSession, p.rawSession)\n        delete p.rawSession\n      }\n      if (\n        p.videoSessionId &&\n        e.videoSessionId &&\n        p.videoSessionId !== e.videoSessionId &&\n        !p.remoteVideoEnabled\n      ) {\n        delete p.videoSessionId\n        delete p.remoteVideoEnabled\n        delete p.remoteVideoStreamObject\n      }\n      if (!e.answered && p.answered) {\n        this.setCurrentCallId(e.id)\n        e.answerCallKeep()\n        p.answeredAt = now\n        BrekekeUtils.onCallConnected(e.callkeepUuid)\n      }\n      Object.assign(e, p, {\n        withSDPControls: e.withSDPControls || p.withSDP,\n      })\n      if (e.incoming && e.callkeepUuid) {\n        BrekekeUtils.setRemoteVideoStreamURL(\n          e.callkeepUuid,\n          e.remoteVideoStreamObject ? e.remoteVideoStreamObject.toURL() : '',\n        )\n      }\n      if (e.talkingImageUrl && e.talkingImageUrl.length > 0) {\n        BrekekeUtils.setTalkingAvatar(\n          e.callkeepUuid,\n          e.talkingImageUrl,\n          e.partyImageSize === 'large',\n        )\n      }\n      if (\n        e.incoming &&\n        e.callkeepUuid &&\n        typeof e.localVideoEnabled === 'boolean'\n      ) {\n        BrekekeUtils.setIsVideoCall(e.callkeepUuid, !!e.localVideoEnabled)\n      }\n      // emit to embed api\n      if (!window._BrekekePhoneWebRoot) {\n        embedApi.emit('call_update', e)\n      }\n      return\n    }\n    //\n    // Construct a new call\n    const c = new Call(this)\n    Object.assign(c, p)\n    this.calls = [c, ...this.calls]\n    this.displayingCallId = c.id // do not set ongoing call\n    // Update java and embed api\n    BrekekeUtils.setJsCallsSize(this.calls.length)\n    // emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('call', c)\n    }\n    // Desktop notification\n    if (Platform.OS === 'web' && c.incoming && !c.answered) {\n      webShowNotification(\n        c.getDisplayName() + ' ' + intl`Incoming call`,\n        c.getDisplayName(),\n      )\n    }\n    // Get and check callkeep if pending incoming call\n    if (Platform.OS === 'web' || !c.incoming || c.answered) {\n      return\n    }\n    c.callkeepUuid = c.callkeepUuid || this.getUuidFromPnId(c.pnId) || ''\n    const callkeepAction = this.getCallKeepAction(c)\n    console.log(\n      `PN ID debug: upsertCall pnId=${c.pnId} callkeepUuid=${c.callkeepUuid} callkeepAction=${callkeepAction}`,\n    )\n    if (callkeepAction === 'answerCall') {\n      c.callkeepAlreadyAnswered = true\n      c.answer()\n      console.log('SIP PN debug: answer by recentPnAction')\n    } else if (callkeepAction === 'rejectCall') {\n      c.callkeepAlreadyRejected = true\n      c.hangupWithUnhold()\n      console.log('SIP PN debug: reject by recentPnAction')\n    }\n  }\n\n  @action onCallRemove = async (rawSession: Session) => {\n    this.updateCurrentCallDebounce()\n    this.recentCallActivityAt = Date.now()\n    const c = this.calls.find(_ => _.id === rawSession.sessionId)\n    if (!c) {\n      return\n    }\n    if (c.rawSession) {\n      Object.assign(c.rawSession, rawSession)\n    } else {\n      c.rawSession = rawSession\n    }\n    this.onSipUaCancel({ pnId: c.pnId })\n    if (c.callkeepUuid) {\n      this.endCallKeep(c.callkeepUuid)\n    }\n    await addCallHistory(c)\n    c.callkeepUuid = ''\n    c.callkeepAlreadyRejected = true\n\n    this.calls = this.calls.filter(c0 => c0 !== c)\n    // Set number of total calls in our custom java incoming call module\n    BrekekeUtils.setJsCallsSize(this.calls.length)\n    // When if this is a outgoing call, try to insert a call history to uc chat\n    if (getAuthStore().ucState === 'success' && c.answeredAt && !c.incoming) {\n      uc.sendCallResult(c.getDuration(), c.partyNumber)\n    }\n    // Reset loud speaker if there's no call left\n    if (Platform.OS !== 'web' && !this.calls.length) {\n      this.isLoudSpeakerEnabled = false\n      IncallManager.setForceSpeakerphoneOn(false)\n    }\n    // Stop android incall manager if there's no call left\n    if (\n      Platform.OS === 'android' &&\n      this.incallManagerStarted &&\n      !this.calls.length\n    ) {\n      this.incallManagerStarted = false\n      IncallManager.stop()\n    }\n    // emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('call_end', c)\n    }\n  }\n\n  @action onSelectBackgroundCall = (c: Immutable<Call>) => {\n    if (c.holding) {\n      c.toggleHoldWithCheck()\n    }\n    this.calls\n      .filter(i => i.id !== c.id && i.answered && !i.holding)\n      .forEach(i => i.toggleHoldWithCheck())\n    this.setCurrentCallId(c.id)\n    Nav().backToPageCallManage()\n  }\n\n  private startCallIntervalAt = 0\n  private startCallIntervalId = 0\n  private clearStartCallIntervalTimer = () => {\n    if (this.startCallIntervalId) {\n      BackgroundTimer.clearInterval(this.startCallIntervalId)\n      this.startCallIntervalId = 0\n    }\n  }\n  startCall: MakeCallFn = (number: string, ...args) => {\n    const as = getAuthStore()\n    as.sipTotalFailure = 0\n\n    const sipCreateSession = () => sip.phone?.makeCall(number, ...args)\n    if (\n      as.sipState === 'waiting' ||\n      as.sipState === 'failure' ||\n      as.sipState === 'stopped'\n    ) {\n      reconnectAndWaitSip().then(sipCreateSession)\n      Nav().goToPageCallManage({ isOutgoingCall: true })\n      return\n    }\n    if (as.sipState === 'connecting') {\n      waitSip().then(sipCreateSession)\n      Nav().goToPageCallManage({ isOutgoingCall: true })\n      return\n    }\n\n    if (this.calls.filter(c => !c.incoming && !c.answered).length) {\n      RnAlert.error({\n        message: intlDebug`Only make one outgoing call`,\n      })\n      return\n    }\n\n    let reconnectCalled = false\n    try {\n      // Try to call pbx first to see if there's any error with the network\n      // TODO\n      void pbx\n      sipCreateSession()\n    } catch (err) {\n      reconnectCalled = true\n      reconnectAndWaitSip().then(sipCreateSession)\n    }\n    Nav().goToPageCallManage({ isOutgoingCall: true })\n    // Start call logic in RNCallKeep\n    // Adding this will help the outgoing call automatically hold on GSM call\n    let uuid = ''\n    if (Platform.OS !== 'web') {\n      uuid = newUuid().toUpperCase()\n      if (Platform.OS === 'ios') {\n        RNCallKeep.startCall(uuid, number, 'Brekeke Phone')\n      }\n      this.setAutoEndCallKeepTimer(uuid)\n    }\n    // Check for each 0.5s: auto update currentCallId\n    // The call will be emitted from sip, we'll use interval here to set it\n    runInAction(() => {\n      this.setCurrentCallId('')\n    })\n    const prevIds = arrToMap(this.calls, 'id') as { [k: string]: boolean }\n    // Also if after 3s there's no call in store, reconnect\n    this.clearStartCallIntervalTimer()\n    this.startCallIntervalAt = Date.now()\n    this.startCallIntervalId = BackgroundTimer.setInterval(\n      action(() => {\n        const curr = this.calls.find(c => !c.incoming && !prevIds[c.id])\n        if (curr) {\n          if (uuid) {\n            curr.callkeepUuid = uuid\n          }\n          this.setCurrentCallId(curr.id)\n          this.clearStartCallIntervalTimer()\n          return\n        }\n        const diff = Date.now() - this.startCallIntervalAt\n        // Add a guard of 10s to clear the interval\n        if (diff > 10000) {\n          if (uuid) {\n            this.endCallKeep(uuid)\n          }\n          this.clearStartCallIntervalTimer()\n          return\n        }\n        // And if after 3s there's no call in store, reconnect\n        // It's likely a connection issue occurred\n        if (!curr && !reconnectCalled && diff > 3000) {\n          reconnectCalled = true\n          reconnectAndWaitSip().then(sipCreateSession)\n          this.clearStartCallIntervalTimer()\n        }\n      }),\n      500,\n    )\n  }\n  startVideoCall = (number: string) => this.startCall(number, undefined, true)\n\n  private updateBackgroundCalls = () => {\n    // Auto hold background calls\n    if (!this.ongoingCallId) {\n      return\n    }\n    this.calls\n      .filter(\n        c =>\n          c.id !== this.ongoingCallId &&\n          c.answered &&\n          !c.transferring &&\n          !c.holding &&\n          !c.isAboutToHangup,\n      )\n      .forEach(c => c.toggleHoldWithCheck())\n  }\n  private updateBackgroundCallsDebounce = debounce(\n    this.updateBackgroundCalls,\n    300,\n    { maxWait: 1000 },\n  )\n  @action private updateCurrentCall = () => {\n    const oc =\n      this.calls.find(c => c.id === this.ongoingCallId) ||\n      this.calls.find(c => c.answered && !c.holding && !c.isAboutToHangup) ||\n      this.calls.find(c => c)\n    this.setCurrentCallId(oc?.id || '')\n    if (!this.ongoingCallId) {\n      const [s0, ...stacks] = RnStacker.stacks\n      if (stacks.some(s => s.name.startsWith('PageCall'))) {\n        RnStacker.stacks = [s0]\n      }\n    }\n    this.updateBackgroundCallsDebounce()\n  }\n  private updateCurrentCallDebounce = debounce(this.updateCurrentCall, 300, {\n    maxWait: 1000,\n  })\n\n  // CallKeep + PN data\n  @observable callkeepMap: {\n    [uuid: string]: {\n      uuid: string\n      at: number\n      incomingPnData?: ParsedPn\n      hasAction?: boolean\n    }\n  } = {}\n  private getUuidFromPnId = (pnId: string) =>\n    Object.values(this.callkeepMap)\n      .map(c => c.incomingPnData)\n      .find(d => d?.id === pnId)?.callkeepUuid\n  private getPnIdFromUuid = (uuid: string) =>\n    this.callkeepMap[uuid]?.incomingPnData?.id\n  private getSetUuidPnId = (c: TCallKeepIds) => {\n    if (c.callkeepUuid && !c.pnId) {\n      c.pnId = this.getPnIdFromUuid(c.callkeepUuid)\n    }\n    if (c.pnId && !c.callkeepUuid) {\n      c.callkeepUuid = this.getUuidFromPnId(c.pnId)\n    }\n  }\n\n  // Logic to end call if timeout of 20s\n  private autoEndCallKeepTimerId = 0\n  private clearAutoEndCallKeepTimer = () => {\n    if (Platform.OS === 'web' || !this.autoEndCallKeepTimerId) {\n      return\n    }\n    BackgroundTimer.clearInterval(this.autoEndCallKeepTimerId)\n    this.autoEndCallKeepTimerId = 0\n  }\n  @action private setAutoEndCallKeepTimer = (\n    uuid: string,\n    incomingPnData?: ParsedPn,\n  ) => {\n    if (Platform.OS === 'web') {\n      return\n    }\n    if (incomingPnData) {\n      incomingPnData.callkeepUuid = uuid\n    }\n    this.callkeepMap[uuid] = {\n      uuid,\n      at: Date.now(),\n      incomingPnData,\n    }\n    this.clearAutoEndCallKeepTimer()\n    this.autoEndCallKeepTimerId = BackgroundTimer.setInterval(() => {\n      const n = Date.now()\n      Object.values(this.callkeepMap).forEach(k => {\n        if (n - k.at > 20000) {\n          const c = this.calls.find(_ => _.callkeepUuid === k.uuid)\n          if (!c) {\n            this.endCallKeep(k.uuid)\n          }\n        }\n      })\n      if (!Object.keys(this.callkeepMap).length) {\n        this.clearAutoEndCallKeepTimer()\n      }\n    }, 500)\n  }\n  @action private endCallKeep = (\n    uuid: string,\n    {\n      setAction = true,\n      completedElseWhere,\n    }: {\n      setAction?: boolean\n      completedElseWhere?: boolean\n    } = {},\n  ) => {\n    if (!uuid) {\n      return\n    }\n    console.log('PN callkeep debug: endCallKeep ' + uuid)\n    if (setAction) {\n      this.setCallKeepAction({ callkeepUuid: uuid }, 'rejectCall')\n    }\n    const pnData = this.callkeepMap[uuid]?.incomingPnData\n    if (\n      pnData &&\n      !this.calls.some(c => c.callkeepUuid === uuid || c.pnId === pnData.id) &&\n      !completedElseWhere\n    ) {\n      addCallHistory(pnData)\n    }\n    if (!this.callkeepMap[uuid] && Platform.OS === 'ios') {\n      return\n    }\n    delete this.callkeepMap[uuid]\n    RNCallKeep.rejectCall(uuid)\n    RNCallKeep.endCall(uuid)\n    RNCallKeep.reportEndCallWithUUID(\n      uuid,\n      CONSTANTS.END_CALL_REASONS.REMOTE_ENDED,\n    )\n    BrekekeUtils.closeIncomingCall(uuid)\n  }\n  endCallKeepAllCalls = () => {\n    if (Platform.OS !== 'web') {\n      RNCallKeep.endAllCalls()\n    }\n    BrekekeUtils.closeAllIncomingCalls()\n    this.onCallKeepAction()\n  }\n  @action onCallKeepAction = () => {\n    this.calls\n      .map(c => this.callkeepMap[c.callkeepUuid])\n      .filter(c => c)\n      .forEach(c => {\n        c.hasAction = true\n      })\n  }\n\n  // Move from callkeep.ts to avoid circular dependencies\n  // Logic to show incoming call ui in case of already have a running call in RNCallKeep android\n  private alreadyShowIncomingCallUi: { [k: string]: boolean } = {}\n  showIncomingCallUi = (e: TEvent & { pnData: ParsedPn }) => {\n    const uuid = e.callUUID.toUpperCase()\n    if (this.alreadyShowIncomingCallUi[uuid]) {\n      console.log('SIP PN debug: showIncomingCallUi: already show this uuid')\n      return\n    }\n    this.alreadyShowIncomingCallUi[uuid] = true\n    if (this.isCallRejected({ callkeepUuid: uuid, pnId: e.pnData.id })) {\n      console.log(\n        'SIP PN debug: showIncomingCallUi: call already rejected on js side',\n      )\n      this.endCallKeep(uuid)\n      return\n    }\n    this.onCallKeepDidDisplayIncomingCall(uuid, e.pnData)\n  }\n\n  // Actions map in case of call is not available at the time receive the action\n  // This map wont be deleted if the callkeep end\n  @observable callkeepActionMap: {\n    [uuidOrPnId: string]: TCallKeepAction\n  } = {}\n  private setCallKeepAction = (c: TCallKeepIds, a: TCallKeepAction) => {\n    this.getSetUuidPnId(c)\n    if (c.callkeepUuid) {\n      this.callkeepActionMap[c.callkeepUuid] = a\n    }\n    if (c.pnId) {\n      this.callkeepActionMap[c.pnId] = a\n    }\n    this.onCallKeepAction()\n  }\n\n  private getCallKeepAction = (c: TCallKeepIds) =>\n    (c.callkeepUuid && this.callkeepActionMap[c.callkeepUuid]) ||\n    (c.pnId && this.callkeepActionMap[c.pnId])\n  isCallRejected = (c?: TCallKeepIds) =>\n    c && this.getCallKeepAction(c) === 'rejectCall'\n\n  calleeRejectedMap: {\n    [uuidOrPnId: string]: boolean\n  } = {}\n  setCalleeRejected = (c: TCallKeepIds) => {\n    this.getSetUuidPnId(c)\n    if (c.callkeepUuid) {\n      this.calleeRejectedMap[c.callkeepUuid] = true\n    }\n    if (c.pnId) {\n      this.calleeRejectedMap[c.pnId] = true\n    }\n  }\n\n  getCallInNotify = () => {\n    // Do not display our callbar if already show callkeep\n    return this.calls.find(_ => {\n      const k = this.callkeepMap[_.callkeepUuid]\n      return (\n        _.incoming &&\n        !_.answered &&\n        (!k ||\n          k.hasAction ||\n          // Trigger timerStore.now observer at last\n          timerStore.now - _.createdAt > 1000)\n      )\n    })\n  }\n  shouldRingInNotify = (uuid?: string) => {\n    // Disable ringtone when enable PN\n    if (getAuthStore().getCurrentAccount()?.pushNotificationEnabled) {\n      return false\n    }\n\n    if (Platform.OS === 'web' || !uuid) {\n      return true\n    }\n\n    // Do not ring on background\n    if (RnAppState.currentState !== 'active') {\n      return false\n    }\n    // Do not ring if has an ongoing answered call\n    if (this.calls.some(_ => _.answered)) {\n      return false\n    }\n    // ios: Do not ring if has a callkeep with no action yet\n    if (\n      Platform.OS === 'ios' &&\n      Object.keys(this.callkeepMap).some(\n        _ => _ !== uuid && !this.callkeepActionMap[_],\n      )\n    ) {\n      return false\n    }\n\n    return true\n  }\n\n  // To be used in sip.phone._ua.on('newNotify')\n  onSipUaCancel = (n?: CancelRecentPn) => {\n    if (!n?.pnId) {\n      return\n    }\n    const uuid = this.getUuidFromPnId(n.pnId)\n    console.log(`SIP PN debug: cancel PN uuid=${uuid}`)\n    this.setCallKeepAction({ pnId: n.pnId }, 'rejectCall')\n    uuid &&\n      this.endCallKeep(uuid, {\n        completedElseWhere: n.completedElseWhere,\n      })\n  }\n\n  constructor() {\n    if (Platform.OS !== 'android') {\n      return\n    }\n    BrekekeUtils.setIsAppActive(AppState.currentState === 'active', false)\n    // If it is locked right after blur 300ms\n    //    we assume it was put in background because of lock\n    // No need to remove listener since this is singleton without cleanup for now\n    AppState.addEventListener('change', currentState => {\n      BrekekeUtils.setIsAppActive(currentState === 'active', false)\n      if (currentState === 'active') {\n        return\n      }\n      BackgroundTimer.setTimeout(async () => {\n        if (await BrekekeUtils.isLocked()) {\n          BrekekeUtils.setIsAppActive(false, true)\n        }\n      }, 300)\n    })\n  }\n\n  @observable parkNumbers: { [k: string]: boolean } = {}\n  @action addParkNumber = (parkNumber: string) => {\n    this.parkNumbers[parkNumber] = true\n  }\n  @action removeParkNumber = (parkNumber: string) => {\n    delete this.parkNumbers[parkNumber]\n  }\n\n  // Some other fields\n  // TODO move them somewhere else\n  @observable isLoudSpeakerEnabled = false\n  @action toggleLoudSpeaker = () => {\n    if (Platform.OS !== 'web') {\n      this.isLoudSpeakerEnabled = !this.isLoudSpeakerEnabled\n      IncallManager.setForceSpeakerphoneOn(this.isLoudSpeakerEnabled)\n    }\n  }\n  @observable newVoicemailCount = 0\n  @action setNewVoicemailCount = (n: number) => {\n    this.newVoicemailCount = n\n  }\n  // Style in CallVideosUI to save the previous video position\n  @observable videoPositionT = 25\n  @observable videoPositionL = 5\n}\n\nconst callStore = new CallStore()\nsetCallStore(callStore)\n\nexport type TCallKeepAction = 'answerCall' | 'rejectCall'\ntype TCallKeepIds = Partial<Pick<Call, 'callkeepUuid' | 'pnId'>>\n","import PushNotificationIOS from '@react-native-community/push-notification-ios'\nimport moment from 'moment'\nimport { AppState, Platform } from 'react-native'\nimport FCM from 'react-native-fcm'\nimport { v4 as newUuid } from 'uuid'\n\nimport { getPartyName } from '../stores/contactStore'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { accountStore } from './accountStore'\nimport { getAuthStore } from './authStore'\nimport { Call } from './Call'\nimport { getCallStore } from './callStore'\nimport { intl } from './intl'\n\nconst alreadyAddHistoryMap: { [pnId: string]: true } = {}\nexport const addCallHistory = async (c: Call | ParsedPn) => {\n  const isTypeCall = c instanceof Call || 'partyNumber' in c\n\n  if (isTypeCall && c.partyNumber === '8') {\n    // voice mail\n    return\n  }\n  const pnId = isTypeCall ? c.pnId : c.id\n\n  if (pnId) {\n    if (alreadyAddHistoryMap[pnId]) {\n      return\n    }\n    alreadyAddHistoryMap[pnId] = true\n  }\n\n  if (!isTypeCall && !(await accountStore.findByPn(c))) {\n    console.log(\n      'checkAndRemovePnTokenViaSip debug: do not add history account not exist',\n    )\n    return\n  }\n\n  const id = newUuid()\n  const created = moment().format('HH:mm - MMM D')\n  const info = isTypeCall\n    ? {\n        id,\n        created,\n        incoming: c.incoming,\n        answered: c.answered,\n        partyName: c.getDisplayName(),\n        partyNumber: c.partyNumber,\n        duration: c.getDuration(),\n        isAboutToHangup: c.isAboutToHangup,\n      }\n    : {\n        id,\n        created,\n        incoming: true,\n        answered: false,\n        partyName: getPartyName(c.from) || c.displayName || c.from,\n        partyNumber: c.from,\n        duration: 0,\n        // TODO: B killed app, A call B, B reject quickly, then A cancel quickly\n        // -> B got cancel event from sip\n        isAboutToHangup: false,\n      }\n\n  // do not show notification if rejected by callee\n  const m = getCallStore().calleeRejectedMap\n  const calleeRejected = m[c.callkeepUuid] || m[pnId]\n  if (!calleeRejected) {\n    presentNotification(info)\n  }\n\n  // try to wait for login?\n  // TODO\n  // add method based on the Account class\n  // allow multiple accounts at the same time\n  const as = getAuthStore()\n  const current = as.getCurrentAccount()\n  if (!current) {\n    await waitTimeout()\n  }\n  if (!as.getCurrentAccount()) {\n    return\n  }\n  as.pushRecentCall(info)\n}\n\nconst presentNotification = (c: {\n  id: string\n  incoming: boolean\n  answered: boolean\n  partyName: string\n  partyNumber: string\n  duration: number\n  created: string\n  isAboutToHangup: boolean\n}) => {\n  if (Platform.OS === 'web') {\n    return\n  }\n  if (c.answered || !c.incoming || c.isAboutToHangup) {\n    return\n  }\n  const title = intl`Missed call`\n  const body = c.partyName || c.partyNumber\n  if (Platform.OS === 'android') {\n    FCM.presentLocalNotification({\n      title,\n      body,\n      number: 0,\n      priority: 'high',\n      show_in_foreground: true,\n      local_notification: true,\n      wake_screen: false,\n      ongoing: false,\n      lights: true,\n      channel: 'default',\n      icon: 'ic_launcher',\n      id: `missedcall-${Date.now()}`,\n      pre_app_state: AppState.currentState,\n      my_custom_data: 'local_notification',\n      is_local_notification: 'local_notification',\n    })\n  } else {\n    PushNotificationIOS.getApplicationIconBadgeNumber(badge => {\n      badge = 1 + (Number(badge) || 0)\n      PushNotificationIOS.addNotificationRequest({\n        id: `missedcall-${Date.now()}`,\n        title,\n        body,\n        sound: undefined,\n        badge,\n        userInfo: {\n          id: `missedcall-${Date.now()}`,\n          aps: {\n            title,\n            body,\n            my_custom_data: 'local_notification',\n            pre_app_state: AppState.currentState,\n            local_notification: true,\n            is_local_notification: 'local_notification',\n          },\n        },\n      })\n      PushNotificationIOS.setApplicationIconBadgeNumber(badge)\n    })\n  }\n}\n","import { debounce } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { AppState, Platform } from 'react-native'\n\nimport {\n  PbxGetProductInfoRes,\n  UcBuddy,\n  UcBuddyGroup,\n  UcConfig,\n} from '../api/brekekejs'\nimport { sip } from '../api/sip'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getUrlParams } from '../utils/deeplink'\nimport { ParsedPn, SipPn } from '../utils/PushNotification-parse'\nimport {\n  Account,\n  accountStore,\n  getAccountUniqueId,\n  getLastSignedInId,\n  saveLastSignedInId,\n} from './accountStore'\nimport { authPBX } from './AuthPBX'\nimport { authSIP } from './AuthSIP'\nimport { setAuthStore } from './authStore'\nimport { authUC } from './AuthUC'\nimport { Call } from './Call'\nimport { getCallStore } from './callStore'\nimport { chatStore } from './chatStore'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\nimport { RnAppState } from './RnAppState'\nimport { userStore } from './userStore'\n\ntype ConnectionState =\n  | 'stopped'\n  | 'waiting'\n  | 'connecting'\n  | 'success'\n  | 'failure'\n\nexport class AuthStore {\n  hasInternetConnected: boolean | null = null\n\n  @observable sipPn: Partial<SipPn> = {}\n\n  @observable pbxState: ConnectionState = 'stopped'\n  @observable pbxTotalFailure = 0\n  @observable sipState: ConnectionState = 'stopped'\n  @observable sipTotalFailure = 0\n  @observable ucState: ConnectionState = 'stopped'\n  @observable ucTotalFailure = 0\n  @observable ucLoginFromAnotherPlace = false\n\n  pbxShouldAuth = () => {\n    return (\n      this.getCurrentAccount() &&\n      this.pbxState !== 'waiting' &&\n      // Do not auth pbx if sip token is provided in case of PN\n      // Wait until sip login success or failure\n      (!this.sipPn.sipAuth ||\n        this.sipState === 'success' ||\n        this.sipState === 'failure') &&\n      (this.pbxState === 'stopped' ||\n        (this.pbxState === 'failure' &&\n          // !this.pbxTotalFailure &&\n          RnAppState.currentState === 'active'))\n    )\n  }\n  pbxConnectingOrFailure = () => {\n    return ['waiting', 'connecting', 'failure'].some(s => s === this.pbxState)\n  }\n\n  sipShouldAuth = () => {\n    return (\n      this.sipState !== 'waiting' &&\n      this.sipState !== 'connecting' &&\n      this.sipState !== 'success' &&\n      ((this.signedInId && this.sipPn.sipAuth) ||\n        (this.pbxState === 'success' &&\n          (this.sipState === 'stopped' ||\n            (this.sipState === 'failure' &&\n              // !this.sipTotalFailure &&\n              RnAppState.currentState === 'active'))))\n    )\n  }\n  sipConnectingOrFailure = () => {\n    return ['waiting', 'connecting', 'failure'].some(s => s === this.sipState)\n  }\n\n  ucShouldAuth = () => {\n    return (\n      this.getCurrentAccount()?.ucEnabled &&\n      !this.ucLoginFromAnotherPlace &&\n      !this.isSignInByNotification &&\n      this.pbxState === 'success' &&\n      this.ucState !== 'waiting' &&\n      (this.ucState === 'stopped' ||\n        (this.ucState === 'failure' &&\n          // !this.ucTotalFailure &&\n          RnAppState.currentState === 'active'))\n    )\n  }\n  ucConnectingOrFailure = () => {\n    return (\n      this.getCurrentAccount()?.ucEnabled &&\n      ['waiting', 'connecting', 'failure'].some(s => s === this.ucState)\n    )\n  }\n\n  isConnFailure = () => {\n    return [\n      this.pbxState,\n      this.sipState,\n      this.getCurrentAccount()?.ucEnabled && this.ucState,\n    ].some(s => s === 'failure')\n  }\n\n  @observable signedInId = ''\n  getCurrentAccount = () =>\n    accountStore.accounts.find(a => a.id === this.signedInId) as Account\n  getCurrentData = () => accountStore.findDataSync(this.getCurrentAccount())\n  getCurrentDataAsync = () =>\n    accountStore.findDataAsync(this.getCurrentAccount())\n\n  @observable ucConfig?: UcConfig\n  @observable pbxConfig?: PbxGetProductInfoRes\n\n  isBigMode() {\n    return this.pbxConfig?.['webphone.allusers'] === 'false'\n  }\n\n  signIn = async (a?: Account, autoSignIn?: boolean) => {\n    if (!a) {\n      return false\n    }\n    const d = await accountStore.findDataAsync(a)\n    if (!a.pbxPassword && !d.accessToken) {\n      Nav().goToPageAccountUpdate({ id: a.id })\n      RnAlert.error({\n        message: intlDebug`The account password is empty`,\n      })\n      return true\n    }\n    this.signedInId = a.id\n    if (!autoSignIn) {\n      await saveLastSignedInId(getAccountUniqueId(a))\n    }\n    return true\n  }\n  autoSignInEmbed = async () => {\n    const d = await getLastSignedInId()\n    this.signIn(\n      accountStore.accounts.find(_ => getAccountUniqueId(_) === d.id) ||\n        accountStore.accounts[0],\n    )\n  }\n\n  signOut = () => {\n    console.log('signOut debug: autoStore.signOut')\n    saveLastSignedInId(false)\n    this.signOutWithoutSaving()\n  }\n  signOutWithoutSaving = () => {\n    try {\n      getCallStore().calls.forEach(c => c.hangupWithUnhold())\n      if (Platform.OS !== 'web') {\n        // Try to end callkeep if it's stuck\n        getCallStore().endCallKeepAllCalls()\n      }\n      this.resetState()\n    } catch (err) {\n      console.error('signOut debug: signOutWithoutSaving error:', err)\n    }\n    console.log('signOut debug: goToPageAccountSignIn')\n    Nav().goToPageAccountSignIn()\n    console.log('signOut debug: goToPageAccountSignIn done')\n  }\n  @action private resetState = () => {\n    this.signedInId = ''\n    this.pbxState = 'stopped'\n    console.log('SIP PN debug: set sipState stopped sign out')\n    this.sipState = 'stopped'\n    this.sipPn = {}\n    sip.stopWebRTC()\n    this.ucState = 'stopped'\n    this.resetFailureStateIncludeUcLoginFromAnotherPlace()\n    this.pbxConfig = undefined\n    this.ucConfig = undefined\n    userStore.clearStore()\n    contactStore.clearStore()\n    chatStore.clearStore()\n  }\n\n  @action resetFailureState = () => {\n    this.pbxTotalFailure = 0\n    this.sipTotalFailure = 0\n    this.ucTotalFailure = 0\n  }\n  @action reconnectPbx = () => {\n    this.resetFailureState()\n    this.pbxState = 'stopped'\n    // Mobx observe not call automatically?\n    authPBX.authWithCheck()\n  }\n  @action reconnectSip = () => {\n    console.log('SIP PN debug: set sipState stopped reconnect')\n    this.resetFailureState()\n    this.sipState = 'stopped'\n    // Mobx observe not call automatically?\n    authSIP.authWithCheck()\n  }\n  @action resetFailureStateIncludeUcLoginFromAnotherPlace = () => {\n    this.resetFailureState()\n    this.ucLoginFromAnotherPlace = false\n    // Mobx observe not call automatically?\n    authUC.authWithCheck()\n  }\n\n  pushRecentCall = async (call: {\n    id: string\n    incoming: boolean\n    answered: boolean\n    partyName: string\n    partyNumber: string\n    duration: number\n    created: string\n  }) => {\n    const d = await this.getCurrentDataAsync()\n    d.recentCalls = [call, ...d.recentCalls]\n    if (d.recentCalls.length > 20) {\n      d.recentCalls.pop()\n    }\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  updatePartyNameRecentCall = async (\n    fragment: Pick<Call, 'partyNumber' | 'partyName'>,\n  ) => {\n    const d = await this.getCurrentDataAsync()\n    if (!d.recentCalls?.length) {\n      return\n    }\n    d.recentCalls\n      .filter(c => c.partyNumber === fragment.partyNumber)\n      .forEach(c => Object.assign(c, fragment))\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  savePbxBuddyList = async (pbxBuddyList: {\n    screened: boolean\n    users: (UcBuddy | UcBuddyGroup)[]\n  }) => {\n    const d = await this.getCurrentDataAsync()\n    d.pbxBuddyList = pbxBuddyList\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  handleUrlParams = async () => {\n    if (\n      Object.keys(getCallStore().callkeepMap).length ||\n      sip.phone?.getSessionCount() ||\n      getCallStore().calls.length\n    ) {\n      return false\n    }\n    //\n    const urlParams = await getUrlParams()\n    if (!urlParams) {\n      return false\n    }\n    //\n    const { _wn, host, phone_idx, port, tenant, user } = urlParams\n    if (!tenant || !user) {\n      return false\n    }\n    //\n    const a = await accountStore.find({\n      pbxUsername: user,\n      pbxTenant: tenant,\n      pbxHostname: host,\n      pbxPort: port,\n    })\n    let phoneIdx = parseInt(phone_idx)\n    if (!phoneIdx || phoneIdx <= 0 || phoneIdx > 4) {\n      phoneIdx = 4\n    }\n    //\n    if (a) {\n      if (!a.pbxHostname) {\n        a.pbxHostname = host\n      }\n      if (!a.pbxPort) {\n        a.pbxPort = port\n      }\n      a.pbxPhoneIndex = `${phoneIdx}`\n      const d = await accountStore.findDataAsync(a)\n      if (_wn) {\n        d.accessToken = _wn\n      }\n      //\n      accountStore.upsertAccount(a)\n      if (a.pbxPassword || d.accessToken) {\n        this.signIn(a)\n      } else {\n        Nav().goToPageAccountUpdate({ id: a.id })\n      }\n      return true\n    }\n    //\n    const newP = {\n      ...accountStore.genEmptyAccount(),\n      pbxTenant: tenant,\n      pbxUsername: user,\n      pbxHostname: host,\n      pbxPort: port,\n      pbxPhoneIndex: `${phoneIdx}`,\n    }\n    const d = await accountStore.findDataAsync(newP)\n    //\n    accountStore.upsertAccount(newP)\n    if (d.accessToken) {\n      this.signIn(newP)\n    } else {\n      Nav().goToPageAccountUpdate({ id: newP.id })\n    }\n    return true\n  }\n\n  @observable isSignInByNotification = false\n  clearSignInByNotification = debounce(\n    () => {\n      // clearSignInByNotification will activate UC login\n      // We will only allow UC login when the app is active\n      if (AppState.currentState !== 'active') {\n        BackgroundTimer.setTimeout(this.clearSignInByNotification, 17)\n      } else {\n        this.isSignInByNotification = false\n      }\n    },\n    10000,\n    {\n      maxWait: 15000,\n    },\n  )\n\n  @action signInByNotification = async (n: ParsedPn) => {\n    console.log(\n      `SIP PN debug: signInByNotification pnId=${n.id} token=${n.sipPn.sipAuth}`,\n    )\n    this.sipPn = n.sipPn\n    this.resetFailureState()\n    // Find account for the notification target\n    const a = await accountStore.findByPn(n)\n    if (!a?.id) {\n      console.log('SIP PN debug: can not find account from notification')\n      return false\n    }\n    // Use isSignInByNotification to disable UC auto sign in for a while\n    if (n.isCall) {\n      this.isSignInByNotification = true\n      this.clearSignInByNotification()\n    }\n    if (this.signedInId !== a.id) {\n      return this.signIn(a)\n    }\n    return false\n  }\n\n  userExtensionProperties: null | {\n    id: string\n    name: string\n    language: string\n    phones: {\n      id: string\n      type: string\n    }[]\n  } = null\n}\n\nconst authStore = new AuthStore()\n\nsetAuthStore(authStore)\n","import Url from 'url-parse'\n\nimport { parse } from './deeplink-parse'\n\nlet alreadyHandleFirstOpen = false\nconst params = parse(window.location as any as Url<any>)\n\nexport const getUrlParams = () => {\n  if (alreadyHandleFirstOpen) {\n    return Promise.resolve(null)\n  }\n  alreadyHandleFirstOpen = true\n  return Promise.resolve(params)\n}\n","import { Platform } from 'react-native'\nimport { getCurrentWifiSSID } from 'react-native-wifi-reborn'\n\nimport { Account, accountStore } from '../stores/accountStore'\nimport { compareSemVer } from '../stores/debugStore'\n// @ts-ignore\nimport { PushNotification } from '../utils/PushNotification'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { PBX } from './pbx'\nimport { PnCommand, PnServiceId } from './pnConfig'\nimport { setSyncPnTokenModule } from './syncPnToken'\nimport { updatePhoneIndex } from './updatePhoneIndex'\n\nconst syncPnTokenWithoutCatch = async (\n  p: Account,\n  { noUpsert }: Pick<SyncPnTokenOption, 'noUpsert'>,\n) => {\n  console.log('PN sync debug: syncPnTokenWithoutCatch')\n\n  if (Platform.OS === 'web') {\n    // TODO should be implemented by now\n    console.log('PN sync debug: not implemented yet on web browser')\n    return\n  }\n\n  if (!p.pbxUsername) {\n    console.log('PN sync debug: invalid data')\n    return\n  }\n\n  const pnEnabled = p.pushNotificationEnabled\n  console.log(\n    `PN sync debug: trying to turn ${pnEnabled ? 'on' : 'off'} PN for account ${\n      p.pbxUsername\n    }`,\n  )\n\n  const pbx = new PBX()\n  pbx.isMainInstance = false\n  const disconnectPbx = (success?: boolean) => {\n    console.log(\n      `PN sync debug: pbx disconnect by syncPnToken success=${success} noUpsert=${noUpsert}`,\n    )\n    pbx.disconnect()\n    if (success && !noUpsert && p.id) {\n      accountStore.upsertAccount({\n        id: p.id,\n        pushNotificationEnabledSynced: true,\n      })\n    }\n  }\n\n  try {\n    const success = await pbx.connect(p)\n    if (!success) {\n      console.log('PN sync debug: failed to connect to pbx')\n      return disconnectPbx()\n    }\n\n    const webPhone = await updatePhoneIndex(p, pbx)\n    if (!webPhone) {\n      console.log('PN sync debug: can not find webphone')\n      return disconnectPbx()\n    }\n\n    const username = webPhone.id\n    let t = await PushNotification.getToken()\n    let tvoip = t\n    if (Platform.OS === 'ios') {\n      tvoip = await PushNotification.getVoipToken()\n      if (!tvoip) {\n        throw new Error('PN sync debug: Empty ios voip PN token')\n      }\n      if (!t) {\n        // TODO pn token empty when dev app refresh?\n        t = tvoip\n      }\n    }\n    if (!t) {\n      throw new Error('PN sync debug: Empty PN token')\n    }\n\n    const c = await pbx.getConfig()\n    const pnmanageNew = compareSemVer(c?.version, '3.14.5') >= 0\n    console.log(\n      `PN sync debug: pbx version=${c?.version} pnmanageNew=${pnmanageNew}`,\n    )\n\n    const params = {\n      username,\n      device_id: t,\n    }\n    const newParams = pnmanageNew\n      ? {\n          ...params,\n          command: pnEnabled ? PnCommand.set : PnCommand.remove,\n          service_id: [\n            Platform.OS === 'android' ? PnServiceId.fcm : PnServiceId.apns,\n          ],\n          pnmanageNew: true,\n          device_id_voip: tvoip,\n        }\n      : undefined\n\n    if (Platform.OS === 'android') {\n      if (newParams) {\n        await pbx.pnmanage(newParams)\n      } else {\n        // backward compatibility\n        const fn = pnEnabled ? pbx.setFcmPnToken : pbx.removeFcmPnToken\n        await Promise.all([fn(params), fn({ ...params, voip: true })])\n      }\n      return disconnectPbx(true)\n    }\n\n    const lpcPort = parseInt(c?.['webphone.lpc.port'] || '0', 10)\n    const tlsKeyHash = c?.['webphone.lpc.keyhash'] || ''\n    // never establish plain non-tls lpc connection\n    const lpcEnabled = lpcPort && tlsKeyHash\n    if (lpcPort && !tlsKeyHash) {\n      console.warn(\n        'webphone.lpc.port is present but empty webphone.lpc.keyhash, thus lpc is disabled since we dont allow non-tls lpc connection',\n      )\n    }\n    // if lpc is enabled pnmanageNew must be true\n    // since lpc is only available in pbx 3.14.5 and above\n    if (!lpcEnabled || !newParams) {\n      BrekekeUtils.disableLPC()\n      if (newParams) {\n        await pbx.pnmanage(newParams)\n      } else {\n        // backward compatibility\n        const fn = pnEnabled ? pbx.setApnsToken : pbx.removeApnsToken\n        await Promise.all([\n          fn(params),\n          fn({ ...params, device_id: tvoip, voip: true }),\n        ])\n      }\n      return disconnectPbx(true)\n    }\n\n    const remoteSsids =\n      c?.['webphone.lpc.wifi']\n        ?.split(',')\n        .map(w => w.trim())\n        .filter(w => w) || []\n    const localSsid = remoteSsids.length ? '' : await getLocalSsid()\n    const lpcPn = toBoolean(c?.['webphone.lpc.pn'])\n    console.log('PN sync debug: lpc data', {\n      pnmanageNew,\n      lpcPort,\n      remoteSsids,\n      localSsid,\n      tlsKeyHash,\n      lpcPn,\n    })\n    if (pnEnabled) {\n      BrekekeUtils.enableLPC(\n        t,\n        tvoip,\n        username,\n        p.pbxHostname,\n        lpcPort,\n        remoteSsids,\n        localSsid,\n        tlsKeyHash,\n      )\n    } else {\n      BrekekeUtils.disableLPC()\n    }\n    newParams.service_id = [PnServiceId.lpc]\n    if (lpcPn) {\n      newParams.service_id.push(PnServiceId.apns)\n    }\n    await pbx.pnmanage(newParams)\n    return disconnectPbx(true)\n  } catch (err) {\n    console.error('PN sync debug: catch error:', err)\n    return disconnectPbx()\n  }\n}\n\nexport interface SyncPnTokenOption {\n  noUpsert?: boolean\n  onError?: (err: Error) => void\n}\n\nconst syncPnToken = async (p: Account, o: SyncPnTokenOption = {}) => {\n  if (accountStore.pnSyncLoadingMap[p.id]) {\n    console.log('PN sync debug: sync is loading')\n    return\n  }\n  accountStore.pnSyncLoadingMap[p.id] = true\n  await syncPnTokenWithoutCatch(p, o).catch((err: Error) => {\n    if (o.onError) {\n      o.onError(err)\n      return\n    }\n    console.error(\n      `Failed to sync Push Notification settings for ${p.pbxUsername}`,\n      err,\n    )\n  })\n  accountStore.pnSyncLoadingMap[p.id] = false\n}\n\nconst syncPnTokenForAllAccounts = () => {\n  accountStore.accounts.forEach(a => {\n    if (a.pushNotificationEnabledSynced) {\n      return\n    }\n    syncPnToken(a)\n  })\n}\n\nconst m = {\n  sync: syncPnToken,\n  syncForAllAccounts: syncPnTokenForAllAccounts,\n}\nsetSyncPnTokenModule(m)\n\nexport type TSyncPnToken = typeof m\n\nconst getLocalSsid = () =>\n  Promise.race([getCurrentWifiSSID(), waitTimeout(10000)])\n    .then(v => v || '')\n    .catch(() => '')\n","// Main entry for the create-react-app web bundle\n\nimport qs from 'qs'\nimport { ReactElement, useState } from 'react'\nimport { isAndroid, isIOS } from 'react-device-detect'\nimport { StyleSheet, View } from 'react-native'\nimport Url from 'url-parse'\n\nimport brand from '../assets/brand.png'\nimport { mdiAndroid, mdiApple, mdiWeb } from '../assets/icons'\nimport logo from '../assets/logo.png'\nimport { bundleIdentifier } from '../config'\nimport { intl } from '../stores/intl'\nimport { parse } from '../utils/deeplink-parse'\n// @ts-ignore\nimport { App as RnApp } from './App.tsx'\nimport { BrekekeGradient } from './BrekekeGradient'\nimport { RnIcon, RnImage, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst globalCss = `* {\n  outline: none !important;\n  box-sizing: border-box;\n}\na {\n  text-decoration: none;\n}`\n\nrequestAnimationFrame(() => {\n  const s = document.createElement('style')\n  s.type = 'text/css'\n  s.appendChild(document.createTextNode(globalCss))\n  const h = document.head || document.getElementsByTagName('head')[0]\n  h.appendChild(s)\n})\n\nconst css = StyleSheet.create({\n  WebApp: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: window._BrekekePhoneWebRoot\n      ? ('fixed' as 'absolute')\n      : 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  WebApp_Logo: {\n    width: 80,\n    height: 80,\n    opacity: 0,\n  },\n  WebApp_Brand: {\n    width: 150,\n    height: 54,\n    marginTop: 10,\n    opacity: 0,\n  },\n  WebApp_Btn: {\n    position: 'relative',\n    width: 270,\n    padding: 15,\n    borderRadius: v.borderRadius,\n    marginTop: 10,\n  },\n  WebApp_Btn__app: {\n    marginTop: 30,\n    backgroundColor: 'black',\n  },\n  WebApp_Btn__browser: {\n    backgroundColor: 'white',\n    marginBottom: 50,\n  },\n  WebApp_BtnTxt__browser: {\n    color: 'white',\n  },\n  WebApp_Icon: {\n    position: 'absolute',\n    top: 11,\n    right: 10,\n  },\n})\n\nexport const App = () => {\n  const [isBrowser, setIsBrowser] = useState(!isIOS && !isAndroid)\n  let child: ReactElement | null = null\n  if (isBrowser) {\n    child = <RnApp />\n  } else {\n    const params = parse(window.location as any as Url<any>)\n    const q = qs.stringify(params)\n    const appUrl = isIOS\n      ? `brekekeapp://open?${q}`\n      : `intent://open?${q}#Intent;scheme=brekekeapp;package=${bundleIdentifier};end`\n    child = (\n      <>\n        <RnImage\n          source={{\n            uri: logo,\n          }}\n          style={css.WebApp_Logo}\n        />\n        <RnImage\n          source={{\n            uri: brand,\n          }}\n          style={css.WebApp_Brand}\n        />\n        <a href={appUrl}>\n          <RnTouchableOpacity style={[css.WebApp_Btn, css.WebApp_Btn__app]}>\n            <RnText small style={css.WebApp_BtnTxt__browser}>\n              {intl`OPEN IN APP`}\n            </RnText>\n            <RnIcon\n              color='white'\n              path={isIOS ? mdiApple : mdiAndroid}\n              style={css.WebApp_Icon}\n            />\n          </RnTouchableOpacity>\n        </a>\n        <RnTouchableOpacity\n          onPress={() => setIsBrowser(true)}\n          style={[css.WebApp_Btn, css.WebApp_Btn__browser]}\n        >\n          <RnText small>{intl`OPEN IN BROWSER`}</RnText>\n          <RnIcon path={mdiWeb} style={css.WebApp_Icon} />\n        </RnTouchableOpacity>\n      </>\n    )\n  }\n  const Container = isBrowser ? View : BrekekeGradient\n  return <Container style={css.WebApp}>{child}</Container>\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAACzCAMAAABSHv5WAAADAFBMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/LkhhAAAA/3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1O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\"","export default __webpack_public_path__ + \"static/media/logo.136d176f.png\";","// API was a component but had been rewritten to a listener\nimport '../api'\n\nimport NetInfo from '@react-native-community/netinfo'\nimport { debounce } from 'lodash'\nimport { reaction, runInAction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { useEffect } from 'react'\nimport {\n  ActivityIndicator,\n  AppState,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport KeyboardSpacer from 'react-native-keyboard-spacer'\nimport SplashScreen from 'react-native-splash-screen'\n\nimport { sip } from '../api/sip'\nimport { SyncPnToken } from '../api/syncPnToken'\nimport { RenderAllCalls } from '../pages/PageCallManage'\nimport {\n  accountStore,\n  getAccountUniqueId,\n  getLastSignedInId,\n} from '../stores/accountStore'\nimport { authPBX } from '../stores/AuthPBX'\nimport { authSIP } from '../stores/AuthSIP'\nimport { getAuthStore } from '../stores/authStore'\nimport { authUC } from '../stores/AuthUC'\nimport { getCallStore } from '../stores/callStore'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnAlertRoot } from '../stores/RnAlertRoot'\nimport { RnPickerRoot } from '../stores/RnPickerRoot'\nimport { RnStackerRoot } from '../stores/RnStackerRoot'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { setupCallKeep } from '../utils/callkeep'\nimport { getAudioVideoPermission } from '../utils/getAudioVideoPermission'\n// @ts-ignore\nimport { PushNotification } from '../utils/PushNotification'\nimport { registerOnUnhandledError } from '../utils/registerOnUnhandledError'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { webPromptPermission } from '../utils/webPromptPermission'\nimport { AnimatedSize } from './AnimatedSize'\nimport { CallBar } from './CallBar'\nimport { CallNotify } from './CallNotify'\nimport { CallVideos } from './CallVideos'\nimport { CallVoices } from './CallVoices'\nimport { ChatGroupInvite, UnreadChatNoti } from './ChatGroupInvite'\nimport { PhonebookAddItem } from './PhonebookAddItem'\nimport { AudioPlayer, RnStatusBar, RnText } from './Rn'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst initApp = async () => {\n  await intlStore.wait()\n\n  const s = getAuthStore()\n  const cs = getCallStore()\n  const nav = Nav()\n  const pnToken = SyncPnToken()\n\n  const checkHasCallOrWakeFromPN = () =>\n    Object.keys(cs.callkeepMap).length ||\n    sip.phone?.getSessionCount() ||\n    cs.calls.length ||\n    s.sipPn.sipAuth\n  const hasCallOrWakeFromPN = checkHasCallOrWakeFromPN()\n\n  const autoLogin = async () => {\n    const d = await getLastSignedInId(true)\n    const a = accountStore.accounts.find(_ => getAccountUniqueId(_) === d.id)\n    if (d.autoSignInBrekekePhone && (await s.signIn(a, true))) {\n      console.log('App navigated by auto signin')\n      // already navigated\n    } else {\n      nav.goToPageIndex()\n    }\n  }\n\n  registerOnUnhandledError(unexpectedErr => {\n    // Must wrap in setTimeout avoid mobx error state change when rendering\n    BackgroundTimer.setTimeout(() => RnAlert.error({ unexpectedErr }), 300)\n    return false\n  })\n\n  AppState.addEventListener('change', async () => {\n    if (AppState.currentState !== 'active') {\n      return\n    }\n    s.resetFailureState()\n    cs.onCallKeepAction()\n    pnToken.syncForAllAccounts()\n    // With ios when wakekup app, currentState will be 'unknown' first then 'active'\n    // https://github.com/facebook/react-native-website/issues/273\n    if (Platform.OS !== 'ios') {\n      return\n    }\n    if (!checkHasCallOrWakeFromPN() && !(await s.handleUrlParams())) {\n      await autoLogin()\n    }\n  })\n\n  NetInfo.addEventListener(({ isConnected }) => {\n    if (s.hasInternetConnected === isConnected) {\n      return\n    }\n    s.hasInternetConnected = isConnected\n    if (!isConnected) {\n      return\n    }\n    s.resetFailureState()\n    authPBX.auth()\n    authSIP.auth()\n    authUC.auth()\n  })\n\n  if (Platform.OS === 'web') {\n    if (window._BrekekePhoneWebRoot) {\n      webPromptPermission()\n    }\n  } else if (AppState.currentState === 'active' && !hasCallOrWakeFromPN) {\n    getAudioVideoPermission()\n  }\n\n  setupCallKeep()\n  await accountStore.loadAccountsFromLocalStorage()\n\n  const onAuthUpdate = debounce(() => {\n    nav.goToPageIndex()\n    chatStore.clearStore()\n    contactStore.clearStore()\n    userStore.clearStore()\n    if (s.signedInId) {\n      s.resetFailureState()\n      authPBX.auth()\n      authSIP.auth()\n      authUC.auth()\n    } else {\n      authPBX.dispose()\n      authSIP.dispose()\n      authUC.dispose()\n    }\n  }, 17)\n  const clearReaction = reaction(() => s.signedInId, onAuthUpdate)\n  void clearReaction\n\n  if (await s.handleUrlParams()) {\n    console.log('App navigated by url params')\n    // already navigated\n  } else if (\n    // only auto sign in if app active mean user open app intentionally\n    // other cases like wakeup via push we should not auto sign in\n    Platform.OS !== 'web' &&\n    AppState.currentState === 'active' &&\n    !hasCallOrWakeFromPN\n  ) {\n    await autoLogin()\n  } else {\n    nav.goToPageIndex()\n  }\n\n  if (AppState.currentState === 'active') {\n    pnToken.syncForAllAccounts()\n  }\n}\n\nlet alreadyInitApp = false\nPushNotification.register(async () => {\n  if (alreadyInitApp) {\n    return\n  }\n  alreadyInitApp = true\n  await initApp().catch(console.error)\n  await waitTimeout(100)\n  runInAction(() => {\n    accountStore.appInitDone = true\n  })\n})\n\nconst css = StyleSheet.create({\n  App: {\n    backgroundColor: v.bg,\n  },\n  App_Inner: {\n    flex: 1,\n  },\n  App_ConnectionStatus: {\n    backgroundColor: v.colors.warning,\n  },\n  App_ConnectionStatus__failure: {\n    backgroundColor: v.colors.danger,\n  },\n  App_ConnectionStatusInner: {\n    paddingHorizontal: 5,\n    paddingTop: 4,\n    paddingBottom: 5,\n  },\n  App_ConnectionStatusIncreaseTouchSize: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 30,\n  },\n  LoadingFullscreen: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: '#74bf53', // Old color from design, not g.colors.primary\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nexport const App = observer(() => {\n  useEffect(() => {\n    if (Platform.OS !== 'web') {\n      SplashScreen.hide()\n    }\n  }, [])\n\n  const {\n    isConnFailure,\n    pbxConnectingOrFailure,\n    sipConnectingOrFailure,\n    ucConnectingOrFailure,\n    ucLoginFromAnotherPlace,\n    signedInId,\n    resetFailureStateIncludeUcLoginFromAnotherPlace,\n  } = getAuthStore()\n\n  const serviceConnectingOrFailure = pbxConnectingOrFailure()\n    ? 'PBX'\n    : sipConnectingOrFailure()\n    ? 'SIP'\n    : ucConnectingOrFailure()\n    ? 'UC'\n    : ''\n  const isFailure = isConnFailure()\n\n  const connMessage =\n    isFailure && ucLoginFromAnotherPlace\n      ? intl`UC signed in from another location`\n      : !serviceConnectingOrFailure\n      ? ''\n      : isFailure\n      ? intl`${serviceConnectingOrFailure} connection failed`\n      : intl`Connecting to ${serviceConnectingOrFailure}...`\n\n  return (\n    <View style={[StyleSheet.absoluteFill, css.App]}>\n      {chatStore.chatNotificationSoundRunning && <AudioPlayer />}\n      <RnStatusBar />\n      {!!signedInId && !!connMessage && (\n        <AnimatedSize\n          style={[\n            css.App_ConnectionStatus,\n            isFailure && css.App_ConnectionStatus__failure,\n          ]}\n        >\n          <RnTouchableOpacity\n            style={css.App_ConnectionStatusInner}\n            onPress={\n              isFailure\n                ? resetFailureStateIncludeUcLoginFromAnotherPlace\n                : undefined\n            }\n          >\n            <RnText small white>\n              {connMessage}\n            </RnText>\n          </RnTouchableOpacity>\n        </AnimatedSize>\n      )}\n\n      <CallNotify />\n      <CallBar />\n      <CallVideos />\n      <CallVoices />\n      <ChatGroupInvite />\n      <UnreadChatNoti />\n\n      <View style={css.App_Inner}>\n        <RnStackerRoot />\n        <RenderAllCalls />\n        <RnPickerRoot />\n        <PhonebookAddItem />\n\n        <RnAlertRoot />\n        {isFailure && (\n          <RnTouchableOpacity\n            style={css.App_ConnectionStatusIncreaseTouchSize}\n            onPress={resetFailureStateIncludeUcLoginFromAnotherPlace}\n          />\n        )}\n      </View>\n      {Platform.OS === 'ios' && <KeyboardSpacer />}\n\n      {!accountStore.appInitDone && (\n        <View style={css.LoadingFullscreen}>\n          <ActivityIndicator size='large' color='white' />\n        </View>\n      )}\n    </View>\n  )\n})\n","import { action } from 'mobx'\n\nimport { authPBX } from '../stores/AuthPBX'\nimport { authSIP } from '../stores/AuthSIP'\nimport { getAuthStore, waitSip } from '../stores/authStore'\nimport { authUC } from '../stores/AuthUC'\nimport { Call } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { chatStore, FileEvent } from '../stores/chatStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { sipErrorEmitter } from '../stores/sipErrorEmitter'\nimport { userStore } from '../stores/userStore'\nimport { toBoolean } from '../utils/string'\nimport { Conference, PbxEvent, Session } from './brekekejs'\nimport { pbx } from './pbx'\nimport { sip } from './sip'\nimport { SyncPnToken } from './syncPnToken'\nimport { uc } from './uc'\n\nclass Api {\n  constructor() {\n    pbx.on('connection-started', this.onPBXConnectionStarted)\n    pbx.on('connection-stopped', this.onPBXConnectionStopped)\n    pbx.on('connection-timeout', this.onPBXConnectionTimeout)\n    pbx.on('user-calling', this.onPBXUserCalling)\n    pbx.on('user-ringing', this.onPBXUserRinging)\n    pbx.on('user-talking', this.onPBXUserTalking)\n    pbx.on('user-holding', this.onPBXUserHolding)\n    pbx.on('user-hanging', this.onPBXUserHanging)\n    pbx.on('voicemail-updated', this.onVoiceMailUpdated)\n    pbx.on('park-started', this.onPBXUserParkStarted)\n    pbx.on('park-stopped', this.onPBXUserParkStopped)\n    pbx.on('call-recording', this.onPbxCallRecording)\n    sip.on('connection-started', this.onSIPConnectionStarted)\n    sip.on('connection-stopped', this.onSIPConnectionStopped)\n    sip.on('connection-timeout', this.onSIPConnectionTimeout)\n    sip.on('session-started', this.onSIPSessionStarted)\n    sip.on('session-updated', this.onSIPSessionUpdated)\n    sip.on('session-stopped', this.onSIPSessionStopped)\n    uc.on('connection-stopped', this.onUCConnectionStopped)\n    uc.on('user-updated', this.onUCUserUpdated)\n    uc.on('buddy-chat-created', this.onBuddyChatCreated)\n    uc.on('group-chat-created', this.onGroupChatCreated)\n    uc.on('chat-group-invited', this.onChatGroupInvited)\n    uc.on('chat-group-revoked', this.onChatGroupRevoked)\n    uc.on('chat-group-updated', this.onChatGroupUpdated)\n    uc.on('file-received', this.onFileReceived)\n    uc.on('file-progress', this.onFileProgress)\n    uc.on('file-finished', this.onFileFinished)\n  }\n\n  @action onPBXConnectionStarted = async () => {\n    console.log('PBX PN debug: set pbxState success')\n    const s = getAuthStore()\n    s.pbxState = 'success'\n    s.pbxTotalFailure = 0\n    authSIP.authWithCheck()\n    await waitSip()\n    await pbx.getConfig()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    contactStore.loadContacts()\n    // load list local  when pbx start\n    // set default pbxLocalAllUsers = true\n    if (cp.pbxLocalAllUsers === undefined) {\n      cp.pbxLocalAllUsers = true\n    }\n    if (s.isBigMode() || !cp.pbxLocalAllUsers) {\n      cp.ucEnabled ? userStore.loadUcBuddyList() : userStore.loadPbxBuddyList()\n    } else {\n      contactStore.getPbxUsers()\n    }\n    if (s.isSignInByNotification) {\n      return\n    }\n    SyncPnToken()\n      .sync(cp)\n      .then(() => SyncPnToken().syncForAllAccounts())\n  }\n  onPBXConnectionStopped = () => {\n    getAuthStore().pbxState = 'stopped'\n    getAuthStore().pbxTotalFailure += 1\n  }\n  onPBXConnectionTimeout = () => {\n    getAuthStore().pbxState = 'failure'\n    getAuthStore().pbxTotalFailure += 1\n    authPBX.authWithCheck()\n  }\n  onPBXUserCalling = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'calling')\n  }\n  onPBXUserRinging = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'ringing')\n  }\n  onPBXUserTalking = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'talking')\n  }\n  onPBXUserHolding = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'holding')\n  }\n  onPBXUserHanging = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, '')\n  }\n  onVoiceMailUpdated = (ev: { new: number }) => {\n    getCallStore().setNewVoicemailCount(ev?.new || 0)\n  }\n  onPBXUserParkStarted = (parkNumber: string) => {\n    console.log('onPBXUserParkStarted', parkNumber)\n    getCallStore().addParkNumber(parkNumber)\n  }\n  onPBXUserParkStopped = (parkNumber: string) => {\n    console.log('onPBXUserParkStopped', parkNumber)\n    getCallStore().removeParkNumber(parkNumber)\n  }\n  onPbxCallRecording = (ev: PbxEvent['callRecording']) => {\n    getCallStore()\n      .calls.find(item => item.pbxTalkerId === ev.talker_id)\n      ?.updateRecordingStatus(toBoolean(ev.status))\n  }\n  @action onSIPConnectionStarted = () => {\n    console.log('SIP PN debug: set sipState success')\n    sipErrorEmitter.removeAllListeners()\n    const s = getAuthStore()\n    s.sipState = 'success'\n    s.sipTotalFailure = 0\n    authPBX.auth()\n  }\n  onSIPConnectionStopped = (e: { reason: string; response: string }) => {\n    const s = getAuthStore()\n    if (!e?.reason && !e?.response) {\n      console.log('SIP PN debug: set sipState stopped')\n      s.sipState = 'stopped'\n    } else {\n      console.log('SIP PN debug: set sipState failure stopped')\n      s.sipState = 'failure'\n    }\n    s.sipTotalFailure += 1\n    if (s.sipTotalFailure > 3) {\n      s.sipPn = {}\n    }\n    if (s.sipState === 'failure') {\n      authSIP.authWithCheck()\n    }\n  }\n  onSIPConnectionTimeout = () => {\n    console.log('SIP PN debug: set sipState failure timeout')\n    getAuthStore().sipState = 'failure'\n    getAuthStore().sipTotalFailure += 1\n    sip.stopWebRTC()\n    authSIP.authWithCheck()\n  }\n  onSIPSessionStarted = (c: Call) => {\n    if (c.partyNumber === '8') {\n      c.partyName = intl`Voicemail`\n    }\n    if (!c.partyName) {\n      c.partyName = getPartyName(c.partyNumber) || c.partyNumber\n    }\n    getCallStore().onCallUpsert(c)\n  }\n  onSIPSessionUpdated = (call: Call) => {\n    getCallStore().onCallUpsert(call)\n  }\n  onSIPSessionStopped = (rawSession: Session) => {\n    getCallStore().onCallRemove(rawSession)\n  }\n\n  onUCConnectionStopped = () => {\n    getAuthStore().ucState = 'stopped'\n  }\n  onUCConnectionTimeout = () => {\n    getAuthStore().ucState = 'failure'\n    getAuthStore().ucTotalFailure += 1\n    authUC.authWithCheck()\n  }\n  onUCUserUpdated = (ev: {\n    id: string\n    name: string\n    avatar: string\n    status: string\n    statusText: string\n  }) => {\n    contactStore.updateUcUser(ev)\n    userStore.updateStatusBuddy(ev.id, ev.status, ev.avatar)\n  }\n  onBuddyChatCreated = (chat: {\n    id: string\n    creator: string\n    text?: string\n    type: number\n    file?: string\n    created: number\n    conf_id: string\n  }) => {\n    chatStore.pushMessages(chat.creator, chat, true)\n  }\n\n  onGroupChatCreated = (chat: {\n    id: string\n    group: string\n    creator: string\n    text?: string\n    type: number\n    file?: string\n    created: number\n  }) => {\n    chatStore.pushMessages(chat.group, chat, true)\n  }\n\n  onChatGroupInvited = (group: {\n    id: string\n    name: string\n    inviter: string\n    members: string[]\n    webchat: Conference\n  }) => {\n    chatStore.upsertGroup(group)\n  }\n  onChatGroupUpdated = (group: {\n    id: string\n    name: string\n    jointed: boolean\n    members: string[]\n    webchat: Conference\n  }) => {\n    chatStore.upsertGroup(group)\n  }\n  onChatGroupRevoked = (group: { id: string }) => {\n    chatStore.removeGroup(group.id)\n  }\n  onFileReceived = (file: {\n    id: string\n    name: string\n    size: number\n    incoming: boolean\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file)\n  }\n  onFileProgress = (file: {\n    id: string\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file, FileEvent.onFileProgress)\n  }\n  onFileFinished = (file: {\n    id: string\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file)\n  }\n}\n\nnew Api()\n\ninterface UserTalkerEvent {\n  user: string\n  talker: string\n}\n","import { action, observable, runInAction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  ActivityIndicator,\n  AppState,\n  Dimensions,\n  Keyboard,\n  NativeEventSubscription,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport {\n  mdiAlphaPCircle,\n  mdiCallSplit,\n  mdiCameraFrontVariant,\n  mdiCameraRearVariant,\n  mdiDialpad,\n  mdiMicrophone,\n  mdiMicrophoneOff,\n  mdiPauseCircle,\n  mdiPhone,\n  mdiPhoneHangup,\n  mdiPlayCircle,\n  mdiRecord,\n  mdiRecordCircle,\n  mdiVideo,\n  mdiVideoOff,\n  mdiVolumeHigh,\n  mdiVolumeMedium,\n} from '../assets/icons'\nimport { BrekekeGradient } from '../components/BrekekeGradient'\nimport { ButtonIcon } from '../components/ButtonIcon'\nimport { IncomingItemWithTimer } from '../components/CallNotify'\nimport { FieldButton } from '../components/FieldButton'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { RnText } from '../components/RnText'\nimport { SmartImage } from '../components/SmartAvatarHTML'\nimport { v } from '../components/variables'\nimport { VideoPlayer } from '../components/VideoPlayer'\nimport { getAuthStore } from '../stores/authStore'\nimport { Call, CallConfigKey } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { Duration } from '../stores/timerStore'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { PageCallTransferAttend } from './PageCallTransferAttend'\n\nconst height = Dimensions.get('window').height\nconst css = StyleSheet.create({\n  BtnSwitchCamera: {\n    position: 'absolute',\n    top: 10, // Header compact height\n    right: 10,\n    zIndex: 100,\n  },\n  cameraStyle: {\n    position: 'absolute',\n    top: 50,\n    right: 10,\n    zIndex: 100,\n  },\n  Video: {\n    position: 'absolute',\n    top: 40, // Header compact height\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'black',\n  },\n  Video_Space: {\n    flex: 1,\n    alignSelf: 'stretch',\n  },\n  Btns: {\n    marginTop: 10,\n  },\n  BtnFuncCalls: {\n    marginBottom: 10,\n  },\n  Btns_Hidden: {\n    opacity: 0,\n  },\n  Btns_Inner: {\n    flexDirection: 'row',\n    alignSelf: 'center',\n    width: Dimensions.get('screen').width,\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  Btns_Space: {\n    height: 20,\n  },\n  Btns_VerticalMargin: {\n    flex: 1,\n  },\n  Hangup: {\n    // position: 'absolute',\n    // bottom: 40,\n    // left: 0,\n    // right: 0,\n    marginBottom: 40,\n  },\n  Hangup_incoming: {\n    marginLeft: 180,\n  },\n  Hangup_answer: {\n    marginRight: 180,\n  },\n  Hangup_incomingText: {\n    bottom: undefined,\n    top: 100,\n  },\n  Hangup_incomingText_avoidLargeImg: {\n    bottom: undefined,\n    top: 200,\n  },\n  labelStyle: {\n    paddingRight: 50,\n  },\n  Image_wrapper: {\n    marginHorizontal: 15,\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  ImageSize: {\n    height: 130,\n    width: 130,\n    borderRadius: 75,\n  },\n  ImageLargeSize: {\n    height: '100%',\n    width: (height * 30) / 100,\n    backgroundColor: 'white',\n  },\n  styleTextBottom: {\n    marginTop: 20,\n  },\n  Hangup_avoidAvatar: {\n    top: '35%',\n  },\n  Hangup_avoidAvatar_Large: {\n    top: '60%',\n  },\n  LoadingFullScreen: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  hidden: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    top: '-100%',\n    left: '-100%',\n  },\n  viewHangupBtns: {\n    marginBottom: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    marginTop: 10,\n  },\n  viewHangupBtn: {\n    marginBottom: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    flexDirection: 'row',\n  },\n  txtHold: {\n    height: 65,\n    marginBottom: 10,\n  },\n  smallAvatar: {\n    width: 200,\n    height: 200,\n    borderRadius: 100,\n    overflow: 'hidden',\n  },\n  vContainer: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n  },\n  vContainerVideo: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n  },\n})\n\n// Render all the calls in App.tsx\n// The avatars will be kept even if we navigate between views\n@observer\nexport class RenderAllCalls extends Component {\n  prevCallsLength = getCallStore().calls.length\n  componentDidUpdate() {\n    const l = getCallStore().calls.length\n    if (this.prevCallsLength && !l) {\n      Nav().backToPageCallRecents()\n    }\n    this.prevCallsLength = l\n  }\n  render() {\n    const s = getCallStore()\n    if (s.inPageCallManage && !s.calls.length) {\n      return (\n        <Layout\n          compact\n          noScroll\n          onBack={Nav().backToPageCallRecents}\n          title={intl`Connecting...`}\n        />\n      )\n    }\n    return (\n      <>\n        {s.calls.map(c => (\n          <PageCallManage key={c.id} call={c} />\n        ))}\n      </>\n    )\n  }\n}\n\n@observer\nclass PageCallManage extends Component<{\n  call: Call\n}> {\n  componentDidMount() {\n    this.checkJavaPn()\n    this.componentDidUpdate()\n    this.appStateSubscription = AppState.addEventListener(\n      'change',\n      this.onAppStateChange,\n    )\n  }\n  componentDidUpdate() {\n    if (RnKeyboard.isKeyboardShowing) {\n      Keyboard.dismiss()\n    }\n    this.hideButtonsIfVideo()\n    this.openJavaPnOnVisible()\n  }\n  componentWillUnmount() {\n    getCallStore().onCallKeepAction()\n    this.appStateSubscription?.remove()\n  }\n\n  @observable private showButtonsInVideoCall = true\n  private alreadySetShowButtonsInVideoCall = false\n  @action private toggleButtons = () => {\n    this.showButtonsInVideoCall = !this.showButtonsInVideoCall\n  }\n  @action private hideButtonsIfVideo = () => {\n    if (\n      !getCallStore().inPageCallManage?.isFromCallBar &&\n      !this.alreadySetShowButtonsInVideoCall &&\n      this.props.call.remoteVideoEnabled\n    ) {\n      this.showButtonsInVideoCall = false\n      this.alreadySetShowButtonsInVideoCall = true\n    }\n  }\n\n  @observable private hasJavaPn = true\n  private checkJavaPn = async () => {\n    if (\n      Platform.OS !== 'android' ||\n      !this.props.call.incoming ||\n      !getAuthStore().getCurrentAccount()?.pushNotificationEnabled\n    ) {\n      runInAction(() => {\n        this.hasJavaPn = false\n      })\n      return\n    }\n    // The PN may come slower than SIP web socket\n    // We check if PN screen exists here in 5 seconds\n    // Must get callkeepUuid from object since it may be assigned lately\n    for (let i = 0; i < 5; i++) {\n      const uuid = this.props.call.callkeepUuid\n      if (!uuid) {\n        await waitTimeout(1000)\n        continue\n      }\n      const r = await BrekekeUtils.hasIncomingCallActivity(uuid)\n      console.log('hasIncomingCallActivity', r)\n      if (r) {\n        return\n      }\n      await waitTimeout(1000)\n    }\n    runInAction(() => {\n      console.warn(\n        `No incoming call activity for uuid=${this.props.call.callkeepUuid}`,\n      )\n      this.hasJavaPn = false\n    })\n  }\n  private openJavaPnOnVisible = () => {\n    const { call: c } = this.props\n    const s = getCallStore()\n    if (\n      this.hasJavaPn &&\n      this.isVisible() &&\n      c.callkeepUuid &&\n      !c.transferring &&\n      s.prevDisplayingCallId !== c.id\n    ) {\n      s.prevDisplayingCallId = c.id\n      BrekekeUtils.onPageCallManage(c.callkeepUuid)\n    }\n  }\n\n  private appStateSubscription?: NativeEventSubscription\n  private onAppStateChange = () => {\n    if (AppState.currentState === 'active') {\n      const { call: c } = this.props\n      if (\n        this.hasJavaPn &&\n        this.isVisible() &&\n        c.callkeepUuid &&\n        !c.transferring\n      ) {\n        getCallStore().inPageCallManage = undefined\n      }\n    }\n  }\n\n  private isVisible = () => {\n    const s = getCallStore()\n    const { call: c } = this.props\n    return s.inPageCallManage && s.displayingCallId === c.id\n  }\n\n  private isBtnHidden = (k: CallConfigKey) => {\n    const {\n      call: { callConfig },\n    } = this.props\n    if (callConfig?.[k]) {\n      return callConfig[k] === 'false'\n    }\n    const { pbxConfig } = getAuthStore()\n    return pbxConfig?.[`webphone.call.${k}`] === 'false'\n  }\n\n  private renderLayout = () => {\n    const { call: c } = this.props\n    return (\n      <Layout\n        compact\n        dropdown={\n          c.localVideoEnabled && !c.transferring\n            ? [\n                {\n                  label: this.showButtonsInVideoCall\n                    ? intl`Hide call menu buttons`\n                    : intl`Show call menu buttons`,\n                  onPress: this.toggleButtons,\n                },\n              ]\n            : undefined\n        }\n        noScroll\n        onBack={Nav().backToPageCallRecents}\n        title={c.getDisplayName() || intl`Connecting...`}\n        transparent={!c.transferring}\n      >\n        <View\n          style={\n            this.props.call.localVideoEnabled || c.localVideoEnabled\n              ? css.vContainerVideo\n              : css.vContainer\n          }\n        >\n          {this.renderCall()}\n        </View>\n      </Layout>\n    )\n  }\n  private renderCall = () => {\n    const { call: c } = this.props\n    // Render PageCallTransferAttend as a layer instead\n    // So switching will not cause the avatar to reload\n    const renderTransferring = () => (\n      <View style={css.LoadingFullScreen}>\n        <PageCallTransferAttend />\n      </View>\n    )\n    if (this.hasJavaPn) {\n      if (c.transferring) {\n        return renderTransferring()\n      }\n      return (\n        <View style={css.LoadingFullScreen}>\n          <ActivityIndicator size='large' color='black' />\n        </View>\n      )\n    }\n    return (\n      <>\n        {c.localVideoEnabled && this.renderVideo()}\n        {this.renderAvatar()}\n        {this.renderBtns()}\n        {this.renderHangupBtn()}\n        {c.transferring ? renderTransferring() : null}\n      </>\n    )\n  }\n\n  private renderVideo = () => {\n    const { call: c } = this.props\n    return (\n      <>\n        <View style={css.cameraStyle}>\n          <ButtonIcon\n            color='white'\n            noborder\n            onPress={c.toggleSwitchCamera}\n            path={\n              c.isFrontCamera ? mdiCameraFrontVariant : mdiCameraRearVariant\n            }\n            size={40}\n          />\n        </View>\n        <View style={css.Video_Space} />\n        <View style={css.Video}>\n          <VideoPlayer sourceObject={c.remoteVideoStreamObject} />\n        </View>\n        <RnTouchableOpacity\n          onPress={this.toggleButtons}\n          style={StyleSheet.absoluteFill}\n        />\n      </>\n    )\n  }\n\n  private renderAvatar = () => {\n    const { call: c } = this.props\n    const incoming = c.incoming && !c.answered\n    const isLarge = !!(c.partyImageSize && c.partyImageSize === 'large')\n    const isShowAvatar =\n      (c.partyImageUrl || c.talkingImageUrl) && !c.localVideoEnabled\n    const styleBigAvatar = c.localVideoEnabled\n      ? { flex: 1, maxHeight: Dimensions.get('window').height / 2 - 20 }\n      : { flex: 1 }\n    const styleViewAvatar = isLarge ? styleBigAvatar : css.smallAvatar\n    return (\n      <View style={[css.Image_wrapper, { flex: 1 }]}>\n        <View\n          style={isShowAvatar ? styleViewAvatar : { height: 0, opacity: 0 }}\n        >\n          {c.answered && (\n            <SmartImage\n              key={c.talkingImageUrl}\n              uri={`${c.talkingImageUrl}`}\n              style={{ flex: 1, aspectRatio: 1 }}\n            />\n          )}\n          {!c.answered && (\n            <SmartImage\n              key={c.partyImageUrl}\n              uri={`${c.partyImageUrl}`}\n              style={{ flex: 1, aspectRatio: 1 }}\n            />\n          )}\n        </View>\n        <View style={!isShowAvatar ? css.styleTextBottom : {}}>\n          <RnText title white center numberOfLines={2}>\n            {`${c.getDisplayName()}`}\n          </RnText>\n          {c.answered && (\n            <Duration subTitle white center>\n              {c.answeredAt}\n            </Duration>\n          )}\n          {incoming && (\n            <RnText bold white center>\n              {intl`Incoming Call`}\n            </RnText>\n          )}\n        </View>\n      </View>\n    )\n  }\n\n  private renderBtns = () => {\n    const { call: c } = this.props\n    const n = getCallStore().calls.filter(_ => _.id !== c.id).length\n    if (c.localVideoEnabled && !this.showButtonsInVideoCall) {\n      return null\n    }\n    const Container = c.localVideoEnabled ? RnTouchableOpacity : View\n    const activeColor = c.localVideoEnabled\n      ? v.colors.primary\n      : v.colors.warning\n    const isHideButtons =\n      (c.incoming || (!c.withSDPControls && Platform.OS === 'web')) &&\n      !c.answered\n    const incoming = c.incoming && !c.answered\n    return (\n      <Container\n        onPress={c.localVideoEnabled ? this.toggleButtons : undefined}\n        style={[css.Btns, { marginTop: !incoming ? 30 : 0 }]}\n      >\n        {n > 0 && (\n          <FieldButton\n            label={intl`BACKGROUND CALLS`}\n            onCreateBtnPress={Nav().goToPageCallBackgrounds}\n            textInputStyle={css.labelStyle}\n            value={\n              n > 1\n                ? intl`${n} other calls are in background`\n                : intl`${n} other call is in background`\n            }\n          />\n        )}\n        <View style={{ paddingTop: 10 }} />\n        <View style={[css.Btns_Inner, isHideButtons && css.Btns_Hidden]}>\n          {!this.isBtnHidden('transfer') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor='white'\n              color='black'\n              name={intl`TRANSFER`}\n              noborder\n              onPress={Nav().goToPageCallTransferChooseUser}\n              path={mdiCallSplit}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('park') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor='white'\n              color='black'\n              name={intl`PARK`}\n              noborder\n              onPress={Nav().goToPageCallParks2}\n              path={mdiAlphaPCircle}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('video') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.localVideoEnabled ? activeColor : 'white'}\n              color={c.localVideoEnabled ? 'white' : 'black'}\n              name={intl`VIDEO`}\n              noborder\n              onPress={c.toggleVideo}\n              path={c.localVideoEnabled ? mdiVideo : mdiVideoOff}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {Platform.OS !== 'web' && !this.isBtnHidden('speaker') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              bgcolor={\n                getCallStore().isLoudSpeakerEnabled ? activeColor : 'white'\n              }\n              color={getCallStore().isLoudSpeakerEnabled ? 'white' : 'black'}\n              name={intl`SPEAKER`}\n              noborder\n              onPress={getCallStore().toggleLoudSpeaker}\n              path={\n                getCallStore().isLoudSpeakerEnabled\n                  ? mdiVolumeHigh\n                  : mdiVolumeMedium\n              }\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('mute') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.muted ? activeColor : 'white'}\n              color={c.muted ? 'white' : 'black'}\n              name={c.muted ? intl`UNMUTE` : intl`MUTE`}\n              noborder\n              onPress={() => c.toggleMuted()}\n              path={c.muted ? mdiMicrophoneOff : mdiMicrophone}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('record') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.recording ? activeColor : 'white'}\n              color={c.recording ? 'white' : 'black'}\n              name={intl`RECORD`}\n              noborder\n              onPress={c.toggleRecording}\n              path={c.recording ? mdiRecordCircle : mdiRecord}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('dtmf') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!(c.withSDPControls || c.answered)}\n              bgcolor='white'\n              color='black'\n              name={intl`KEYPAD`}\n              noborder\n              onPress={Nav().goToPageCallDtmfKeypad}\n              path={mdiDialpad}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('hold') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.holding ? activeColor : 'white'}\n              color={c.holding ? 'white' : 'black'}\n              name={c.holding ? intl`UNHOLD` : intl`HOLD`}\n              noborder\n              onPress={c.toggleHoldWithCheck}\n              path={c.holding ? mdiPlayCircle : mdiPauseCircle}\n              size={40}\n              textcolor='white'\n            />\n          )}\n        </View>\n        <View style={{ paddingBottom: 10 }} />\n      </Container>\n    )\n  }\n\n  private renderHangupBtn = () => {\n    const { call: c } = this.props\n    const incoming = c.incoming && !c.answered\n    const isLarge = !!(c.partyImageSize && c.partyImageSize === 'large')\n    const isHangupBtnHidden = incoming && this.isBtnHidden('hangup')\n    return (\n      <View style={[css.viewHangupBtns, { marginTop: isLarge ? 10 : 40 }]}>\n        {c.holding ? (\n          <View style={css.txtHold}>\n            <RnText small white center>\n              {intl`CALL IS ON HOLD`}\n            </RnText>\n          </View>\n        ) : (\n          <View style={css.viewHangupBtn}>\n            {incoming && this.isVisible() && <IncomingItemWithTimer />}\n            {incoming && (\n              <ButtonIcon\n                bgcolor={v.colors.primary}\n                color='white'\n                noborder\n                onPress={() => c.answer({ ignoreNav: true })}\n                path={mdiPhone}\n                size={40}\n                textcolor='white'\n              />\n            )}\n            {incoming && (\n              <View style={{ width: isHangupBtnHidden ? 0 : 100 }} />\n            )}\n            {!isHangupBtnHidden && (\n              <ButtonIcon\n                bgcolor={v.colors.danger}\n                color='white'\n                noborder\n                onPress={c.hangupWithUnhold}\n                path={mdiPhoneHangup}\n                size={40}\n                textcolor='white'\n              />\n            )}\n          </View>\n        )}\n      </View>\n    )\n  }\n\n  render() {\n    void RnKeyboard.isKeyboardShowing // to trigger did update\n    return (\n      <BrekekeGradient\n        white={this.props.call.localVideoEnabled}\n        style={this.isVisible() ? undefined : css.hidden}\n      >\n        {this.renderLayout()}\n      </BrekekeGradient>\n    )\n  }\n}\n","export default __webpack_public_path__ + \"static/media/incallmanager_ringback.8588f1a1.mp3\";","export default __webpack_public_path__ + \"static/media/incallmanager_ringtone.55d244b2.mp3\";","import { FC } from 'react'\nimport {\n  Platform,\n  StyleSheet,\n  TextInputProps,\n  TouchableOpacityProps,\n  View,\n} from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { Field } from './Field'\nimport { RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  FieldButton: {\n    alignSelf: 'center',\n    marginTop: 15,\n    paddingHorizontal: 10,\n    minWidth: 305,\n    maxWidth: 360,\n    backgroundColor: 'white',\n    borderRadius: v.borderRadius,\n    overflow: 'hidden',\n  },\n  Inner: {\n    ...Platform.select({\n      android: {\n        top: 1,\n      },\n      default: {\n        top: -5,\n      },\n    }),\n  },\n  CreateBtn: {\n    ...Platform.select({\n      android: {\n        top: 8,\n      },\n      default: {\n        top: 15,\n      },\n    }),\n  },\n  CreateBtnIcon: {\n    transform: [\n      {\n        rotate: '180deg',\n      },\n    ],\n  },\n})\n\nexport const FieldButton: FC<\n  Partial<{\n    style: TouchableOpacityProps['style']\n    onCreateBtnPress(): void\n    label: string\n    value: string\n    textInputStyle?: TextInputProps['style']\n  }>\n> = p0 => {\n  const { style, ...p } = p0\n  return (\n    <RnTouchableOpacity\n      onPress={p.onCreateBtnPress}\n      style={[css.FieldButton, style]}\n    >\n      <View style={css.Inner}>\n        <Field\n          {...p}\n          createBtnIcon={mdiKeyboardBackspace}\n          createBtnIconStyle={css.CreateBtnIcon}\n          createBtnStyle={css.CreateBtn}\n          transparent\n        />\n      </View>\n    </RnTouchableOpacity>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { ActivityIndicator, Image, StyleSheet, View } from 'react-native'\n\nimport noPhoto from '../assets/no_photo.png'\nimport { checkImageUrl } from '../utils/checkImageURL'\n\nconst noPhotoImg = typeof noPhoto === 'string' ? { uri: noPhoto } : noPhoto\nconst css = StyleSheet.create({\n  image: {\n    overflow: 'hidden',\n    backgroundColor: 'white',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  imageError: {\n    overflow: 'hidden',\n    backgroundColor: 'white',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 100,\n  },\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: '#00000030',\n    overflow: 'hidden',\n    zIndex: 100,\n  },\n  full: {\n    width: '100%',\n    height: '100%',\n  },\n})\n\nexport const SmartImage = (p: { uri: string; style: object }) => {\n  const [statusImageLoading, setStatusImageLoading] = useState(0)\n  const [size, setSize] = useState(0)\n  useEffect(() => {\n    setStatusImageLoading(0)\n  }, [p.uri])\n\n  const onLoaded = () => {\n    setStatusImageLoading(1)\n  }\n  const onImageLoadError = () => {\n    setStatusImageLoading(2)\n  }\n  const onImageLoad = () => {\n    setStatusImageLoading(1)\n  }\n\n  const isImageUrl = checkImageUrl(p.uri)\n\n  return (\n    <View\n      style={[css.image, p.style]}\n      onLayout={event => {\n        const { height } = event.nativeEvent.layout\n        setSize(height)\n      }}\n    >\n      {!statusImageLoading && (\n        <ActivityIndicator\n          size='small'\n          color='white'\n          style={[css.loading, css.full]}\n        />\n      )}\n      {!isImageUrl ? (\n        <div>\n          <iframe\n            title='Load Image'\n            src={p.uri}\n            height={size}\n            width={size}\n            onLoad={onLoaded}\n            frameBorder='0'\n          />\n        </div>\n      ) : (\n        <Image\n          source={{\n            uri: p.uri,\n          }}\n          style={[css.image, { width: size, height: size }]}\n          onError={onImageLoadError}\n          onLoad={onImageLoad}\n          resizeMode='cover'\n        />\n      )}\n      {statusImageLoading === 2 && isImageUrl && (\n        <Image\n          source={noPhotoImg}\n          style={[css.imageError, { width: size, height: size }]}\n          resizeMode='cover'\n        />\n      )}\n    </View>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/no_photo.5f82ddb3.png\";","import Url from 'url-parse'\n\nexport const checkImageUrl = (url: string) => {\n  url = url.toLowerCase()\n  const u = new Url(url)\n  console.log(`checkImageUrl pathname=${u.pathname}`)\n  return (\n    /\\.(jpeg|jpg|gif|png)$/.test(u.pathname) ||\n    // default image url from uc\n    // https://apps.brekeke.com:8443/uc/image?ACTION=DOWNLOAD&tenant=nam&user=1003&dlk=ltt3&SIZE=40\n    url.includes('/uc/image?action=download&tenant')\n  )\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { sip } from '../api/sip'\nimport {\n  mdiArrowRight,\n  mdiPhoneForward,\n  mdiPhoneHangup,\n  mdiPhoneOff,\n} from '../assets/icons'\nimport { Avatar } from '../components/Avatar'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const css = StyleSheet.create({\n  Outer: {\n    alignItems: 'center',\n    backgroundColor: 'white',\n  },\n  Inner: {\n    width: '100%',\n    flexDirection: 'row',\n    maxWidth: 320,\n  },\n  Inner__info: {\n    maxWidth: 280,\n    marginBottom: 100,\n  },\n  Info: {\n    position: 'absolute',\n    alignItems: 'center',\n  },\n  Info__from: {\n    left: 20,\n    top: 30,\n  },\n  Info__to: {\n    right: 20,\n    top: 30,\n  },\n  Arrow: {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    top: 60,\n  },\n\n  BtnOuter: {\n    width: `${100 / 3}%`,\n    alignItems: 'center',\n  },\n  Btn: {\n    borderRadius: 25,\n    width: 50,\n    height: 50,\n  },\n  Btn__stop: {\n    backgroundColor: v.colors.warning,\n  },\n  Btn__hangup: {\n    backgroundColor: v.colors.danger,\n  },\n  Btn__conference: {\n    backgroundColor: v.colors.primary,\n  },\n  Space: {\n    height: 10,\n  },\n})\n\n@observer\nexport class PageCallTransferAttend extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const oc = getCallStore().getOngoingCall()\n    if (this.prevId && this.prevId !== oc?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = oc?.id\n  }\n\n  resolveMatch = (id: string) => {\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      avatar: ucUser.avatar,\n      number: id,\n    }\n  }\n\n  render() {\n    const oc = getCallStore().getOngoingCall()\n    if (!oc) {\n      return null\n    }\n    const usersource = this.resolveMatch(oc.partyNumber)\n    const usertarget = this.resolveMatch(oc.transferring)\n    return (\n      <View style={css.Outer}>\n        <RnText center subTitle>{intl`Transferring`}</RnText>\n        <View style={css.Space} />\n        <View style={[css.Inner, css.Inner__info]}>\n          <View style={[css.Info, css.Info__from]}>\n            <Avatar source={{ uri: usersource?.avatar }} />\n            <RnText center singleLine small>\n              {oc.getDisplayName()}\n            </RnText>\n          </View>\n          <View style={css.Arrow}>\n            <RnIcon path={mdiArrowRight} />\n          </View>\n          <View style={[css.Info, css.Info__to]}>\n            <Avatar source={{ uri: usertarget?.avatar }} />\n            <RnText center singleLine small>\n              {getPartyName(oc.transferring) || oc.transferring}\n            </RnText>\n          </View>\n        </View>\n        <View style={css.Space} />\n        <View style={css.Inner}>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={() => {\n                oc.stopTransferring()\n                Nav().backToPageCallManage()\n              }}\n              style={[css.Btn, css.Btn__stop]}\n            >\n              <RnIcon path={mdiPhoneOff} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`CANCEL`}\n            </RnText>\n          </View>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={() => sip.hangupSession(oc.id)}\n              style={[css.Btn, css.Btn__hangup]}\n            >\n              <RnIcon path={mdiPhoneHangup} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`TRANSFER`}\n            </RnText>\n          </View>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={() => {\n                oc.conferenceTransferring()\n                Nav().backToPageCallManage()\n              }}\n              style={[css.Btn, css.Btn__conference]}\n            >\n              <RnIcon path={mdiPhoneForward} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`CONFERENCE`}\n            </RnText>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}\n","import { flow } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { ReactElement } from 'react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { intl } from './intl'\nimport { ErrorRnAlert2, PromptRnAlert, RnAlert } from './RnAlert'\n\nconst css = StyleSheet.create({\n  RootRnAlert: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  RootRnAlert_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RootRnAlert_Modal: {\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    borderRadius: v.borderRadius,\n    padding: 15,\n    backgroundColor: v.bg,\n    ...v.boxShadow,\n  },\n  RootRnAlert_Message: {\n    marginTop: 15,\n  },\n  RootRnAlert_Err: {\n    alignSelf: 'flex-start',\n  },\n  RootRnAlert_ErrTxt: {\n    color: v.colors.danger,\n    fontWeight: v.fontWeight,\n  },\n  RootRnAlert_ErrTxt__title: {\n    fontWeight: 'bold',\n  },\n  RootRnAlert_Btns: {\n    alignSelf: 'flex-end',\n    flexDirection: 'row',\n    top: 5,\n    left: 5,\n    marginTop: 15,\n  },\n  RootRnAlert_Btn: {\n    borderRadius: v.borderRadius,\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    backgroundColor: v.colors.primary,\n    width: 100,\n  },\n  RootRnAlert_Btn__cancel: {\n    backgroundColor: v.revBg,\n    marginRight: 10,\n  },\n  RootRnAlert_BtnTxt: {\n    textAlign: 'center',\n    color: v.revColor,\n  },\n})\n\nconst RnAlertR = ({\n  error,\n  prompt,\n}: {\n  error?: ErrorRnAlert2\n  prompt?: PromptRnAlert\n}) => {\n  const a = useAnimationOnDidMount({\n    opacity: [0, 1],\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  let props: {\n    title: string | ReactElement\n    message: string | ReactElement\n    dismissText?: string | boolean\n    confirmText?: string | boolean\n    onConfirm(): void\n    onDismiss(): void\n  }\n  if (prompt) {\n    const { message, onConfirm, onDismiss, title, ...rest } = prompt\n    props = {\n      title,\n      message:\n        typeof message === 'string' ? (\n          <RnText style={css.RootRnAlert_Message}>{message}</RnText>\n        ) : (\n          <View style={css.RootRnAlert_Message}>{message}</View>\n        ),\n      dismissText: intl`CANCEL`,\n      confirmText: intl`REMOVE`,\n      onConfirm: flow(\n        [RnAlert.dismiss, onConfirm as any].filter((f: Function) => f),\n      ),\n      onDismiss: flow(\n        [RnAlert.dismiss, onDismiss as any].filter((f: Function) => f),\n      ),\n      ...rest,\n    }\n  } else if (error) {\n    const { err, message, unexpectedErr, ...rest } = error\n    const errMessage = unexpectedErr?.message || err?.message || err\n    props = {\n      title: intl`Error`,\n      message: (\n        <>\n          <RnText style={css.RootRnAlert_Message}>\n            {unexpectedErr ? intl`An unexpected error occurred` : message}\n          </RnText>\n          {!!errMessage && <RnText small>{errMessage}</RnText>}\n        </>\n      ),\n      confirmText: 'OK',\n      onConfirm: RnAlert.dismiss,\n      onDismiss: RnAlert.dismiss,\n      ...rest,\n    }\n  } else {\n    return null\n  }\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RootRnAlert]}>\n      <Animated.View\n        style={[\n          StyleSheet.absoluteFill,\n          css.RootRnAlert_Backdrop,\n          { opacity: a.opacity },\n        ]}\n      >\n        <RnTouchableOpacity\n          onPress={props.onDismiss}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.View\n        style={[\n          css.RootRnAlert_Modal,\n          {\n            transform: [{ translateY: a.translateY }],\n          },\n        ]}\n      >\n        <RnText subTitle>{props.title}</RnText>\n        {props.message}\n        <View style={css.RootRnAlert_Btns}>\n          {props.dismissText && (\n            <RnTouchableOpacity\n              onPress={props.onDismiss}\n              style={[css.RootRnAlert_Btn, css.RootRnAlert_Btn__cancel]}\n            >\n              <RnText small style={css.RootRnAlert_BtnTxt}>\n                {props.dismissText}\n              </RnText>\n            </RnTouchableOpacity>\n          )}\n          <RnTouchableOpacity\n            onPress={props.onConfirm}\n            style={css.RootRnAlert_Btn}\n          >\n            <RnText small style={css.RootRnAlert_BtnTxt}>\n              {props.confirmText}\n            </RnText>\n          </RnTouchableOpacity>\n        </View>\n      </Animated.View>\n    </View>\n  )\n}\n\nexport const RnAlertRoot = observer(() => {\n  const a0 = RnAlert.alerts.find(a => a)\n  if (!RnAlert.alertsCount || !a0) {\n    return null\n  }\n  return <RnAlertR {...a0} />\n})\n","import { observer } from 'mobx-react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { mdiClose, mdiRadioboxBlank, mdiRadioboxMarked } from '../assets/icons'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { intl } from './intl'\nimport { RnPicker, RnPickerOption } from './RnPicker'\n\nconst css = StyleSheet.create({\n  RnPicker: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RnPicker_Inner: {\n    position: 'absolute',\n    bottom: 15,\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    maxHeight: '100%',\n  },\n  RnPicker_Options: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    overflow: 'hidden',\n  },\n  RnPicker_Option: {\n    paddingVertical: 12,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderColor: v.hoverBg,\n  },\n  RnPicker_Option__last: {\n    borderBottomWidth: 0,\n  },\n  RnPicker_Option__selected: {\n    backgroundColor: v.hoverBg,\n  },\n  RnPicker_Option__cancel: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n  },\n  RnPicker_Text__selected: {\n    fontWeight: 'bold',\n    color: v.colors.primary,\n  },\n  RnPicker_Text__cancel: {\n    fontWeight: 'bold',\n    color: v.colors.danger,\n  },\n  RnPicker_Icon: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n  },\n})\n\nconst RnPickerR = (p: RnPickerOption) => {\n  const backdropCss = useAnimationOnDidMount({\n    opacity: [0, 1],\n  })\n  const y = useAnimationOnDidMount({\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RnPicker]}>\n      <Animated.View\n        style={[StyleSheet.absoluteFill, css.RnPicker_Backdrop, backdropCss]}\n      >\n        <RnTouchableOpacity\n          onPress={RnPicker.dismiss}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.ScrollView style={[css.RnPicker_Inner, { transform: [y] }]}>\n        <View style={css.RnPicker_Options}>\n          {p.options.map((o, i) => {\n            const isSelected = `${p.selectedKey}` === `${o.key}`\n            return (\n              <RnTouchableOpacity\n                key={i}\n                onPress={() => {\n                  p.onSelect(o.key)\n                  RnPicker.dismiss()\n                }}\n                style={[\n                  css.RnPicker_Option,\n                  i + 1 === p.options.length && css.RnPicker_Option__last,\n                  isSelected && css.RnPicker_Option__selected,\n                ]}\n              >\n                <RnText style={isSelected && css.RnPicker_Text__selected}>\n                  {o.label}\n                </RnText>\n                <RnIcon\n                  color={isSelected ? v.colors.primary : undefined}\n                  path={\n                    o.icon ||\n                    (isSelected ? mdiRadioboxMarked : mdiRadioboxBlank)\n                  }\n                  style={css.RnPicker_Icon}\n                />\n              </RnTouchableOpacity>\n            )\n          })}\n        </View>\n        <RnTouchableOpacity\n          onPress={RnPicker.dismiss}\n          style={[css.RnPicker_Option, css.RnPicker_Option__cancel]}\n        >\n          <RnText style={css.RnPicker_Text__cancel}>\n            {p.cancelLabel || intl`Cancel`}\n          </RnText>\n          <RnIcon\n            color={v.colors.danger}\n            path={mdiClose}\n            style={css.RnPicker_Icon}\n          />\n        </RnTouchableOpacity>\n      </Animated.ScrollView>\n    </View>\n  )\n}\n\nexport const RnPickerRoot = observer(\n  () => RnPicker.currentRnPicker && <RnPickerR {...RnPicker.currentRnPicker} />,\n)\n","import { observer } from 'mobx-react'\nimport { ReactComponentLike } from 'prop-types'\nimport { FC } from 'react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { RnStacker } from './RnStacker'\n\nconst css = StyleSheet.create({\n  Stack: {\n    backgroundColor: v.bg,\n  },\n  Stack__hidden: {\n    opacity: 0,\n  },\n})\n\nconst Stack: FC<{\n  Component: ReactComponentLike\n  isRoot?: boolean\n  isBackgroundStack: boolean\n}> = ({ Component, ...p }) => {\n  const x = useAnimationOnDidMount({\n    translateX: [Dimensions.get('screen').width, 0],\n  })\n  const OuterComponent = p.isRoot ? View : Animated.View\n  return (\n    <OuterComponent\n      style={[\n        StyleSheet.absoluteFill,\n        css.Stack,\n        p.isBackgroundStack && css.Stack__hidden,\n        !p.isRoot && { transform: [x] },\n      ]}\n    >\n      <Component {...p} />\n    </OuterComponent>\n  )\n}\n\nexport const RnStackerRoot = observer(() => (\n  <>\n    {RnStacker.stacks.map((s, i) => (\n      <Stack\n        isBackgroundStack={\n          !(i + 1 === RnStacker.stacks.length) &&\n          !(i + 2 === RnStacker.stacks.length && RnStacker.stackAnimating)\n        }\n        key={i}\n        {...s}\n      />\n    ))}\n  </>\n))\n","export const registerOnUnhandledError = (fn: (err: ErrorEvent) => void) => {\n  if (!window._BrekekePhoneWebRoot) {\n    return\n  }\n  window.addEventListener('error', fn)\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { getCallStore } from '../stores/callStore'\nimport { CallVideosUI } from './CallVideosUI'\n\n@observer\nexport class CallVideos extends Component {\n  render() {\n    const oc = getCallStore().getOngoingCall()\n    return (\n      <CallVideosUI\n        callIds={(oc ? [oc] : [])\n          .filter(\n            _ =>\n              _.videoSessionId && _.localVideoEnabled && _.remoteVideoEnabled,\n          )\n          .map(_ => _.id)}\n        resolveCall={this.resolveCall}\n      />\n    )\n  }\n\n  resolveCall = () => ({\n    sourceObject: getCallStore().getOngoingCall()?.remoteVideoStreamObject,\n  })\n}\n","import { action } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport {\n  GestureResponderEvent,\n  PanResponder,\n  PanResponderGestureState,\n  PanResponderInstance,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport { getCallStore } from '../stores/callStore'\nimport { Nav } from '../stores/Nav'\nimport { RnStacker } from '../stores/RnStacker'\nimport { v } from './variables'\nimport { VideoPlayer } from './VideoPlayer'\n\nconst css = StyleSheet.create({\n  Mini: {\n    position: 'absolute',\n    width: 150,\n    backgroundColor: 'black',\n    ...Platform.select({\n      android: {\n        borderRadius: 75,\n        height: 150,\n      },\n      ios: {\n        borderRadius: 75,\n        height: 150,\n      },\n      web: {\n        borderRadius: v.borderRadius,\n      },\n    }),\n    overflow: 'hidden',\n    ...v.boxShadow,\n    ...v.backdropZindex,\n  },\n})\ntype Props = {\n  onDoubleTap: Function\n  sourceObject: MediaStream\n}\n\n@observer\nclass Mini extends Component<Props> {\n  panResponder: PanResponderInstance\n  view?: View\n  private lastTap?: number\n\n  state = {}\n  constructor(props: Props) {\n    super(props)\n\n    this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: () => false,\n      onPanResponderMove: this.onDrag,\n      onPanResponderRelease: this.onDrop,\n      onPanResponderTerminate: this.onDrop,\n    })\n  }\n\n  render() {\n    return (\n      <View\n        ref={this.setViewRef}\n        style={[\n          css.Mini,\n          {\n            top: getCallStore().videoPositionT,\n            left: getCallStore().videoPositionL,\n          },\n        ]}\n        {...this.panResponder.panHandlers}\n      >\n        <VideoPlayer sourceObject={this.props.sourceObject} />\n      </View>\n    )\n  }\n\n  setViewRef = (view: View) => {\n    this.view = view\n  }\n\n  onDrag = (e: GestureResponderEvent, gesture: PanResponderGestureState) => {\n    this.view?.setNativeProps({\n      style: {\n        left: getCallStore().videoPositionL + gesture.dx,\n        top: getCallStore().videoPositionT + gesture.dy,\n      },\n    })\n  }\n\n  @action onDrop = (\n    e: GestureResponderEvent,\n    gesture: PanResponderGestureState,\n  ) => {\n    Object.assign(getCallStore(), {\n      videoPositionL: getCallStore().videoPositionL + gesture.dx,\n      videoPositionT: getCallStore().videoPositionT + gesture.dy,\n    })\n    const n = Date.now()\n    if (\n      gesture.dx <= 10 &&\n      gesture.dy <= 10 &&\n      this.lastTap &&\n      n - this.lastTap <= 500\n    ) {\n      this.props.onDoubleTap()\n    }\n    this.lastTap = n\n  }\n}\n\n@observer\nclass Control extends Component<{\n  sourceObject: MediaStream\n}> {\n  render() {\n    const s = RnStacker.stacks[RnStacker.stacks.length - 1]\n    if (\n      getCallStore().inPageCallManage ||\n      s.name === 'PageCallTransferDial' ||\n      s.name === 'PageCallTransferAttend'\n    ) {\n      return null\n    }\n    return <Mini {...this.props} onDoubleTap={Nav().goToPageCallManage} />\n  }\n}\n\nexport const CallVideosUI: FC<{\n  callIds: string[]\n  resolveCall: Function\n}> = p => (\n  <>\n    {p.callIds.map(id => (\n      <Control key={id} {...p.resolveCall(id)} />\n    ))}\n  </>\n)\n","import { observer } from 'mobx-react'\nimport { Platform } from 'react-native'\n\nimport { getCallStore } from '../stores/callStore'\nimport {\n  AnsweredItem,\n  OutgoingItem,\n  OutgoingItemWithSDP,\n  VideoRBT,\n} from './CallVoicesUI'\n\nexport const CallVoices = observer(() => {\n  // Try trigger observer?\n  void Object.keys(getCallStore().callkeepMap)\n  void getCallStore().calls.map(_ => _.callkeepUuid)\n  const oc = getCallStore().getOngoingCall()\n  const isOutgoingCallStart =\n    oc &&\n    !oc.incoming &&\n    !oc.answered &&\n    (oc.sessionStatus === 'progress' || oc.sessionStatus === 'dialing')\n  return (\n    <>\n      {isOutgoingCallStart &&\n        (oc?.withSDP ? (\n          <OutgoingItemWithSDP earlyMedia={oc.earlyMedia} />\n        ) : (\n          <OutgoingItem />\n        ))}\n      {Platform.OS === 'ios' && isOutgoingCallStart && (\n        <VideoRBT\n          withSDP={!!oc?.withSDP}\n          isLoudSpeaker={getCallStore().isLoudSpeakerEnabled}\n        />\n      )}\n      {getCallStore()\n        .calls.filter(c => c.answered)\n        .map(c => (\n          <AnsweredItem key={c.id} voiceStreamObject={c.voiceStreamObject} />\n        ))}\n    </>\n  )\n})\n","import { sortBy } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCheck, mdiClose } from '../assets/icons'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnStacker } from '../stores/RnStacker'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { ButtonIcon } from './ButtonIcon'\nimport { formatDateTimeSemantic } from './chatConfig'\nimport { UserItem } from './ContactUserItem'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Notify: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  Notify_Info: {\n    flex: 1,\n    paddingLeft: 12,\n    paddingVertical: 5,\n  },\n  Notify_Btn_reject: {\n    borderColor: v.colors.danger,\n  },\n  Notify_Btn_accept: {\n    borderColor: v.colors.primary,\n  },\n\n  NotifyUnread: {\n    borderBottomWidth: 0,\n  },\n  NotifyUnreadBtn: {\n    flex: 1,\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nconst Notify: FC<{\n  id: string\n  type: string\n  name: string\n  inviter: string\n  reject: Function\n  accept: Function\n  loading: boolean\n}> = observer(p => {\n  return (\n    <View style={css.Notify}>\n      {!!p.type && (\n        <>\n          <View style={css.Notify_Info}>\n            <RnText bold>{p.name}</RnText>\n            <RnText>{intl`Group chat invited by ${p.inviter}`}</RnText>\n          </View>\n          <ButtonIcon\n            bdcolor={v.colors.danger}\n            color={v.colors.danger}\n            onPress={() => p.reject(p.id)}\n            path={mdiClose}\n            size={20}\n            style={css.Notify_Btn_reject}\n          />\n          <ButtonIcon\n            bdcolor={v.colors.primary}\n            color={v.colors.primary}\n            onPress={() => p.accept(p.id)}\n            path={mdiCheck}\n            size={20}\n            style={css.Notify_Btn_accept}\n            disabled={p.loading}\n          />\n        </>\n      )}\n    </View>\n  )\n})\n\n@observer\nexport class ChatGroupInvite extends Component {\n  @observable loading = false\n\n  formatGroup = (group: string) => {\n    const { id, inviter, name } = chatStore.getGroupById(group) || {}\n    const inviterName = contactStore.getUcUserById(inviter)?.name\n    return {\n      id,\n      name,\n      inviter: inviterName || inviter,\n    }\n  }\n  // TODO: rejected but existed in chat home => error when click.\n  reject = (group: string) => {\n    uc.leaveChatGroup(group)\n      .then(this.onRejectSuccess)\n      .catch(this.onRejectFailure)\n  }\n  onRejectSuccess = (res: { id: string }) => {\n    chatStore.removeGroup(res.id)\n  }\n  onRejectFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject the group chat`,\n      err,\n    })\n  }\n  accept = (group: string) => {\n    this.loading = true\n    uc.joinChatGroup(group)\n      .then(this.onAcceptSuccess)\n      .catch(this.onAcceptFailure)\n  }\n  onAcceptSuccess = () => {\n    this.loading = false\n  }\n  onAcceptFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept the group chat`,\n      err,\n    })\n  }\n\n  render() {\n    return chatStore.groups\n      .filter(gr => !gr.webchat && !gr.jointed)\n      .map(gr => gr.id)\n      .map(group => (\n        <Notify\n          key={group}\n          {...this.formatGroup(group)}\n          accept={this.accept}\n          reject={this.reject}\n          type='inviteChat'\n          loading={this.loading}\n        />\n      ))\n  }\n}\n\n@observer\nexport class UnreadChatNoti extends Component {\n  @observable unreadChat: null | {\n    id: string\n    isGroup: boolean\n    lastMessage: {\n      text?: string\n      created: number\n    }\n  } = null\n  alreadyShowNoti: { [k: string]: boolean } = {}\n  prevLastMessageId = ''\n  prevUnreadChatTimeoutId = 0\n\n  componentDidMount() {\n    this.updateLatestUnreadChat()\n  }\n\n  componentDidUpdate() {\n    this.updateLatestUnreadChat()\n  }\n\n  updateLatestUnreadChat = () => {\n    if (this.unreadChat) {\n      return\n    }\n    let unreadChats = Object.entries(chatStore.threadConfig)\n      .filter(\n        ([k, c]) =>\n          c.isUnread &&\n          filterTextOnly(chatStore.getMessagesByThreadId(k)).length,\n      )\n      .map(([k, c]) => {\n        const arr = filterTextOnly(chatStore.getMessagesByThreadId(k))\n        return {\n          ...c,\n          lastMessage: arr[arr.length - 1],\n        }\n      })\n      .filter(\n        c =>\n          !this.alreadyShowNoti[c.lastMessage.id] &&\n          c.lastMessage.id !== this.prevLastMessageId,\n      )\n    unreadChats.forEach(c => {\n      this.alreadyShowNoti[c.lastMessage.id] = true\n    })\n    //\n    unreadChats = unreadChats.filter(c => {\n      const s = RnStacker.stacks[RnStacker.stacks.length - 1] as any as {\n        name: string\n        buddy: string\n        groupId: string\n      }\n      const isWebchat = chatStore.isWebchat(c.id)\n      const isWebchatJoined = chatStore.isWebchatJoined(c.id)\n\n      if (!s) {\n        return true\n      }\n      if (isWebchat && !isWebchatJoined) {\n        return false\n      }\n      const { name, buddy, groupId } = s\n\n      if (name === 'PageChatRecents') {\n        return false\n      }\n      if (name === 'PageChatDetail' && !c.isGroup && buddy === c.id) {\n        return false\n      }\n      if (name === 'PageChatGroupDetail' && c.isGroup && groupId === c.id) {\n        return false\n      }\n\n      return true\n    })\n    //\n    unreadChats = sortBy(unreadChats, 'lastMessage.created')\n    const latestUnreadChat = unreadChats[unreadChats.length - 1]\n    if (!latestUnreadChat) {\n      return\n    }\n    //\n    this.unreadChat = latestUnreadChat\n    this.prevLastMessageId = latestUnreadChat.lastMessage.id\n    this.prevUnreadChatTimeoutId = BackgroundTimer.setTimeout(this.clear, 5000)\n  }\n  @action clear = () => {\n    if (this.prevUnreadChatTimeoutId) {\n      BackgroundTimer.clearTimeout(this.prevUnreadChatTimeoutId)\n      this.prevUnreadChatTimeoutId = 0\n    }\n    this.unreadChat = null\n  }\n  onUnreadPress = () => {\n    if (!this.unreadChat) {\n      return\n    }\n    const { id, isGroup } = this.unreadChat\n    this.clear()\n    return isGroup\n      ? Nav().goToPageChatGroupDetail({ groupId: id })\n      : Nav().goToPageChatDetail({ buddy: id })\n  }\n\n  componentWillUnmount() {\n    this.clear()\n  }\n\n  render() {\n    Object.values(chatStore.threadConfig).forEach(c => {\n      Object.values(c).forEach(v2 => {\n        void v2\n      })\n    })\n    Object.values(chatStore.messagesByThreadId).forEach(c => {\n      c.forEach(v2 => {\n        void v2.id\n      })\n    })\n    void RnStacker.stacks[RnStacker.stacks.length - 1]\n    if (!this.unreadChat) {\n      return null\n    }\n    const {\n      id,\n      lastMessage: { text, created },\n      isGroup,\n    } = this.unreadChat\n    return (\n      <View style={[css.Notify, css.NotifyUnread]}>\n        <RnTouchableOpacity\n          style={css.NotifyUnreadBtn}\n          onPress={this.onUnreadPress}\n        >\n          <UserItem\n            key={id}\n            {...(isGroup\n              ? chatStore.getGroupById(id)\n              : contactStore.getUcUserById(id))}\n            lastMessage={text}\n            isRecentChat\n            lastMessageDate={formatDateTimeSemantic(created)}\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { useRef, useState } from 'react'\nimport {\n  Animated,\n  Dimensions,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport {\n  contactStore,\n  ItemPBForm,\n  PickerItemOption,\n} from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { RnText, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  vBottom: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  listItem: {\n    width: '100%',\n  },\n  txtPb: {\n    width: '100%',\n    textAlign: 'left',\n    marginHorizontal: 10,\n  },\n  itemPb: {\n    width: '100%',\n    paddingVertical: 5,\n    borderBottomColor: 'grey',\n    borderBottomWidth: 0.5,\n  },\n  RnPicker: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RnPicker_Inner: {\n    position: 'absolute',\n    bottom: 15,\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    maxHeight: '100%',\n  },\n  RnPicker_Options: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    overflow: 'hidden',\n    height: Dimensions.get('screen').height / 3,\n    width: '100%',\n    paddingHorizontal: 10,\n    paddingVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  RnPicker_Option: {\n    paddingVertical: 10,\n    borderBottomWidth: 1,\n    borderColor: v.hoverBg,\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Option__last: {\n    borderBottomWidth: 0,\n  },\n  RnPicker_Option__selected: {\n    backgroundColor: v.hoverBg,\n  },\n  RnPicker_Option__cancel: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    marginLeft: 10,\n  },\n  RnPicker_Option__OK: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    marginRight: 10,\n    backgroundColor: v.colors.primary,\n  },\n  RnPicker_Text__selected: {\n    fontWeight: 'bold',\n    color: v.colors.primary,\n  },\n  RnPicker_Text__Ok: {\n    fontWeight: 'bold',\n    color: 'white',\n  },\n  RnPicker_Text__cancel: {\n    fontWeight: 'bold',\n    color: v.layerBg,\n  },\n  inputFieldName: {\n    backgroundColor: 'white',\n    height: 40,\n    width: '100%',\n    borderRadius: v.borderRadius,\n    borderWidth: 0.8,\n    borderColor: v.borderBg,\n    paddingHorizontal: 10,\n    overflow: 'hidden',\n    ...Platform.select({\n      web: {\n        paddingVertical: 5,\n      },\n    }),\n  },\n})\n\nconst RNPickerInput = ({ onSelect, listOption }: PickerItemOption) => {\n  const refInput = useRef(null)\n  const [items, updateItems] = useState(listOption)\n  const [value, updateValue] = useState('')\n  const backdropCss = useAnimationOnDidMount({\n    opacity: [0, 1],\n  })\n  const y = useAnimationOnDidMount({\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  const onChangeText = (txt: string) => {\n    if (!txt) {\n      updateItems(listOption)\n      updateValue(txt.trim())\n      return\n    }\n    const newList = listOption.filter(item =>\n      item.label.toLowerCase().startsWith(txt.toLowerCase()),\n    )\n    updateItems(newList)\n    updateValue(txt)\n  }\n  const onPressItem = (item: ItemPBForm) => {\n    updateValue(item.label.trim())\n    updateItems([])\n  }\n  const renderItem = (item: ItemPBForm, index: number) => {\n    return (\n      <RnTouchableOpacity\n        key={index}\n        style={css.itemPb}\n        onPress={() => onPressItem(item)}\n      >\n        <RnText style={css.txtPb}>{item.label}</RnText>\n      </RnTouchableOpacity>\n    )\n  }\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RnPicker]}>\n      <Animated.View\n        style={[StyleSheet.absoluteFill, css.RnPicker_Backdrop, backdropCss]}\n      >\n        <RnTouchableOpacity\n          onPress={contactStore.dismissPicker}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.View style={[css.RnPicker_Inner, { transform: [y] }]}>\n        <View style={css.RnPicker_Options}>\n          <RnTextInput\n            // blurOnSubmit\n            keyboardType='default'\n            //  multiline\n            onChangeText={onChangeText}\n            autoFocus\n            //  onSelectionChange={p.selectionChange}\n            placeholder={intl`Enter field`}\n            ref={refInput}\n            style={css.inputFieldName}\n            value={value}\n          />\n          <ScrollView\n            style={css.listItem}\n            keyboardShouldPersistTaps='always'\n            keyboardDismissMode='on-drag'\n          >\n            {items?.map(renderItem)}\n          </ScrollView>\n        </View>\n        <View style={css.vBottom}>\n          <RnTouchableOpacity\n            onPress={() => onSelect(value)}\n            style={[css.RnPicker_Option, css.RnPicker_Option__OK]}\n          >\n            <RnText style={css.RnPicker_Text__Ok}>OK</RnText>\n          </RnTouchableOpacity>\n          <RnTouchableOpacity\n            onPress={contactStore.dismissPicker}\n            style={[css.RnPicker_Option, css.RnPicker_Option__cancel]}\n          >\n            <RnText style={css.RnPicker_Text__cancel}>{intl`Cancel`}</RnText>\n          </RnTouchableOpacity>\n        </View>\n      </Animated.View>\n    </View>\n  )\n}\nexport const PhonebookAddItem = observer(\n  () =>\n    contactStore.showPickerItem && (\n      <RNPickerInput {...contactStore.showPickerItem} />\n    ),\n)\n","import { embedApi, EmbedSignInOptions } from './embedApi'\n\nexport const exposeEmbedApi = (renderApp: (rootTag: HTMLElement) => void) => {\n  window.Brekeke.Phone.render = (\n    rootTag: HTMLElement,\n    options: EmbedSignInOptions,\n  ) => {\n    renderApp(rootTag)\n    embedApi._rootTag = rootTag\n    embedApi._signIn(options)\n    return embedApi\n  }\n}\n"],"sourceRoot":""}